"use strict";var LS=Object.defineProperty,VS=Object.defineProperties,US=Object.getOwnPropertyDescriptors,PC=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,jS=Object.prototype.propertyIsEnumerable,kC=(lt,Me,U)=>Me in lt?LS(lt,Me,{enumerable:!0,configurable:!0,writable:!0,value:U}):lt[Me]=U,en=(lt,Me)=>{for(var U in Me||(Me={}))BS.call(Me,U)&&kC(lt,U,Me[U]);if(PC)for(var U of PC(Me))jS.call(Me,U)&&kC(lt,U,Me[U]);return lt},zs=(lt,Me)=>VS(lt,US(Me));(self.webpackChunkwebshop=self.webpackChunkwebshop||[]).push([[179],{3700:(lt,Me,U)=>{U.d(Me,{ST:()=>Iw,yb:()=>oy});var w=U(5312),O=U(9449),Z=U(9423),ve=U(9164),fe=U(2429),se=U(4966),Ce=U(2007);function pe(){return s=>s.lift(new ge)}class ge{call(e,r){return r.subscribe(new Q(e))}}class Q extends Ce.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let r;this.hasPrev?r=[this.prev,e]:this.hasPrev=!0,this.prev=e,r&&this.destination.next(r)}}class ye{constructor(e,r){this.compare=e,this.keySelector=r}call(e,r){return r.subscribe(new we(e,this.compare,this.keySelector))}}class we extends Ce.L{constructor(e,r,o){super(e),this.keySelector=o,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(e,r){return e===r}_next(e){let r;try{const{keySelector:l}=this;r=l?l(e):e}catch(l){return this.destination.error(l)}let o=!1;if(this.hasKey)try{const{compare:l}=this;o=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;o||(this.key=r,this.destination.next(e))}}var Ve,Ne=U(5148),Be=U(8771),Re=U(3062),Oe=U(439),je=U(8118),Pe=U(6019),it=(U(7237),U(614)),Ee=U(1921),ot=U(2646),Kt=U(7817),kt=U(4516),gt=U(9842),Zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ft={},Ot=Ot||{},tt=Zt||self;function dt(){}function Qn(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function Rr(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var Pi="closure_uid_"+(1e9*Math.random()>>>0),mr=0;function yr(s,e,r){return s.call.apply(s.bind,arguments)}function li(s,e,r){if(!s)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,o),s.apply(e,l)}}return function(){return s.apply(e,arguments)}}function Jn(s,e,r){return(Jn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yr:li).apply(null,arguments)}function Ur(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var o=r.slice();return o.push.apply(o,arguments),s.apply(this,o)}}function Yt(s,e){function r(){}r.prototype=e.prototype,s.Z=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Vb=function(o,l,h){for(var y=Array(arguments.length-2),D=2;D<arguments.length;D++)y[D-2]=arguments[D];return e.prototype[l].apply(o,y)}}function zt(){this.s=this.s,this.o=this.o}var $n={};zt.prototype.s=!1,zt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,Pi)&&s[Pi]||(s[Pi]=++mr)}(this);delete $n[s]}},zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wn=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1},tn=Array.prototype.forEach?function(s,e,r){Array.prototype.forEach.call(s,e,r)}:function(s,e,r){const o=s.length,l="string"==typeof s?s.split(""):s;for(let h=0;h<o;h++)h in l&&e.call(r,l[h],h,s)};function Xn(s){return Array.prototype.concat.apply([],arguments)}function fn(s){const e=s.length;if(0<e){const r=Array(e);for(let o=0;o<e;o++)r[o]=s[o];return r}return[]}function ze(s){return/^[\s\xa0]*$/.test(s)}var Lt,In=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Pt(s,e){return-1!=s.indexOf(e)}function _r(s,e){return s<e?-1:s>e?1:0}e:{var Jr=tt.navigator;if(Jr){var Br=Jr.userAgent;if(Br){Lt=Br;break e}}Lt=""}function Xr(s,e,r){for(const o in s)e.call(r,s[o],o,s)}function ht(s){const e={};for(const r in s)e[r]=s[r];return e}var jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ii(s,e){let r,o;for(let l=1;l<arguments.length;l++){for(r in o=arguments[l],o)s[r]=o[r];for(let h=0;h<jr.length;h++)r=jr[h],Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r])}}function Nr(s){return Nr[" "](s),s}Nr[" "]=dt;var $r,s,bt=Pt(Lt,"Opera"),Et=Pt(Lt,"Trident")||Pt(Lt,"MSIE"),ir=Pt(Lt,"Edge"),wi=ir||Et,yn=Pt(Lt,"Gecko")&&!(Pt(Lt.toLowerCase(),"webkit")&&!Pt(Lt,"Edge"))&&!(Pt(Lt,"Trident")||Pt(Lt,"MSIE"))&&!Pt(Lt,"Edge"),pn=Pt(Lt.toLowerCase(),"webkit")&&!Pt(Lt,"Edge");function Ct(){var s=tt.document;return s?s.documentMode:void 0}e:{var cn="",Un=(s=Lt,yn?/rv:([^\);]+)(\)|;)/.exec(s):ir?/Edge\/([\d\.]+)/.exec(s):Et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):pn?/WebKit\/(\S+)/.exec(s):bt?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Un&&(cn=Un?Un[1]:""),Et){var yt=Ct();if(null!=yt&&yt>parseFloat(cn)){$r=String(yt);break e}}$r=cn}var mt={};function We(){return e=mt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=In(String($r)).split("."),r=In("9").split("."),o=Math.max(e.length,r.length);for(let y=0;0==s&&y<o;y++){var l=e[y]||"",h=r[y]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==l[0].length&&0==h[0].length)break;s=_r(0==l[1].length?0:parseInt(l[1],10),0==h[1].length?0:parseInt(h[1],10))||_r(0==l[2].length,0==h[2].length)||_r(l[2],h[2]),l=l[3],h=h[3]}while(0==s)}return 0<=s}();var e}var un=tt.document&&Et&&(Ct()||parseInt($r,10))||void 0,_n=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{tt.addEventListener("test",dt,e),tt.removeEventListener("test",dt,e)}catch(r){}return s}();function oe(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function ee(s,e){if(oe.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,o=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(yn){e:{try{Nr(e.nodeName);var l=!0;break e}catch(h){}l=!1}l||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:de[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&ee.Z.h.call(this)}}oe.prototype.h=function(){this.defaultPrevented=!0},Yt(ee,oe);var de={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),De=0;function Xe(s,e,r,o,l){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!o,this.ia=l,this.key=++De,this.ca=this.fa=!1}function Mt(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function dn(s){this.src=s,this.g={},this.h=0}function zn(s,e){var r=e.type;if(r in s.g){var h,o=s.g[r],l=wn(o,e);(h=0<=l)&&Array.prototype.splice.call(o,l,1),h&&(Mt(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function kn(s,e,r,o){for(var l=0;l<s.length;++l){var h=s[l];if(!h.ca&&h.listener==e&&h.capture==!!r&&h.ia==o)return l}return-1}dn.prototype.add=function(s,e,r,o,l){var h=s.toString();(s=this.g[h])||(s=this.g[h]=[],this.h++);var y=kn(s,e,o,l);return-1<y?(e=s[y],r||(e.fa=!1)):((e=new Xe(e,this.src,h,!!o,l)).fa=r,s.push(e)),e};var sr="closure_lm_"+(1e6*Math.random()|0),Qt={};function ur(s,e,r,o,l){if(o&&o.once)return Tt(s,e,r,o,l);if(Array.isArray(e)){for(var h=0;h<e.length;h++)ur(s,e[h],r,o,l);return null}return r=vn(r),s&&s[Ae]?s.N(e,r,Rr(o)?!!o.capture:!!o,l):lr(s,e,r,!1,o,l)}function lr(s,e,r,o,l,h){if(!e)throw Error("Invalid event type");var y=Rr(l)?!!l.capture:!!l,D=ut(s);if(D||(s[sr]=D=new dn(s)),(r=D.add(e,r,o,y,h)).proxy)return r;if(o=function(){var e=Dr;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=o,o.src=s,o.listener=r,s.addEventListener)_n||(l=y),void 0===l&&(l=!1),s.addEventListener(e.toString(),o,l);else if(s.attachEvent)s.attachEvent(Hn(e.toString()),o);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(o)}return r}function Tt(s,e,r,o,l){if(Array.isArray(e)){for(var h=0;h<e.length;h++)Tt(s,e[h],r,o,l);return null}return r=vn(r),s&&s[Ae]?s.O(e,r,Rr(o)?!!o.capture:!!o,l):lr(s,e,r,!0,o,l)}function vr(s,e,r,o,l){if(Array.isArray(e))for(var h=0;h<e.length;h++)vr(s,e[h],r,o,l);else o=Rr(o)?!!o.capture:!!o,r=vn(r),s&&s[Ae]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=kn(h=s.g[e],r,o,l))&&(Mt(h[r]),Array.prototype.splice.call(h,r,1),0==h.length&&(delete s.g[e],s.h--))):s&&(s=ut(s))&&(e=s.g[e.toString()],s=-1,e&&(s=kn(e,r,o,l)),(r=-1<s?e[s]:null)&&di(r))}function di(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[Ae])zn(e.i,s);else{var r=s.type,o=s.proxy;e.removeEventListener?e.removeEventListener(r,o,s.capture):e.detachEvent?e.detachEvent(Hn(r),o):e.addListener&&e.removeListener&&e.removeListener(o),(r=ut(e))?(zn(r,s),0==r.h&&(r.src=null,e[sr]=null)):Mt(s)}}}function Hn(s){return s in Qt?Qt[s]:Qt[s]="on"+s}function Dr(s,e){if(s.ca)s=!0;else{e=new ee(e,this);var r=s.listener,o=s.ia||s.src;s.fa&&di(s),s=r.call(o,e)}return s}function ut(s){return(s=s[sr])instanceof dn?s:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(s){return"function"==typeof s?s:(s[Gt]||(s[Gt]=function(e){return s.handleEvent(e)}),s[Gt])}function Wt(){zt.call(this),this.i=new dn(this),this.P=this,this.I=null}function Jt(s,e){var r,o=s.I;if(o)for(r=[];o;o=o.I)r.push(o);if(s=s.P,o=e.type||e,"string"==typeof e)e=new oe(e,s);else if(e instanceof oe)e.target=e.target||s;else{var l=e;ii(e=new oe(o,s),l)}if(l=!0,r)for(var h=r.length-1;0<=h;h--){var y=e.g=r[h];l=xn(y,o,!0,e)&&l}if(l=xn(y=e.g=s,o,!0,e)&&l,l=xn(y,o,!1,e)&&l,r)for(h=0;h<r.length;h++)l=xn(y=e.g=r[h],o,!1,e)&&l}function xn(s,e,r,o){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,h=0;h<e.length;++h){var y=e[h];if(y&&!y.ca&&y.capture==r){var D=y.listener,F=y.ia||y.src;y.fa&&zn(s.i,y),l=!1!==D.call(F,o)&&l}}return l&&!o.defaultPrevented}Yt(Wt,zt),Wt.prototype[Ae]=!0,Wt.prototype.removeEventListener=function(s,e,r,o){vr(this,s,e,r,o)},Wt.prototype.M=function(){if(Wt.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],o=0;o<r.length;o++)Mt(r[o]);delete s.g[e],s.h--}}this.I=null},Wt.prototype.N=function(s,e,r,o){return this.i.add(String(s),e,!1,r,o)},Wt.prototype.O=function(s,e,r,o){return this.i.add(String(s),e,!0,r,o)};var er=tt.JSON.stringify;function Dn(){var s=Fi;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Ji,Rn=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new qt,s=>s.reset());class qt{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Ss(s){tt.setTimeout(()=>{throw s},0)}function Ii(s,e){Ji||function(){var s=tt.Promise.resolve(void 0);Ji=function(){s.then(re)}}(),Bn||(Ji(),Bn=!0),Fi.add(s,e)}var Bn=!1,Fi=new class{constructor(){this.h=this.g=null}add(e,r){const o=Rn.get();o.set(e,r),this.h?this.h.next=o:this.g=o,this.h=o}};function re(){for(var s;s=Dn();){try{s.h.call(s.g)}catch(r){Ss(r)}var e=Rn;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Bn=!1}function ie(s,e){Wt.call(this),this.h=s||1,this.g=e||tt,this.j=Jn(this.kb,this),this.l=Date.now()}function K(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function _e(s,e,r){if("function"==typeof s)r&&(s=Jn(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Jn(s.handleEvent,s)}return 2147483647<Number(e)?-1:tt.setTimeout(s,e||0)}function He(s){s.g=_e(()=>{s.g=null,s.i&&(s.i=!1,He(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Yt(ie,Wt),(Ve=ie.prototype).da=!1,Ve.S=null,Ve.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Jt(this,"tick"),this.da&&(K(this),this.start()))}},Ve.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ve.M=function(){ie.Z.M.call(this),K(this),delete this.g};class xt extends zt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:He(this)}M(){super.M(),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(s){zt.call(this),this.h=s,this.g={}}Yt(jt,zt);var bn=[];function Zn(s,e,r,o){Array.isArray(r)||(r&&(bn[0]=r.toString()),r=bn);for(var l=0;l<r.length;l++){var h=ur(e,r[l],o||s.handleEvent,!1,s.h||s);if(!h)break;s.g[h.key]=h}}function Nn(s){Xr(s.g,function(e,r){this.g.hasOwnProperty(r)&&di(e)},s),s.g={}}function or(){this.g=!0}function Tr(s,e,r,o){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var o=r[s];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var h=l[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var y=1;y<l.length;y++)l[y]=""}}}return er(r)}catch(D){return e}}(s,r)+(o?" "+o:"")})}jt.prototype.M=function(){jt.Z.M.call(this),Nn(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},or.prototype.Aa=function(){this.g=!1},or.prototype.info=function(){};var Gr={},Or=null;function gs(){return Or=Or||new Wt}function xs(s){oe.call(this,Gr.Ma,s)}function bi(s){const e=gs();Jt(e,new xs(e,s))}function qs(s,e){oe.call(this,Gr.STAT_EVENT,s),this.stat=e}function Fn(s){const e=gs();Jt(e,new qs(e,s))}function ya(s,e){oe.call(this,Gr.Na,s),this.size=e}function ms(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){s()},e)}Gr.Ma="serverreachability",Yt(xs,oe),Gr.STAT_EVENT="statevent",Yt(qs,oe),Gr.Na="timingevent",Yt(ya,oe);var Ms={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Li={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ys(){}function Yo(){}ys.prototype.h=null;var fo,Xi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _a(){oe.call(this,"d")}function Vi(){oe.call(this,"c")}function Rs(){}function Ns(s,e,r,o){this.l=s,this.j=e,this.m=r,this.X=o||1,this.V=new jt(this),this.P=ts,this.W=new ie(s=wi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}Yt(_a,oe),Yt(Vi,oe),Yt(Rs,ys),Rs.prototype.g=function(){return new XMLHttpRequest},Rs.prototype.i=function(){return{}},fo=new Rs;var ts=45e3,_s={},ns={};function Ui(s,e,r){s.K=1,s.v=B(R(e)),s.s=r,s.U=!0,Bi(s,null)}function Bi(s,e){s.F=Date.now(),rs(s),s.A=R(s.v);var r=s.A,o=s.X;Array.isArray(o)||(o=[String(o)]),Ea(r.h,"t",o),s.C=0,r=s.l.H,s.h=new es,s.g=_o(s.l,r?e:null,!s.s),0<s.O&&(s.L=new xt(Jn(s.Ia,s,s.g),s.O)),Zn(s.V,s.g,"readystatechange",s.gb),e=s.H?ht(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),bi(1),function(s,e,r,o,l,h){s.info(function(){if(s.g)if(h)for(var y="",D=h.split("&"),F=0;F<D.length;F++){var $=D[F].split("=");if(1<$.length){var X=$[0];$=$[1];var le=X.split("_");y=2<=le.length&&"type"==le[1]?y+(X+"=")+$+"&":y+(X+"=redacted&")}}else y=null;else y=h;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+e+"\n"+r+"\n"+y})}(s.j,s.u,s.A,s.m,s.X,s.s)}function ji(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function Yn(s,e,r){let l,o=!0;for(;!s.I&&s.C<r.length;){if(l=ko(s,r),l==ns){4==e&&(s.o=4,Fn(14),o=!1),Tr(s.j,s.m,null,"[Incomplete Response]");break}if(l==_s){s.o=4,Fn(15),Tr(s.j,s.m,r,"[Invalid Chunk]"),o=!1;break}Tr(s.j,s.m,l,null),Zs(s,l)}ji(s)&&l!=ns&&l!=_s&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,Fn(16),o=!1),s.i=s.i&&o,o?0<r.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),sa(e),e.L=!0,Fn(11))):(Tr(s.j,s.m,r,"[Invalid Chunked Response]"),Wr(s),Os(s))}function ko(s,e){var r=s.C,o=e.indexOf("\n",r);return-1==o?ns:(r=Number(e.substring(r,o)),isNaN(r)?_s:(o+=1)+r>e.length?ns:(e=e.substr(o,r),s.C=o+r,e))}function rs(s){s.Y=Date.now()+s.P,po(s,s.P)}function po(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=ms(Jn(s.eb,s),e)}function Zr(s){s.B&&(tt.clearTimeout(s.B),s.B=null)}function Os(s){0==s.l.G||s.I||oa(s.l,s)}function Wr(s){Zr(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,K(s.W),Nn(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function Zs(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||pr(r.i,s)))if(r.I=s.N,!s.J&&pr(r.i,s)&&3==r.G){try{var o=r.Ca.g.parse(e)}catch($){o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=ms(Jn(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;Bo(r),Vs(r)}Ys(r),Fn(18)}if(1>=Ia(r.i)&&r.ka){try{r.ka()}catch($){}r.ka=void 0}}else jn(r,11)}else if((s.J||r.g==s)&&Bo(r),!ze(e))for(l=r.Ca.g.parse(e),e=0;e<l.length;e++){let $=l[e];if(r.U=$[0],$=$[1],2==r.G)if("c"==$[0]){r.J=$[1],r.la=$[2];const X=$[3];null!=X&&(r.ma=X,r.h.info("VER="+r.ma));const le=$[4];null!=le&&(r.za=le,r.h.info("SVER="+r.za));const xe=$[5];null!=xe&&"number"==typeof xe&&0<xe&&(r.K=o=1.5*xe,r.h.info("backChannelRequestTimeoutMs_="+o)),o=r;const Ke=s.g;if(Ke){const Ye=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ye){var h=o.i;!h.g&&(Pt(Ye,"spdy")||Pt(Ye,"quic")||Pt(Ye,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(ks(h,h.h),h.h=null))}if(o.D){const pt=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;pt&&(o.sa=pt,C(o.F,o.D,pt))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-s.F,r.h.info("Handshake RTT: "+r.O+"ms"));var y=s;if((o=r).oa=Sa(o,o.H?o.la:null,o.W),y.J){go(o.i,y);var D=y,F=o.K;F&&D.setTimeout(F),D.B&&(Zr(D),rs(D)),o.g=y}else Lr(o);0<r.l.length&&ra(r)}else"stop"!=$[0]&&"close"!=$[0]||jn(r,7);else 3==r.G&&("stop"==$[0]||"close"==$[0]?"stop"==$[0]?jn(r,7):Fr(r):"noop"!=$[0]&&r.j&&r.j.wa($),r.A=0)}bi(4)}catch($){}}function Pr(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Qn(s)||"string"==typeof s)tn(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var r=s.T();else if(s.R&&"function"==typeof s.R)r=void 0;else if(Qn(s)||"string"==typeof s){r=[];for(var o=s.length,l=0;l<o;l++)r.push(l)}else for(l in r=[],o=0,s)r[o++]=l;o=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Qn(s)){for(var e=[],r=s.length,o=0;o<r;o++)e.push(s[o]);return e}for(o in e=[],r=0,s)e[r++]=s[o];return e}(s),l=o.length;for(var h=0;h<l;h++)e.call(void 0,o[h],r&&r[h],s)}}function wr(s,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var o=0;o<r;o+=2)this.set(arguments[o],arguments[o+1])}else if(s)if(s instanceof wr)for(r=s.T(),o=0;o<r.length;o++)this.set(r[o],s.get(r[o]));else for(o in s)this.set(o,s[o])}function is(s){if(s.i!=s.g.length){for(var e=0,r=0;e<s.g.length;){var o=s.g[e];si(s.h,o)&&(s.g[r++]=o),e++}s.g.length=r}if(s.i!=s.g.length){var l={};for(r=e=0;e<s.g.length;)si(l,o=s.g[e])||(s.g[r++]=o,l[o]=1),e++;s.g.length=r}}function si(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(Ve=Ns.prototype).setTimeout=function(s){this.P=s},Ve.gb=function(s){s=s.target;const e=this.L;e&&3==ss(s)?e.l():this.Ia(s)},Ve.Ia=function(s){try{if(s==this.g)e:{const X=ss(this.g);var e=this.g.Da();const le=this.g.ba();if(!(3>X)&&(3!=X||wi||this.g&&(this.h.h||this.g.ga()||ta(this.g)))){this.I||4!=X||7==e||bi(8==e||0>=le?3:2),Zr(this);var r=this.g.ba();this.N=r;t:if(ji(this)){var o=ta(this.g);s="";var l=o.length,h=4==ss(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wr(this),Os(this);var y="";break t}this.h.i=new tt.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,s+=this.h.i.decode(o[e],{stream:h&&e==l-1});o.splice(0,l),this.h.g+=s,this.C=0,y=this.h.g}else y=this.g.ga();if(this.i=200==r,function(s,e,r,o,l,h,y){s.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+e+"\n"+r+"\n"+h+" "+y})}(this.j,this.u,this.A,this.m,this.X,X,r),this.i){if(this.$&&!this.J){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ze(D)){var $=D;break t}}$=null}if(!(r=$)){this.i=!1,this.o=3,Fn(12),Wr(this),Os(this);break e}Tr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zs(this,r)}this.U?(Yn(this,X,y),wi&&this.i&&3==X&&(Zn(this.V,this.W,"tick",this.fb),this.W.start())):(Tr(this.j,this.m,y,null),Zs(this,y)),4==X&&Wr(this),this.i&&!this.I&&(4==X?oa(this.l,this):(this.i=!1,rs(this)))}else 400==r&&0<y.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),Wr(this),Os(this)}}}catch(X){}},Ve.fb=function(){if(this.g){var s=ss(this.g),e=this.g.ga();this.C<e.length&&(Zr(this),Yn(this,s,e),this.i&&4!=s&&rs(this))}},Ve.cancel=function(){this.I=!0,Wr(this)},Ve.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bi(3),Fn(17)),Wr(this),this.o=2,Os(this)):po(this,this.Y-s)},(Ve=wr.prototype).R=function(){is(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},Ve.T=function(){return is(this),this.g.concat()},Ve.get=function(s,e){return si(this.h,s)?this.h[s]:e},Ve.set=function(s,e){si(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},Ve.forEach=function(s,e){for(var r=this.T(),o=0;o<r.length;o++){var l=r[o],h=this.get(l);s.call(e,h,l,this)}};var vs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function H(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof H){this.g=void 0!==e?e:s.g,z(this,s.j),this.s=s.s,ue(this,s.i),A(this,s.m),this.l=s.l,e=s.h;var r=new Hi;r.i=e.i,e.g&&(r.g=new wr(e.g),r.h=e.h),T(this,r),this.o=s.o}else s&&(r=String(s).match(vs))?(this.g=!!e,z(this,r[1]||"",!0),this.s=ft(r[2]||""),ue(this,r[3]||"",!0),A(this,r[4]),this.l=ft(r[5]||"",!0),T(this,r[6]||"",!0),this.o=ft(r[7]||"")):(this.g=!!e,this.h=new Hi(null,this.g))}function R(s){return new H(s)}function z(s,e,r){s.j=r?ft(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function ue(s,e,r){s.i=r?ft(e,!0):e}function A(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function T(s,e,r){e instanceof Hi?(s.h=e,function(s,e){e&&!s.j&&(wt(s),s.i=null,s.g.forEach(function(r,o){var l=o.toLowerCase();o!=l&&(Fo(this,o),Ea(this,l,r))},s)),s.j=e}(s.h,s.g)):(r||(e=on(e,Yr)),s.h=new Hi(e,s.g))}function C(s,e,r){s.h.set(e,r)}function B(s){return C(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ft(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function on(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,nn),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function nn(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}H.prototype.toString=function(){var s=[],e=this.j;e&&s.push(on(e,tr,!0),":");var r=this.i;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(on(e,tr,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&s.push("/"),s.push(on(r,"/"==r.charAt(0)?$i:qn,!0))),(r=this.h.toString())&&s.push("?",r),(r=this.o)&&s.push("#",on(r,ls)),s.join("")};var tr=/[#\/\?@]/g,qn=/[#\?:]/g,$i=/[#\?]/g,Yr=/[#\?@]/g,ls=/#/g;function Hi(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function wt(s){s.g||(s.g=new wr,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var o=s[r].indexOf("="),l=null;if(0<=o){var h=s[r].substring(0,o);l=s[r].substring(o+1)}else h=s[r];e(h,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Fo(s,e){wt(s),e=Ps(s,e),si(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,si((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&is(s)))}function Lo(s,e){return wt(s),e=Ps(s,e),si(s.g.h,e)}function Ea(s,e,r){Fo(s,e),0<r.length&&(s.i=null,s.g.set(Ps(s,e),fn(r)),s.h+=r.length)}function Ps(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Za(s){this.l=s||qe,s=tt.PerformanceNavigationTiming?0<(s=tt.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(tt.g&&tt.g.Ea&&tt.g.Ea()&&tt.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ve=Hi.prototype).add=function(s,e){wt(this),this.i=null,s=Ps(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},Ve.forEach=function(s,e){wt(this),this.g.forEach(function(r,o){tn(r,function(l){s.call(e,l,o,this)},this)},this)},Ve.T=function(){wt(this);for(var s=this.g.R(),e=this.g.T(),r=[],o=0;o<e.length;o++)for(var l=s[o],h=0;h<l.length;h++)r.push(e[o]);return r},Ve.R=function(s){wt(this);var e=[];if("string"==typeof s)Lo(this,s)&&(e=Xn(e,this.g.get(Ps(this,s))));else{s=this.g.R();for(var r=0;r<s.length;r++)e=Xn(e,s[r])}return e},Ve.set=function(s,e){return wt(this),this.i=null,Lo(this,s=Ps(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Ve.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},Ve.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),r=0;r<e.length;r++){var o=e[r],l=encodeURIComponent(String(o));o=this.R(o);for(var h=0;h<o.length;h++){var y=l;""!==o[h]&&(y+="="+encodeURIComponent(String(o[h]))),s.push(y)}}return this.i=s.join("&")};var qe=10;function En(s){return!!s.h||!!s.g&&s.g.size>=s.j}function Ia(s){return s.h?1:s.g?s.g.size:0}function pr(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function ks(s,e){s.g?s.g.add(e):s.h=e}function go(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function cs(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return fn(s.i)}function Es(){}function Ya(){this.g=new Es}function mo(s,e,r){const o=r||"";try{Pr(s,function(l,h){let y=l;Rr(l)&&(y=er(l)),e.push(o+h+"="+encodeURIComponent(y))})}catch(l){throw e.push(o+"type="+encodeURIComponent("_badmap")),l}}function Fs(s,e,r,o,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(o)}catch(h){}}function Gi(s){this.l=s.$b||null,this.j=s.ib||!1}function zr(s,e){Wt.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=hi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Za.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Es.prototype.stringify=function(s){return tt.JSON.stringify(s,void 0)},Es.prototype.parse=function(s){return tt.JSON.parse(s,void 0)},Yt(Gi,ys),Gi.prototype.g=function(){return new zr(this.l,this.j)},Gi.prototype.i=function(s){return function(){return s}}({}),Yt(zr,Wt);var hi=0;function ba(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Ci(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Wi(s)}function Wi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Ve=zr.prototype).open=function(s,e){if(this.readyState!=hi)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,Wi(this)},Ve.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ve.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ci(this)),this.readyState=hi},Ve.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==tt.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ba(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},Ve.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Ci(this):Wi(this),3==this.readyState&&ba(this)}},Ve.Ua=function(s){this.g&&(this.response=this.responseText=s,Ci(this))},Ve.Ta=function(s){this.g&&(this.response=s,Ci(this))},Ve.ha=function(){this.g&&Ci(this)},Ve.setRequestHeader=function(s,e){this.v.append(s,e)},Ve.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Ve.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var Ca=tt.JSON.parse;function kr(s){Wt.call(this),this.headers=new wr,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jo,this.K=this.L=!1}Yt(kr,Wt);var Jo="",$l=/^https?$/i,Xo=["POST","PUT"];function Da(s){return"content-type"==s.toLowerCase()}function Ta(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Qa(s),Ls(s)}function Qa(s){s.D||(s.D=!0,Jt(s,"complete"),Jt(s,"error"))}function Cu(s){if(s.h&&void 0!==Ot&&(!s.C[1]||4!=ss(s)||2!=s.ba()))if(s.v&&4==ss(s))_e(s.Fa,0,s);else if(Jt(s,"readystatechange"),4==ss(s)){s.h=!1;try{const D=s.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var o;if(o=0===D){var l=String(s.H).match(vs)[1]||null;if(!l&&tt.self&&tt.self.location){var h=tt.self.location.protocol;l=h.substr(0,h.length-1)}o=!$l.test(l?l.toLowerCase():"")}r=o}if(r)Jt(s,"complete"),Jt(s,"success");else{s.m=6;try{var y=2<ss(s)?s.g.statusText:""}catch(F){y=""}s.j=y+" ["+s.ba()+"]",Qa(s)}}finally{Ls(s)}}}function Ls(s,e){if(s.g){Du(s);const r=s.g,o=s.C[0]?dt:null;s.g=null,s.C=null,e||Jt(s,"ready");try{r.onreadystatechange=o}catch(l){}}}function Du(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(tt.clearTimeout(s.A),s.A=null)}function ss(s){return s.g?s.g.readyState:0}function ta(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Jo:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vo(s,e,r){e:{for(o in r){var o=!1;break e}o=!0}o||(r=function(s){let e="";return Xr(s,function(r,o){e+=o,e+=":",e+=r,e+="\r\n"}),e}(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):C(s,e,r))}function na(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function Hl(s){this.za=0,this.l=[],this.h=new or,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=na("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=na("baseRetryDelayMs",5e3,s),this.$a=na("retryDelaySeedMs",1e4,s),this.Ya=na("forwardChannelMaxRetries",2,s),this.ra=na("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new Za(s&&s.concurrentRequestLimit),this.Ca=new Ya,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function Fr(s){if(gr(s),3==s.G){var e=s.V++,r=R(s.F);C(r,"SID",s.J),C(r,"RID",e),C(r,"TYPE","terminate"),Uo(s,r),(e=new Ns(s,s.h,e,void 0)).K=2,e.v=B(R(r)),r=!1,tt.navigator&&tt.navigator.sendBeacon&&(r=tt.navigator.sendBeacon(e.v.toString(),"")),!r&&tt.Image&&((new Image).src=e.v,r=!0),r||(e.g=_o(e.l,null),e.g.ea(e.v)),e.F=Date.now(),rs(e)}Tu(s)}function Vs(s){s.g&&(sa(s),s.g.cancel(),s.g=null)}function gr(s){Vs(s),s.u&&(tt.clearTimeout(s.u),s.u=null),Bo(s),s.i.cancel(),s.m&&("number"==typeof s.m&&tt.clearTimeout(s.m),s.m=null)}function yo(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&ra(s)}function ra(s){En(s.i)||s.m||(s.m=!0,Ii(s.Ha,s),s.C=0)}function Ja(s,e){var r;r=e?e.m:s.V++;const o=R(s.F);C(o,"SID",s.J),C(o,"RID",r),C(o,"AID",s.U),Uo(s,o),s.o&&s.s&&Vo(o,s.o,s.s),r=new Ns(s,s.h,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.l=e.D.concat(s.l)),e=ia(s,r,1e3),r.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),ks(s.i,r),Ui(r,o,e)}function Uo(s,e){s.j&&Pr({},function(r,o){C(e,o,r)})}function ia(s,e,r){r=Math.min(s.l.length,r);var o=s.j?Jn(s.j.Oa,s.j,s):null;e:{var l=s.l;let h=-1;for(;;){const y=["count="+r];-1==h?0<r?(h=l[0].h,y.push("ofs="+h)):h=0:y.push("ofs="+h);let D=!0;for(let F=0;F<r;F++){let $=l[F].h;const X=l[F].g;if($-=h,0>$)h=Math.max(0,l[F].h-100),D=!1;else try{mo(X,y,"req"+$+"_")}catch(le){o&&o(X)}}if(D){o=y.join("&");break e}}}return s=s.l.splice(0,r),e.D=s,o}function Lr(s){s.g||s.u||(s.Y=1,Ii(s.Ga,s),s.A=0)}function Ys(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=ms(Jn(s.Ga,s),Qs(s,s.A)),s.A++,0))}function sa(s){null!=s.B&&(tt.clearTimeout(s.B),s.B=null)}function Xa(s){s.g=new Ns(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=R(s.oa);C(e,"RID","rpc"),C(e,"SID",s.J),C(e,"CI",s.N?"0":"1"),C(e,"AID",s.U),Uo(s,e),C(e,"TYPE","xmlhttp"),s.o&&s.s&&Vo(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var r=s.g;s=s.la,r.K=1,r.v=B(R(e)),r.s=null,r.U=!0,Bi(r,s)}function Bo(s){null!=s.v&&(tt.clearTimeout(s.v),s.v=null)}function oa(s,e){var r=null;if(s.g==e){Bo(s),sa(s),s.g=null;var o=2}else{if(!pr(s.i,e))return;r=e.D,go(s.i,e),o=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==o){r=e.s?e.s.length:0,e=Date.now()-e.F;var l=s.C;Jt(o=gs(),new ya(o,r,e,l)),ra(s)}else Lr(s);else if(3==(l=e.o)||0==l&&0<s.I||!(1==o&&function(s,e){return!(Ia(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=ms(Jn(s.Ha,s,e),Qs(s,s.C)),s.C++,0)))}(s,e)||2==o&&Ys(s)))switch(r&&0<r.length&&(e=s.i,e.i=e.i.concat(r)),l){case 1:jn(s,5);break;case 4:jn(s,10);break;case 3:jn(s,6);break;default:jn(s,2)}}function Qs(s,e){let r=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(r*=2),r*e}function jn(s,e){if(s.h.info("Error code "+e),2==e){var r=null;s.j&&(r=null);var o=Jn(s.jb,s);r||(r=new H("//www.google.com/images/cleardot.gif"),tt.location&&"http"==tt.location.protocol||z(r,"https"),B(r)),function(s,e){const r=new or;if(tt.Image){const o=new Image;o.onload=Ur(Fs,r,o,"TestLoadImage: loaded",!0,e),o.onerror=Ur(Fs,r,o,"TestLoadImage: error",!1,e),o.onabort=Ur(Fs,r,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ur(Fs,r,o,"TestLoadImage: timeout",!1,e),tt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=s}else e(!1)}(r.toString(),o)}else Fn(2);s.G=0,s.j&&s.j.va(e),Tu(s),gr(s)}function Tu(s){s.G=0,s.I=-1,s.j&&((0!=cs(s.i).length||0!=s.l.length)&&(s.i.i.length=0,fn(s.l),s.l.length=0),s.j.ua())}function Sa(s,e,r){let o=function(s){return s instanceof H?R(s):new H(s,void 0)}(r);if(""!=o.i)e&&ue(o,e+"."+o.i),A(o,o.m);else{const l=tt.location;o=function(s,e,r,o){var l=new H(null,void 0);return s&&z(l,s),e&&ue(l,e),r&&A(l,r),o&&(l.l=o),l}(l.protocol,e?e+"."+l.hostname:l.hostname,+l.port,r)}return s.aa&&Xr(s.aa,function(l,h){C(o,h,l)}),r=s.sa,(e=s.D)&&r&&C(o,e,r),C(o,"VER",s.ma),Uo(s,o),o}function _o(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(r&&s.Ba&&!s.qa?new Gi({ib:!0}):s.qa)).L=s.H,e}function aa(){}function Vr(){if(Et&&!(10<=Number(un)))throw Error("Environmental error: no available transport.")}function os(s,e){Wt.call(this),this.g=new Hl(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!ze(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ze(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Js(this)}function Uc(s){_a.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Wl(){Vi.call(this),this.status=1}function Js(s){this.g=s}(Ve=kr.prototype).ea=function(s,e,r,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fo.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:fo),this.g.onreadystatechange=Jn(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(h){return void Ta(this,h)}s=r||"";const l=new wr(this.headers);o&&Pr(o,function(h,y){l.set(y,h)}),o=function(s){e:{var e=Da;const r=s.length,o="string"==typeof s?s.split(""):s;for(let l=0;l<r;l++)if(l in o&&e.call(void 0,o[l],l,s)){e=l;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(l.T()),r=tt.FormData&&s instanceof tt.FormData,!(0<=wn(Xo,e))||o||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(h,y){this.g.setRequestHeader(y,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Du(this),0<this.B&&((this.K=function(s){return Et&&We()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jn(this.pa,this)):this.A=_e(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(h){Ta(this,h)}},Ve.pa=function(){void 0!==Ot&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jt(this,"timeout"),this.abort(8))},Ve.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Jt(this,"complete"),Jt(this,"abort"),Ls(this))},Ve.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ls(this,!0)),kr.Z.M.call(this)},Ve.Fa=function(){this.s||(this.F||this.v||this.l?Cu(this):this.cb())},Ve.cb=function(){Cu(this)},Ve.ba=function(){try{return 2<ss(this)?this.g.status:-1}catch(s){return-1}},Ve.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},Ve.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),Ca(e)}},Ve.Da=function(){return this.m},Ve.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ve=Hl.prototype).ma=8,Ve.G=1,Ve.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(e){}},Ve.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const l=new Ns(this,this.h,s,void 0);let h=this.s;if(this.P&&(h?(h=ht(h),ii(h,this.P)):h=this.P),null===this.o&&(l.H=h),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){var o=this.l[r];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break e}if(4096===e||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=ia(this,l,e),C(r=R(this.F),"RID",s),C(r,"CVER",22),this.D&&C(r,"X-HTTP-Session-Id",this.D),Uo(this,r),this.o&&h&&Vo(r,this.o,h),ks(this.i,l),this.Ra&&C(r,"TYPE","init"),this.ja?(C(r,"$req",e),C(r,"SID","null"),l.$=!0,Ui(l,r,null)):Ui(l,r,e),this.G=2}}else 3==this.G&&(s?Ja(this,s):0==this.l.length||En(this.i)||Ja(this))},Ve.Ga=function(){if(this.u=null,Xa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=ms(Jn(this.bb,this),s)}},Ve.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fn(10),Vs(this),Xa(this))},Ve.ab=function(){null!=this.v&&(this.v=null,Vs(this),Ys(this),Fn(19))},Ve.jb=function(s){s?(this.h.info("Successfully pinged google.com"),Fn(2)):(this.h.info("Failed to ping google.com"),Fn(1))},(Ve=aa.prototype).xa=function(){},Ve.wa=function(){},Ve.va=function(){},Ve.ua=function(){},Ve.Oa=function(){},Vr.prototype.g=function(s,e){return new os(s,e)},Yt(os,Wt),os.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Ii(Jn(s.hb,s,e))),Fn(0),s.W=e,s.aa=r||{},s.N=s.X,s.F=Sa(s,null,s.W),ra(s)},os.prototype.close=function(){Fr(this.g)},os.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,yo(this.g,e)}else this.v?((e={}).__data__=er(s),yo(this.g,e)):yo(this.g,s)},os.prototype.M=function(){this.g.j=null,delete this.j,Fr(this.g),delete this.g,os.Z.M.call(this)},Yt(Uc,_a),Yt(Wl,Vi),Yt(Js,aa),Js.prototype.xa=function(){Jt(this.g,"a")},Js.prototype.wa=function(s){Jt(this.g,new Uc(s))},Js.prototype.va=function(s){Jt(this.g,new Wl(s))},Js.prototype.ua=function(){Jt(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,Li.COMPLETE="complete",Yo.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",Wt.prototype.listen=Wt.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var al=Ft.createWebChannelTransport=function(){return new Vr},Au=Ft.getStatEventTarget=function(){return gs()},Xs=Ft.ErrorCode=Ms,Bc=Ft.EventType=Li,ds=Ft.Event=Gr,Di=Ft.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},xa=Ft.FetchXmlHttpFactory=Gi,eo=Ft.WebChannel=Yo,Su=Ft.XhrIo=kr;const Ma="@firebase/firestore";class fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");let ws="9.6.11";const hs=new kt.Yd("@firebase/firestore");function Ra(){return hs.logLevel}function Ze(s,...e){if(hs.logLevel<=kt.in.DEBUG){const r=e.map(to);hs.debug(`Firestore (${ws}): ${s}`,...r)}}function cr(s,...e){if(hs.logLevel<=kt.in.ERROR){const r=e.map(to);hs.error(`Firestore (${ws}): ${s}`,...r)}}function vo(s,...e){if(hs.logLevel<=kt.in.WARN){const r=e.map(to);hs.warn(`Firestore (${ws}): ${s}`,...r)}}function to(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function _t(s="Unexpected state"){const e=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: `+s;throw cr(e),new Error(e)}function $t(s,e){s||_t()}function b(s,e){return s}const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _ extends gt.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class M{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class L{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(fi.UNAUTHENTICATED))}shutdown(){}}class te{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class he{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var o=this;let l=this.i;const h=$=>this.i!==l?(l=this.i,r($)):Promise.resolve();let y=new M;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new M,e.enqueueRetryable(()=>h(this.currentUser))};const D=()=>{const $=y;e.enqueueRetryable((0,Ee.Z)(function*(){yield $.promise,yield h(o.currentUser)}))},F=$=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit($=>F($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?F($):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new M)}},0),D()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($t("string"==typeof o.accessToken),new L(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(null===e||"string"==typeof e),new fi(e)}}class Ue{constructor(e,r,o){this.type="FirstParty",this.user=fi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const l=e.auth.getAuthHeaderValueForFirstParty([]);l&&this.headers.set("Authorization",l),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class vt{constructor(e,r,o){this.h=e,this.l=r,this.m=o}getToken(){return Promise.resolve(new Ue(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vt{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,r){const o=h=>{null!=h.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const y=h.token!==this.p;return this.p=h.token,Ze("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?r(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const l=h=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.g.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.g.getImmediate({optional:!0});h?l(h):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?($t("string"==typeof r.token),this.p=r.token,new Tn(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class rn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=o=>this.I(o),this.T=o=>r.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function pi(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let o=0;o<s;o++)r[o]=Math.floor(256*Math.random());return r}rn.A=-1;class zi{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=pi(40);for(let h=0;h<l.length;++h)o.length<20&&l[h]<r&&(o+=e.charAt(l[h]%e.length))}return o}}function At(s,e){return s<e?-1:s>e?1:0}function qr(s,e,r){return s.length===e.length&&s.every((o,l)=>r(o,e[l]))}function jo(s){return s+"\0"}class Pn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new _(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new _(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new _(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*r));return new Pn(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Pn(0,0))}static max(){return new Ut(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ul(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function Na(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function ll(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Oa{constructor(e,r,o){void 0===r?r=0:r>e.length&&_t(),void 0===o?o=e.length-r:o>e.length-r&&_t(),this.segments=e,this.offset=r,this.len=o}get length(){return this.len}isEqual(e){return 0===Oa.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(o=>{r.push(o)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,o=this.limit();r<o;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const o=Math.min(e.length,r.length);for(let l=0;l<o;l++){const h=e.get(l),y=r.get(l);if(h<y)return-1;if(h>y)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Bt extends Oa{construct(e,r,o){return new Bt(e,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const o of e){if(o.indexOf("//")>=0)throw new _(v.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(l=>l.length>0))}return new Bt(r)}static emptyPath(){return new Bt([])}}const jd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qi extends Oa{construct(e,r,o){return new qi(e,r,o)}static isValidIdentifier(e){return jd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qi(["__name__"])}static fromServerFormat(e){const r=[];let o="",l=0;const h=()=>{if(0===o.length)throw new _(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let y=!1;for(;l<e.length;){const D=e[l];if("\\"===D){if(l+1===e.length)throw new _(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[l+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new _(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,l+=2}else"`"===D?(y=!y,l++):"."!==D||y?(o+=D,l++):(h(),l++)}if(h(),y)throw new _(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qi(r)}static emptyPath(){return new qi([])}}class Eo{constructor(e){this.fields=e,e.sort(qi.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return qr(this.fields,e.fields,(r,o)=>r.isEqual(o))}}class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new gi(r)}static fromUint8Array(e){const r=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new gi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const ef=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(s){if($t(!!s),"string"==typeof s){let e=0;const r=ef.exec(s);if($t(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ar(s.seconds),nanos:ar(s.nanos)}}function ar(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function ua(s){return"string"==typeof s?gi.fromBase64String(s):gi.fromUint8Array(s)}function Ar(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function xu(s){const e=s.mapValue.fields.__previous_value__;return Ar(e)?xu(e):e}function no(s){const e=wo(s.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class Mu{constructor(e,r,o,l,h,y,D,F){this.databaseId=e,this.appId=r,this.persistenceKey=o,this.host=l,this.ssl=h,this.forceLongPolling=y,this.autoDetectLongPolling=D,this.useFetchStreams=F}}class la{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function Ti(s){return null==s}function Is(s){return 0===s&&1/s==-1/0}function Pa(s){return"number"==typeof s&&Number.isInteger(s)&&!Is(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}class at{constructor(e){this.path=e}static fromPath(e){return new at(Bt.fromString(e))}static fromName(e){return new at(Bt.fromString(e).popFirst(5))}static empty(){return new at(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Bt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Bt(e.slice()))}}const fs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cl={nullValue:"NULL_VALUE"};function ka(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ar(s)?4:ne(s)?9:10:_t()}function Io(s,e){if(s===e)return!0;const r=ka(s);if(r!==ka(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return no(s).isEqual(no(e));case 3:return function(o,l){if("string"==typeof o.timestampValue&&"string"==typeof l.timestampValue&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=wo(o.timestampValue),y=wo(l.timestampValue);return h.seconds===y.seconds&&h.nanos===y.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return l=e,ua(s.bytesValue).isEqual(ua(l.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return ar(o.geoPointValue.latitude)===ar(l.geoPointValue.latitude)&&ar(o.geoPointValue.longitude)===ar(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ar(o.integerValue)===ar(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ar(o.doubleValue),y=ar(l.doubleValue);return h===y?Is(h)===Is(y):isNaN(h)&&isNaN(y)}return!1}(s,e);case 9:return qr(s.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:return function(o,l){const h=o.mapValue.fields||{},y=l.mapValue.fields||{};if(ul(h)!==ul(y))return!1;for(const D in h)if(h.hasOwnProperty(D)&&(void 0===y[D]||!Io(h[D],y[D])))return!1;return!0}(s,e);default:return _t()}var l}function ro(s,e){return void 0!==(s.values||[]).find(r=>Io(r,e))}function Fa(s,e){if(s===e)return 0;const r=ka(s),o=ka(e);if(r!==o)return At(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return At(s.booleanValue,e.booleanValue);case 2:return function(l,h){const y=ar(l.integerValue||l.doubleValue),D=ar(h.integerValue||h.doubleValue);return y<D?-1:y>D?1:y===D?0:isNaN(y)?isNaN(D)?0:-1:1}(s,e);case 3:return $o(s.timestampValue,e.timestampValue);case 4:return $o(no(s),no(e));case 5:return At(s.stringValue,e.stringValue);case 6:return function(l,h){const y=ua(l),D=ua(h);return y.compareTo(D)}(s.bytesValue,e.bytesValue);case 7:return function(l,h){const y=l.split("/"),D=h.split("/");for(let F=0;F<y.length&&F<D.length;F++){const $=At(y[F],D[F]);if(0!==$)return $}return At(y.length,D.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,h){const y=At(ar(l.latitude),ar(h.latitude));return 0!==y?y:At(ar(l.longitude),ar(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(l,h){const y=l.values||[],D=h.values||[];for(let F=0;F<y.length&&F<D.length;++F){const $=Fa(y[F],D[F]);if($)return $}return At(y.length,D.length)}(s.arrayValue,e.arrayValue);case 10:return function(l,h){const y=l.fields||{},D=Object.keys(y),F=h.fields||{},$=Object.keys(F);D.sort(),$.sort();for(let X=0;X<D.length&&X<$.length;++X){const le=At(D[X],$[X]);if(0!==le)return le;const xe=Fa(y[D[X]],F[$[X]]);if(0!==xe)return xe}return At(D.length,$.length)}(s.mapValue,e.mapValue);default:throw _t()}}function $o(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return At(s,e);const r=wo(s),o=wo(e),l=At(r.seconds,o.seconds);return 0!==l?l:At(r.nanos,o.nanos)}function Ai(s){return nu(s)}function nu(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(o){const l=wo(o);return`time(${l.seconds},${l.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?ua(s.bytesValue).toBase64():"referenceValue"in s?at.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(o){let l="[",h=!0;for(const y of o.values||[])h?h=!1:l+=",",l+=nu(y);return l+"]"}(s.arrayValue):"mapValue"in s?function(o){const l=Object.keys(o.fields||{}).sort();let h="{",y=!0;for(const D of l)y?y=!1:h+=",",h+=`${D}:${nu(o.fields[D])}`;return h+"}"}(s.mapValue):_t();var e}function bs(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function dl(s){return!!s&&"integerValue"in s}function ru(s){return!!s&&"arrayValue"in s}function zl(s){return!!s&&"nullValue"in s}function S(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function k(s){return!!s&&"mapValue"in s}function W(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Na(s.mapValue.fields,(r,o)=>e.mapValue.fields[r]=W(o)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=W(s.arrayValue.values[r]);return e}return Object.assign({},s)}function ne(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ie(s){return"nullValue"in s?cl:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?bs(la.empty(),at.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:_t()}function ke(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?bs(la.empty(),at.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?fs:_t()}function Qe(s,e){return void 0===s?e:void 0===e||Fa(s,e)>0?s:e}function It(s,e){return void 0===s?e:void 0===e||Fa(s,e)<0?s:e}class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let o=0;o<e.length-1;++o)if(r=(r.mapValue.fields||{})[e.get(o)],!k(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=W(r)}setAll(e){let r=qi.emptyPath(),o={},l=[];e.forEach((y,D)=>{if(!r.isImmediateParentOf(D)){const F=this.getFieldsMap(r);this.applyChanges(F,o,l),o={},l=[],r=D.popLast()}y?o[D.lastSegment()]=W(y):l.push(D.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,o,l)}delete(e){const r=this.field(e.popLast());k(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=r.mapValue.fields[e.get(o)];k(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[e.get(o)]=l),r=l}return r.mapValue.fields}applyChanges(e,r,o){Na(r,(l,h)=>e[l]=h);for(const l of o)delete e[l]}clone(){return new Dt(W(this.value))}}function sn(s){const e=[];return Na(s.fields,(r,o)=>{const l=new qi([r]);if(k(o)){const h=sn(o.mapValue).fields;if(0===h.length)e.push(l);else for(const y of h)e.push(l.child(y))}else e.push(l)}),new Eo(e)}class Rt{constructor(e,r,o,l,h,y){this.key=e,this.documentType=r,this.version=o,this.readTime=l,this.data=h,this.documentState=y}static newInvalidDocument(e){return new Rt(e,0,Ut.min(),Ut.min(),Dt.empty(),0)}static newFoundDocument(e,r,o){return new Rt(e,1,r,Ut.min(),o,0)}static newNoDocument(e,r){return new Rt(e,2,r,Ut.min(),Dt.empty(),0)}static newUnknownDocument(e,r){return new Rt(e,3,r,Ut.min(),Dt.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hn{constructor(e,r,o,l){this.indexId=e,this.collectionGroup=r,this.fields=o,this.indexState=l}}function Ki(s){return s.fields.find(e=>2===e.kind)}function Sr(s){return s.fields.filter(e=>2!==e.kind)}hn.UNKNOWN_ID=-1;class Ho{constructor(e,r){this.fieldPath=e,this.kind=r}}class Go{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Go(0,Zi.min())}}function Us(s,e){const r=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,l=Ut.fromTimestamp(1e9===o?new Pn(r+1,0):new Pn(r,o));return new Zi(l,at.empty(),e)}function Bs(s){return new Zi(s.readTime,s.key,-1)}class Zi{constructor(e,r,o){this.readTime=e,this.documentKey=r,this.largestBatchId=o}static min(){return new Zi(Ut.min(),at.empty(),-1)}static max(){return new Zi(Ut.max(),at.empty(),-1)}}function oi(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=at.comparator(s.documentKey,e.documentKey),0!==r?r:At(s.largestBatchId,e.largestBatchId))}class jc{constructor(e,r=null,o=[],l=[],h=null,y=null,D=null){this.path=e,this.collectionGroup=r,this.orderBy=o,this.filters=l,this.limit=h,this.startAt=y,this.endAt=D,this.P=null}}function $d(s,e=null,r=[],o=[],l=null,h=null,y=null){return new jc(s,e,r,o,l,h,y)}function io(s){const e=b(s);if(null===e.P){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(o=>{return(l=o).field.canonicalString()+l.op.toString()+Ai(l.value);var l}).join(","),r+="|ob:",r+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),Ti(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>Ai(o)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>Ai(o)).join(",")),e.P=r}return e.P}function ql(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let l=0;l<s.orderBy.length;l++)if(!Gd(s.orderBy[l],e.orderBy[l]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let l=0;l<s.filters.length;l++)if((r=s.filters[l]).op!==(o=e.filters[l]).op||!r.field.isEqual(o.field)||!Io(r.value,o.value))return!1;var r,o;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Zl(s.startAt,e.startAt)&&Zl(s.endAt,e.endAt)}function Kl(s){return at.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Ru(s,e){return s.filters.filter(r=>r instanceof mi&&r.field.isEqual(e))}function La(s,e,r){let o,l=!0;for(const h of Ru(s,e)){let y,D=!0;switch(h.op){case"<":case"<=":y=Ie(h.value);break;case"==":case"in":case">=":y=h.value;break;case">":y=h.value,D=!1;break;case"!=":case"not-in":y=cl}Qe(o,y)===y&&(o=y,l=D)}if(null!==r)for(let h=0;h<s.orderBy.length;++h)if(s.orderBy[h].field.isEqual(e)){const y=r.position[h];Qe(o,y)===y&&(o=y,l=r.inclusive);break}return{value:o,inclusive:l}}function bo(s,e,r){let o,l=!0;for(const h of Ru(s,e)){let y,D=!0;switch(h.op){case">=":case">":y=ke(h.value),D=!1;break;case"==":case"in":case"<=":y=h.value;break;case"<":y=h.value,D=!1;break;case"!=":case"not-in":y=fs}It(o,y)===y&&(o=y,l=D)}if(null!==r)for(let h=0;h<s.orderBy.length;++h)if(s.orderBy[h].field.isEqual(e)){const y=r.position[h];It(o,y)===y&&(o=y,l=r.inclusive);break}return{value:o,inclusive:l}}class mi extends class{}{constructor(e,r,o){super(),this.field=e,this.op=r,this.value=o}static create(e,r,o){return e.isKeyField()?"in"===r||"not-in"===r?this.V(e,r,o):new Va(e,r,o):"array-contains"===r?new hl(e,o):"in"===r?new rf(e,o):"not-in"===r?new Kp(e,o):"array-contains-any"===r?new Hd(e,o):new mi(e,r,o)}static V(e,r,o){return"in"===r?new tf(e,o):new nf(e,o)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.v(Fa(r,this.value)):null!==r&&ka(this.value)===ka(r)&&this.v(Fa(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Va extends mi{constructor(e,r,o){super(e,r,o),this.key=at.fromName(o.referenceValue)}matches(e){const r=at.comparator(e.key,this.key);return this.v(r)}}class tf extends mi{constructor(e,r){super(e,"in",r),this.keys=$c(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nf extends mi{constructor(e,r){super(e,"not-in",r),this.keys=$c(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function $c(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>at.fromName(o.referenceValue))}class hl extends mi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ru(r)&&ro(r.arrayValue,this.value)}}class rf extends mi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&ro(this.value.arrayValue,r)}}class Kp extends mi{constructor(e,r){super(e,"not-in",r)}matches(e){if(ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!ro(this.value.arrayValue,r)}}class Hd extends mi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ru(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>ro(this.value.arrayValue,o))}}class so{constructor(e,r){this.position=e,this.inclusive=r}}class ca{constructor(e,r="asc"){this.field=e,this.dir=r}}function Gd(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function Zp(s,e,r){let o=0;for(let l=0;l<s.position.length;l++){const h=e[l],y=s.position[l];if(o=h.field.isKeyField()?at.comparator(at.fromName(y.referenceValue),r.key):Fa(y,r.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function Zl(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Io(s.position[r],e.position[r]))return!1;return!0}class Co{constructor(e,r=null,o=[],l=[],h=null,y="F",D=null,F=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=l,this.limit=h,this.limitType=y,this.startAt=D,this.endAt=F,this.D=null,this.C=null}}function Wd(s,e,r,o,l,h,y,D){return new Co(s,e,r,o,l,h,y,D)}function Nu(s){return new Co(s)}function fl(s){return!Ti(s.limit)&&"F"===s.limitType}function Hc(s){return!Ti(s.limit)&&"L"===s.limitType}function Ou(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function pl(s){for(const e of s.filters)if(e.S())return e.field;return null}function Ua(s){return null!==s.collectionGroup}function gl(s){const e=b(s);if(null===e.D){e.D=[];const r=pl(e),o=Ou(e);if(null!==r&&null===o)r.isKeyField()||e.D.push(new ca(r)),e.D.push(new ca(qi.keyField(),"asc"));else{let l=!1;for(const h of e.explicitOrderBy)e.D.push(h),h.field.isKeyField()&&(l=!0);if(!l){const h=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ca(qi.keyField(),h))}}}return e.D}function oo(s){const e=b(s);if(!e.C)if("F"===e.limitType)e.C=$d(e.path,e.collectionGroup,gl(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const h of gl(e))r.push(new ca(h.field,"desc"===h.dir?"asc":"desc"));const o=e.endAt?new so(e.endAt.position,!e.endAt.inclusive):null,l=e.startAt?new so(e.startAt.position,!e.startAt.inclusive):null;e.C=$d(e.path,e.collectionGroup,r,e.filters,e.limit,o,l)}return e.C}function zd(s,e,r){return new Co(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function su(s,e){return ql(oo(s),oo(e))&&s.limitType===e.limitType}function Gc(s){return`${io(oo(s))}|lt:${s.limitType}`}function Wc(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(o=r).field.canonicalString()} ${o.op} ${Ai(o.value)}`;var o}).join(", ")}]`),Ti(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>Ai(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>Ai(r)).join(",")),`Target(${e})`}(oo(s))}; limitType=${s.limitType})`}function ml(s,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return null!==r.collectionGroup?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):at.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,o){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===o.data.field(l.field))return!1;return!0}(s,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(s,e)&&(o=e,!((r=s).startAt&&!function(l,h,y){const D=Zp(l,h,y);return l.inclusive?D<=0:D<0}(r.startAt,gl(r),o)||r.endAt&&!function(l,h,y){const D=Zp(l,h,y);return l.inclusive?D>=0:D>0}(r.endAt,gl(r),o)));var r,o}function qd(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ou(s){return(e,r)=>{let o=!1;for(const l of gl(s)){const h=sf(l,e,r);if(0!==h)return h;o=o||l.field.isKeyField()}return 0}}function sf(s,e,r){const o=s.field.isKeyField()?at.comparator(e.key,r.key):function(l,h,y){const D=h.data.field(l),F=y.data.field(l);return null!==D&&null!==F?Fa(D,F):_t()}(s.field,e,r);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return _t()}}function of(s,e){if(s.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Is(e)?"-0":e}}function Yl(s){return{integerValue:""+s}}function af(s,e){return Pa(e)?Yl(e):of(s,e)}class zc{constructor(){this._=void 0}}function Ba(s,e,r){return s instanceof _l?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&(h.fields.__previous_value__=l),{mapValue:h}}(r,e):s instanceof Pu?uf(s,e):s instanceof ja?lf(s,e):function(o,l){const h=Kd(o,l),y=cf(h)+cf(o.k);return dl(h)&&dl(o.k)?Yl(y):of(o.M,y)}(s,e)}function yl(s,e,r){return s instanceof Pu?uf(s,e):s instanceof ja?lf(s,e):r}function Kd(s,e){return s instanceof ku?dl(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var o,r}class _l extends zc{}class Pu extends zc{constructor(e){super(),this.elements=e}}function uf(s,e){const r=df(e);for(const o of s.elements)r.some(l=>Io(l,o))||r.push(o);return{arrayValue:{values:r}}}class ja extends zc{constructor(e){super(),this.elements=e}}function lf(s,e){let r=df(e);for(const o of s.elements)r=r.filter(l=>!Io(l,o));return{arrayValue:{values:r}}}class ku extends zc{constructor(e,r){super(),this.M=e,this.k=r}}function cf(s){return ar(s.integerValue||s.doubleValue)}function df(s){return ru(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Ql{constructor(e,r){this.field=e,this.transform=r}}class by{constructor(e,r){this.version=e,this.transformResults=r}}class yi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Jl{}function Do(s,e,r){s instanceof Zc?function(o,l,h){const y=o.value.clone(),D=Xl(o.fieldTransforms,l,h.transformResults);y.setAll(D),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(s,e,r):s instanceof uu?function(o,l,h){if(!au(o.precondition,l))return void l.convertToUnknownDocument(h.version);const y=Xl(o.fieldTransforms,l,h.transformResults),D=l.data;D.setAll(Yp(o)),D.setAll(y),l.convertToFoundDocument(h.version,D).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Fu(s,e,r){var l;s instanceof Zc?function(o,l,h){if(!au(o.precondition,l))return;const y=o.value.clone(),D=ec(o.fieldTransforms,h,l);y.setAll(D),l.convertToFoundDocument(Kc(l),y).setHasLocalMutations()}(s,e,r):s instanceof uu?function(o,l,h){if(!au(o.precondition,l))return;const y=ec(o.fieldTransforms,h,l),D=l.data;D.setAll(Yp(o)),D.setAll(y),l.convertToFoundDocument(Kc(l),D).setHasLocalMutations()}(s,e,r):au(s.precondition,l=e)&&l.convertToNoDocument(Ut.min())}function qc(s,e){let r=null;for(const o of s.fieldTransforms){const l=e.data.field(o.field),h=Kd(o.transform,l||null);null!=h&&(null==r&&(r=Dt.empty()),r.set(o.field,h))}return r||null}function Zd(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===o||r&&o&&qr(r,o,(l,h)=>function(s,e){return s.field.isEqual(e.field)&&(o=e.transform,(r=s.transform)instanceof Pu&&o instanceof Pu||r instanceof ja&&o instanceof ja?qr(r.elements,o.elements,Io):r instanceof ku&&o instanceof ku?Io(r.k,o.k):r instanceof _l&&o instanceof _l);var r,o}(l,h))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,o}function Kc(s){return s.isFoundDocument()?s.version:Ut.min()}class Zc extends Jl{constructor(e,r,o,l=[]){super(),this.key=e,this.value=r,this.precondition=o,this.fieldTransforms=l,this.type=0}}class uu extends Jl{constructor(e,r,o,l,h=[]){super(),this.key=e,this.data=r,this.fieldMask=o,this.precondition=l,this.fieldTransforms=h,this.type=1}}function Yp(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=s.data.field(r);e.set(r,o)}}),e}function Xl(s,e,r){const o=new Map;$t(s.length===r.length);for(let l=0;l<r.length;l++){const h=s[l],y=h.transform,D=e.data.field(h.field);o.set(h.field,yl(y,D,r[l]))}return o}function ec(s,e,r){const o=new Map;for(const l of s){const h=l.transform,y=r.data.field(l.field);o.set(l.field,Ba(h,y,e))}return o}class Lu extends Jl{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class ff extends Jl{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class Cy{constructor(e){this.count=e}}var _i,Mn;function pf(s){switch(s){default:return _t();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function gf(s){if(void 0===s)return cr("GRPC error has no .code"),v.UNKNOWN;switch(s){case _i.OK:return v.OK;case _i.CANCELLED:return v.CANCELLED;case _i.UNKNOWN:return v.UNKNOWN;case _i.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case _i.INTERNAL:return v.INTERNAL;case _i.UNAVAILABLE:return v.UNAVAILABLE;case _i.UNAUTHENTICATED:return v.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case _i.NOT_FOUND:return v.NOT_FOUND;case _i.ALREADY_EXISTS:return v.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return v.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case _i.ABORTED:return v.ABORTED;case _i.OUT_OF_RANGE:return v.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return v.UNIMPLEMENTED;case _i.DATA_LOSS:return v.DATA_LOSS;default:return _t()}}(Mn=_i||(_i={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class da{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o)for(const[l,h]of o)if(this.equalsFn(l,e))return h}has(e){return void 0!==this.get(e)}set(e,r){const o=this.mapKeyFn(e),l=this.inner[o];if(void 0===l)return this.inner[o]=[[e,r]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return void(l[h]=[e,r]);l.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return 1===o.length?delete this.inner[r]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(r,o)=>{for(const[l,h]of o)e(l,h)})}isEmpty(){return ll(this.inner)}size(){return this.innerSize}}class ei{constructor(e,r){this.comparator=e,this.root=r||Yi.EMPTY}insert(e,r){return new ei(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(e){let r=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(0===l)return r+o.left.size;l<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,o)=>(e(r,o),!1))}toString(){const e=[];return this.inorderTraversal((r,o)=>(e.push(`${r}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,r,o,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=r?o(e.key,r):1,r&&l&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,r,o,l,h){this.key=e,this.value=r,this.color=null!=o?o:Yi.RED,this.left=null!=l?l:Yi.EMPTY,this.right=null!=h?h:Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,o,l,h){return new Yi(null!=e?e:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,o){let l=this;const h=o(e,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(e,r,o),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let o,l=this;if(r(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(e,l.key)){if(l.right.isEmpty())return Yi.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(s,e,r,o,l){return this}insert(s,e,r){return new Yi(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ir{constructor(e){this.comparator=e,this.data=new ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,o)=>(e(r),!1))}forEachInRange(e,r){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;r(l.key)}}forEachWhile(e,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Yc(this.data.getIterator())}getIteratorFrom(e){return new Yc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(o=>{r=r.add(o)}),r}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const r=this.data.getIterator(),o=e.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=o.getNext().key;if(0!==this.comparator(l,h))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ir(this.comparator);return r.data=e,r}}class Yc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function br(s){return s.hasNext()?s.getNext():void 0}const Qp=new ei(at.comparator);function js(){return Qp}const Yd=new ei(at.comparator);function Qc(){return Yd}function tc(){return new da(s=>s.toString(),(s,e)=>s.isEqual(e))}const Jp=new ei(at.comparator),Xp=new Ir(at.comparator);function nr(...s){let e=Xp;for(const r of s)e=e.add(r);return e}const Qd=new Ir(At);function Jd(){return Qd}class Jc{constructor(e,r,o,l,h){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,r){const o=new Map;return o.set(e,Wo.createSynthesizedTargetChangeForCurrentChange(e,r)),new Jc(Ut.min(),o,Jd(),js(),nr())}}class Wo{constructor(e,r,o,l,h){this.resumeToken=e,this.current=r,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,r){return new Wo(gi.EMPTY_BYTE_STRING,r,nr(),nr(),nr())}}class vi{constructor(e,r,o,l){this.O=e,this.removedTargetIds=r,this.key=o,this.F=l}}class Xc{constructor(e,r){this.targetId=e,this.$=r}}class Xd{constructor(e,r,o=gi.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=r,this.resumeToken=o,this.cause=l}}class vl{constructor(){this.B=0,this.L=ed(),this.U=gi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=nr(),r=nr(),o=nr();return this.L.forEach((l,h)=>{switch(h){case 0:e=e.add(l);break;case 2:r=r.add(l);break;case 1:o=o.add(l);break;default:_t()}}),new Wo(this.U,this.q,e,r,o)}J(){this.K=!1,this.L=ed()}Y(e,r){this.K=!0,this.L=this.L.insert(e,r)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ps{constructor(e){this.nt=e,this.st=new Map,this.it=js(),this.rt=El(),this.ot=new Ir(At)}ut(e){for(const r of e.O)e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F);for(const r of e.removedTargetIds)this.ct(r,e.key,e.F)}ht(e){this.forEachTarget(e,r=>{const o=this.lt(r);switch(e.state){case 0:this.ft(r)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(r);break;case 3:this.ft(r)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(r)&&(this.dt(r),o.W(e.resumeToken));break;default:_t()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.st.forEach((o,l)=>{this.ft(l)&&r(l)})}_t(e){const r=e.targetId,o=e.$.count,l=this.wt(r);if(l){const h=l.target;if(Kl(h))if(0===o){const y=new at(h.path);this.ct(r,y,Rt.newNoDocument(y,Ut.min()))}else $t(1===o);else this.gt(r)!==o&&(this.dt(r),this.ot=this.ot.add(r))}}yt(e){const r=new Map;this.st.forEach((h,y)=>{const D=this.wt(y);if(D){if(h.current&&Kl(D.target)){const F=new at(D.target.path);null!==this.it.get(F)||this.It(y,F)||this.ct(y,F,Rt.newNoDocument(F,e))}h.j&&(r.set(y,h.H()),h.J())}});let o=nr();this.rt.forEach((h,y)=>{let D=!0;y.forEachWhile(F=>{const $=this.wt(F);return!$||2===$.purpose||(D=!1,!1)}),D&&(o=o.add(h))}),this.it.forEach((h,y)=>y.setReadTime(e));const l=new Jc(e,r,this.ot,this.it,o);return this.it=js(),this.rt=El(),this.ot=new Ir(At),l}at(e,r){if(!this.ft(e))return;const o=this.It(e,r.key)?2:0;this.lt(e).Y(r.key,o),this.it=this.it.insert(r.key,r),this.rt=this.rt.insert(r.key,this.Tt(r.key).add(e))}ct(e,r,o){if(!this.ft(e))return;const l=this.lt(e);this.It(e,r)?l.Y(r,1):l.X(r),this.rt=this.rt.insert(r,this.Tt(r).delete(e)),o&&(this.it=this.it.insert(r,o))}removeTarget(e){this.st.delete(e)}gt(e){const r=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let r=this.st.get(e);return r||(r=new vl,this.st.set(e,r)),r}Tt(e){let r=this.rt.get(e);return r||(r=new Ir(At),this.rt=this.rt.insert(e,r)),r}ft(e){const r=null!==this.wt(e);return r||Ze("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.st.get(e);return r&&r.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new vl),this.nt.getRemoteKeysForTarget(e).forEach(r=>{this.ct(e,r,null)})}It(e,r){return this.nt.getRemoteKeysForTarget(e).has(r)}}function El(){return new ei(at.comparator)}function ed(){return new ei(at.comparator)}const mf={asc:"ASCENDING",desc:"DESCENDING"},eg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yf{constructor(e,r){this.databaseId=e,this.N=r}}function nc(s,e){return s.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eh(s,e){return s.N?e.toBase64():e.toUint8Array()}function td(s,e){return nc(s,e.toTimestamp())}function Si(s){return $t(!!s),Ut.fromTimestamp(function(e){const r=wo(e);return new Pn(r.seconds,r.nanos)}(s))}function nd(s,e){return(r=s,new Bt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function _f(s){const e=Bt.fromString(s);return $t(Ei(e)),e}function rc(s,e){return nd(s.databaseId,e.path)}function zo(s,e){const r=_f(e);if(r.get(1)!==s.databaseId.projectId)throw new _(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new _(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new at(th(r))}function ic(s,e){return nd(s.databaseId,e)}function rd(s){const e=_f(s);return 4===e.length?Bt.emptyPath():th(e)}function Vu(s){return new Bt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function th(s){return $t(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function id(s,e,r){return{name:rc(s,e),fields:r.value.mapValue.fields}}function sc(s,e,r){const o=zo(s,e.name),l=Si(e.updateTime),h=new Dt({mapValue:{fields:e.fields}}),y=Rt.newFoundDocument(o,l,h);return r&&y.setHasCommittedMutations(),r?y.setHasCommittedMutations():y}function ti(s,e){let r;if(e instanceof Zc)r={update:id(s,e.key,e.value)};else if(e instanceof Lu)r={delete:rc(s,e.key)};else if(e instanceof uu)r={update:id(s,e.key,e.data),updateMask:wf(e.fieldMask)};else{if(!(e instanceof ff))return _t();r={verify:rc(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(o=>function(l,h){const y=h.transform;if(y instanceof _l)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof ja)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof ku)return{fieldPath:h.field.canonicalString(),increment:y.k};throw _t()}(0,o))),e.precondition.isNone||(r.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:td(s,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:_t()),r;var l}function Uu(s,e){const r=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?yi.updateTime(Si(l.updateTime)):void 0!==l.exists?yi.exists(l.exists):yi.none():yi.none(),o=e.updateTransforms?e.updateTransforms.map(l=>function(h,y){let D=null;"setToServerValue"in y?($t("REQUEST_TIME"===y.setToServerValue),D=new _l):"appendMissingElements"in y?D=new Pu(y.appendMissingElements.values||[]):"removeAllFromArray"in y?D=new ja(y.removeAllFromArray.values||[]):"increment"in y?D=new ku(h,y.increment):_t();const F=qi.fromServerFormat(y.fieldPath);return new Ql(F,D)}(s,l)):[];var l;if(e.update){const l=zo(s,e.update.name),h=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new Eo((e.updateMask.fieldPaths||[]).map($=>qi.fromServerFormat($)));return new uu(l,h,y,r,o)}return new Zc(l,h,r,o)}if(e.delete){const l=zo(s,e.delete);return new Lu(l,r)}if(e.verify){const l=zo(s,e.verify);return new ff(l,r)}return _t()}function Ef(s,e){return{documents:[ic(s,e.path)]}}function sd(s,e){const r={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(r.parent=ic(s,o),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=ic(s,o.popLast()),r.structuredQuery.from=[{collectionId:o.lastSegment()}]);const l=function(F){if(0===F.length)return;const $=F.map(X=>function(le){if("=="===le.op){if(S(le.value))return{unaryFilter:{field:cu(le.field),op:"IS_NAN"}};if(zl(le.value))return{unaryFilter:{field:cu(le.field),op:"IS_NULL"}}}else if("!="===le.op){if(S(le.value))return{unaryFilter:{field:cu(le.field),op:"IS_NOT_NAN"}};if(zl(le.value))return{unaryFilter:{field:cu(le.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(le.field),op:lu(le.op),value:le.value}}}(X));return 1===$.length?$[0]:{compositeFilter:{op:"AND",filters:$}}}(e.filters);l&&(r.structuredQuery.where=l);const h=function(F){if(0!==F.length)return F.map($=>{return{field:cu((X=$).field),direction:ng(X.dir)};var X})}(e.orderBy);h&&(r.structuredQuery.orderBy=h);const y=($=e.limit,s.N||Ti($)?$:{value:$});var $,D,F;return null!==y&&(r.structuredQuery.limit=y),e.startAt&&(r.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(r.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),r}function od(s){let e=rd(s.parent);const r=s.structuredQuery,o=r.from?r.from.length:0;let l=null;if(o>0){$t(1===o);const X=r.from[0];X.allDescendants?l=X.collectionId:e=e.child(X.collectionId)}let h=[];r.where&&(h=ud(r.where));let y=[];r.orderBy&&(y=r.orderBy.map(X=>{return new ca(Bu((le=X).field),function(xe){switch(xe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(le.direction));var le}));let D=null;r.limit&&(D=function(X){let le;return le="object"==typeof X?X.value:X,Ti(le)?null:le}(r.limit));let F=null;var X;r.startAt&&(F=new so((X=r.startAt).values||[],!!X.before));let $=null;return r.endAt&&($=function(X){return new so(X.values||[],!X.before)}(r.endAt)),Wd(e,l,y,h,D,"F",F,$)}function ud(s){return s?void 0!==s.unaryFilter?[ig(s)]:void 0!==s.fieldFilter?[rg(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>ud(e)).reduce((e,r)=>e.concat(r)):_t():[]}function ng(s){return mf[s]}function lu(s){return eg[s]}function cu(s){return{fieldPath:s.canonicalString()}}function Bu(s){return qi.fromServerFormat(s.fieldPath)}function rg(s){return mi.create(Bu(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(s.fieldFilter.op),s.fieldFilter.value)}function ig(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Bu(s.unaryFilter.field);return mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Bu(s.unaryFilter.field);return mi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bu(s.unaryFilter.field);return mi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Bu(s.unaryFilter.field);return mi.create(l,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function wf(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Ei(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function xr(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=sg(e)),e=If(s.get(r),e);return sg(e)}function If(s,e){let r=e;const o=s.length;for(let l=0;l<o;l++){const h=s.charAt(l);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function sg(s){return s+"\x01\x01"}function xi(s){const e=s.length;if($t(e>=2),2===e)return $t("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Bt.emptyPath();const r=e-2,o=[];let l="";for(let h=0;h<e;){const y=s.indexOf("\x01",h);switch((y<0||y>r)&&_t(),s.charAt(y+1)){case"\x01":const D=s.substring(h,y);let F;0===l.length?F=D:(l+=D,F=l,l=""),o.push(F);break;case"\x10":l+=s.substring(h,y),l+="\0";break;case"\x11":l+=s.substring(h,y+1);break;default:_t()}h=y+2}return new Bt(o)}const oc=["userId","batchId"];function $s(s,e){return[s,xr(e)]}function ac(s,e,r){return[s,xr(e),r]}const rh={},ih=["prefixPath","collectionGroup","readTime","documentId"],bf=["prefixPath","collectionGroup","documentId"],uc=["collectionGroup","readTime","prefixPath","documentId"],Cf=["canonicalId","targetId"],Df=["targetId","path"],g=["path","targetId"],d=["collectionId","parent"],f=["indexId","uid"],E=["uid","sequenceNumber"],P=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],j=["indexId","uid","orderedDocumentKey"],ce=["userId","collectionPath","documentId"],Se=["userId","collectionPath","largestBatchId"],st=["userId","collectionGroup","largestBatchId"],Je=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],St=[...Je,"documentOverlays"],Nt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vn=[...Nt,"indexConfiguration","indexState","indexEntries"],Mi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ha{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Le((o,l)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,l)},this.catchCallback=h=>{this.wrapFailure(r,h).next(o,l)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Le?r:Le.resolve(r)}catch(r){return Le.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Le.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Le.reject(r)}static resolve(e){return new Le((r,o)=>{r(e)})}static reject(e){return new Le((r,o)=>{o(e)})}static waitFor(e){return new Le((r,o)=>{let l=0,h=0,y=!1;e.forEach(D=>{++l,D.next(()=>{++h,y&&h===l&&r()},F=>o(F))}),y=!0,h===l&&r()})}static or(e){let r=Le.resolve(!1);for(const o of e)r=r.next(l=>l?Le.resolve(l):o());return r}static forEach(e,r){const o=[];return e.forEach((l,h)=>{o.push(r.call(this,l,h))}),this.waitFor(o)}}class du{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.At=new M,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{r.error?this.At.reject(new ju(e,r.error)):this.At.resolve()},this.transaction.onerror=o=>{const l=cd(o.target.error);this.At.reject(new ju(e,l))}}static open(e,r,o,l){try{return new du(r,e.transaction(l,o))}catch(h){throw new ju(r,h)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new sh(r)}}class ao{constructor(e,r,o){this.name=e,this.version=r,this.bt=o,12.2===ao.Vt((0,gt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),ha(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,gt.hl)())return!1;if(ao.St())return!0;const e=(0,gt.z$)(),r=ao.Vt(e),o=0<r&&r<10,l=ao.Dt(e),h=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,r){return e.store(r)}static Vt(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const r=e.match(/Android ([\d.]+)/i),o=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var r=this;return(0,Ee.Z)(function*(){return r.db||(Ze("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,l)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=y=>{o(y.target.result)},h.onblocked=()=>{l(new ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=y=>{const D=y.target.error;l("VersionError"===D.name?new _(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new _(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new ju(e,D))},h.onupgradeneeded=y=>{Ze("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',y.oldVersion),r.bt.kt(y.target.result,h.transaction,y.oldVersion,r.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Mt&&(r.db.onversionchange=o=>r.Mt(o)),r.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,o,l){var h=this;return(0,Ee.Z)(function*(){const y="readonly"===r;let D=0;for(;;){++D;try{h.db=yield h.Nt(e);const F=du.open(h.db,e,y?"readonly":"readwrite",o),$=l(F).next(X=>(F.Pt(),X)).catch(X=>(F.abort(X),Le.reject(X))).toPromise();return $.catch(()=>{}),yield F.Rt,$}catch(F){const $="FirebaseError"!==F.name&&D<3;if(Ze("SimpleDb","Transaction failed with error:",F.message,"Retrying:",$),h.close(),!$)return Promise.reject(F)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ld{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ha(this.Ft.delete())}}class ju extends _{constructor(e,r){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function hu(s){return"IndexedDbTransactionError"===s.name}class sh{constructor(e){this.store=e}put(e,r){let o;return void 0!==r?(Ze("SimpleDb","PUT",this.store.name,e,r),o=this.store.put(r,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ha(o)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),ha(this.store.add(e))}get(e){return ha(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ze("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),ha(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),ha(this.store.count())}qt(e,r){const o=this.options(e,r);if(o.index||"function"!=typeof this.store.getAll){const l=this.cursor(o),h=[];return this.Kt(l,(y,D)=>{h.push(D)}).next(()=>h)}{const l=this.store.getAll(o.range);return new Le((h,y)=>{l.onerror=D=>{y(D.target.error)},l.onsuccess=D=>{h(D.target.result)}})}}Gt(e,r){const o=this.store.getAll(e,null===r?void 0:r);return new Le((l,h)=>{o.onerror=y=>{h(y.target.error)},o.onsuccess=y=>{l(y.target.result)}})}Qt(e,r){Ze("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,r);o.jt=!1;const l=this.cursor(o);return this.Kt(l,(h,y,D)=>D.delete())}Wt(e,r){let o;r?o=e:(o={},r=e);const l=this.cursor(o);return this.Kt(l,r)}zt(e){const r=this.cursor({});return new Le((o,l)=>{r.onerror=h=>{const y=cd(h.target.error);l(y)},r.onsuccess=h=>{const y=h.target.result;y?e(y.primaryKey,y.value).next(D=>{D?y.continue():o()}):o()}})}Kt(e,r){const o=[];return new Le((l,h)=>{e.onerror=y=>{h(y.target.error)},e.onsuccess=y=>{const D=y.target.result;if(!D)return void l();const F=new ld(D),$=r(D.primaryKey,D.value,F);if($ instanceof Le){const X=$.catch(le=>(F.done(),Le.reject(le)));o.push(X)}F.isDone?l():null===F.Lt?D.continue():D.continue(F.Lt)}}).next(()=>Le.waitFor(o))}options(e,r){let o;return void 0!==e&&("string"==typeof e?o=e:r=e),{index:o,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,r):o.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ha(s){return new Le((e,r)=>{s.onsuccess=o=>{e(o.target.result)},s.onerror=o=>{const l=cd(o.target.error);r(l)}})}let Ga=!1;function cd(s){const e=ao.Vt((0,gt.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const o=new _("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ga||(Ga=!0,setTimeout(()=>{throw o},0)),o}}return s}class lc extends Ha{constructor(e,r){super(),this.Ht=e,this.currentSequenceNumber=r}}function Qi(s,e){const r=b(s);return ao.xt(r.Ht,e)}class dd{constructor(e,r,o,l){this.batchId=e,this.localWriteTime=r,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,r){const o=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(e.key)&&Do(h,e,o[l])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&Fu(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&Fu(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const o=e.get(r.key),l=o;this.applyToLocalView(l),o.isValidDocument()||l.convertToNoDocument(Ut.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),nr())}isEqual(e){return this.batchId===e.batchId&&qr(this.mutations,e.mutations,(r,o)=>Zd(r,o))&&qr(this.baseMutations,e.baseMutations,(r,o)=>Zd(r,o))}}class og{constructor(e,r,o,l){this.batch=e,this.commitVersion=r,this.mutationResults=o,this.docVersions=l}static from(e,r,o){$t(e.mutations.length===o.length);let l=Jp;const h=e.mutations;for(let y=0;y<h.length;y++)l=l.insert(h[y].key,o[y].version);return new og(e,r,o,l)}}class Tf{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $u{constructor(e,r,o,l,h=Ut.min(),y=Ut.min(),D=gi.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=D}withSequenceNumber(e){return new $u(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ag{constructor(e){this.Jt=e}}function lg(s,e){const r=e.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:cc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:rc(l=s.Jt,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:nc(l,h.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:fu(e.version)};else{if(!e.isUnknownDocument())return _t();o.unknownDocument={path:r.path.toArray(),version:fu(e.version)}}var l,h;return o}function cc(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function fu(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wl(s){const e=new Pn(s.seconds,s.nanoseconds);return Ut.fromTimestamp(e)}function Il(s,e){const r=(e.baseMutations||[]).map(h=>Uu(s.Jt,h));for(let h=0;h<e.mutations.length-1;++h){const y=e.mutations[h];h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(y.updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h)}const o=e.mutations.map(h=>Uu(s.Jt,h)),l=Pn.fromMillis(e.localWriteTimeMs);return new dd(e.batchId,l,r,o)}function hd(s){const e=wl(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?wl(s.lastLimboFreeSnapshotVersion):Ut.min();let o;var l;return void 0!==s.query.documents?($t(1===(l=s.query).documents.length),o=oo(Nu(rd(l.documents[0])))):o=oo(od(s.query)),new $u(o,s.targetId,0,s.lastListenSequenceNumber,e,r,gi.fromBase64String(s.resumeToken))}function Af(s,e){const r=fu(e.snapshotVersion),o=fu(e.lastLimboFreeSnapshotVersion);let l;l=Kl(e.target)?Ef(s.Jt,e.target):sd(s.Jt,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:io(e.target),readTime:r,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:l}}function dc(s){const e=od({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?zd(e,e.limit,"L"):e}function cg(s,e){return new Tf(e.largestBatchId,Uu(s.Jt,e.overlayMutation))}function dg(s,e){const r=e.path.lastSegment();return[s,xr(e.path.popLast()),r]}class FE{getBundleMetadata(e,r){return Dy(e).get(r).next(o=>{if(o)return{id:(l=o).bundleId,createTime:wl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,r){return Dy(e).put({bundleId:(o=r).id,createTime:fu(Si(o.createTime)),version:o.version});var o}getNamedQuery(e,r){return hg(e).get(r).next(o=>{if(o)return{name:(l=o).name,query:dc(l.bundledQuery),readTime:wl(l.readTime)};var l})}saveNamedQuery(e,r){return hg(e).put({name:(o=r).name,readTime:fu(Si(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Dy(s){return Qi(s,"bundles")}function hg(s){return Qi(s,"namedQueries")}class oh{constructor(e,r){this.M=e,this.userId=r}static Yt(e,r){return new oh(e,r.uid||"")}getOverlay(e,r){return fd(e).get(dg(this.userId,r)).next(o=>o?cg(this.M,o):null)}saveOverlays(e,r,o){const l=[];return o.forEach((h,y)=>{const D=new Tf(r,y);l.push(this.Xt(e,D))}),Le.waitFor(l)}removeOverlaysForBatchId(e,r,o){const l=new Set;r.forEach(y=>l.add(xr(y.getCollectionPath())));const h=[];return l.forEach(y=>{const D=IDBKeyRange.bound([this.userId,y,o],[this.userId,y,o+1],!1,!0);h.push(fd(e).Qt("collectionPathOverlayIndex",D))}),Le.waitFor(h)}getOverlaysForCollection(e,r,o){const l=tc(),h=xr(r),y=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return fd(e).qt("collectionPathOverlayIndex",y).next(D=>{for(const F of D){const $=cg(this.M,F);l.set($.getKey(),$)}return l})}getOverlaysForCollectionGroup(e,r,o,l){const h=tc();let y;const D=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return fd(e).Wt({index:"collectionGroupOverlayIndex",range:D},(F,$,X)=>{const le=cg(this.M,$);h.size()<l||le.largestBatchId===y?(h.set(le.getKey(),le),y=le.largestBatchId):X.done()}).next(()=>h)}Xt(e,r){return fd(e).put(function(o,l,h){const[y,D,F]=dg(l,h.mutation.key);return{userId:l,collectionPath:D,documentId:F,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:ti(o.Jt,h.mutation)}}(this.M,this.userId,r))}}function fd(s){return Qi(s,"documentOverlays")}class pd{constructor(){}Zt(e,r){this.te(e,r),r.ee()}te(e,r){if("nullValue"in e)this.ne(r,5);else if("booleanValue"in e)this.ne(r,10),r.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(r,15),r.se(ar(e.integerValue));else if("doubleValue"in e){const o=ar(e.doubleValue);isNaN(o)?this.ne(r,13):(this.ne(r,15),Is(o)?r.se(0):r.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(r,20),"string"==typeof o?r.ie(o):(r.ie(`${o.seconds||""}`),r.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,r),this.oe(r);else if("bytesValue"in e)this.ne(r,30),r.ue(ua(e.bytesValue)),this.oe(r);else if("referenceValue"in e)this.ae(e.referenceValue,r);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(r,45),r.se(o.latitude||0),r.se(o.longitude||0)}else"mapValue"in e?ne(e)?this.ne(r,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,r),this.oe(r)):"arrayValue"in e?(this.he(e.arrayValue,r),this.oe(r)):_t()}re(e,r){this.ne(r,25),this.le(e,r)}le(e,r){r.ie(e)}ce(e,r){const o=e.fields||{};this.ne(r,55);for(const l of Object.keys(o))this.re(l,r),this.te(o[l],r)}he(e,r){const o=e.values||[];this.ne(r,50);for(const l of o)this.te(l,r)}ae(e,r){this.ne(r,37),at.fromName(e).path.forEach(o=>{this.ne(r,60),this.le(o,r)})}ne(e,r){e.se(r)}oe(e){e.se(2)}}function Ty(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Ay(s){const e=64-function(r){let o=0;for(let l=0;l<8;++l){const h=Ty(255&r[l]);if(o+=h,8!==h)break}return o}(s);return Math.ceil(e/8)}pd.fe=new pd;class Sy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const r=e[Symbol.iterator]();let o=r.next();for(;!o.done;)this._e(o.value),o=r.next();this.we()}me(e){const r=e[Symbol.iterator]();let o=r.next();for(;!o.done;)this.ge(o.value),o=r.next();this.ye()}pe(e){for(const r of e){const o=r.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(r<"\ud800"||"\udbff"<r)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const l=r.codePointAt(0);this._e(240|l>>>18),this._e(128|63&l>>>12),this._e(128|63&l>>>6),this._e(128|63&l)}}this.we()}Ie(e){for(const r of e){const o=r.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const l=r.codePointAt(0);this.ge(240|l>>>18),this.ge(128|63&l>>>12),this.ge(128|63&l>>>6),this.ge(128|63&l)}}this.ye()}Te(e){const r=this.Ee(e),o=Ay(r);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let l=r.length-o;l<r.length;++l)this.buffer[this.position++]=255&r[l]}Re(e){const r=this.Ee(e),o=Ay(r);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let l=r.length-o;l<r.length;++l)this.buffer[this.position++]=~(255&r[l])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const r=function(l){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,l,!1),new Uint8Array(h.buffer)}(e),o=0!=(128&r[0]);r[0]^=o?255:128;for(let l=1;l<r.length;++l)r[l]^=o?255:0;return r}_e(e){const r=255&e;0===r?(this.be(0),this.be(255)):255===r?(this.be(255),this.be(0)):this.be(r)}ge(e){const r=255&e;0===r?(this.ve(0),this.ve(255)):255===r?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const r=e+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const l=new Uint8Array(o);l.set(this.buffer),this.buffer=l}}class LE{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class VE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class uo{constructor(){this.De=new Sy,this.Ce=new LE(this.De),this.xe=new VE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class bl{constructor(e,r,o,l){this.indexId=e,this.documentKey=r,this.arrayValue=o,this.directionalValue=l}ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new bl(this.indexId,this.documentKey,this.arrayValue,o)}}function Cl(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=xy(s.arrayValue,e.arrayValue),0!==r?r:(r=xy(s.directionalValue,e.directionalValue),0!==r?r:at.comparator(s.documentKey,e.documentKey)))}function xy(s,e){for(let r=0;r<s.length&&r<e.length;++r){const o=s[r]-e[r];if(0!==o)return o}return s.length-e.length}class UE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const r of e.filters){const o=r;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const r=Ki(e);if(void 0!==r&&!this.Be(r))return!1;const o=Sr(e);let l=0,h=0;for(;l<o.length&&this.Be(o[l]);++l);if(l===o.length)return!0;if(void 0!==this.Fe){const y=o[l];if(!this.Le(this.Fe,y)||!this.Ue(this.Me[h++],y))return!1;++l}for(;l<o.length;++l){const y=o[l];if(h>=this.Me.length||!this.Ue(this.Me[h++],y))return!1}return!0}Be(e){for(const r of this.Oe)if(this.Le(r,e))return!0;return!1}Le(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class BE{constructor(){this.qe=new fg}addToCollectionParentIndex(e,r){return this.qe.add(r),Le.resolve()}getCollectionParents(e,r){return Le.resolve(this.qe.getEntries(r))}addFieldIndex(e,r){return Le.resolve()}deleteFieldIndex(e,r){return Le.resolve()}getDocumentsMatchingTarget(e,r){return Le.resolve(null)}getFieldIndex(e,r){return Le.resolve(null)}getFieldIndexes(e,r){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}updateCollectionGroup(e,r,o){return Le.resolve()}updateIndexEntries(e,r){return Le.resolve()}}class fg{constructor(){this.index={}}add(e){const r=e.lastSegment(),o=e.popLast(),l=this.index[r]||new Ir(Bt.comparator),h=!l.has(o);return this.index[r]=l.add(o),h}has(e){const r=e.lastSegment(),o=e.popLast(),l=this.index[r];return l&&l.has(o)}getEntries(e){return(this.index[e]||new Ir(Bt.comparator)).toArray()}}const hc=new Uint8Array(0);class jE{constructor(e,r){this.user=e,this.databaseId=r,this.Ke=new fg,this.Ge=new da(o=>io(o),(o,l)=>ql(o,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Ke.has(r)){const o=r.lastSegment(),l=r.popLast();e.addOnCommittedListener(()=>{this.Ke.add(r)});const h={collectionId:o,parent:xr(l)};return My(e).put(h)}return Le.resolve()}getCollectionParents(e,r){const o=[],l=IDBKeyRange.bound([r,""],[jo(r),""],!1,!0);return My(e).qt(l).next(h=>{for(const y of h){if(y.collectionId!==r)break;o.push(xi(y.parent))}return o})}addFieldIndex(e,r){const o=gn(e),l={indexId:(h=r).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;return delete l.indexId,o.add(l).next()}deleteFieldIndex(e,r){const o=gn(e),l=uh(e),h=ah(e);return o.delete(r.indexId).next(()=>l.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const o=ah(e);let l=!0;const h=new Map;return Le.forEach(this.Qe(r),y=>this.getFieldIndex(e,y).next(D=>{l&&(l=!!D),h.set(y,D)})).next(()=>{if(l){let y=nr();const D=[];return Le.forEach(h,(F,$)=>{var X;Ze("IndexedDbIndexManager",`Using index ${X=F,`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map(rr=>`${rr.fieldPath}:${rr.kind}`).join(",")}`} to execute ${io(r)}`);const le=function(rr,On){const Wn=Ki(On);if(void 0===Wn)return null;for(const hr of Ru(rr,Wn.fieldPath))switch(hr.op){case"array-contains-any":return hr.value.arrayValue.values||[];case"array-contains":return[hr.value]}return null}($,F),xe=function(rr,On){const Wn=new Map;for(const hr of Sr(On))for(const Ts of Ru(rr,hr.fieldPath))switch(Ts.op){case"==":case"in":Wn.set(hr.fieldPath.canonicalString(),Ts.value);break;case"not-in":case"!=":return Wn.set(hr.fieldPath.canonicalString(),Ts.value),Array.from(Wn.values())}return null}($,F),Ke=function(rr,On){const Wn=[];let hr=!0;for(const Ts of Sr(On)){const Lc=0===Ts.kind?La(rr,Ts.fieldPath,rr.startAt):bo(rr,Ts.fieldPath,rr.startAt);if(!Lc.value)return null;Wn.push(Lc.value),hr&&(hr=Lc.inclusive)}return new so(Wn,hr)}($,F),Ye=function(rr,On){const Wn=[];let hr=!0;for(const Ts of Sr(On)){const Lc=0===Ts.kind?bo(rr,Ts.fieldPath,rr.endAt):La(rr,Ts.fieldPath,rr.endAt);if(!Lc.value)return null;Wn.push(Lc.value),hr&&(hr=Lc.inclusive)}return new so(Wn,hr)}($,F),pt=this.je(F,$,Ke),Xt=this.je(F,$,Ye),dr=this.We(F,$,xe),Kr=this.ze(F.indexId,le,pt,!!Ke&&Ke.inclusive,Xt,!!Ye&&Ye.inclusive,dr);return Le.forEach(Kr,rr=>o.Gt(rr,r.limit).next(On=>{On.forEach(Wn=>{const hr=at.fromSegments(Wn.documentKey);y.has(hr)||(y=y.add(hr),D.push(hr))})}))}).next(()=>D)}return Le.resolve(null)})}Qe(e){let r=this.Ge.get(e);return r||(r=[e],this.Ge.set(e,r),r)}ze(e,r,o,l,h,y,D){const F=(null!=r?r.length:1)*Math.max(null!=o?o.length:1,null!=h?h.length:1),$=F/(null!=r?r.length:1),X=[];for(let le=0;le<F;++le){const xe=r?this.He(r[le/$]):hc,Ke=o?this.Je(e,xe,o[le%$],l):this.Ye(e),Ye=h?this.Xe(e,xe,h[le%$],y):this.Ye(e+1);X.push(...this.createRange(Ke,Ye,D.map(pt=>this.Je(e,xe,pt,!0))))}return X}Je(e,r,o,l){const h=new bl(e,at.empty(),r,o);return l?h:h.ke()}Xe(e,r,o,l){const h=new bl(e,at.empty(),r,o);return l?h.ke():h}Ye(e){return new bl(e,at.empty(),hc,hc)}getFieldIndex(e,r){const o=new UE(r),l=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,l).next(h=>{const y=h.filter(D=>o.$e(D));return y.sort((D,F)=>F.fields.length-D.fields.length),y.length>0?y[0]:null})}Ze(e,r){const o=new uo;for(const l of Sr(e)){const h=r.data.field(l.fieldPath);if(null==h)return null;const y=o.Ne(l.kind);pd.fe.Zt(h,y)}return o.Se()}He(e){const r=new uo;return pd.fe.Zt(e,r.Ne(0)),r.Se()}tn(e,r){const o=new uo;return pd.fe.Zt(bs(this.databaseId,r),o.Ne(function(l){const h=Sr(l);return 0===h.length?0:h[h.length-1].kind}(e))),o.Se()}We(e,r,o){if(null===o)return[];let l=[];l.push(new uo);let h=0;for(const y of Sr(e)){const D=o[h++];for(const F of l)if(this.en(r,y.fieldPath)&&ru(D))l=this.nn(l,y,D);else{const $=F.Ne(y.kind);pd.fe.Zt(D,$)}}return this.sn(l)}je(e,r,o){return null==o?null:this.We(e,r,o.position)}sn(e){const r=[];for(let o=0;o<e.length;++o)r[o]=e[o].Se();return r}nn(e,r,o){const l=[...e],h=[];for(const y of o.arrayValue.values||[])for(const D of l){const F=new uo;F.seed(D.Se()),pd.fe.Zt(y,F.Ne(r.kind)),h.push(F)}return h}en(e,r){return!!e.filters.find(o=>o instanceof mi&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,r){const o=gn(e),l=uh(e);return(r?o.qt("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.qt()).next(h=>{const y=[];return Le.forEach(h,D=>l.get([D.indexId,this.uid]).next(F=>{y.push(function($,X){const le=X?new Go(X.sequenceNumber,new Zi(wl(X.readTime),new at(xi(X.documentKey)),X.largestBatchId)):Go.empty(),xe=$.fields.map(([Ke,Ye])=>new Ho(qi.fromServerFormat(Ke),Ye));return new hn($.indexId,$.collectionGroup,xe,le)}(D,F))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((o,l)=>{const h=o.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==h?h:At(o.collectionGroup,l.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,o){const l=gn(e),h=uh(e);return this.rn(e).next(y=>l.qt("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(D=>Le.forEach(D,F=>{return h.put({indexId:F.indexId,uid:this.user.uid||"",sequenceNumber:y,readTime:fu((xe=o).readTime),documentKey:xr(xe.documentKey.path),largestBatchId:xe.largestBatchId});var xe})))}updateIndexEntries(e,r){const o=new Map;return Le.forEach(r,(l,h)=>{const y=o.get(l.collectionGroup);return(y?Le.resolve(y):this.getFieldIndexes(e,l.collectionGroup)).next(D=>(o.set(l.collectionGroup,D),Le.forEach(D,F=>this.on(e,l,F).next($=>{const X=this.un(h,F);return $.isEqual(X)?Le.resolve():this.an(e,h,F,$,X)}))))})}cn(e,r,o,l){return ah(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.tn(o,r.key),documentKey:r.key.path.toArray()})}hn(e,r,o,l){return ah(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.tn(o,r.key),r.key.path.toArray()])}on(e,r,o){const l=ah(e);let h=new Ir(Cl);return l.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,r)])},(y,D)=>{h=h.add(new bl(o.indexId,r,D.arrayValue,D.directionalValue))}).next(()=>h)}un(e,r){let o=new Ir(Cl);const l=this.Ze(r,e);if(null==l)return o;const h=Ki(r);if(null!=h){const y=e.data.field(h.fieldPath);if(ru(y))for(const D of y.arrayValue.values||[])o=o.add(new bl(r.indexId,e.key,this.He(D),l))}else o=o.add(new bl(r.indexId,e.key,hc,l));return o}an(e,r,o,l,h){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const y=[];return function(D,F,$,X,le){const xe=D.getIterator(),Ke=F.getIterator();let Ye=br(xe),pt=br(Ke);for(;Ye||pt;){let Xt=!1,dr=!1;if(Ye&&pt){const Kr=$(Ye,pt);Kr<0?dr=!0:Kr>0&&(Xt=!0)}else null!=Ye?dr=!0:Xt=!0;Xt?(X(pt),pt=br(Ke)):dr?(le(Ye),Ye=br(xe)):(Ye=br(xe),pt=br(Ke))}}(l,h,Cl,D=>{y.push(this.cn(e,r,o,D))},D=>{y.push(this.hn(e,r,o,D))}),Le.waitFor(y)}rn(e){let r=1;return uh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,l,h)=>{h.done(),r=l.sequenceNumber+1}).next(()=>r)}createRange(e,r,o){o=o.sort((y,D)=>Cl(y,D)).filter((y,D,F)=>!D||0!==Cl(y,F[D-1]));const l=[];l.push(e);for(const y of o){const D=Cl(y,e),F=Cl(y,r);if(0===D)l[0]=e.ke();else if(D>0&&F<0)l.push(y),l.push(y.ke());else if(F>0)break}l.push(r);const h=[];for(let y=0;y<l.length;y+=2)h.push(IDBKeyRange.bound([l[y].indexId,this.uid,l[y].arrayValue,l[y].directionalValue,hc,[]],[l[y+1].indexId,this.uid,l[y+1].arrayValue,l[y+1].directionalValue,hc,[]]));return h}}function My(s){return Qi(s,"collectionParents")}function ah(s){return Qi(s,"indexEntries")}function gn(s){return Qi(s,"indexConfiguration")}function uh(s){return Qi(s,"indexState")}const pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,r,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lh(s,e,r){const o=s.store("mutations"),l=s.store("documentMutations"),h=[],y=IDBKeyRange.only(r.batchId);let D=0;const F=o.Wt({range:y},(X,le,xe)=>(D++,xe.delete()));h.push(F.next(()=>{$t(1===D)}));const $=[];for(const X of r.mutations){const le=ac(e,X.key.path,r.batchId);h.push(l.delete(le)),$.push(X.key)}return Le.waitFor(h).next(()=>$)}function To(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw _t();e=s.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class Sf{constructor(e,r,o,l){this.userId=e,this.M=r,this.indexManager=o,this.referenceDelegate=l,this.ln={}}static Yt(e,r,o,l){$t(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Sf(h,r,o,l)}checkEmpty(e){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).Wt({index:"userMutationsIndex",range:o},(l,h,y)=>{r=!1,y.done()}).next(()=>r)}addMutationBatch(e,r,o,l){const h=Ao(e),y=pu(e);return y.add({}).next(D=>{$t("number"==typeof D);const F=new dd(D,r,o,l),$=function(xe,Ke,Ye){const pt=Ye.baseMutations.map(dr=>ti(xe.Jt,dr)),Xt=Ye.mutations.map(dr=>ti(xe.Jt,dr));return{userId:Ke,batchId:Ye.batchId,localWriteTimeMs:Ye.localWriteTime.toMillis(),baseMutations:pt,mutations:Xt}}(this.M,this.userId,F),X=[];let le=new Ir((xe,Ke)=>At(xe.canonicalString(),Ke.canonicalString()));for(const xe of l){const Ke=ac(this.userId,xe.key.path,D);le=le.add(xe.key.path.popLast()),X.push(y.put($)),X.push(h.put(Ke,rh))}return le.forEach(xe=>{X.push(this.indexManager.addToCollectionParentIndex(e,xe))}),e.addOnCommittedListener(()=>{this.ln[D]=F.keys()}),Le.waitFor(X).next(()=>F)})}lookupMutationBatch(e,r){return pu(e).get(r).next(o=>o?($t(o.userId===this.userId),Il(this.M,o)):null)}fn(e,r){return this.ln[r]?Le.resolve(this.ln[r]):this.lookupMutationBatch(e,r).next(o=>{if(o){const l=o.keys();return this.ln[r]=l,l}return null})}getNextMutationBatchAfterBatchId(e,r){const o=r+1,l=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return pu(e).Wt({index:"userMutationsIndex",range:l},(y,D,F)=>{D.userId===this.userId&&($t(D.batchId>=o),h=Il(this.M,D)),F.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return pu(e).Wt({index:"userMutationsIndex",range:r,reverse:!0},(l,h,y)=>{o=h.batchId,y.done()}).next(()=>o)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).qt("userMutationsIndex",r).next(o=>o.map(l=>Il(this.M,l)))}getAllMutationBatchesAffectingDocumentKey(e,r){const o=$s(this.userId,r.path),l=IDBKeyRange.lowerBound(o),h=[];return Ao(e).Wt({range:l},(y,D,F)=>{const[$,X,le]=y,xe=xi(X);if($===this.userId&&r.path.isEqual(xe))return pu(e).get(le).next(Ke=>{if(!Ke)throw _t();$t(Ke.userId===this.userId),h.push(Il(this.M,Ke))});F.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Ir(At);const l=[];return r.forEach(h=>{const y=$s(this.userId,h.path),D=IDBKeyRange.lowerBound(y),F=Ao(e).Wt({range:D},($,X,le)=>{const[xe,Ke,Ye]=$,pt=xi(Ke);xe===this.userId&&h.path.isEqual(pt)?o=o.add(Ye):le.done()});l.push(F)}),Le.waitFor(l).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,l=o.length+1,h=$s(this.userId,o),y=IDBKeyRange.lowerBound(h);let D=new Ir(At);return Ao(e).Wt({range:y},(F,$,X)=>{const[le,xe,Ke]=F,Ye=xi(xe);le===this.userId&&o.isPrefixOf(Ye)?Ye.length===l&&(D=D.add(Ke)):X.done()}).next(()=>this.dn(e,D))}dn(e,r){const o=[],l=[];return r.forEach(h=>{l.push(pu(e).get(h).next(y=>{if(null===y)throw _t();$t(y.userId===this.userId),o.push(Il(this.M,y))}))}),Le.waitFor(l).next(()=>o)}removeMutationBatch(e,r){return lh(e.Ht,this.userId,r).next(o=>(e.addOnCommittedListener(()=>{this._n(r.batchId)}),Le.forEach(o,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Le.resolve();const o=IDBKeyRange.lowerBound([this.userId]),l=[];return Ao(e).Wt({range:o},(h,y,D)=>{if(h[0]===this.userId){const F=xi(h[1]);l.push(F)}else D.done()}).next(()=>{$t(0===l.length)})})}containsKey(e,r){return Ry(e,this.userId,r)}wn(e){return xf(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ry(s,e,r){const o=$s(e,r.path),l=o[1],h=IDBKeyRange.lowerBound(o);let y=!1;return Ao(s).Wt({range:h,jt:!0},(D,F,$)=>{const[X,le,xe]=D;X===e&&le===l&&(y=!0),$.done()}).next(()=>y)}function pu(s){return Qi(s,"mutations")}function Ao(s){return Qi(s,"documentMutations")}function xf(s){return Qi(s,"mutationQueues")}class Dl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Dl(0)}static yn(){return new Dl(-1)}}class gg{constructor(e,r){this.referenceDelegate=e,this.M=r}allocateTargetId(e){return this.pn(e).next(r=>{const o=new Dl(r.highestTargetId);return r.highestTargetId=o.next(),this.In(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(r=>Ut.fromTimestamp(new Pn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,o){return this.pn(e).next(l=>(l.highestListenSequenceNumber=r,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.In(e,l)))}addTargetData(e,r){return this.Tn(e,r).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(r,o),this.In(e,o))))}updateTargetData(e,r){return this.Tn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>ch(e).delete(r.targetId)).next(()=>this.pn(e)).next(o=>($t(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,r,o){let l=0;const h=[];return ch(e).Wt((y,D)=>{const F=hd(D);F.sequenceNumber<=r&&null===o.get(F.targetId)&&(l++,h.push(this.removeTargetData(e,F)))}).next(()=>Le.waitFor(h)).next(()=>l)}forEachTarget(e,r){return ch(e).Wt((o,l)=>{const h=hd(l);r(h)})}pn(e){return mg(e).get("targetGlobalKey").next(r=>($t(null!==r),r))}In(e,r){return mg(e).put("targetGlobalKey",r)}Tn(e,r){return ch(e).put(Af(this.M,r))}En(e,r){let o=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,o=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(r=>r.targetCount)}getTargetData(e,r){const o=io(r),l=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return ch(e).Wt({range:l,index:"queryTargetsIndex"},(y,D,F)=>{const $=hd(D);ql(r,$.target)&&(h=$,F.done())}).next(()=>h)}addMatchingKeys(e,r,o){const l=[],h=fc(e);return r.forEach(y=>{const D=xr(y.path);l.push(h.put({targetId:o,path:D})),l.push(this.referenceDelegate.addReference(e,o,y))}),Le.waitFor(l)}removeMatchingKeys(e,r,o){const l=fc(e);return Le.forEach(r,h=>{const y=xr(h.path);return Le.waitFor([l.delete([o,y]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,r){const o=fc(e),l=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(l)}getMatchingKeysForTargetId(e,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),l=fc(e);let h=nr();return l.Wt({range:o,jt:!0},(y,D,F)=>{const $=xi(y[1]),X=new at($);h=h.add(X)}).next(()=>h)}containsKey(e,r){const o=xr(r.path),l=IDBKeyRange.bound([o],[jo(o)],!1,!0);let h=0;return fc(e).Wt({index:"documentTargetsIndex",jt:!0,range:l},([y,D],F,$)=>{0!==y&&(h++,$.done())}).next(()=>h>0)}Et(e,r){return ch(e).get(r).next(o=>o?hd(o):null)}}function ch(s){return Qi(s,"targets")}function mg(s){return Qi(s,"targetGlobal")}function fc(s){return Qi(s,"targetDocuments")}function gu(s){return gd.apply(this,arguments)}function gd(){return gd=(0,Ee.Z)(function*(s){if(s.code!==v.FAILED_PRECONDITION||s.message!==Mi)throw s;Ze("LocalStore","Unexpectedly lost primary lease")}),gd.apply(this,arguments)}function Mf([s,e],[r,o]){const l=At(s,r);return 0===l?At(e,o):l}class yg{constructor(e){this.An=e,this.buffer=new Ir(Mf),this.Rn=0}Pn(){return++this.Rn}bn(e){const r=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Mf(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class _g{constructor(e,r){this.garbageCollector=e,this.asyncQueue=r,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var r=this;const o=this.Vn?3e5:6e4;Ze("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,Ee.Z)(function*(){r.vn=null,r.Vn=!0;try{yield e.collectGarbage(r.garbageCollector)}catch(l){hu(l)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield gu(l)}yield r.Sn(e)}))}}class bI{constructor(e,r){this.Dn=e,this.params=r}calculateTargetCount(e,r){return this.Dn.Cn(e).next(o=>Math.floor(r/100*o))}nthSequenceNumber(e,r){if(0===r)return Le.resolve(rn.A);const o=new yg(r);return this.Dn.forEachTarget(e,l=>o.bn(l.sequenceNumber)).next(()=>this.Dn.xn(e,l=>o.bn(l))).next(()=>o.maxValue)}removeTargets(e,r,o){return this.Dn.removeTargets(e,r,o)}removeOrphanedDocuments(e,r){return this.Dn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(pg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pg):this.Nn(e,r))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,r){let o,l,h,y,D,F,$;const X=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(le=>(le>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${le}`),l=this.params.maximumSequenceNumbersToCollect):l=le,y=Date.now(),this.nthSequenceNumber(e,l))).next(le=>(o=le,D=Date.now(),this.removeTargets(e,o,r))).next(le=>(h=le,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(le=>($=Date.now(),Ra()<=kt.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-X}ms\n\tDetermined least recently used ${l} in `+(D-y)+`ms\n\tRemoved ${h} targets in `+(F-D)+`ms\n\tRemoved ${le} documents in `+($-F)+`ms\nTotal Duration: ${$-X}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:le})))}}class $E{constructor(e,r){this.db=e,this.garbageCollector=new bI(this,r)}Cn(e){const r=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>r.next(l=>o+l))}kn(e){let r=0;return this.xn(e,o=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}xn(e,r){return this.Mn(e,(o,l)=>r(l))}addReference(e,r,o){return Rf(e,o)}removeReference(e,r,o){return Rf(e,o)}removeTargets(e,r,o){return this.db.getTargetCache().removeTargets(e,r,o)}markPotentiallyOrphaned(e,r){return Rf(e,r)}On(e,r){return function(o,l){let h=!1;return xf(o).zt(y=>Ry(o,y,l).next(D=>(D&&(h=!0),Le.resolve(!D)))).next(()=>h)}(e,r)}removeOrphanedDocuments(e,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let h=0;return this.Mn(e,(y,D)=>{if(D<=r){const F=this.On(e,y).next($=>{if(!$)return h++,o.getEntry(e,y).next(()=>(o.removeEntry(y,Ut.min()),fc(e).delete([0,xr(y.path)])))});l.push(F)}}).next(()=>Le.waitFor(l)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,r){const o=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,r){return Rf(e,r)}Mn(e,r){const o=fc(e);let l,h=rn.A;return o.Wt({index:"documentTargetsIndex"},([y,D],{path:F,sequenceNumber:$})=>{0===y?(h!==rn.A&&r(new at(xi(l)),h),h=$,l=F):h=rn.A}).next(()=>{h!==rn.A&&r(new at(xi(l)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rf(s,e){return fc(s).put((o=s.currentSequenceNumber,{targetId:0,path:xr(e.path),sequenceNumber:o}));var o}class Ny{constructor(){this.changes=new da(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Le.resolve(o):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HE{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,o){return pc(e).put(o)}removeEntry(e,r,o){return pc(e).delete(function(l,h){const y=l.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],cc(h),y[y.length-1]]}(r,o))}updateMetadata(e,r){return this.getMetadata(e).next(o=>(o.byteSize+=r,this.Fn(e,o)))}getEntry(e,r){let o=Rt.newInvalidDocument(r);return pc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Nf(r))},(l,h)=>{o=this.$n(r,h)}).next(()=>o)}Bn(e,r){let o={size:0,document:Rt.newInvalidDocument(r)};return pc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Nf(r))},(l,h)=>{o={document:this.$n(r,h),size:To(h)}}).next(()=>o)}getEntries(e,r){let o=js();return this.Ln(e,r,(l,h)=>{const y=this.$n(l,h);o=o.insert(l,y)}).next(()=>o)}Un(e,r){let o=js(),l=new ei(at.comparator);return this.Ln(e,r,(h,y)=>{const D=this.$n(h,y);o=o.insert(h,D),l=l.insert(h,To(y))}).next(()=>({documents:o,qn:l}))}Ln(e,r,o){if(r.isEmpty())return Le.resolve();let l=new Ir(Eg);r.forEach(F=>l=l.add(F));const h=IDBKeyRange.bound(Nf(l.first()),Nf(l.last())),y=l.getIterator();let D=y.getNext();return pc(e).Wt({index:"documentKeyIndex",range:h},(F,$,X)=>{const le=at.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;D&&Eg(D,le)<0;)o(D,null),D=y.getNext();D&&D.isEqual(le)&&(o(D,$),D=y.hasNext()?y.getNext():null),D?X.Ut(Nf(D)):X.done()}).next(()=>{for(;D;)o(D,null),D=y.hasNext()?y.getNext():null})}getAllFromCollection(e,r,o){const l=[r.popLast().toArray(),r.lastSegment(),cc(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],h=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pc(e).qt(IDBKeyRange.bound(l,h,!0)).next(y=>{let D=js();for(const F of y){const $=this.$n(at.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);D=D.insert($.key,$)}return D})}getAllFromCollectionGroup(e,r,o,l){let h=js();const y=vg(r,o),D=vg(r,Zi.max());return pc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,D,!0)},(F,$,X)=>{const le=this.$n(at.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);h=h.insert(le.key,le),h.size===l&&X.done()}).next(()=>h)}newChangeBuffer(e){return new Oy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return GE(e).get("remoteDocumentGlobalKey").next(r=>($t(!!r),r))}Fn(e,r){return GE(e).put("remoteDocumentGlobalKey",r)}$n(e,r){if(r){const o=function(s,e){let r;if(e.document)r=sc(s.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=at.fromSegments(e.noDocument.path),l=wl(e.noDocument.readTime);r=Rt.newNoDocument(o,l),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const o=at.fromSegments(e.unknownDocument.path),l=wl(e.unknownDocument.version);r=Rt.newUnknownDocument(o,l)}}return e.readTime&&r.setReadTime(function(o){const l=new Pn(o[0],o[1]);return Ut.fromTimestamp(l)}(e.readTime)),r}(this.M,r);if(!o.isNoDocument()||!o.version.isEqual(Ut.min()))return o}return Rt.newInvalidDocument(e)}}class Oy extends Ny{constructor(e,r){super(),this.Kn=e,this.trackRemovals=r,this.Gn=new da(o=>o.toString(),(o,l)=>o.isEqual(l))}applyChanges(e){const r=[];let o=0,l=new Ir((h,y)=>At(h.canonicalString(),y.canonicalString()));return this.changes.forEach((h,y)=>{const D=this.Gn.get(h);if(r.push(this.Kn.removeEntry(e,h,D.readTime)),y.isValidDocument()){const F=lg(this.Kn.M,y);l=l.add(h.path.popLast()),o+=To(F)-D.size,r.push(this.Kn.addEntry(e,h,F))}else if(o-=D.size,this.trackRemovals){const F=lg(this.Kn.M,y.convertToNoDocument(Ut.min()));r.push(this.Kn.addEntry(e,h,F))}}),l.forEach(h=>{r.push(this.Kn.indexManager.addToCollectionParentIndex(e,h))}),r.push(this.Kn.updateMetadata(e,o)),Le.waitFor(r)}getFromCache(e,r){return this.Kn.Bn(e,r).next(o=>(this.Gn.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,r){return this.Kn.Un(e,r).next(({documents:o,qn:l})=>(l.forEach((h,y)=>{this.Gn.set(h,{size:y,readTime:o.get(h).readTime})}),o))}}function GE(s){return Qi(s,"remoteDocumentGlobal")}function pc(s){return Qi(s,"remoteDocumentsV14")}function Nf(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vg(s,e){const r=e.documentKey.path.toArray();return[s,cc(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Eg(s,e){const r=s.path.toArray(),o=e.path.toArray();let l=0;for(let h=0;h<r.length-2&&h<o.length-2;++h)if(l=At(r[h],o[h]),l)return l;return l=At(r.length,o.length),l||(l=At(r[r.length-2],o[o.length-2]),l||At(r[r.length-1],o[o.length-1]))}class WE{constructor(e){this.M=e}kt(e,r,o,l){const h=new du("createOrUpgrade",r);var D;o<1&&l>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oc,{unique:!0}),D.createObjectStore("documentMutations"),Of(e),function(D){D.createObjectStore("remoteDocuments")}(e));let y=Le.resolve();return o<3&&l>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Of(e)),y=y.next(()=>function(D){const F=D.store("targetGlobal"),$={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",$)}(h))),o<4&&l>=4&&(0!==o&&(y=y.next(()=>function(D,F){return F.store("mutations").qt().next($=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oc,{unique:!0});const X=F.store("mutations"),le=$.map(xe=>X.put(xe));return Le.waitFor(le)})}(e,h))),y=y.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&l>=5&&(y=y.next(()=>this.Qn(h))),o<6&&l>=6&&(y=y.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(h)))),o<7&&l>=7&&(y=y.next(()=>this.Wn(h))),o<8&&l>=8&&(y=y.next(()=>this.zn(e,h))),o<9&&l>=9&&(y=y.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&l>=10&&(y=y.next(()=>this.Hn(h))),o<11&&l>=11&&(y=y.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&l>=12&&(y=y.next(()=>{!function(D){const F=D.createObjectStore("documentOverlays",{keyPath:ce});F.createIndex("collectionPathOverlayIndex",Se,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",st,{unique:!1})}(e)})),o<13&&l>=13&&(y=y.next(()=>function(D){const F=D.createObjectStore("remoteDocumentsV14",{keyPath:ih});F.createIndex("documentKeyIndex",bf),F.createIndex("collectionGroupIndex",uc)}(e)).next(()=>this.Jn(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&l>=14&&(y=y.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:f}).createIndex("sequenceNumberIndex",E,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:P}).createIndex("documentKeyIndex",j,{unique:!1})}(e)})),y}jn(e){let r=0;return e.store("remoteDocuments").Wt((o,l)=>{r+=To(l)}).next(()=>{const o={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const r=e.store("mutationQueues"),o=e.store("mutations");return r.qt().next(l=>Le.forEach(l,h=>{const y=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",y).next(D=>Le.forEach(D,F=>{$t(F.userId===h.userId);const $=Il(this.M,F);return lh(e,h.userId,$).next(()=>{})}))}))}Wn(e){const r=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const h=[];return o.Wt((y,D)=>{const F=new Bt(y),$=[0,xr(F)];h.push(r.get($).next(X=>X?Le.resolve():r.put({targetId:0,path:xr(F),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>Le.waitFor(h))})}zn(e,r){e.createObjectStore("collectionParents",{keyPath:d});const o=r.store("collectionParents"),l=new fg,h=y=>{if(l.add(y)){const D=y.lastSegment(),F=y.popLast();return o.put({collectionId:D,parent:xr(F)})}};return r.store("remoteDocuments").Wt({jt:!0},(y,D)=>{const F=new Bt(y);return h(F.popLast())}).next(()=>r.store("documentMutations").Wt({jt:!0},([y,D,F],$)=>{const X=xi(D);return h(X.popLast())}))}Hn(e){const r=e.store("targets");return r.Wt((o,l)=>{const h=hd(l),y=Af(this.M,h);return r.put(y)})}Jn(e,r){const o=r.store("remoteDocuments"),l=[];return o.Wt((h,y)=>{const D=r.store("remoteDocumentsV14"),F=($=y,$.document?new at(Bt.fromString($.document.name).popFirst(5)):$.noDocument?at.fromSegments($.noDocument.path):$.unknownDocument?at.fromSegments($.unknownDocument.path):_t()).path.toArray();var $;const X={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};l.push(D.put(X))}).next(()=>Le.waitFor(l))}}function Of(s){s.createObjectStore("targetDocuments",{keyPath:Df}).createIndex("documentTargetsIndex",g,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cf,{unique:!0}),s.createObjectStore("targetGlobal")}const Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ky{constructor(e,r,o,l,h,y,D,F,$,X,le=13){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=o,this.Yn=h,this.window=y,this.document=D,this.Xn=$,this.Zn=X,this.ts=le,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=xe=>Promise.resolve(),!ky.vt())throw new _(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $E(this,l),this.hs=r+"main",this.M=new ag(F),this.ls=new ao(this.hs,this.ts,new WE(this.M)),this.fs=new gg(this.referenceDelegate,this.M),this.ds=new HE(this.M),this._s=new FE,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===X&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _(v.FAILED_PRECONDITION,Py);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new rn(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var r=this;return this.cs=function(){var o=(0,Ee.Z)(function*(l){if(r.started)return e(l)});return function(l){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var r=(0,Ee.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){r.started&&(yield r.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(r=>{r||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(r=>this.isPrimary&&!r?this.Rs(e).next(()=>!1):!!r&&this.Ps(e).next(()=>!0))).catch(e=>{if(hu(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Pf(e).get("owner").next(r=>Le.resolve(this.bs(r)))}Vs(e){return wg(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const l=Qi(o,"clientMetadata");return l.qt().next(h=>{const y=e.Ds(h,18e5),D=h.filter(F=>-1===y.indexOf(F));return Le.forEach(D,F=>l.delete(F.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of r)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Le.resolve(!0):Pf(e).get("owner").next(r=>{if(null!==r&&this.Ss(r.leaseTimestampMs,5e3)&&!this.xs(r.ownerId)){if(this.bs(r)&&this.networkEnabled)return!0;if(!this.bs(r)){if(!r.allowTabSynchronization)throw new _(v.FAILED_PRECONDITION,Py);return!1}}return!(!this.networkEnabled||!this.inForeground)||wg(e).qt().next(o=>void 0===this.Ds(o,5e3).find(l=>{if(this.clientId!==l.clientId){const y=!this.inForeground&&l.inForeground,D=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||y&&D)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Ze("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new lc(r,rn.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,r){return e.filter(o=>this.Ss(o.updateTimeMs,r)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>wg(e).qt().next(r=>this.Ds(r,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,r){return Sf.Yt(e,this.M,r,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new jE(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return oh.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,r,o){Ze("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===r?"readonly":"readwrite",h=14===(y=this.ts)?Vn:13===y?Nt:12===y?St:11===y?Je:void _t();var y;let D;return this.ls.runTransaction(e,l,h,F=>(D=new lc(F,this.es?this.es.next():rn.A),"readwrite-primary"===r?this.Es(D).next($=>!!$||this.As(D)).next($=>{if(!$)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new _(v.FAILED_PRECONDITION,Mi);return o(D)}).next($=>this.Ps(D).next(()=>$)):this.$s(D).next(()=>o(D)))).then(F=>(D.raiseOnCommittedEvent(),F))}$s(e){return Pf(e).get("owner").next(r=>{if(null!==r&&this.Ss(r.leaseTimestampMs,5e3)&&!this.xs(r.ownerId)&&!this.bs(r)&&!(this.Zn||this.allowTabSynchronization&&r.allowTabSynchronization))throw new _(v.FAILED_PRECONDITION,Py)})}Ps(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pf(e).put("owner",r)}static vt(){return ao.vt()}Rs(e){const r=Pf(e);return r.get("owner").next(o=>this.bs(o)?(Ze("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Le.resolve())}Ss(e,r){const o=Date.now();return!(e<o-r||e>o&&(cr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var r;try{const o=null!==(null===(r=this.ws)||void 0===r?void 0:r.getItem(this.Cs(e)));return Ze("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return cr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pf(s){return Qi(s,"owner")}function wg(s){return Qi(s,"clientMetadata")}function Fy(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class CI{constructor(e,r,o){this.ds=e,this.Bs=r,this.indexManager=o}Ls(e,r){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,r).next(o=>this.Us(e,r,o))}Us(e,r,o){return this.ds.getEntry(e,r).next(l=>{for(const h of o)h.applyToLocalView(l);return l})}qs(e,r){e.forEach((o,l)=>{for(const h of r)h.applyToLocalView(l)})}Ks(e,r){return this.ds.getEntries(e,r).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,r){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>this.qs(r,o))}Qs(e,r,o){return at.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.js(e,r.path):Ua(r)?this.Ws(e,r,o):this.zs(e,r,o);var l}js(e,r){return this.Ls(e,new at(r)).next(o=>{let l=Qc();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}Ws(e,r,o){const l=r.collectionGroup;let h=Qc();return this.indexManager.getCollectionParents(e,l).next(y=>Le.forEach(y,D=>{const F=($=r,X=D.child(l),new Co(X,null,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt));var $,X;return this.zs(e,F,o).next($=>{$.forEach((X,le)=>{h=h.insert(X,le)})})}).next(()=>h))}zs(e,r,o){let l;return this.ds.getAllFromCollection(e,r.path,o).next(h=>(l=h,this.Bs.getAllMutationBatchesAffectingQuery(e,r))).next(h=>{for(const y of h)for(const D of y.mutations){const F=D.key;let $=l.get(F);null==$&&($=Rt.newInvalidDocument(F),l=l.insert(F,$)),Fu(D,$,y.localWriteTime),$.isFoundDocument()||(l=l.remove(F))}}).next(()=>(l.forEach((h,y)=>{ml(r,y)||(l=l.remove(h))}),l))}}class Ly{constructor(e,r,o,l){this.targetId=e,this.fromCache=r,this.Hs=o,this.Js=l}static Ys(e,r){let o=nr(),l=nr();for(const h of r.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Ly(e,r.fromCache,o,l)}}class zE{Xs(e){this.Zs=e}Qs(e,r,o,l){return 0===(h=r).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||o.isEqual(Ut.min())?this.ti(e,r):this.Zs.Ks(e,l).next(h=>{const y=this.ei(r,h);return(fl(r)||Hc(r))&&this.ni(r.limitType,y,l,o)?this.ti(e,r):(Ra()<=kt.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wc(r)),this.Zs.Qs(e,r,Us(o,-1)).next(D=>(y.forEach(F=>{D=D.insert(F.key,F)}),D)))});var h}ei(e,r){let o=new Ir(ou(e));return r.forEach((l,h)=>{ml(e,h)&&(o=o.add(h))}),o}ni(e,r,o,l){if(o.size!==r.size)return!0;const h="F"===e?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}ti(e,r){return Ra()<=kt.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Wc(r)),this.Zs.Qs(e,r,Zi.min())}}class DI{constructor(e,r,o,l){this.persistence=e,this.si=r,this.M=l,this.ii=new ei(At),this.ri=new da(h=>io(h),ql),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new CI(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ii))}}function qE(s,e,r,o){return new DI(s,e,r,o)}function Hu(s,e){return dh.apply(this,arguments)}function dh(){return dh=(0,Ee.Z)(function*(s,e){const r=b(s);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let l;return r.Bs.getAllMutationBatches(o).next(h=>(l=h,r.ai(e),r.Bs.getAllMutationBatches(o))).next(h=>{const y=[],D=[];let F=nr();for(const $ of l){y.push($.batchId);for(const X of $.mutations)F=F.add(X.key)}for(const $ of h){D.push($.batchId);for(const X of $.mutations)F=F.add(X.key)}return r.ci.Ks(o,F).next($=>({hi:$,removedBatchIds:y,addedBatchIds:D}))})})}),dh.apply(this,arguments)}function KE(s,e){const r=b(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const l=e.batch.keys(),h=r.ui.newChangeBuffer({trackRemovals:!0});return function(y,D,F,$){const X=F.batch,le=X.keys();let xe=Le.resolve();return le.forEach(Ke=>{xe=xe.next(()=>$.getEntry(D,Ke)).next(Ye=>{const pt=F.docVersions.get(Ke);$t(null!==pt),Ye.version.compareTo(pt)<0&&(X.applyToRemoteDocument(Ye,F),Ye.isValidDocument()&&(Ye.setReadTime(F.commitVersion),$.addEntry(Ye)))})}),xe.next(()=>y.Bs.removeMutationBatch(D,X))}(r,o,e,h).next(()=>h.apply(o)).next(()=>r.Bs.performConsistencyCheck(o)).next(()=>r.ci.Ks(o,l))})}function Ig(s){const e=b(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.fs.getLastRemoteSnapshotVersion(r))}function bg(s,e){const r=b(s),o=e.snapshotVersion;let l=r.ii;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const y=r.ui.newChangeBuffer({trackRemovals:!0});l=r.ii;const D=[];e.targetChanges.forEach(($,X)=>{const le=l.get(X);if(!le)return;D.push(r.fs.removeMatchingKeys(h,$.removedDocuments,X).next(()=>r.fs.addMatchingKeys(h,$.addedDocuments,X)));let xe=le.withSequenceNumber(h.currentSequenceNumber);var Ke,Ye,pt;e.targetMismatches.has(X)?xe=xe.withResumeToken(gi.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):$.resumeToken.approximateByteSize()>0&&(xe=xe.withResumeToken($.resumeToken,o)),l=l.insert(X,xe),Ye=xe,pt=$,(0===(Ke=le).resumeToken.approximateByteSize()||Ye.snapshotVersion.toMicroseconds()-Ke.snapshotVersion.toMicroseconds()>=3e8||pt.addedDocuments.size+pt.modifiedDocuments.size+pt.removedDocuments.size>0)&&D.push(r.fs.updateTargetData(h,xe))});let F=js();if(e.documentUpdates.forEach($=>{e.resolvedLimboDocuments.has($)&&D.push(r.persistence.referenceDelegate.updateLimboDocument(h,$))}),D.push(Cg(h,y,e.documentUpdates).next($=>{F=$})),!o.isEqual(Ut.min())){const $=r.fs.getLastRemoteSnapshotVersion(h).next(X=>r.fs.setTargetsMetadata(h,h.currentSequenceNumber,o));D.push($)}return Le.waitFor(D).next(()=>y.apply(h)).next(()=>r.ci.Gs(h,F)).next(()=>F)}).then(h=>(r.ii=l,h))}function Cg(s,e,r){let o=nr();return r.forEach(l=>o=o.add(l)),e.getEntries(s,o).next(l=>{let h=js();return r.forEach((y,D)=>{const F=l.get(y);D.isNoDocument()&&D.version.isEqual(Ut.min())?(e.removeEntry(y,D.readTime),h=h.insert(y,D)):!F.isValidDocument()||D.version.compareTo(F.version)>0||0===D.version.compareTo(F.version)&&F.hasPendingWrites?(e.addEntry(D),h=h.insert(y,D)):Ze("LocalStore","Ignoring outdated watch update for ",y,". Current version:",F.version," Watch version:",D.version)}),h})}function Dg(s,e){const r=b(s);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),r.Bs.getNextMutationBatchAfterBatchId(o,e)))}function md(s,e){const r=b(s);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return r.fs.getTargetData(o,e).next(h=>h?(l=h,Le.resolve(l)):r.fs.allocateTargetId(o).next(y=>(l=new $u(e,y,0,o.currentSequenceNumber),r.fs.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=r.ii.get(o.targetId);return(null===l||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.ii=r.ii.insert(o.targetId,o),r.ri.set(e,o.targetId)),o})}function qo(s,e,r){return kf.apply(this,arguments)}function kf(){return kf=(0,Ee.Z)(function*(s,e,r){const o=b(s),l=o.ii.get(e),h=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",h,y=>o.persistence.referenceDelegate.removeTarget(y,l)))}catch(y){if(!hu(y))throw y;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}o.ii=o.ii.remove(e),o.ri.delete(l.target)}),kf.apply(this,arguments)}function Ff(s,e,r){const o=b(s);let l=Ut.min(),h=nr();return o.persistence.runTransaction("Execute query","readonly",y=>function(D,F,$){const X=b(D),le=X.ri.get($);return void 0!==le?Le.resolve(X.ii.get(le)):X.fs.getTargetData(F,$)}(o,y,oo(e)).next(D=>{if(D)return l=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(y,D.targetId).next(F=>{h=F})}).next(()=>o.si.Qs(y,e,r?l:Ut.min(),r?h:nr())).next(D=>(Tg(o,qd(e),D),{documents:D,li:h})))}function Lf(s,e){const r=b(s),o=b(r.fs),l=r.ii.get(e);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",h=>o.Et(h,e).next(y=>y?y.target:null))}function Vy(s,e){const r=b(s),o=r.oi.get(e)||Ut.min();return r.persistence.runTransaction("Get new document changes","readonly",l=>r.ui.getAllFromCollectionGroup(l,e,Us(o,-1),Number.MAX_SAFE_INTEGER)).then(l=>(Tg(r,e,l),l))}function Tg(s,e,r){let o=Ut.min();r.forEach((l,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),s.oi.set(e,o)}function Ag(){return Ag=(0,Ee.Z)(function*(s,e,r,o){const l=b(s);let h=nr(),y=js();for(const $ of r){const X=e.fi($.metadata.name);$.document&&(h=h.add(X));const le=e.di($);le.setReadTime(e._i($.metadata.readTime)),y=y.insert(X,le)}const D=l.ui.newChangeBuffer({trackRemovals:!0}),F=yield md(l,($=o,oo(Nu(Bt.fromString(`__bundle__/docs/${$}`)))));var $;return l.persistence.runTransaction("Apply bundle documents","readwrite",$=>Cg($,D,y).next(X=>(D.apply($),X)).next(X=>l.fs.removeMatchingKeysForTargetId($,F.targetId).next(()=>l.fs.addMatchingKeys($,h,F.targetId)).next(()=>l.ci.Gs($,X)).next(()=>X)))}),Ag.apply(this,arguments)}function hh(s,e){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,Ee.Z)(function*(s,e,r=nr()){const o=yield md(s,oo(dc(e.bundledQuery))),l=b(s);return l.persistence.runTransaction("Save named query","readwrite",h=>{const y=Si(e.readTime);if(o.snapshotVersion.compareTo(y)>=0)return l._s.saveNamedQuery(h,e);const D=o.withResumeToken(gi.EMPTY_BYTE_STRING,y);return l.ii=l.ii.insert(D.targetId,D),l.fs.updateTargetData(h,D).next(()=>l.fs.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>l.fs.addMatchingKeys(h,r,o.targetId)).next(()=>l._s.saveNamedQuery(h,e))})}),Tl.apply(this,arguments)}class Sg{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,r){return Le.resolve(this.wi.get(r))}saveBundleMetadata(e,r){var o;return this.wi.set(r.id,{id:(o=r).id,version:o.version,createTime:Si(o.createTime)}),Le.resolve()}getNamedQuery(e,r){return Le.resolve(this.mi.get(r))}saveNamedQuery(e,r){return this.mi.set(r.name,{name:(o=r).name,query:dc(o.bundledQuery),readTime:Si(o.readTime)}),Le.resolve();var o}}class yd{constructor(){this.overlays=new ei(at.comparator),this.gi=new Map}getOverlay(e,r){return Le.resolve(this.overlays.get(r))}saveOverlays(e,r,o){return o.forEach((l,h)=>{this.Xt(e,r,h)}),Le.resolve()}removeOverlaysForBatchId(e,r,o){const l=this.gi.get(o);return void 0!==l&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.gi.delete(o)),Le.resolve()}getOverlaysForCollection(e,r,o){const l=tc(),h=r.length+1,y=new at(r.child("")),D=this.overlays.getIteratorFrom(y);for(;D.hasNext();){const F=D.getNext().value,$=F.getKey();if(!r.isPrefixOf($.path))break;$.path.length===h&&F.largestBatchId>o&&l.set(F.getKey(),F)}return Le.resolve(l)}getOverlaysForCollectionGroup(e,r,o,l){let h=new ei(($,X)=>$-X);const y=this.overlays.getIterator();for(;y.hasNext();){const $=y.getNext().value;if($.getKey().getCollectionGroup()===r&&$.largestBatchId>o){let X=h.get($.largestBatchId);null===X&&(X=tc(),h=h.insert($.largestBatchId,X)),X.set($.getKey(),$)}}const D=tc(),F=h.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach(($,X)=>D.set($,X)),!(D.size()>=l)););return Le.resolve(D)}Xt(e,r,o){if(null===o)return;const l=this.overlays.get(o.key);if(null!==l){const y=this.gi.get(l.largestBatchId).delete(o.key);this.gi.set(l.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new Tf(r,o));let h=this.gi.get(r);void 0===h&&(h=nr(),this.gi.set(r,h)),this.gi.set(r,h.add(o.key))}}class gc{constructor(){this.yi=new Ir(ai.pi),this.Ii=new Ir(ai.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,r){const o=new ai(e,r);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,r){e.forEach(o=>this.addReference(o,r))}removeReference(e,r){this.Ai(new ai(e,r))}Ri(e,r){e.forEach(o=>this.removeReference(o,r))}Pi(e){const r=new at(new Bt([])),o=new ai(r,e),l=new ai(r,e+1),h=[];return this.Ii.forEachInRange([o,l],y=>{this.Ai(y),h.push(y.key)}),h}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const r=new at(new Bt([])),o=new ai(r,e),l=new ai(r,e+1);let h=nr();return this.Ii.forEachInRange([o,l],y=>{h=h.add(y.key)}),h}containsKey(e){const r=new ai(e,0),o=this.yi.firstAfterOrEqual(r);return null!==o&&e.isEqual(o.key)}}class ai{constructor(e,r){this.key=e,this.vi=r}static pi(e,r){return at.comparator(e.key,r.key)||At(e.vi,r.vi)}static Ti(e,r){return At(e.vi,r.vi)||at.comparator(e.key,r.key)}}class YE{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.Bs=[],this.Si=1,this.Di=new Ir(ai.pi)}checkEmpty(e){return Le.resolve(0===this.Bs.length)}addMutationBatch(e,r,o,l){const h=this.Si;this.Si++;const y=new dd(h,r,o,l);this.Bs.push(y);for(const D of l)this.Di=this.Di.add(new ai(D.key,h)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Le.resolve(y)}lookupMutationBatch(e,r){return Le.resolve(this.Ci(r))}getNextMutationBatchAfterBatchId(e,r){const l=this.xi(r+1),h=l<0?0:l;return Le.resolve(this.Bs.length>h?this.Bs[h]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return Le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const o=new ai(r,0),l=new ai(r,Number.POSITIVE_INFINITY),h=[];return this.Di.forEachInRange([o,l],y=>{const D=this.Ci(y.vi);h.push(D)}),Le.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Ir(At);return r.forEach(l=>{const h=new ai(l,0),y=new ai(l,Number.POSITIVE_INFINITY);this.Di.forEachInRange([h,y],D=>{o=o.add(D.vi)})}),Le.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,l=o.length+1;let h=o;at.isDocumentKey(h)||(h=h.child(""));const y=new ai(new at(h),0);let D=new Ir(At);return this.Di.forEachWhile(F=>{const $=F.key.path;return!!o.isPrefixOf($)&&($.length===l&&(D=D.add(F.vi)),!0)},y),Le.resolve(this.Ni(D))}Ni(e){const r=[];return e.forEach(o=>{const l=this.Ci(o);null!==l&&r.push(l)}),r}removeMutationBatch(e,r){$t(0===this.ki(r.batchId,"removed")),this.Bs.shift();let o=this.Di;return Le.forEach(r.mutations,l=>{const h=new ai(l.key,r.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,r){const o=new ai(r,0),l=this.Di.firstAfterOrEqual(o);return Le.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(e){return Le.resolve()}ki(e,r){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const r=this.xi(e);return r<0||r>=this.Bs.length?null:this.Bs[r]}}class Uy{constructor(e){this.Mi=e,this.docs=new ei(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const o=r.key,l=this.docs.get(o),h=l?l.size:0,y=this.Mi(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:y}),this.size+=y-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const o=this.docs.get(r);return Le.resolve(o?o.document.mutableCopy():Rt.newInvalidDocument(r))}getEntries(e,r){let o=js();return r.forEach(l=>{const h=this.docs.get(l);o=o.insert(l,h?h.document.mutableCopy():Rt.newInvalidDocument(l))}),Le.resolve(o)}getAllFromCollection(e,r,o){let l=js();const h=new at(r.child("")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:D,value:{document:F}}=y.getNext();if(!r.isPrefixOf(D.path))break;D.path.length>r.length+1||oi(Bs(F),o)<=0||(l=l.insert(F.key,F.mutableCopy()))}return Le.resolve(l)}getAllFromCollectionGroup(e,r,o,l){_t()}Oi(e,r){return Le.forEach(this.docs,o=>r(o))}newChangeBuffer(e){return new By(this)}getSize(e){return Le.resolve(this.size)}}class By extends Ny{constructor(e){super(),this.Kn=e}applyChanges(e){const r=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?r.push(this.Kn.addEntry(e,l)):this.Kn.removeEntry(o)}),Le.waitFor(r)}getFromCache(e,r){return this.Kn.getEntry(e,r)}getAllFromCache(e,r){return this.Kn.getEntries(e,r)}}class xg{constructor(e){this.persistence=e,this.Fi=new da(r=>io(r),ql),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.$i=0,this.Bi=new gc,this.targetCount=0,this.Li=Dl.gn()}forEachTarget(e,r){return this.Fi.forEach((o,l)=>r(l)),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.$i&&(this.$i=r),Le.resolve()}Tn(e){this.Fi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Li=new Dl(r),this.highestTargetId=r),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,r){return this.Tn(r),this.targetCount+=1,Le.resolve()}updateTargetData(e,r){return this.Tn(r),Le.resolve()}removeTargetData(e,r){return this.Fi.delete(r.target),this.Bi.Pi(r.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,r,o){let l=0;const h=[];return this.Fi.forEach((y,D)=>{D.sequenceNumber<=r&&null===o.get(D.targetId)&&(this.Fi.delete(y),h.push(this.removeMatchingKeysForTargetId(e,D.targetId)),l++)}),Le.waitFor(h).next(()=>l)}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,r){const o=this.Fi.get(r)||null;return Le.resolve(o)}addMatchingKeys(e,r,o){return this.Bi.Ei(r,o),Le.resolve()}removeMatchingKeys(e,r,o){this.Bi.Ri(r,o);const l=this.persistence.referenceDelegate,h=[];return l&&r.forEach(y=>{h.push(l.markPotentiallyOrphaned(e,y))}),Le.waitFor(h)}removeMatchingKeysForTargetId(e,r){return this.Bi.Pi(r),Le.resolve()}getMatchingKeysForTargetId(e,r){const o=this.Bi.Vi(r);return Le.resolve(o)}containsKey(e,r){return Le.resolve(this.Bi.containsKey(r))}}class Mg{constructor(e,r){this.Ui={},this.overlays={},this.es=new rn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xg(this),this.indexManager=new BE,this.ds=new Uy(o=>this.referenceDelegate.qi(o)),this.M=new ag(r),this._s=new Sg(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yd,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let o=this.Ui[e.toKey()];return o||(o=new YE(r,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,r,o){Ze("MemoryPersistence","Starting transaction:",e);const l=new jy(this.es.next());return this.referenceDelegate.Ki(),o(l).next(h=>this.referenceDelegate.Gi(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Qi(e,r){return Le.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,r)))}}class jy extends Ha{constructor(e){super(),this.currentSequenceNumber=e}}class _d{constructor(e){this.persistence=e,this.ji=new gc,this.Wi=null}static zi(e){return new _d(e)}get Hi(){if(this.Wi)return this.Wi;throw _t()}addReference(e,r,o){return this.ji.addReference(o,r),this.Hi.delete(o.toString()),Le.resolve()}removeReference(e,r,o){return this.ji.removeReference(o,r),this.Hi.add(o.toString()),Le.resolve()}markPotentiallyOrphaned(e,r){return this.Hi.add(r.toString()),Le.resolve()}removeTarget(e,r){this.ji.Pi(r.targetId).forEach(l=>this.Hi.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,r.targetId).next(l=>{l.forEach(h=>this.Hi.add(h.toString()))}).next(()=>o.removeTargetData(e,r))}Ki(){this.Wi=new Set}Gi(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.Hi,o=>{const l=at.fromPath(o);return this.Ji(e,l).next(h=>{h||r.removeEntry(l,Ut.min())})}).next(()=>(this.Wi=null,r.apply(e)))}updateLimboDocument(e,r){return this.Ji(e,r).next(o=>{o?this.Hi.delete(r.toString()):this.Hi.add(r.toString())})}qi(e){return 0}Ji(e,r){return Le.or([()=>Le.resolve(this.ji.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Qi(e,r)])}}function $y(s,e){return`firestore_clients_${s}_${e}`}function Rg(s,e,r){let o=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Hy(s,e){return`firestore_targets_${s}_${e}`}class fh{constructor(e,r,o,l){this.user=e,this.batchId=r,this.state=o,this.error=l}static Yi(e,r,o){const l=JSON.parse(o);let h,y="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return y&&l.error&&(y="string"==typeof l.error.message&&"string"==typeof l.error.code,y&&(h=new _(l.error.code,l.error.message))),y?new fh(e,r,l.state,h):(cr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vd{constructor(e,r,o){this.targetId=e,this.state=r,this.error=o}static Yi(e,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new _(o.error.code,o.error.message))),h?new vd(e,o.state,l):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Yi(e,r){const o=JSON.parse(r);let l="object"==typeof o&&o.activeTargetIds instanceof Array,h=Jd();for(let y=0;l&&y<o.activeTargetIds.length;++y)l=Pa(o.activeTargetIds[y]),h=h.add(o.activeTargetIds[y]);return l?new Vf(e,h):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Uf{constructor(e,r){this.clientId=e,this.onlineState=r}static Yi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Uf(r.clientId,r.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ng{constructor(){this.activeTargetIds=Jd()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Og{constructor(e,r,o,l,h){this.window=e,this.Yn=r,this.persistenceKey=o,this.er=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ei(At),this.started=!1,this.rr=[];const y=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ur=$y(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Ng),this.cr=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const r=yield e.syncEngine.Fs();for(const l of r){if(l===e.er)continue;const h=e.getItem($y(e.persistenceKey,l));if(h){const y=Vf.Yi(l,h);y&&(e.ir=e.ir.insert(y.clientId,y))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const l=e.mr(o);l&&e.gr(l)}for(const l of e.rr)e.sr(l);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let r=!1;return this.ir.forEach((o,l)=>{l.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,r,o){this.pr(e,r,o),this.Ir(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Hy(this.persistenceKey,e));if(o){const l=vd.Yi(e,o);l&&(r=l.state)}}return this.Tr.Zi(e),this.wr(),r}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hy(this.persistenceKey,e))}updateQueryState(e,r,o){this.Er(e,r,o)}handleUserChange(e,r,o){r.forEach(l=>{this.Ir(l)}),this.currentUser=e,o.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ze("SharedClientState","READ",e,r),r}setItem(e,r){Ze("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var r=this;const o=e;if(o.storageArea===this.storage){if(Ze("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(r.started){if(null!==o.key)if(r.cr.test(o.key)){if(null==o.newValue){const l=r.Pr(o.key);return r.br(l,null)}{const l=r.Vr(o.key,o.newValue);if(l)return r.br(l.clientId,l)}}else if(r.hr.test(o.key)){if(null!==o.newValue){const l=r.vr(o.key,o.newValue);if(l)return r.Sr(l)}}else if(r.lr.test(o.key)){if(null!==o.newValue){const l=r.Dr(o.key,o.newValue);if(l)return r.Cr(l)}}else if(o.key===r.dr){if(null!==o.newValue){const l=r.mr(o.newValue);if(l)return r.gr(l)}}else if(o.key===r.ar){const l=function(h){let y=rn.A;if(null!=h)try{const D=JSON.parse(h);$t("number"==typeof D),y=D}catch(D){cr("SharedClientState","Failed to read sequence number from WebStorage",D)}return y}(o.newValue);l!==rn.A&&r.sequenceNumberHandler(l)}else if(o.key===r._r){const l=r.Nr(o.newValue);yield Promise.all(l.map(h=>r.syncEngine.kr(h)))}}else r.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,r,o){const l=new fh(this.currentUser,e,r,o),h=Rg(this.persistenceKey,this.currentUser,e);this.setItem(h,l.Xi())}Ir(e){const r=Rg(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,r,o){const l=Hy(this.persistenceKey,e),h=new vd(e,r,o);this.setItem(l,h.Xi())}Rr(e){const r=JSON.stringify(Array.from(e));this.setItem(this._r,r)}Pr(e){const r=this.cr.exec(e);return r?r[1]:null}Vr(e,r){const o=this.Pr(e);return Vf.Yi(o,r)}vr(e,r){const o=this.hr.exec(e),l=Number(o[1]);return fh.Yi(new fi(void 0!==o[2]?o[2]:null),l,r)}Dr(e,r){const o=this.lr.exec(e),l=Number(o[1]);return vd.Yi(l,r)}mr(e){return Uf.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var r=this;return(0,Ee.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Mr(e.batchId,e.state,e.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,r){const o=r?this.ir.insert(e,r):this.ir.remove(e),l=this.yr(this.ir),h=this.yr(o),y=[],D=[];return h.forEach(F=>{l.has(F)||y.push(F)}),l.forEach(F=>{h.has(F)||D.push(F)}),this.syncEngine.Fr(y,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let r=Jd();return e.forEach((o,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class So{constructor(){this.$r=new Ng,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,r,o){this.Br[e]=r}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Ng,Promise.resolve()}handleUserChange(e,r,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QE{Lr(e){}shutdown(){}}class Gy{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class AI{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Wy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,r,o,l,h){const y=this.uo(e,r);Ze("RestConnection","Sending: ",y,o);const D={};return this.ao(D,l,h),this.co(e,y,D,o).then(F=>(Ze("RestConnection","Received: ",F),F),F=>{throw vo("RestConnection",`${e} failed with error: `,F,"url: ",y,"request:",o),F})}ho(e,r,o,l,h){return this.oo(e,r,o,l,h)}ao(e,r,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ws,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,h)=>e[h]=l),o&&o.headers.forEach((l,h)=>e[h]=l)}uo(e,r){return`${this.io}/v1/${r}:${TI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,r,o,l){return new Promise((h,y)=>{const D=new Su;D.listenOnce(Bc.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Xs.NO_ERROR:const $=D.getResponseJson();Ze("Connection","XHR received:",JSON.stringify($)),h($);break;case Xs.TIMEOUT:Ze("Connection",'RPC "'+e+'" timed out'),y(new _(v.DEADLINE_EXCEEDED,"Request time out"));break;case Xs.HTTP_ERROR:const X=D.getStatus();if(Ze("Connection",'RPC "'+e+'" failed with status:',X,"response text:",D.getResponseText()),X>0){const le=D.getResponseJson().error;if(le&&le.status&&le.message){const xe=function(Ke){const Ye=Ke.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(Ye)>=0?Ye:v.UNKNOWN}(le.status);y(new _(xe,le.message))}else y(new _(v.UNKNOWN,"Server responded with status "+D.getStatus()))}else y(new _(v.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ze("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(l);D.send(r,"POST",F,o,15)})}lo(e,r,o){const l=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=al(),y=Au(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new xa({})),this.ao(D.initMessageHeaders,r,o),(0,gt.uI)()||(0,gt.b$)()||(0,gt.d)()||(0,gt.w1)()||(0,gt.Mn)()||(0,gt.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const F=l.join("");Ze("Connection","Creating WebChannel: "+F,D);const $=h.createWebChannel(F,D);let X=!1,le=!1;const xe=new AI({Wr:Ye=>{le?Ze("Connection","Not sending because WebChannel is closed:",Ye):(X||(Ze("Connection","Opening WebChannel transport."),$.open(),X=!0),Ze("Connection","WebChannel sending:",Ye),$.send(Ye))},zr:()=>$.close()}),Ke=(Ye,pt,Xt)=>{Ye.listen(pt,dr=>{try{Xt(dr)}catch(Kr){setTimeout(()=>{throw Kr},0)}})};return Ke($,eo.EventType.OPEN,()=>{le||Ze("Connection","WebChannel transport opened.")}),Ke($,eo.EventType.CLOSE,()=>{le||(le=!0,Ze("Connection","WebChannel transport closed"),xe.no())}),Ke($,eo.EventType.ERROR,Ye=>{le||(le=!0,vo("Connection","WebChannel transport errored:",Ye),xe.no(new _(v.UNAVAILABLE,"The operation could not be completed")))}),Ke($,eo.EventType.MESSAGE,Ye=>{var pt;if(!le){const Xt=Ye.data[0];$t(!!Xt);const dr=Xt,Kr=dr.error||(null===(pt=dr[0])||void 0===pt?void 0:pt.error);if(Kr){Ze("Connection","WebChannel received error:",Kr);const rr=Kr.status;let On=function(hr){const Ts=_i[hr];if(void 0!==Ts)return gf(Ts)}(rr),Wn=Kr.message;void 0===On&&(On=v.INTERNAL,Wn="Unknown error status: "+rr+" with message "+Kr.message),le=!0,xe.no(new _(On,Wn)),$.close()}else Ze("Connection","WebChannel received:",Xt),xe.so(Xt)}}),Ke(y,ds.STAT_EVENT,Ye=>{Ye.stat===Di.PROXY?Ze("Connection","Detected buffering proxy"):Ye.stat===Di.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{xe.eo()},0),xe}}function JE(){return"undefined"!=typeof window?window:null}function Bf(){return"undefined"!=typeof document?document:null}function mc(s){return new yf(s,!0)}class jf{constructor(e,r,o=1e3,l=1.5,h=6e4){this.Yn=e,this.timerId=r,this.fo=o,this._o=l,this.wo=h,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const r=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),l=Math.max(0,r-o);l>0&&Ze("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.mo} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,l,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class zy{constructor(e,r,o,l,h,y,D,F){this.Yn=e,this.Ro=o,this.Po=l,this.bo=h,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=D,this.listener=F,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new jf(e,r)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ee.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,r){var o=this;return(0,Ee.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():r&&r.code===v.RESOURCE_EXHAUSTED?(cr(r.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):r&&r.code===v.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(r)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),r=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.Vo===r&&this.qo(o,l)},o=>{e(()=>{const l=new _(v.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(l)})})}qo(e,r){const o=this.Uo(this.Vo);this.stream=this.Go(e,r),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(l=>{o(()=>this.Ko(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}No(){var e=this;this.state=5,this.Do.To((0,Ee.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return r=>{this.Yn.enqueueAndForget(()=>this.Vo===e?r():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XE extends zy{constructor(e,r,o,l,h,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,l,y),this.M=h}Go(e,r){return this.bo.lo("Listen",e,r)}onMessage(e){this.Do.reset();const r=function(s,e){let r;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:_t(),l=e.targetChange.targetIds||[],h=function(F,$){return F.N?($t(void 0===$||"string"==typeof $),gi.fromBase64String($||"")):($t(void 0===$||$ instanceof Uint8Array),gi.fromUint8Array($||new Uint8Array))}(s,e.targetChange.resumeToken),y=e.targetChange.cause,D=y&&function(F){const $=void 0===F.code?v.UNKNOWN:gf(F.code);return new _($,F.message||"")}(y);r=new Xd(o,l,h,D||null)}else if("documentChange"in e){const o=e.documentChange,l=zo(s,o.document.name),h=Si(o.document.updateTime),y=new Dt({mapValue:{fields:o.document.fields}}),D=Rt.newFoundDocument(l,h,y);r=new vi(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,l=zo(s,o.document),h=o.readTime?Si(o.readTime):Ut.min(),y=Rt.newNoDocument(l,h);r=new vi([],o.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const o=e.documentRemove,l=zo(s,o.document);r=new vi([],o.removedTargetIds||[],l,null)}else{if(!("filter"in e))return _t();{const o=e.filter,h=new Cy(o.count||0);r=new Xc(o.targetId,h)}}var F;return r}(this.M,e),o=function(l){if(!("targetChange"in l))return Ut.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ut.min():h.readTime?Si(h.readTime):Ut.min()}(e);return this.listener.Qo(r,o)}jo(e){const r={};r.database=Vu(this.M),r.addTarget=function(l,h){let y;const D=h.target;return y=Kl(D)?{documents:Ef(l,D)}:{query:sd(l,D)},y.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?y.resumeToken=eh(l,h.resumeToken):h.snapshotVersion.compareTo(Ut.min())>0&&(y.readTime=nc(l,h.snapshotVersion.toTimestamp())),y}(this.M,e);const o=function(s,e){const r=function(o,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);o&&(r.labels=o),this.Fo(r)}Wo(e){const r={};r.database=Vu(this.M),r.removeTarget=e,this.Fo(r)}}class e0 extends zy{constructor(e,r,o,l,h,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,l,y),this.M=h,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,r){return this.bo.lo("Write",e,r)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const r=function(s,e){return s&&s.length>0?($t(void 0!==e),s.map(r=>function(o,l){let h=Si(o.updateTime?o.updateTime:l);return h.isEqual(Ut.min())&&(h=Si(l)),new by(h,o.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),o=Si(e.commitTime);return this.listener.Yo(o,r)}return $t(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Vu(this.M),this.Fo(e)}Jo(e){const r={streamToken:this.lastStreamToken,writes:e.map(o=>ti(this.M,o))};this.Fo(r)}}class qy extends class{}{constructor(e,r,o,l){super(),this.authCredentials=e,this.appCheckCredentials=r,this.bo=o,this.M=l,this.tu=!1}eu(){if(this.tu)throw new _(v.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,r,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.bo.oo(e,r,o,l,h)).catch(l=>{throw"FirebaseError"===l.name?(l.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _(v.UNKNOWN,l.toString())})}ho(e,r,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.bo.ho(e,r,o,l,h)).catch(l=>{throw"FirebaseError"===l.name?(l.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _(v.UNKNOWN,l.toString())})}terminate(){this.tu=!0}}class t0{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(cr(r),this.iu=!1):Ze("OnlineStateTracker",r)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Ky{constructor(e,r,o,l,h){var y=this;this.localStore=e,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=h,this._u.Lr(D=>{o.enqueueAndForget((0,Ee.Z)(function*(){var F;Gu(y)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,Ee.Z)(function*($){const X=b($);X.fu.add(4),yield yc(X),X.wu.set("Unknown"),X.fu.delete(4),yield ph(X)}),function($){return F.apply(this,arguments)})(y))}))}),this.wu=new t0(o,l)}}function ph(s){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Ee.Z)(function*(s){if(Gu(s))for(const e of s.du)yield e(!0)}),Pg.apply(this,arguments)}function yc(s){return $f.apply(this,arguments)}function $f(){return $f=(0,Ee.Z)(function*(s){for(const e of s.du)yield e(!1)}),$f.apply(this,arguments)}function Hf(s,e){const r=b(s);r.lu.has(e.targetId)||(r.lu.set(e.targetId,e),Yy(r)?kg(r):vc(r).xo()&&gh(r,e))}function xo(s,e){const r=b(s),o=vc(r);r.lu.delete(e),o.xo()&&Zy(r,e),0===r.lu.size&&(o.xo()?o.Mo():Gu(r)&&r.wu.set("Unknown"))}function gh(s,e){s.mu.Z(e.targetId),vc(s).jo(e)}function Zy(s,e){s.mu.Z(e),vc(s).Wo(e)}function kg(s){s.mu=new ps({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.lu.get(e)||null}),vc(s).start(),s.wu.ru()}function Yy(s){return Gu(s)&&!vc(s).Co()&&s.lu.size>0}function Gu(s){return 0===b(s).fu.size}function Qy(s){s.mu=void 0}function n0(s){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,Ee.Z)(function*(s){s.lu.forEach((e,r)=>{gh(s,e)})}),Fg.apply(this,arguments)}function Lg(s,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Ee.Z)(function*(s,e){Qy(s),Yy(s)?(s.wu.au(e),kg(s)):s.wu.set("Unknown")}),Vg.apply(this,arguments)}function r0(s,e,r){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Ee.Z)(function*(s,e,r){if(s.wu.set("Online"),e instanceof Xd&&2===e.state&&e.cause)try{yield(o=(0,Ee.Z)(function*(l,h){const y=h.cause;for(const D of h.targetIds)l.lu.has(D)&&(yield l.remoteSyncer.rejectListen(D,y),l.lu.delete(D),l.mu.removeTarget(D))}),function(l,h){return o.apply(this,arguments)})(s,e)}catch(o){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield wd(s,o)}else if(e instanceof vi?s.mu.ut(e):e instanceof Xc?s.mu._t(e):s.mu.ht(e),!r.isEqual(Ut.min()))try{const o=yield Ig(s.localStore);r.compareTo(o)>=0&&(yield function(l,h){const y=l.mu.yt(h);return y.targetChanges.forEach((D,F)=>{if(D.resumeToken.approximateByteSize()>0){const $=l.lu.get(F);$&&l.lu.set(F,$.withResumeToken(D.resumeToken,h))}}),y.targetMismatches.forEach(D=>{const F=l.lu.get(D);if(!F)return;l.lu.set(D,F.withResumeToken(gi.EMPTY_BYTE_STRING,F.snapshotVersion)),Zy(l,D);const $=new $u(F.target,D,1,F.sequenceNumber);gh(l,$)}),l.remoteSyncer.applyRemoteEvent(y)}(s,r))}catch(o){Ze("RemoteStore","Failed to raise snapshot:",o),yield wd(s,o)}var o}),Ed.apply(this,arguments)}function wd(s,e,r){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,Ee.Z)(function*(s,e,r){if(!hu(e))throw e;s.fu.add(1),yield yc(s),s.wu.set("Offline"),r||(r=()=>Ig(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield r(),s.fu.delete(1),yield ph(s)}))}),Ug.apply(this,arguments)}function Gf(s,e){return e().catch(r=>wd(s,r,e))}function Al(s){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ee.Z)(function*(s){const e=b(s),r=fa(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;s0(e);)try{const l=yield Dg(e.localStore,o);if(null===l){0===e.hu.length&&r.Mo();break}o=l.batchId,o0(e,l)}catch(l){yield wd(e,l)}zf(e)&&a0(e)}),Wf.apply(this,arguments)}function s0(s){return Gu(s)&&s.hu.length<10}function o0(s,e){s.hu.push(e);const r=fa(s);r.xo()&&r.Ho&&r.Jo(e.mutations)}function zf(s){return Gu(s)&&!fa(s).Co()&&s.hu.length>0}function a0(s){fa(s).start()}function u0(s){return qf.apply(this,arguments)}function qf(){return qf=(0,Ee.Z)(function*(s){fa(s).Zo()}),qf.apply(this,arguments)}function Jy(s){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Ee.Z)(function*(s){const e=fa(s);for(const r of s.hu)e.Jo(r.mutations)}),Kf.apply(this,arguments)}function Xy(s,e,r){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Ee.Z)(function*(s,e,r){const o=s.hu.shift(),l=og.from(o,e,r);yield Gf(s,()=>s.remoteSyncer.applySuccessfulWrite(l)),yield Al(s)}),Zf.apply(this,arguments)}function Wu(s,e){return Id.apply(this,arguments)}function Id(){return Id=(0,Ee.Z)(function*(s,e){var r;e&&fa(s).Ho&&(yield(r=(0,Ee.Z)(function*(o,l){if(pf(h=l.code)&&h!==v.ABORTED){const y=o.hu.shift();fa(o).ko(),yield Gf(o,()=>o.remoteSyncer.rejectFailedWrite(y.batchId,l)),yield Al(o)}var h}),function(o,l){return r.apply(this,arguments)})(s,e)),zf(s)&&a0(s)}),Id.apply(this,arguments)}function e_(s,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Ee.Z)(function*(s,e){const r=b(s);r.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const o=Gu(r);r.fu.add(3),yield yc(r),o&&r.wu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.fu.delete(3),yield ph(r)}),Bg.apply(this,arguments)}function t_(s,e){return _c.apply(this,arguments)}function _c(){return _c=(0,Ee.Z)(function*(s,e){const r=b(s);e?(r.fu.delete(2),yield ph(r)):e||(r.fu.add(2),yield yc(r),r.wu.set("Unknown"))}),_c.apply(this,arguments)}function vc(s){return s.gu||(s.gu=function(e,r,o){const l=b(e);return l.eu(),new XE(r,l.bo,l.authCredentials,l.appCheckCredentials,l.M,o)}(s.datastore,s.asyncQueue,{Hr:n0.bind(null,s),Yr:Lg.bind(null,s),Qo:r0.bind(null,s)}),s.du.push(function(){var e=(0,Ee.Z)(function*(r){r?(s.gu.ko(),Yy(s)?kg(s):s.wu.set("Unknown")):(yield s.gu.stop(),Qy(s))});return function(r){return e.apply(this,arguments)}}())),s.gu}function fa(s){return s.yu||(s.yu=function(e,r,o){const l=b(e);return l.eu(),new e0(r,l.bo,l.authCredentials,l.appCheckCredentials,l.M,o)}(s.datastore,s.asyncQueue,{Hr:u0.bind(null,s),Yr:Wu.bind(null,s),Xo:Jy.bind(null,s),Yo:Xy.bind(null,s)}),s.du.push(function(){var e=(0,Ee.Z)(function*(r){r?(s.yu.ko(),yield Al(s)):(yield s.yu.stop(),s.hu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${s.hu.length} pending writes`),s.hu=[]))});return function(r){return e.apply(this,arguments)}}())),s.yu}class Ec{constructor(e,r,o,l,h){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=o,this.op=l,this.removalCallback=h,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}static createAndSchedule(e,r,o,l,h){const y=Date.now()+o,D=new Ec(e,r,y,l,h);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bd(s,e){if(cr("AsyncQueue",`${e}: ${s}`),hu(s))return new _(v.UNAVAILABLE,`${e}: ${s}`);throw s}class Sl{constructor(e){this.comparator=e?(r,o)=>e(r,o)||at.comparator(r.key,o.key):(r,o)=>at.comparator(r.key,o.key),this.keyedMap=Qc(),this.sortedSet=new ei(this.comparator)}static emptySet(e){return new Sl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,o)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=o.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const o=new Sl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=r,o}}class jg{constructor(){this.pu=new ei(at.comparator)}track(e){const r=e.doc.key,o=this.pu.get(r);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(r,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(r,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(r):1===e.type&&2===o.type?this.pu=this.pu.insert(r,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(r,{type:2,doc:e.doc}):_t():this.pu=this.pu.insert(r,e)}Iu(){const e=[];return this.pu.inorderTraversal((r,o)=>{e.push(o)}),e}}class Cd{constructor(e,r,o,l,h,y,D,F){this.query=e,this.docs=r,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=h,this.fromCache=y,this.syncStateChanged=D,this.excludesMetadataChanges=F}static fromInitialDocuments(e,r,o,l){const h=[];return r.forEach(y=>{h.push({type:0,doc:y})}),new Cd(e,r,Sl.emptySet(r),h,o,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,o=e.docChanges;if(r.length!==o.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==o[l].type||!r[l].doc.isEqual(o[l].doc))return!1;return!0}}class n_{constructor(){this.Tu=void 0,this.listeners=[]}}class l0{constructor(){this.queries=new da(e=>Gc(e),su),this.onlineState="Unknown",this.Eu=new Set}}function mh(s,e){return $g.apply(this,arguments)}function $g(){return $g=(0,Ee.Z)(function*(s,e){const r=b(s),o=e.query;let l=!1,h=r.queries.get(o);if(h||(l=!0,h=new n_),l)try{h.Tu=yield r.onListen(o)}catch(y){const D=bd(y,`Initialization of query '${Wc(e.query)}' failed`);return void e.onError(D)}r.queries.set(o,h),h.listeners.push(e),e.Au(r.onlineState),h.Tu&&e.Ru(h.Tu)&&Gg(r)}),$g.apply(this,arguments)}function Hg(s,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Ee.Z)(function*(s,e){const r=b(s),o=e.query;let l=!1;const h=r.queries.get(o);if(h){const y=h.listeners.indexOf(e);y>=0&&(h.listeners.splice(y,1),l=0===h.listeners.length)}if(l)return r.queries.delete(o),r.onUnlisten(o)}),Yf.apply(this,arguments)}function Dd(s,e){const r=b(s);let o=!1;for(const l of e){const y=r.queries.get(l.query);if(y){for(const D of y.listeners)D.Ru(l)&&(o=!0);y.Tu=l}}o&&Gg(r)}function r_(s,e,r){const o=b(s),l=o.queries.get(e);if(l)for(const h of l.listeners)h.onError(r);o.queries.delete(e)}function Gg(s){s.Eu.forEach(e=>{e.next()})}class Wg{constructor(e,r,o){this.query=e,this.Pu=r,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)3!==l.type&&o.push(l);e=new Cd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),r=!0):this.Su(e,this.onlineState)&&(this.Du(e),r=!0),this.Vu=e,r}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let r=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),r=!0),r}Su(e,r){return!e.fromCache||!(this.options.Cu&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Td{constructor(e,r){this.payload=e,this.byteLength=r}xu(){return"metadata"in this.payload}}class i_{constructor(e){this.M=e}fi(e){return zo(this.M,e)}di(e){return e.metadata.exists?sc(this.M,e.document,!1):Rt.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Si(e)}}class c0{constructor(e,r,o){this.Nu=e,this.localStore=r,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=s_(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const o=Bt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}Mu(e){const r=new Map,o=new i_(this.M);for(const l of e)if(l.metadata.queries){const h=o.fi(l.metadata.name);for(const y of l.metadata.queries){const D=(r.get(y)||nr()).add(h);r.set(y,D)}}return r}complete(){var e=this;return(0,Ee.Z)(function*(){const r=yield function(s,e,r,o){return Ag.apply(this,arguments)}(e.localStore,new i_(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const l of e.queries)yield hh(e.localStore,l,o.get(l.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:r}})()}}function s_(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class o_{constructor(e){this.key=e}}class d0{constructor(e){this.key=e}}class a_{constructor(e,r){this.query=e,this.$u=r,this.Bu=null,this.current=!1,this.Lu=nr(),this.mutatedKeys=nr(),this.Uu=ou(e),this.qu=new Sl(this.Uu)}get Ku(){return this.$u}Gu(e,r){const o=r?r.Qu:new jg,l=r?r.qu:this.qu;let h=r?r.mutatedKeys:this.mutatedKeys,y=l,D=!1;const F=fl(this.query)&&l.size===this.query.limit?l.last():null,$=Hc(this.query)&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((X,le)=>{const xe=l.get(X),Ke=ml(this.query,le)?le:null,Ye=!!xe&&this.mutatedKeys.has(xe.key),pt=!!Ke&&(Ke.hasLocalMutations||this.mutatedKeys.has(Ke.key)&&Ke.hasCommittedMutations);let Xt=!1;xe&&Ke?xe.data.isEqual(Ke.data)?Ye!==pt&&(o.track({type:3,doc:Ke}),Xt=!0):this.ju(xe,Ke)||(o.track({type:2,doc:Ke}),Xt=!0,(F&&this.Uu(Ke,F)>0||$&&this.Uu(Ke,$)<0)&&(D=!0)):!xe&&Ke?(o.track({type:0,doc:Ke}),Xt=!0):xe&&!Ke&&(o.track({type:1,doc:xe}),Xt=!0,(F||$)&&(D=!0)),Xt&&(Ke?(y=y.add(Ke),h=pt?h.add(X):h.delete(X)):(y=y.delete(X),h=h.delete(X)))}),fl(this.query)||Hc(this.query))for(;y.size>this.query.limit;){const X=fl(this.query)?y.last():y.first();y=y.delete(X.key),h=h.delete(X.key),o.track({type:1,doc:X})}return{qu:y,Qu:o,ni:D,mutatedKeys:h}}ju(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,o){const l=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const h=e.Qu.Iu();h.sort(($,X)=>function(le,xe){const Ke=Ye=>{switch(Ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return Ke(le)-Ke(xe)}($.type,X.type)||this.Uu($.doc,X.doc)),this.Wu(o);const y=r?this.zu():[],D=0===this.Lu.size&&this.current?1:0,F=D!==this.Bu;return this.Bu=D,0!==h.length||F?{snapshot:new Cd(this.query,e.qu,l,h,e.mutatedKeys,0===D,F,!1),Hu:y}:{Hu:y}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new jg,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(r=>this.$u=this.$u.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.$u=this.$u.delete(r)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=nr(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const r=[];return e.forEach(o=>{this.Lu.has(o)||r.push(new d0(o))}),this.Lu.forEach(o=>{e.has(o)||r.push(new o_(o))}),r}Yu(e){this.$u=e.li,this.Lu=nr();const r=this.Gu(e.documents);return this.applyChanges(r,!0)}Xu(){return Cd.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class u_{constructor(e,r,o){this.query=e,this.targetId=r,this.view=o}}class ni{constructor(e){this.key=e,this.Zu=!1}}class zg{constructor(e,r,o,l,h,y){this.localStore=e,this.remoteStore=r,this.eventManager=o,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=y,this.ta={},this.ea=new da(D=>Gc(D),su),this.na=new Map,this.sa=new Set,this.ia=new ei(at.comparator),this.ra=new Map,this.oa=new gc,this.ua={},this.aa=new Map,this.ca=Dl.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function zu(s,e){return yh.apply(this,arguments)}function yh(){return yh=(0,Ee.Z)(function*(s,e){const r=sm(s);let o,l;const h=r.ea.get(e);if(h)o=h.targetId,r.sharedClientState.addLocalQueryTarget(o),l=h.view.Xu();else{const y=yield md(r.localStore,oo(e));r.isPrimaryClient&&Hf(r.remoteStore,y);const D=r.sharedClientState.addLocalQueryTarget(y.targetId);o=y.targetId,l=yield _h(r,e,o,"current"===D)}return l}),yh.apply(this,arguments)}function _h(s,e,r,o){return qg.apply(this,arguments)}function qg(){return qg=(0,Ee.Z)(function*(s,e,r,o){s.la=(X,le,xe)=>{return(Ke=(0,Ee.Z)(function*(Ye,pt,Xt,dr){let Kr=pt.view.Gu(Xt);Kr.ni&&(Kr=yield Ff(Ye.localStore,pt.query,!1).then(({documents:Wn})=>pt.view.Gu(Wn,Kr)));const rr=dr&&dr.targetChanges.get(pt.targetId),On=pt.view.applyChanges(Kr,Ye.isPrimaryClient,rr);return tp(Ye,pt.targetId,On.Hu),On.snapshot}),function(Ye,pt,Xt,dr){return Ke.apply(this,arguments)})(s,X,le,xe);var Ke};const l=yield Ff(s.localStore,e,!0),h=new a_(e,l.li),y=h.Gu(l.documents),D=Wo.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==s.onlineState),F=h.applyChanges(y,s.isPrimaryClient,D);tp(s,r,F.Hu);const $=new u_(e,r,h);return s.ea.set(e,$),s.na.has(r)?s.na.get(r).push(e):s.na.set(r,[e]),F.snapshot}),qg.apply(this,arguments)}function h0(s,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ee.Z)(function*(s,e){const r=b(s),o=r.ea.get(e),l=r.na.get(o.targetId);if(l.length>1)return r.na.set(o.targetId,l.filter(h=>!su(h,e))),void r.ea.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||(yield qo(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),xo(r.remoteStore,o.targetId),wc(r,o.targetId)}).catch(gu))):(wc(r,o.targetId),yield qo(r.localStore,o.targetId,!0))}),Qf.apply(this,arguments)}function Jf(){return Jf=(0,Ee.Z)(function*(s,e,r){const o=om(s);try{const l=yield function(h,y){const D=b(h),F=Pn.now(),$=y.reduce((le,xe)=>le.add(xe.key),nr());let X;return D.persistence.runTransaction("Locally write mutations","readwrite",le=>D.ci.Ks(le,$).next(xe=>{X=xe;const Ke=[];for(const Ye of y){const pt=qc(Ye,X.get(Ye.key));null!=pt&&Ke.push(new uu(Ye.key,pt,sn(pt.value.mapValue),yi.exists(!0)))}return D.Bs.addMutationBatch(le,F,Ke,y)})).then(le=>(le.applyToLocalDocumentSet(X),{batchId:le.batchId,changes:X}))}(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),function(h,y,D){let F=h.ua[h.currentUser.toKey()];F||(F=new ei(At)),F=F.insert(y,D),h.ua[h.currentUser.toKey()]=F}(o,l.batchId,r),yield xl(o,l.changes),yield Al(o.remoteStore)}catch(l){const h=bd(l,"Failed to persist write");r.reject(h)}}),Jf.apply(this,arguments)}function Kg(s,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Ee.Z)(function*(s,e){const r=b(s);try{const o=yield bg(r.localStore,e);e.targetChanges.forEach((l,h)=>{const y=r.ra.get(h);y&&($t(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?y.Zu=!0:l.modifiedDocuments.size>0?$t(y.Zu):l.removedDocuments.size>0&&($t(y.Zu),y.Zu=!1))}),yield xl(r,o,e)}catch(o){yield gu(o)}}),Zg.apply(this,arguments)}function c_(s,e,r){const o=b(s);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const l=[];o.ea.forEach((h,y)=>{const D=y.view.Au(e);D.snapshot&&l.push(D.snapshot)}),function(h,y){const D=b(h);D.onlineState=y;let F=!1;D.queries.forEach(($,X)=>{for(const le of X.listeners)le.Au(y)&&(F=!0)}),F&&Gg(D)}(o.eventManager,e),l.length&&o.ta.Qo(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function vh(s,e,r){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,Ee.Z)(function*(s,e,r){const o=b(s);o.sharedClientState.updateQueryState(e,"rejected",r);const l=o.ra.get(e),h=l&&l.key;if(h){let y=new ei(at.comparator);y=y.insert(h,Rt.newNoDocument(h,Ut.min()));const D=nr().add(h),F=new Jc(Ut.min(),new Map,new Ir(At),y,D);yield Kg(o,F),o.ia=o.ia.remove(h),o.ra.delete(e),Xg(o)}else yield qo(o.localStore,e,!1).then(()=>wc(o,e,r)).catch(gu)}),Eh.apply(this,arguments)}function d_(s,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Ee.Z)(function*(s,e){const r=b(s),o=e.batch.batchId;try{const l=yield KE(r.localStore,e);Jg(r,o,null),Qg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield xl(r,l)}catch(l){yield gu(l)}}),Xf.apply(this,arguments)}function h_(s,e,r){return ep.apply(this,arguments)}function ep(){return ep=(0,Ee.Z)(function*(s,e,r){const o=b(s);try{const l=yield function(h,y){const D=b(h);return D.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let $;return D.Bs.lookupMutationBatch(F,y).next(X=>($t(null!==X),$=X.keys(),D.Bs.removeMutationBatch(F,X))).next(()=>D.Bs.performConsistencyCheck(F)).next(()=>D.ci.Ks(F,$))})}(o.localStore,e);Jg(o,e,r),Qg(o,e),o.sharedClientState.updateMutationState(e,"rejected",r),yield xl(o,l)}catch(l){yield gu(l)}}),ep.apply(this,arguments)}function Yg(){return Yg=(0,Ee.Z)(function*(s,e){const r=b(s);Gu(r.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(h){const y=b(h);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>y.Bs.getHighestUnacknowledgedBatchId(D))}(r.localStore);if(-1===o)return void e.resolve();const l=r.aa.get(o)||[];l.push(e),r.aa.set(o,l)}catch(o){const l=bd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(l)}}),Yg.apply(this,arguments)}function Qg(s,e){(s.aa.get(e)||[]).forEach(r=>{r.resolve()}),s.aa.delete(e)}function Jg(s,e,r){const o=b(s);let l=o.ua[o.currentUser.toKey()];if(l){const h=l.get(e);h&&(r?h.reject(r):h.resolve(),l=l.remove(e)),o.ua[o.currentUser.toKey()]=l}}function wc(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const o of s.na.get(e))s.ea.delete(o),r&&s.ta.fa(o,r);s.na.delete(e),s.isPrimaryClient&&s.oa.Pi(e).forEach(o=>{s.oa.containsKey(o)||p0(s,o)})}function p0(s,e){s.sa.delete(e.path.canonicalString());const r=s.ia.get(e);null!==r&&(xo(s.remoteStore,r),s.ia=s.ia.remove(e),s.ra.delete(r),Xg(s))}function tp(s,e,r){for(const o of r)o instanceof o_?(s.oa.addReference(o.key,e),g0(s,o)):o instanceof d0?(Ze("SyncEngine","Document no longer in limbo: "+o.key),s.oa.removeReference(o.key,e),s.oa.containsKey(o.key)||p0(s,o.key)):_t()}function g0(s,e){const r=e.key,o=r.path.canonicalString();s.ia.get(r)||s.sa.has(o)||(Ze("SyncEngine","New document in limbo: "+r),s.sa.add(o),Xg(s))}function Xg(s){for(;s.sa.size>0&&s.ia.size<s.maxConcurrentLimboResolutions;){const e=s.sa.values().next().value;s.sa.delete(e);const r=new at(Bt.fromString(e)),o=s.ca.next();s.ra.set(o,new ni(r)),s.ia=s.ia.insert(r,o),Hf(s.remoteStore,new $u(oo(Nu(r.path)),o,2,rn.A))}}function xl(s,e,r){return f_.apply(this,arguments)}function f_(){return f_=(0,Ee.Z)(function*(s,e,r){const o=b(s),l=[],h=[],y=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,F)=>{y.push(o.la(F,e,r).then($=>{if($){o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,$.fromCache?"not-current":"current"),l.push($);const X=Ly.Ys(F.targetId,$);h.push(X)}}))}),yield Promise.all(y),o.ta.Qo(l),yield(D=(0,Ee.Z)(function*(F,$){const X=b(F);try{yield X.persistence.runTransaction("notifyLocalViewChanges","readwrite",le=>Le.forEach($,xe=>Le.forEach(xe.Hs,Ke=>X.persistence.referenceDelegate.addReference(le,xe.targetId,Ke)).next(()=>Le.forEach(xe.Js,Ke=>X.persistence.referenceDelegate.removeReference(le,xe.targetId,Ke)))))}catch(le){if(!hu(le))throw le;Ze("LocalStore","Failed to update sequence numbers: "+le)}for(const le of $){const xe=le.targetId;if(!le.fromCache){const Ke=X.ii.get(xe),pt=Ke.withLastLimboFreeSnapshotVersion(Ke.snapshotVersion);X.ii=X.ii.insert(xe,pt)}}}),function(F,$){return D.apply(this,arguments)})(o.localStore,h))}),f_.apply(this,arguments)}function em(s,e){return tm.apply(this,arguments)}function tm(){return tm=(0,Ee.Z)(function*(s,e){const r=b(s);if(!r.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const o=yield Hu(r.localStore,e);r.currentUser=e,(l=r).aa.forEach(y=>{y.forEach(D=>{D.reject(new _(v.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.aa.clear(),r.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield xl(r,o.hi)}var l}),tm.apply(this,arguments)}function p_(s,e){const r=b(s),o=r.ra.get(e);if(o&&o.Zu)return nr().add(o.key);{let l=nr();const h=r.na.get(e);if(!h)return l;for(const y of h){const D=r.ea.get(y);l=l.unionWith(D.view.Ku)}return l}}function g_(s,e){return m_.apply(this,arguments)}function m_(){return m_=(0,Ee.Z)(function*(s,e){const r=b(s),o=yield Ff(r.localStore,e.query,!0),l=e.view.Yu(o);return r.isPrimaryClient&&tp(r,e.targetId,l.Hu),l}),m_.apply(this,arguments)}function Wa(s,e){return y_.apply(this,arguments)}function y_(){return y_=(0,Ee.Z)(function*(s,e){const r=b(s);return Vy(r.localStore,e).then(o=>xl(r,o))}),y_.apply(this,arguments)}function SI(s,e,r,o){return np.apply(this,arguments)}function np(){return np=(0,Ee.Z)(function*(s,e,r,o){const l=b(s),h=yield function(y,D){const F=b(y),$=b(F.Bs);return F.persistence.runTransaction("Lookup mutation documents","readonly",X=>$.fn(X,D).next(le=>le?F.ci.Ks(X,le):Le.resolve(null)))}(l.localStore,e);var D;null!==h?("pending"===r?yield Al(l.remoteStore):"acknowledged"===r||"rejected"===r?(Jg(l,e,o||null),Qg(l,e),D=e,b(b(l.localStore).Bs)._n(D)):_t(),yield xl(l,h)):Ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),np.apply(this,arguments)}function rp(){return rp=(0,Ee.Z)(function*(s,e){const r=b(s);if(sm(r),om(r),!0===e&&!0!==r.ha){const o=r.sharedClientState.getAllActiveQueryTargets(),l=yield v_(r,o.toArray());r.ha=!0,yield t_(r.remoteStore,!0);for(const h of l)Hf(r.remoteStore,h)}else if(!1===e&&!1!==r.ha){const o=[];let l=Promise.resolve();r.na.forEach((h,y)=>{r.sharedClientState.isLocalQueryTarget(y)?o.push(y):l=l.then(()=>(wc(r,y),qo(r.localStore,y,!0))),xo(r.remoteStore,y)}),yield l,yield v_(r,o),function(h){const y=b(h);y.ra.forEach((D,F)=>{xo(y.remoteStore,F)}),y.oa.bi(),y.ra=new Map,y.ia=new ei(at.comparator)}(r),r.ha=!1,yield t_(r.remoteStore,!1)}}),rp.apply(this,arguments)}function v_(s,e,r){return E_.apply(this,arguments)}function E_(){return E_=(0,Ee.Z)(function*(s,e,r){const o=b(s),l=[],h=[];for(const y of e){let D;const F=o.na.get(y);if(F&&0!==F.length){D=yield md(o.localStore,oo(F[0]));for(const $ of F){const X=o.ea.get($),le=yield g_(o,X);le.snapshot&&h.push(le.snapshot)}}else{const $=yield Lf(o.localStore,y);D=yield md(o.localStore,$),yield _h(o,nm($),y,!1)}l.push(D)}return o.ta.Qo(h),l}),E_.apply(this,arguments)}function nm(s){return Wd(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function rm(s){const e=b(s);return b(b(e.localStore).persistence).Fs()}function m0(s,e,r,o){return wh.apply(this,arguments)}function wh(){return wh=(0,Ee.Z)(function*(s,e,r,o){const l=b(s);if(l.ha)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const h=l.na.get(e);if(h&&h.length>0)switch(r){case"current":case"not-current":{const y=yield Vy(l.localStore,qd(h[0])),D=Jc.createSynthesizedRemoteEventForCurrentChange(e,"current"===r);yield xl(l,y,D);break}case"rejected":yield qo(l.localStore,e,!0),wc(l,e,o);break;default:_t()}}),wh.apply(this,arguments)}function y0(s,e,r){return im.apply(this,arguments)}function im(){return im=(0,Ee.Z)(function*(s,e,r){const o=sm(s);if(o.ha){for(const l of e){if(o.na.has(l)){Ze("SyncEngine","Adding an already active target "+l);continue}const h=yield Lf(o.localStore,l),y=yield md(o.localStore,h);yield _h(o,nm(h),y.targetId,!1),Hf(o.remoteStore,y)}for(const l of r)o.na.has(l)&&(yield qo(o.localStore,l,!1).then(()=>{xo(o.remoteStore,l),wc(o,l)}).catch(gu))}}),im.apply(this,arguments)}function sm(s){const e=b(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vh.bind(null,e),e.ta.Qo=Dd.bind(null,e.eventManager),e.ta.fa=r_.bind(null,e.eventManager),e}function om(s){const e=b(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h_.bind(null,e),e}class w_{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ee.Z)(function*(){r.M=mc(e.databaseInfo.databaseId),r.sharedClientState=r._a(e),r.persistence=r.wa(e),yield r.persistence.start(),r.gcScheduler=r.ma(e),r.localStore=r.ga(e)})()}ma(e){return null}ga(e){return qE(this.persistence,new zE,e.initialUser,this.M)}wa(e){return new Mg(_d.zi,this.M)}_a(e){return new So}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ih extends w_{constructor(e,r,o){super(),this.ya=e,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield r().call(o,e),yield o.ya.initialize(o,e),yield om(o.ya.syncEngine),yield Al(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return qE(this.persistence,new zE,e.initialUser,this.M)}ma(e){return new _g(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const r=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new ky(this.synchronizeTabs,r,e.clientId,o,e.asyncQueue,JE(),Bf(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new So}}class Ad extends Ih{constructor(e,r){super(e,r,!1),this.ya=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield r().call(o,e);const l=o.ya.syncEngine;o.sharedClientState instanceof Og&&(o.sharedClientState.syncEngine={Mr:SI.bind(null,l),Or:m0.bind(null,l),Fr:y0.bind(null,l),Fs:rm.bind(null,l),kr:Wa.bind(null,l)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var h=(0,Ee.Z)(function*(y){yield function(s,e){return rp.apply(this,arguments)}(o.ya.syncEngine,y),o.gcScheduler&&(y&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):y||o.gcScheduler.stop())});return function(y){return h.apply(this,arguments)}}())})()}_a(e){const r=JE();if(!Og.vt(r))throw new _(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Og(r,e.asyncQueue,o,e.clientId,e.initialUser)}}class ip{initialize(e,r){var o=this;return(0,Ee.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=l=>c_(o.syncEngine,l,1),o.remoteStore.remoteSyncer.handleCredentialChange=em.bind(null,o.syncEngine),yield t_(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new l0}createDatastore(e){const r=mc(e.databaseInfo.databaseId),o=new Wy(e.databaseInfo);return new qy(e.authCredentials,e.appCheckCredentials,o,r)}createRemoteStore(e){return r=this.localStore,o=this.datastore,l=e.asyncQueue,h=D=>c_(this.syncEngine,D,0),y=Gy.vt()?new Gy:new QE,new Ky(r,o,l,h,y);var r,o,l,h,y}createSyncEngine(e,r){return function(o,l,h,y,D,F,$){const X=new zg(o,l,h,y,D,F);return $&&(X.ha=!0),X}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,Ee.Z)(function*(r){const o=b(r);Ze("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield yc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Sd(s,e=10240){let r=0;return{read:()=>(0,Ee.Z)(function*(){if(r<s.byteLength){const o={value:s.slice(r,r+e),done:!1};return r+=e,o}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class v0{constructor(e,r){this.Ta=e,this.M=r,this.metadata=new M,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ee.Z)(function*(){const r=yield e.Ra();if(null===r)return null;const o=e.Ea.decode(r),l=Number(o);isNaN(l)&&e.Pa(`length string (${o}) is not valid number`);const h=yield e.ba(l);return new Td(JSON.parse(h),r.length+l)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ee.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const r=e.Va();r<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),o})()}ba(e){var r=this;return(0,Ee.Z)(function*(){for(;r.buffer.length<e;)(yield r.va())&&r.Pa("Reached the end of bundle when more is expected.");const o=r.Ea.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ee.Z)(function*(){const r=yield e.Ta.read();if(!r.done){const o=new Uint8Array(e.buffer.length+r.value.length);o.set(e.buffer),o.set(r.value,e.buffer.length),e.buffer=o}return r.done})()}}class am{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ee.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new _(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(l=(0,Ee.Z)(function*(h,y){const D=b(h),F=Vu(D.M)+"/documents",$={documents:y.map(Ke=>rc(D.M,Ke))},X=yield D.ho("BatchGetDocuments",F,$),le=new Map;X.forEach(Ke=>{const Ye=function(s,e){return"found"in e?function(r,o){$t(!!o.found);const l=zo(r,o.found.name),h=Si(o.found.updateTime),y=new Dt({mapValue:{fields:o.found.fields}});return Rt.newFoundDocument(l,h,y)}(s,e):"missing"in e?function(r,o){$t(!!o.missing),$t(!!o.readTime);const l=zo(r,o.missing),h=Si(o.readTime);return Rt.newNoDocument(l,h)}(s,e):_t()}(D.M,Ke);le.set(Ye.key.toString(),Ye)});const xe=[];return y.forEach(Ke=>{const Ye=le.get(Ke.toString());$t(!!Ye),xe.push(Ye)}),xe}),function(h,y){return l.apply(this,arguments)})(r.datastore,e);var l;return o.forEach(l=>r.recordVersion(l)),o})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var o;e.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,l)=>{const h=at.fromPath(l);e.mutations.push(new ff(h,e.precondition(h)))}),yield(o=(0,Ee.Z)(function*(l,h){const y=b(l),D=Vu(y.M)+"/documents",F={writes:h.map($=>ti(y.M,$))};yield y.oo("Commit",D,F)}),function(l,h){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw _t();r=Ut.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!r.isEqual(o))throw new _(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?yi.updateTime(r):yi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ut.min()))throw new _(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yi.updateTime(r)}return yi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mu{constructor(e,r,o,l){this.asyncQueue=e,this.datastore=r,this.updateFunction=o,this.deferred=l,this.Sa=5,this.Do=new jf(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ee.Z)(function*(){const r=new am(e.datastore),o=e.Ca(r);o&&o.then(l=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(l)}).catch(h=>{e.xa(h)}))}).catch(l=>{e.xa(l)})}))}Ca(e){try{const r=this.updateFunction(e);return!Ti(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!pf(r)}return!1}}class bh{constructor(e,r,o,l){var h=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=l,this.user=fi.UNAUTHENTICATED,this.clientId=zi.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var y=(0,Ee.Z)(function*(D){Ze("FirestoreClient","Received user=",D.uid),yield h.authCredentialListener(D),h.user=D});return function(D){return y.apply(this,arguments)}}()),this.appCheckCredentials.start(o,y=>(Ze("FirestoreClient","Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(o){const l=bd(o,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function Cs(s,e){return qu.apply(this,arguments)}function qu(){return qu=(0,Ee.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let o=r.initialUser;s.setCredentialChangeListener(function(){var l=(0,Ee.Z)(function*(h){o.isEqual(h)||(yield Hu(e.localStore,h),o=h)});return function(h){return l.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),qu.apply(this,arguments)}function Ch(s,e){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,Ee.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield Dh(s);Ze("FirestoreClient","Initializing OnlineComponentProvider");const o=yield s.getConfiguration();yield e.initialize(r,o),s.setCredentialChangeListener(l=>e_(e.remoteStore,l)),s.setAppCheckTokenChangeListener((l,h)=>e_(e.remoteStore,h)),s.onlineComponents=e}),Mo.apply(this,arguments)}function Dh(s){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,Ee.Z)(function*(s){return s.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield Cs(s,new w_)),s.offlineComponents}),Ml.apply(this,arguments)}function Ku(s){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,Ee.Z)(function*(s){return s.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield Ch(s,new ip)),s.onlineComponents}),Rl.apply(this,arguments)}function Ic(s){return Dh(s).then(e=>e.persistence)}function Nl(s){return Dh(s).then(e=>e.localStore)}function bc(s){return Ku(s).then(e=>e.remoteStore)}function Ol(s){return Ku(s).then(e=>e.syncEngine)}function za(s){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,Ee.Z)(function*(s){const e=yield Ku(s),r=e.eventManager;return r.onListen=zu.bind(null,e.syncEngine),r.onUnlisten=h0.bind(null,e.syncEngine),r}),Pl.apply(this,arguments)}function um(s,e,r={}){const o=new M;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,h,y,D,F){const $=new sp({next:le=>{h.enqueueAndForget(()=>Hg(l,X));const xe=le.docs.has(y);!xe&&le.fromCache?F.reject(new _(v.UNAVAILABLE,"Failed to get document because the client is offline.")):xe&&le.fromCache&&D&&"server"===D.source?F.reject(new _(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(le)},error:le=>F.reject(le)}),X=new Wg(Nu(y.path),$,{includeMetadataChanges:!0,Cu:!0});return mh(l,X)}(yield za(s),s.asyncQueue,e,r,o)})),o.promise}function lm(s,e,r={}){const o=new M;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,h,y,D,F){const $=new sp({next:le=>{h.enqueueAndForget(()=>Hg(l,X)),le.fromCache&&"server"===D.source?F.reject(new _(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(le)},error:le=>F.reject(le)}),X=new Wg(y,$,{includeMetadataChanges:!0,Cu:!0});return mh(l,X)}(yield za(s),s.asyncQueue,e,r,o)})),o.promise}const cm=new Map;function dm(s,e,r){if(!r)throw new _(v.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function hm(s,e,r,o){if(!0===e&&!0===o)throw new _(v.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function fm(s){if(!at.isDocumentKey(s))throw new _(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function x_(s){if(at.isDocumentKey(s))throw new _(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function op(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":_t()}function Gn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new _(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=op(s);throw new _(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function M_(s,e){if(e<=0)throw new _(v.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class pm{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new _(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,r,o){this._authCredentials=r,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pm({}),this._settingsFrozen=!1,e instanceof la?this._databaseId=e:(this._app=e,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(l.options.projectId)}(e))}get app(){if(!this._app)throw new _(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pm(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new G;switch(r.type){case"gapi":const o=r.client;return $t(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new vt(o,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new _(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=cm.get(e);r&&(Ze("ComponentProvider","Removing Datastore"),cm.delete(e),r.terminate())}(this),Promise.resolve()}}class Qr{constructor(e,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Ds{constructor(e,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class Zu extends Ds{constructor(e,r,o){super(e,r,Nu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new at(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function I0(s,e,...r){if(s=(0,gt.m9)(s),dm("collection","path",e),s instanceof Th){const o=Bt.fromString(e,...r);return x_(o),new Zu(s,null,o)}{if(!(s instanceof Qr||s instanceof Zu))throw new _(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(Bt.fromString(e,...r));return x_(o),new Zu(s.firestore,null,o)}}function gm(s,e,...r){if(s=(0,gt.m9)(s),1===arguments.length&&(e=zi.R()),dm("doc","path",e),s instanceof Th){const o=Bt.fromString(e,...r);return fm(o),new Qr(s,null,new at(o))}{if(!(s instanceof Qr||s instanceof Zu))throw new _(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(Bt.fromString(e,...r));return fm(o),new Qr(s.firestore,s instanceof Zu?s.converter:null,new at(o))}}function R_(s,e){return s=(0,gt.m9)(s),e=(0,gt.m9)(e),(s instanceof Qr||s instanceof Zu)&&(e instanceof Qr||e instanceof Zu)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function N_(s,e){return s=(0,gt.m9)(s),e=(0,gt.m9)(e),s instanceof Ds&&e instanceof Ds&&s.firestore===e.firestore&&su(s._query,e._query)&&s.converter===e.converter}class mm{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new jf(this,"async_queue_retry"),this.qa=()=>{const r=Bf();r&&Ze("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Do.Ao()};const e=Bf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const r=Bf();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const r=new M;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(r){if(!hu(r))throw r;Ze("AsyncQueue","Operation failed with retryable error: "+r)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const r=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,cr("INTERNAL UNHANDLED ERROR: ",function(h){let y=h.message||"";return h.stack&&(y=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),y}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=r,r}enqueueAfterDelay(e,r,o){this.Ka(),this.Ua.indexOf(e)>-1&&(r=0);const l=Ec.createAndSchedule(this,e,r,o,h=>this.ja(h));return this.Fa.push(l),l}Ka(){this.$a&&_t()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ee.Z)(function*(){let r;do{r=e.ka,yield r}while(r!==e.ka)})()}za(e){for(const r of this.Fa)if(r.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.Fa)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const r=this.Fa.indexOf(e);this.Fa.splice(r,1)}}function Ah(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const o=e;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(s)}class C0{constructor(){this._progressObserver={},this._taskCompletionResolver=new M,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,o){this._progressObserver={next:e,error:r,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ui extends Th{constructor(e,r,o){super(e,r,o),this.type="firestore",this._queue=new mm,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||D0(this),this._firestoreClient.terminate()}}function Ri(s){return s._firestoreClient||D0(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function D0(s){var e;const r=s._freezeSettings(),o=(h=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Mu(s._databaseId,h,s._persistenceKey,(D=r).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var h,D;s._firestoreClient=new bh(s._authCredentials,s._appCheckCredentials,s._queue,o)}function O_(s,e,r){const o=new M;return s.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Cs(s,r),yield Ch(s,e),o.resolve()}catch(l){if(!("FirebaseError"===(h=l).name?h.code===v.FAILED_PRECONDITION||h.code===v.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),o.reject(l)}var h})).then(()=>o.promise)}function L_(s){if(s._initialized||s._terminated)throw new _(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new _(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yu(gi.fromBase64String(e))}catch(r){throw new _(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new yu(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kl{constructor(e){this._methodName=e}}class up{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new _(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new _(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const V_=/^__.*__$/;class U_{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return null!==this.fieldMask?new uu(e,this.data,this.fieldMask,r,this.fieldTransforms):new Zc(e,this.data,r,this.fieldTransforms)}}class lp{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return new uu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function x0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class Md{constructor(e,r,o,l,h,y){this.settings=e,this.databaseId=r,this.M=o,this.ignoreUndefinedProperties=l,void 0===h&&this.Ya(),this.fieldTransforms=h||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Md(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),l=this.Za({path:o,ec:!1});return l.nc(e),l}sc(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),l=this.Za({path:o,ec:!1});return l.Ya(),l}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Pd(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(x0(this.Xa)&&V_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class M0{constructor(e,r,o){this.databaseId=e,this.ignoreUndefinedProperties=r,this.M=o||mc(e)}ac(e,r,o,l=!1){return new Md({Xa:e,methodName:r,uc:o,path:qi.emptyPath(),ec:!1,oc:l},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Rd(s){const e=s._freezeSettings(),r=mc(s._databaseId);return new M0(s._databaseId,!!e.ignoreUndefinedProperties,r)}function Fl(s,e,r,o,l,h={}){const y=s.ac(h.merge||h.mergeFields?2:0,e,r,l);fp("Data must be an object, but it was:",y,o);const D=hp(o,y);let F,$;if(h.merge)F=new Eo(y.fieldMask),$=y.fieldTransforms;else if(h.mergeFields){const X=[];for(const le of h.mergeFields){const xe=xh(e,le,r);if(!y.contains(xe))throw new _(v.INVALID_ARGUMENT,`Field '${xe}' is specified in your field mask but missing from your input data.`);vm(X,xe)||X.push(xe)}F=new Eo(X),$=y.fieldTransforms.filter(le=>F.covers(le.field))}else F=null,$=y.fieldTransforms;return new U_(new Dt(D),F,$)}class Nd extends kl{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}function cp(s,e,r){return new Md({Xa:3,uc:e.settings.uc,methodName:s._methodName,ec:r},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Sh extends kl{_toFieldTransform(e){return new Ql(e.path,new _l)}isEqual(e){return e instanceof Sh}}class R0 extends kl{constructor(e,r){super(e),this.cc=r}_toFieldTransform(e){const r=cp(this,e,!0),o=this.cc.map(h=>Qu(h,r)),l=new Pu(o);return new Ql(e.path,l)}isEqual(e){return this===e}}class ym extends kl{constructor(e,r){super(e),this.cc=r}_toFieldTransform(e){const r=cp(this,e,!0),o=this.cc.map(h=>Qu(h,r)),l=new ja(o);return new Ql(e.path,l)}isEqual(e){return this===e}}class _m extends kl{constructor(e,r){super(e),this.hc=r}_toFieldTransform(e){const r=new ku(e.M,af(e.M,this.hc));return new Ql(e.path,r)}isEqual(e){return this===e}}function dp(s,e,r,o){const l=s.ac(1,e,r);fp("Data must be an object, but it was:",l,o);const h=[],y=Dt.empty();Na(o,(F,$)=>{const X=Od(e,F,r);$=(0,gt.m9)($);const le=l.sc(X);if($ instanceof Nd)h.push(X);else{const xe=Qu($,le);null!=xe&&(h.push(X),y.set(X,xe))}});const D=new Eo(h);return new lp(y,D,l.fieldTransforms)}function B_(s,e,r,o,l,h){const y=s.ac(1,e,r),D=[xh(e,o,r)],F=[l];if(h.length%2!=0)throw new _(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let xe=0;xe<h.length;xe+=2)D.push(xh(e,h[xe])),F.push(h[xe+1]);const $=[],X=Dt.empty();for(let xe=D.length-1;xe>=0;--xe)if(!vm($,D[xe])){const Ke=D[xe];let Ye=F[xe];Ye=(0,gt.m9)(Ye);const pt=y.sc(Ke);if(Ye instanceof Nd)$.push(Ke);else{const Xt=Qu(Ye,pt);null!=Xt&&($.push(Ke),X.set(Ke,Xt))}}const le=new Eo($);return new lp(X,le,y.fieldTransforms)}function j_(s,e,r,o=!1){return Qu(r,s.ac(o?4:3,e))}function Qu(s,e){if($_(s=(0,gt.m9)(s)))return fp("Unsupported field value:",e,s),hp(s,e);if(s instanceof kl)return function(r,o){if(!x0(o.Xa))throw o.rc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(r,o){const l=[];let h=0;for(const y of r){let D=Qu(y,o.ic(h));null==D&&(D={nullValue:"NULL_VALUE"}),l.push(D),h++}return{arrayValue:{values:l}}}(s,e)}return function(r,o){if(null===(r=(0,gt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return af(o.M,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=Pn.fromDate(r);return{timestampValue:nc(o.M,l)}}if(r instanceof Pn){const l=new Pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(o.M,l)}}if(r instanceof up)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yu)return{bytesValue:eh(o.M,r._byteString)};if(r instanceof Qr){const l=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw o.rc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:nd(r.firestore._databaseId||o.databaseId,r._key.path)}}throw o.rc(`Unsupported field value: ${op(r)}`)}(s,e)}function hp(s,e){const r={};return ll(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(s,(o,l)=>{const h=Qu(l,e.tc(o));null!=h&&(r[o]=h)}),{mapValue:{fields:r}}}function $_(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Pn||s instanceof up||s instanceof yu||s instanceof Qr||s instanceof kl)}function fp(s,e,r){if(!$_(r)||"object"!=typeof(o=r)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=op(r);throw e.rc("an object"===o?s+" a custom object":s+" "+o)}var o}function xh(s,e,r){if((e=(0,gt.m9)(e))instanceof Yu)return e._internalPath;if("string"==typeof e)return Od(s,e);throw Pd("Field path arguments must be of type string or ",s,!1,void 0,r)}const H_=new RegExp("[~\\*/\\[\\]]");function Od(s,e,r){if(e.search(H_)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Yu(...e.split("."))._internalPath}catch(o){throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Pd(s,e,r,o,l){const h=o&&!o.isEmpty(),y=void 0!==l;let D=`Function ${e}() called with invalid data`;r&&(D+=" (via `toFirestore()`)"),D+=". ";let F="";return(h||y)&&(F+=" (found",h&&(F+=` in field ${o}`),y&&(F+=` in document ${l}`),F+=")"),new _(v.INVALID_ARGUMENT,D+s+F)}function vm(s,e){return s.some(r=>r.isEqual(e))}class Mh{constructor(e,r,o,l,h){this._firestore=e,this._userDataWriter=r,this._key=o,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new G_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Rh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class G_ extends Mh{data(){return super.data()}}function Rh(s,e){return"string"==typeof e?Od(s,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}class Ju{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _u extends Mh{constructor(e,r,o,l,h,y){super(e,r,o,l,y),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const o=this._document.data.field(Rh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class Nh extends _u{data(e={}){return super.data(e)}}class Ll{constructor(e,r,o,l){this._firestore=e,this._userDataWriter=r,this._snapshot=l,this.metadata=new Ju(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(o=>{e.call(r,new Nh(this._firestore,this._userDataWriter,o.key,o,new Ju(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new _(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(y=>({type:"added",doc:new Nh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:h++}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>l||3!==y.type).map(y=>{const D=new Nh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,$=-1;return 0!==y.type&&(F=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),1!==y.type&&(h=h.add(y.doc),$=h.indexOf(y.doc.key)),{type:N0(y.type),doc:D,oldIndex:F,newIndex:$}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function N0(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function pp(s,e){return s instanceof _u&&e instanceof _u?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Ll&&e instanceof Ll&&s._firestore===e._firestore&&N_(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function gp(s){if(Hc(s)&&0===s.explicitOrderBy.length)throw new _(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kd{}function Xu(s,...e){for(const r of e)s=r._apply(s);return s}class W_ extends kd{constructor(e,r,o){super(),this.lc=e,this.fc=r,this.dc=o,this.type="where"}_apply(e){const r=Rd(e.firestore),o=function(l,h,y,D,F,$,X){let le;if(F.isKeyField()){if("array-contains"===$||"array-contains-any"===$)throw new _(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${$}' queries on documentId().`);if("in"===$||"not-in"===$){wm(X,$);const Ke=[];for(const Ye of X)Ke.push(tv(D,l,Ye));le={arrayValue:{values:Ke}}}else le=tv(D,l,X)}else"in"!==$&&"not-in"!==$&&"array-contains-any"!==$||wm(X,$),le=j_(y,"where",X,"in"===$||"not-in"===$);const xe=mi.create(F,$,le);return function(Ke,Ye){if(Ye.S()){const Xt=pl(Ke);if(null!==Xt&&!Xt.isEqual(Ye.field))throw new _(v.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xt.toString()}' and '${Ye.field.toString()}'`);const dr=Ou(Ke);null!==dr&&nv(0,Ye.field,dr)}const pt=function(Xt,dr){for(const Kr of Xt.filters)if(dr.indexOf(Kr.op)>=0)return Kr.op;return null}(Ke,function(Xt){switch(Xt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ye.op));if(null!==pt)throw new _(v.INVALID_ARGUMENT,pt===Ye.op?`Invalid query. You cannot use more than one '${Ye.op.toString()}' filter.`:`Invalid query. You cannot use '${Ye.op.toString()}' filters with '${pt.toString()}' filters.`)}(l,xe),xe}(e._query,0,r,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ds(e.firestore,e.converter,function(l,h){const y=l.filters.concat([h]);return new Co(l.path,l.collectionGroup,l.explicitOrderBy.slice(),y,l.limit,l.limitType,l.startAt,l.endAt)}(e._query,o))}}class q_ extends kd{constructor(e,r){super(),this.lc=e,this._c=r,this.type="orderBy"}_apply(e){const r=function(o,l,h){if(null!==o.startAt)throw new _(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new _(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const y=new ca(l,h);return function(D,F){if(null===Ou(D)){const $=pl(D);null!==$&&nv(0,$,F.field)}}(o,y),y}(e._query,this.lc,this._c);return new Ds(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Co(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Em extends kd{constructor(e,r,o){super(),this.type=e,this.wc=r,this.mc=o}_apply(e){return new Ds(e.firestore,e.converter,zd(e._query,this.wc,this.mc))}}class Y_ extends kd{constructor(e,r,o){super(),this.type=e,this.gc=r,this.yc=o}_apply(e){const r=ev(e,this.type,this.gc,this.yc);return new Ds(e.firestore,e.converter,(l=r,new Co((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)));var o,l}}class J_ extends kd{constructor(e,r,o){super(),this.type=e,this.gc=r,this.yc=o}_apply(e){const r=ev(e,this.type,this.gc,this.yc);return new Ds(e.firestore,e.converter,(l=r,new Co((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)));var o,l}}function ev(s,e,r,o){if(r[0]=(0,gt.m9)(r[0]),r[0]instanceof Mh)return function(l,h,y,D,F){if(!D)throw new _(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const $=[];for(const X of gl(l))if(X.field.isKeyField())$.push(bs(h,D.key));else{const le=D.data.field(X.field);if(Ar(le))throw new _(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+X.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===le){const xe=X.field.canonicalString();throw new _(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xe}' (used as the orderBy) does not exist.`)}$.push(le)}return new so($,F)}(s._query,s.firestore._databaseId,e,r[0]._document,o);{const l=Rd(s.firestore);return function(h,y,D,F,$,X){const le=h.explicitOrderBy;if($.length>le.length)throw new _(v.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xe=[];for(let Ke=0;Ke<$.length;Ke++){const Ye=$[Ke];if(le[Ke].field.isKeyField()){if("string"!=typeof Ye)throw new _(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof Ye}`);if(!Ua(h)&&-1!==Ye.indexOf("/"))throw new _(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${Ye}' contains a slash.`);const pt=h.path.child(Bt.fromString(Ye));if(!at.isDocumentKey(pt))throw new _(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${pt}' is not because it contains an odd number of segments.`);const Xt=new at(pt);xe.push(bs(y,Xt))}else{const pt=j_(D,F,Ye);xe.push(pt)}}return new so(xe,X)}(s._query,s.firestore._databaseId,l,e,r,o)}}function tv(s,e,r){if("string"==typeof(r=(0,gt.m9)(r))){if(""===r)throw new _(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ua(e)&&-1!==r.indexOf("/"))throw new _(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=e.path.child(Bt.fromString(r));if(!at.isDocumentKey(o))throw new _(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return bs(s,new at(o))}if(r instanceof Qr)return bs(s,r._key);throw new _(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(r)}.`)}function wm(s,e){if(!Array.isArray(s)||0===s.length)throw new _(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new _(v.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nv(s,e,r){if(!r.isEqual(e))throw new _(v.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class mp{convertValue(e,r="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw _t()}}convertObject(e,r){const o={};return Na(e.fields,(l,h)=>{o[l]=this.convertValue(h,r)}),o}convertGeoPoint(e){return new up(ar(e.latitude),ar(e.longitude))}convertArray(e,r){return(e.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(e,r){switch(r){case"previous":const o=xu(e);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const r=wo(e);return new Pn(r.seconds,r.nanos)}convertDocumentKey(e,r){const o=Bt.fromString(e);$t(Ei(o));const l=new la(o.get(1),o.get(3)),h=new at(o.popFirst(5));return l.isEqual(r)||cr(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function Oh(s,e,r){let o;return o=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,o}class Fd extends mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,r)}}class rv{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Rd(e)}set(e,r,o){this._verifyNotCommitted();const l=Vl(e,this._firestore),h=Oh(l.converter,r,o),y=Fl(this._dataReader,"WriteBatch.set",l._key,h,null!==l.converter,o);return this._mutations.push(y.toMutation(l._key,yi.none())),this}update(e,r,o,...l){this._verifyNotCommitted();const h=Vl(e,this._firestore);let y;return y="string"==typeof(r=(0,gt.m9)(r))||r instanceof Yu?B_(this._dataReader,"WriteBatch.update",h._key,r,o,l):dp(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(y.toMutation(h._key,yi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Vl(e,this._firestore);return this._mutations=this._mutations.concat(new Lu(r._key,yi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vl(s,e){if((s=(0,gt.m9)(s)).firestore!==e)throw new _(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Cc extends mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,r)}}function av(s,e,r){s=Gn(s,Qr);const o=Gn(s.firestore,ui),l=Oh(s.converter,e,r);return Dc(o,[Fl(Rd(o),"setDoc",s._key,l,null!==s.converter,r).toMutation(s._key,yi.none())])}function uv(s,e,r,...o){s=Gn(s,Qr);const l=Gn(s.firestore,ui),h=Rd(l);let y;return y="string"==typeof(e=(0,gt.m9)(e))||e instanceof Yu?B_(h,"updateDoc",s._key,e,r,o):dp(h,"updateDoc",s._key,e),Dc(l,[y.toMutation(s._key,yi.exists(!0))])}function pa(s,...e){var r,o,l;s=(0,gt.m9)(s);let h={includeMetadataChanges:!1},y=0;"object"!=typeof e[y]||Ah(e[y])||(h=e[y],y++);const D={includeMetadataChanges:h.includeMetadataChanges};if(Ah(e[y])){const le=e[y];e[y]=null===(r=le.next)||void 0===r?void 0:r.bind(le),e[y+1]=null===(o=le.error)||void 0===o?void 0:o.bind(le),e[y+2]=null===(l=le.complete)||void 0===l?void 0:l.bind(le)}let F,$,X;if(s instanceof Qr)$=Gn(s.firestore,ui),X=Nu(s._key.path),F={next:le=>{e[y]&&e[y](bm($,s,le))},error:e[y+1],complete:e[y+2]};else{const le=Gn(s,Ds);$=Gn(le.firestore,ui),X=le._query;const xe=new Cc($);F={next:Ke=>{e[y]&&e[y](new Ll($,xe,le,Ke))},error:e[y+1],complete:e[y+2]},gp(s._query)}return function(le,xe,Ke,Ye){const pt=new sp(Ye),Xt=new Wg(xe,pt,Ke);return le.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return mh(yield za(le),Xt)})),()=>{pt.Ia(),le.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Hg(yield za(le),Xt)}))}}(Ri($),X,D,F)}function Dc(s,e){return function(r,o){const l=new M;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,e,r){return Jf.apply(this,arguments)}(yield Ol(r),o,l)})),l.promise}(Ri(s),e)}function bm(s,e,r){const o=r.docs.get(e._key),l=new Cc(s);return new _u(s,l,e._key,o,new Ju(r.hasPendingWrites,r.fromCache),e.converter)}class P0 extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Rd(e)}get(e){const r=Vl(e,this._firestore),o=new Fd(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return _t();const h=l[0];if(h.isFoundDocument())return new Mh(this._firestore,o,h.key,h,r.converter);if(h.isNoDocument())return new Mh(this._firestore,o,r._key,null,r.converter);throw _t()})}set(e,r,o){const l=Vl(e,this._firestore),h=Oh(l.converter,r,o),y=Fl(this._dataReader,"Transaction.set",l._key,h,null!==l.converter,o);return this._transaction.set(l._key,y),this}update(e,r,o,...l){const h=Vl(e,this._firestore);let y;return y="string"==typeof(r=(0,gt.m9)(r))||r instanceof Yu?B_(this._dataReader,"Transaction.update",h._key,r,o,l):dp(this._dataReader,"Transaction.update",h._key,r),this._transaction.update(h._key,y),this}delete(e){const r=Vl(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Vl(e,this._firestore),o=new Cc(this._firestore);return super.get(e).then(l=>new _u(this._firestore,o,r._key,l._document,new Ju(!1,!1),r.converter))}}function _p(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Tm(){if("undefined"==typeof Uint8Array)throw new _("unimplemented","Uint8Arrays are not available in this environment.")}function vp(){if("undefined"==typeof atob)throw new _("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(s,e=!0){ws=ot.SDK_VERSION,(0,ot._registerComponent)(new Kt.wA("firestore",(r,{options:o})=>{const l=r.getProvider("app").getImmediate(),h=new ui(l,new he(r.getProvider("auth-internal")),new Vt(r.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC")),(0,ot.registerVersion)(Ma,"3.4.8",s),(0,ot.registerVersion)(Ma,"3.4.8","esm2017")}();class Ul{constructor(e){this._delegate=e}static fromBase64String(e){return vp(),new Ul(yu.fromBase64String(e))}static fromUint8Array(e){return Tm(),new Ul(yu.fromUint8Array(e))}toBase64(){return vp(),this._delegate.toBase64()}toUint8Array(){return Tm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ep(s){return function(s,e){if("object"!=typeof s||null===s)return!1;const r=s;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(s)}class hv{enableIndexedDbPersistence(e,r){return function(s,e){L_(s=Gn(s,ui));const r=Ri(s),o=s._freezeSettings(),l=new ip;return O_(r,l,new Ih(l,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function(s){L_(s=Gn(s,ui));const e=Ri(s),r=s._freezeSettings(),o=new ip;return O_(e,o,new Ad(o,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(s){if(s._initialized&&!s._terminated)throw new _(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new M;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(r=(0,Ee.Z)(function*(o){if(!ao.vt())return Promise.resolve();const l=o+"main";yield ao.delete(l)}),function(o){return r.apply(this,arguments)})(Fy(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Am{constructor(e,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,o={}){!function(s,e,r,o={}){var l;const h=(s=Gn(s,Th))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==e&&vo("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},h),{host:`${e}:${r}`,ssl:!1})),o.mockUserToken){let y,D;if("string"==typeof o.mockUserToken)y=o.mockUserToken,D=fi.MOCK_USER;else{y=(0,gt.Sg)(o.mockUserToken,null===(l=s._app)||void 0===l?void 0:l.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new _(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new fi(F)}s._authCredentials=new te(new L(y,D))}}(this._delegate,e,r,o)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Ic(s),r=yield bc(s);return e.setNetworkEnabled(!0),function(o){const l=b(o);return l.fu.delete(0),ph(l)}(r)}))}(Ri(s=Gn(s,ui)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Ic(s),r=yield bc(s);return e.setNetworkEnabled(!1),(o=(0,Ee.Z)(function*(l){const h=b(l);h.fu.add(0),yield yc(h),h.wu.set("Offline")}),function(l){return o.apply(this,arguments)})(r);var o}))}(Ri(s=Gn(s,ui)))}(this._delegate)}enablePersistence(e){let r=!1,o=!1;return e&&(r=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,hm("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(e){const r=new M;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,e){return Yg.apply(this,arguments)}(yield Ol(e),r)})),r.promise}(Ri(s=Gn(s,ui)))}(this._delegate)}onSnapshotsInSync(e){return function(s,e){return function(s,e){const r=new sp(e);return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return o=yield za(s),l=r,b(o).Eu.add(l),void l.next();var o,l})),()=>{r.Ia(),s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return o=yield za(s),l=r,void b(o).Eu.delete(l);var o,l}))}}(Ri(s=Gn(s,ui)),Ah(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ld(this,I0(this._delegate,e))}catch(r){throw co(r,"collection()","Firestore.collection()")}}doc(e){try{return new ga(this,gm(this._delegate,e))}catch(r){throw co(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function(s,e){if(s=Gn(s,Th),dm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ds(s,null,(r=e,new Co(Bt.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw co(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(s,e){return function(s,e){const r=new M;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const o=yield(l=s,Ku(l).then(h=>h.datastore));var l;new mu(s.asyncQueue,o,e,r).run()})),r.promise}(Ri(s=Gn(s,ui)),r=>e(new P0(s,r)))}(this._delegate,r=>e(new Sm(this,r)))}batch(){return Ri(this._delegate),new xm(new rv(this._delegate,e=>Dc(this._delegate,e)))}loadBundle(e){return function(s,e){const r=Ri(s=Gn(s,ui)),o=new C0;return function(s,e,r,o){const l=function(h,y){let D;return D="string"==typeof h?(new TextEncoder).encode(h):h,F=function(F,$){if(F instanceof Uint8Array)return Sd(F,$);if(F instanceof ArrayBuffer)return Sd(new Uint8Array(F),$);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new v0(F,y);var F}(r,mc(e));s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(s,e,r){const o=b(s);var l;(l=(0,Ee.Z)(function*(h,y,D){try{const F=yield y.getMetadata();if(yield function(xe,Ke){const Ye=b(xe),pt=Si(Ke.createTime);return Ye.persistence.runTransaction("hasNewerBundle","readonly",Xt=>Ye._s.getBundleMetadata(Xt,Ke.id)).then(Xt=>!!Xt&&Xt.createTime.compareTo(pt)>=0)}(h.localStore,F))return yield y.close(),D._completeWith({taskState:"Success",documentsLoaded:(xe=F).totalDocuments,bytesLoaded:xe.totalBytes,totalDocuments:xe.totalDocuments,totalBytes:xe.totalBytes}),Promise.resolve(new Set);D._updateProgress(s_(F));const $=new c0(F,h.localStore,y.M);let X=yield y.da();for(;X;){const xe=yield $.ku(X);xe&&D._updateProgress(xe),X=yield y.da()}const le=yield $.complete();return yield xl(h,le.Fu,void 0),yield function(xe,Ke){const Ye=b(xe);return Ye.persistence.runTransaction("Save bundle","readwrite",pt=>Ye._s.saveBundleMetadata(pt,Ke))}(h.localStore,F),D._completeWith(le.progress),Promise.resolve(le.Ou)}catch(F){return vo("SyncEngine",`Loading bundle failed with ${F}`),D._failWith(F),Promise.resolve(new Set)}var xe}),function(h,y,D){return l.apply(this,arguments)})(o,e,r).then(l=>{o.sharedClientState.notifyBundleLoaded(l)})}(yield Ol(s),l,o)}))}(r,s._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function(s,e){return function(s,e){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(r,o){const l=b(r);return l.persistence.runTransaction("Get named query","readonly",h=>l._s.getNamedQuery(h,o))}(yield Nl(s),e)}))}(Ri(s=Gn(s,ui)),e).then(r=>r?new Ds(s,null,r.query):null)}(this._delegate,e).then(r=>r?new ho(this,r):null)}}class kh extends mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(new yu(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return ga.forKey(r,this.firestore,null)}}class Sm{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new kh(e)}get(e){const r=Ac(e);return this._delegate.get(r).then(o=>new Fh(this._firestore,new _u(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(e,r,o){const l=Ac(e);return o?(_p("Transaction.set",o),this._delegate.set(l,r,o)):this._delegate.set(l,r),this}update(e,r,o,...l){const h=Ac(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,o,...l),this}delete(e){const r=Ac(e);return this._delegate.delete(r),this}}class xm{constructor(e){this._delegate=e}set(e,r,o){const l=Ac(e);return o?(_p("WriteBatch.set",o),this._delegate.set(l,r,o)):this._delegate.set(l,r),this}update(e,r,o,...l){const h=Ac(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,o,...l),this}delete(e){const r=Ac(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Tc{constructor(e,r,o){this._firestore=e,this._userDataWriter=r,this._delegate=o}fromFirestore(e,r){const o=new Nh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lh(this._firestore,o),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const o=Tc.INSTANCES;let l=o.get(e);l||(l=new WeakMap,o.set(e,l));let h=l.get(r);return h||(h=new Tc(e,new kh(e),r),l.set(r,h)),h}}Tc.INSTANCES=new WeakMap;class ga{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new kh(e)}static forPath(e,r,o){if(e.length%2!=0)throw new _("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ga(r,new Qr(r._delegate,o,new at(e)))}static forKey(e,r,o){return new ga(r,new Qr(r._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Ld(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ld(this.firestore,I0(this._delegate,e))}catch(r){throw co(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,gt.m9)(e))instanceof Qr&&R_(this._delegate,e)}set(e,r){r=_p("DocumentReference.set",r);try{return r?av(this._delegate,e,r):av(this._delegate,e)}catch(o){throw co(o,"setDoc()","DocumentReference.set()")}}update(e,r,...o){try{return 1===arguments.length?uv(this._delegate,e):uv(this._delegate,e,r,...o)}catch(l){throw co(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return Dc(Gn(s.firestore,ui),[new Lu(s._key,yi.none())])}(this._delegate)}onSnapshot(...e){const r=pv(e),o=gv(e,l=>new Fh(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return pa(this._delegate,r,o)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Gn(s,Qr);const e=Gn(s.firestore,ui),r=Ri(e),o=new Cc(e);return function(s,e){const r=new M;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(l,h,y){try{const D=yield function(F,$){const X=b(F);return X.persistence.runTransaction("read document","readonly",le=>X.ci.Ls(le,$))}(l,h);D.isFoundDocument()?y.resolve(D):D.isNoDocument()?y.resolve(null):y.reject(new _(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const F=bd(D,`Failed to get document '${h} from cache`);y.reject(F)}}),function(l,h,y){return o.apply(this,arguments)})(yield Nl(s),e,r);var o})),r.promise}(r,s._key).then(l=>new _u(e,o,s._key,l,new Ju(null!==l&&l.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Gn(s,Qr);const e=Gn(s.firestore,ui);return um(Ri(e),s._key,{source:"server"}).then(r=>bm(e,s,r))}(this._delegate):function(s){s=Gn(s,Qr);const e=Gn(s.firestore,ui);return um(Ri(e),s._key).then(r=>bm(e,s,r))}(this._delegate),r.then(o=>new Fh(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}function co(s,e,r){return s.message=s.message.replace(e,r),s}function pv(s){for(const e of s)if("object"==typeof e&&!Ep(e))return e;return{}}function gv(s,e){var r,o;let l;return l=Ep(s[0])?s[0]:Ep(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:h=>{l.next&&l.next(e(h))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(o=l.complete)||void 0===o?void 0:o.bind(l)}}class Fh{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return pp(this._delegate,e._delegate)}}class Lh extends Fh{data(e){const r=this._delegate.data(e);return function(s,e){s||_t()}(void 0!==r),r}}class ho{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new kh(e)}where(e,r,o){try{return new ho(this.firestore,Xu(this._delegate,function(s,e,r){const o=e,l=Rh("where",s);return new W_(l,o,r)}(e,r,o)))}catch(l){throw co(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new ho(this.firestore,Xu(this._delegate,function(s,e="asc"){const r=e,o=Rh("orderBy",s);return new q_(o,r)}(e,r)))}catch(o){throw co(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,Xu(this._delegate,function(s){return M_("limit",s),new Em("limit",s,"F")}(e)))}catch(r){throw co(r,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,Xu(this._delegate,function(s){return M_("limitToLast",s),new Em("limitToLast",s,"L")}(e)))}catch(r){throw co(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,Xu(this._delegate,function(...s){return new Y_("startAt",s,!0)}(...e)))}catch(r){throw co(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,Xu(this._delegate,function(...s){return new Y_("startAfter",s,!1)}(...e)))}catch(r){throw co(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,Xu(this._delegate,function(...s){return new J_("endBefore",s,!1)}(...e)))}catch(r){throw co(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,Xu(this._delegate,function(...s){return new J_("endAt",s,!0)}(...e)))}catch(r){throw co(r,"endAt()","Query.endAt()")}}isEqual(e){return N_(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Gn(s,Ds);const e=Gn(s.firestore,ui),r=Ri(e),o=new Cc(e);return function(s,e){const r=new M;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(l,h,y){try{const D=yield Ff(l,h,!0),F=new a_(h,D.li),$=F.Gu(D.documents),X=F.applyChanges($,!1);y.resolve(X.snapshot)}catch(D){const F=bd(D,`Failed to execute query '${h} against cache`);y.reject(F)}}),function(l,h,y){return o.apply(this,arguments)})(yield Nl(s),e,r);var o})),r.promise}(r,s._query).then(l=>new Ll(e,o,s,l))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Gn(s,Ds);const e=Gn(s.firestore,ui),r=Ri(e),o=new Cc(e);return lm(r,s._query,{source:"server"}).then(l=>new Ll(e,o,s,l))}(this._delegate):function(s){s=Gn(s,Ds);const e=Gn(s.firestore,ui),r=Ri(e),o=new Cc(e);return gp(s._query),lm(r,s._query).then(l=>new Ll(e,o,s,l))}(this._delegate),r.then(o=>new Mm(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const r=pv(e),o=gv(e,l=>new Mm(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return pa(this._delegate,r,o)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}class B0{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Lh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Mm{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new B0(this._firestore,r))}forEach(e,r){this._delegate.forEach(o=>{e.call(r,new Lh(this._firestore,o))})}isEqual(e){return pp(this._delegate,e._delegate)}}class Ld extends ho{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ga(this.firestore,e):null}doc(e){try{return new ga(this.firestore,void 0===e?gm(this._delegate):gm(this._delegate,e))}catch(r){throw co(r,"doc()","CollectionReference.doc()")}}add(e){return function(s,e){const r=Gn(s.firestore,ui),o=gm(s),l=Oh(s.converter,e);return Dc(r,[Fl(Rd(s.firestore),"addDoc",o._key,l,null!==s.converter,{}).toMutation(o._key,yi.exists(!1))]).then(()=>o)}(this._delegate,e).then(r=>new ga(this.firestore,r))}isEqual(e){return R_(this._delegate,e._delegate)}withConverter(e){return new Ld(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}function Ac(s){return Gn(s,Qr)}class Rm{constructor(...e){this._delegate=new Yu(...e)}static documentId(){return new Rm(qi.keyField().canonicalString())}isEqual(e){return(e=(0,gt.m9)(e))instanceof Yu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Sh("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Sc(e)}static delete(){const e=new Nd("deleteField");return e._methodName="FieldValue.delete",new Sc(e)}static arrayUnion(...e){const r=function(...s){return new R0("arrayUnion",s)}(...e);return r._methodName="FieldValue.arrayUnion",new Sc(r)}static arrayRemove(...e){const r=function(...s){return new ym("arrayRemove",s)}(...e);return r._methodName="FieldValue.arrayRemove",new Sc(r)}static increment(e){const r=function(s){return new _m("increment",s)}(e);return r._methodName="FieldValue.increment",new Sc(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j0={Firestore:Am,GeoPoint:up,Timestamp:Pn,Blob:Ul,Transaction:Sm,WriteBatch:xm,DocumentReference:ga,DocumentSnapshot:Fh,Query:ho,QueryDocumentSnapshot:Lh,QuerySnapshot:Mm,CollectionReference:Ld,FieldPath:Rm,FieldValue:Sc,setLogLevel:function(s){!function(s){hs.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,e){s.INTERNAL.registerComponent(new Kt.wA("firestore-compat",r=>((e,r)=>new Am(e,r,new hv))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},j0)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.17")}(it.Z);var mv=U(7807),yv=U(9301),Vd=U(7923),el=U(7060),_v=U(1734),vv=U(2858),Ev=U(2078),wv=U(7248);class Iv extends mv.xQ{constructor(e=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const r=this._events;r.push(e),r.length>this._bufferSize&&r.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new bv(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const r=this._infiniteTimeWindow,o=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,h=o.length;let y;if(this.closed)throw new Ev.N;if(this.isStopped||this.hasError?y=vv.w.EMPTY:(this.observers.push(e),y=new wv.W(this,e)),l&&e.add(e=new Vd.ht(e,l)),r)for(let D=0;D<h&&!e.closed;D++)e.next(o[D]);else for(let D=0;D<h&&!e.closed;D++)e.next(o[D].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),y}_getNow(){return(this.scheduler||_v.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),r=this._bufferSize,o=this._windowTime,l=this._events,h=l.length;let y=0;for(;y<h&&!(e-l[y].time<o);)y++;return h>r&&(y=Math.max(y,h-r)),y>0&&l.splice(0,y),l}}class bv{constructor(e,r){this.time=e,this.value=r}}function Nm(s,e,r){let o;return o=s&&"object"==typeof s?s:{bufferSize:s,windowTime:e,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:s=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:r,scheduler:o}){let l,y,h=0,D=!1,F=!1;return function(X){let le;h++,!l||D?(D=!1,l=new Iv(s,e,o),le=l.subscribe(this),y=X.subscribe({next(xe){l.next(xe)},error(xe){D=!0,l.error(xe)},complete(){F=!0,y=void 0,l.complete()}}),F&&(y=void 0)):le=l.subscribe(this),this.add(()=>{h--,le.unsubscribe(),le=void 0,y&&!F&&r&&0===h&&(y.unsubscribe(),y=void 0,l=void 0)})}}(o))}var xc=U(4187);function Dv(s,e){return e?(0,el.w)(()=>s,e):(0,el.w)(()=>s)}var Om=U(5193);U(7334);const Av=new Map,q0={activated:!1,tokenObservers:[]},Sv={initialized:!1,enabled:!1};function us(s){return Av.get(s)||q0}function ma(s,e){Av.set(s,e)}function Vh(){return Sv}class Q0{constructor(e,r,o,l,h){if(this.operation=e,this.retryPolicy=r,this.getWaitDuration=o,this.lowerBound=l,this.upperBound=h,this.pending=null,this.nextErrorWaitInterval=l,l>h)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var r=this;return(0,Ee.Z)(function*(){r.stop();try{r.pending=new gt.BH,yield function(s){return new Promise(e=>{setTimeout(e,s)})}(r.getNextRun(e)),r.pending.resolve(),yield r.pending.promise,r.pending=new gt.BH,yield r.operation(),r.pending.resolve(),yield r.pending.promise,r.process(!0).catch(()=>{})}catch(o){r.retryPolicy(o)?r.process(!1).catch(()=>{}):r.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}const Hs=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rv(s){if(!us(s).activated)throw Hs.create("use-before-activation",{appName:s.name})}function Bm(s,e){return jm.apply(this,arguments)}function jm(){return jm=(0,Ee.Z)(function*({url:s,body:e},r){const o={"Content-Type":"application/json"},l=r.getImmediate({optional:!0});if(l){const le=yield l.getHeartbeatsHeader();le&&(o["X-Firebase-Client"]=le)}const h={method:"POST",body:JSON.stringify(e),headers:o};let y,D;try{y=yield fetch(s,h)}catch(le){throw Hs.create("fetch-network-error",{originalErrorMessage:le.message})}if(200!==y.status)throw Hs.create("fetch-status-error",{httpStatus:y.status});try{D=yield y.json()}catch(le){throw Hs.create("fetch-parse-error",{originalErrorMessage:le.message})}const F=D.ttl.match(/^([\d.]+)(s)$/);if(!F||!F[2]||isNaN(Number(F[1])))throw Hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const $=1e3*Number(F[1]),X=Date.now();return{token:D.token,expireTimeMillis:X+$,issuedAtTimeMillis:X}}),jm.apply(this,arguments)}function Pv(s,e){const{projectId:r,appId:o,apiKey:l}=s.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${r}/apps/${o}:exchangeDebugToken?key=${l}`,body:{debug_token:e}}}const $h="firebase-app-check-store";let $m=null;function X0(){return $m||($m=new Promise((s,e)=>{try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{s(o.target.result)},r.onerror=o=>{var l;e(Hs.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore($h,{keyPath:"compositeKey"})}}catch(r){e(Hs.create("storage-open",{originalErrorMessage:r.message}))}}),$m)}function Hm(){return Hm=(0,Ee.Z)(function*(s,e){const o=(yield X0()).transaction($h,"readwrite"),h=o.objectStore($h).put({compositeKey:s,value:e});return new Promise((y,D)=>{h.onsuccess=F=>{y()},o.onerror=F=>{var $;D(Hs.create("storage-set",{originalErrorMessage:null===($=F.target.error)||void 0===$?void 0:$.message}))}})}),Hm.apply(this,arguments)}const Hh=new kt.Yd("@firebase/app-check");function Bv(s,e){return(0,gt.hl)()?function(s,e){return function(s,e){return Hm.apply(this,arguments)}(function(s){return`${s.options.appId}-${s.name}`}(s),e)}(s,e).catch(r=>{Hh.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function $v(){return Vh().enabled}function Oc(){return qm.apply(this,arguments)}function qm(){return qm=(0,Ee.Z)(function*(){const s=Vh();if(s.enabled&&s.token)return s.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),qm.apply(this,arguments)}const tw={error:"UNKNOWN_ERROR"};function Gv(s){return gt.US.encodeString(JSON.stringify(s),!1)}function Dp(s){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ee.Z)(function*(s,e=!1){const r=s.app;Rv(r);const o=us(r);let h,l=o.token;if(!l){const F=yield o.cachedTokenPromise;F&&Ap(F)&&(l=F)}if(!e&&l&&Ap(l))return{token:l.token};let D,y=!1;if($v()){o.exchangeTokenPromise||(o.exchangeTokenPromise=Bm(Pv(r,yield Oc()),s.heartbeatServiceProvider).then($=>(o.exchangeTokenPromise=void 0,$)),y=!0);const F=yield o.exchangeTokenPromise;return yield Bv(r,F),ma(r,Object.assign(Object.assign({},o),{token:F})),{token:F.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().then(F=>(o.exchangeTokenPromise=void 0,F)),y=!0),l=yield o.exchangeTokenPromise}catch(F){"appCheck/throttled"===F.code?Hh.warn(F.message):Hh.error(F),h=F}return l?(D={token:l.token},ma(r,Object.assign(Object.assign({},o),{token:l})),yield Bv(r,l)):D=nw(h),y&&Zm(r,D),D}),Tp.apply(this,arguments)}function Gh(s,e){const r=us(s),o=r.tokenObservers.filter(l=>l.next!==e);0===o.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),ma(s,Object.assign(Object.assign({},r),{tokenObservers:o}))}function Wv(s){const{app:e}=s,r=us(e);let o=r.tokenRefresher;o||(o=function(s){const{app:e}=s;return new Q0((0,Ee.Z)(function*(){let o;if(o=us(e).token?yield Dp(s,!0):yield Dp(s),o.error)throw o.error}),()=>!0,()=>{const r=us(e);if(r.token){let o=r.token.issuedAtTimeMillis+.5*(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,r.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(s),ma(e,Object.assign(Object.assign({},r),{tokenRefresher:o}))),!o.isRunning()&&r.isTokenAutoRefreshEnabled&&o.start()}function Zm(s,e){const r=us(s).tokenObservers;for(const o of r)try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch(l){}}function Ap(s){return s.expireTimeMillis-Date.now()>0}function nw(s){return{token:Gv(tw),error:s}}class rw{constructor(e,r){this.app=e,this.heartbeatServiceProvider=r}_delete(){const{tokenObservers:e}=us(this.app);for(const r of e)Gh(this.app,r.next);return Promise.resolve()}}const Xm="app-check-internal";(0,ot._registerComponent)(new Kt.wA("app-check",s=>function(s,e){return new rw(s,e)}(s.getProvider("app").getImmediate(),s.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((s,e,r)=>{s.getProvider(Xm).initialize()})),(0,ot._registerComponent)(new Kt.wA(Xm,s=>function(s){return{getToken:e=>Dp(s,e),addTokenListener:e=>function(s,e,r,o){const{app:l}=s,h=us(l),y={next:r,error:o,type:e};if(ma(l,Object.assign(Object.assign({},h),{tokenObservers:[...h.tokenObservers,y]})),h.token&&Ap(h.token)){const D=h.token;Promise.resolve().then(()=>{r({token:D.token}),Wv(s)}).catch(()=>{})}h.cachedTokenPromise.then(()=>Wv(s))}(s,"INTERNAL",e),removeTokenListener:e=>Gh(s.app,e)}}(s.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ot.registerVersion)("@firebase/app-check","0.5.7");class Np{constructor(){return(0,se.vb)("app-check")}}"undefined"!=typeof window&&window;var mw=U(6543);const _w=new w.OlP("angularfire2.auth.use-emulator"),sE=new w.OlP("angularfire2.auth.settings"),oE=new w.OlP("angularfire2.auth.tenant-id"),aE=new w.OlP("angularfire2.auth.langugage-code"),Pp=new w.OlP("angularfire2.auth.use-device-language"),ry=new w.OlP("angularfire.auth.persistence"),kp=(s,e,r,o,l,h,y,D)=>(0,je.cc)(`${s.name}.auth`,"AngularFireAuth",s.name,()=>{const F=e.runOutsideAngular(()=>s.auth());if(r&&F.useEmulator(...r),o&&(F.tenantId=o),F.languageCode=l,h&&F.useDeviceLanguage(),y)for(const[$,X]of Object.entries(y))F.settings[$]=X;return D&&F.setPersistence(D),F},[r,o,l,h,y,D]);let Pc=(()=>{class s{constructor(r,o,l,h,y,D,F,$,X,le,xe,Ke){const Ye=new mv.xQ,pt=(0,fe.of)(void 0).pipe((0,Vd.QV)(y.outsideAngular),(0,el.w)(()=>h.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7237)))),(0,Be.U)(()=>(0,je.on)(r,h,o)),(0,Be.U)(Xt=>kp(Xt,h,D,$,X,le,F,xe)),Nm({bufferSize:1,refCount:!1}));if((0,Pe.PM)(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fe.of)(null);else{pt.pipe((0,xc.P)()).subscribe();const dr=pt.pipe((0,el.w)(On=>On.getRedirectResult().then(Wn=>Wn,()=>null)),se.iC,Nm({bufferSize:1,refCount:!1})),Kr=pt.pipe((0,el.w)(On=>new Z.y(Wn=>({unsubscribe:h.runOutsideAngular(()=>On.onAuthStateChanged(hr=>Wn.next(hr),hr=>Wn.error(hr),()=>Wn.complete()))})))),rr=pt.pipe((0,el.w)(On=>new Z.y(Wn=>({unsubscribe:h.runOutsideAngular(()=>On.onIdTokenChanged(hr=>Wn.next(hr),hr=>Wn.error(hr),()=>Wn.complete()))}))));this.authState=dr.pipe(Dv(Kr),(0,Om.R)(y.outsideAngular),(0,Vd.QV)(y.insideAngular)),this.user=dr.pipe(Dv(rr),(0,Om.R)(y.outsideAngular),(0,Vd.QV)(y.insideAngular)),this.idToken=this.user.pipe((0,el.w)(On=>On?(0,ve.D)(On.getIdToken()):(0,fe.of)(null))),this.idTokenResult=this.user.pipe((0,el.w)(On=>On?(0,ve.D)(On.getIdTokenResult()):(0,fe.of)(null))),this.credential=(0,yv.T)(dr,Ye,this.authState.pipe((0,Oe.h)(On=>!On))).pipe((0,Be.U)(On=>(null==On?void 0:On.user)?On:null),(0,Om.R)(y.outsideAngular),(0,Vd.QV)(y.insideAngular))}return(0,je.pX)(this,pt,h,{spy:{apply:(Xt,dr,Kr)=>{(Xt.startsWith("signIn")||Xt.startsWith("createUser"))&&Kr.then(rr=>Ye.next(rr))}}})}}return s.\u0275fac=function(r){return new(r||s)(w.LFG(je.Dh),w.LFG(je.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(se.HU),w.LFG(_w,8),w.LFG(sE,8),w.LFG(oE,8),w.LFG(aE,8),w.LFG(Pp,8),w.LFG(ry,8),w.LFG(Np,8))},s.\u0275prov=w.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})();function uE(s,e){return function(s,e=O.z){return new Z.y(r=>{let o;return null!=e?e.schedule(()=>{o=s.onSnapshot({includeMetadataChanges:!0},r)}):o=s.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=o&&o()}})}(s,e)}function Fp(s,e){return uE(s,e).pipe((0,Be.U)(r=>({payload:r,type:"query"})))}function Lp(s,e){return Fp(s,e).pipe((0,Ne.O)(void 0),pe(),(0,Be.U)(([r,o])=>{const l=o.payload.docChanges(),h=l.map(y=>({type:y.type,payload:y}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((y,D)=>{const F=l.find(X=>X.doc.ref.isEqual(y.ref)),$=null==r?void 0:r.payload.docs.find(X=>X.ref.isEqual(y.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(y.metadata)||!F&&$&&JSON.stringify($.metadata)===JSON.stringify(y.metadata)||h.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:y}})}),h}))}function cE(s,e,r){return Lp(s,r).pipe((0,Re.R)((o,l)=>function(s,e,r){return e.forEach(o=>{r.indexOf(o.type)>-1&&(s=function(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Kh(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=s.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Kh(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Kh(s,e.oldIndex,1)}return s}(s,o))}),s}(o,l.map(h=>h.payload),e),[]),r=>r.lift(new ye(void 0,void 0)),(0,Be.U)(o=>o.map(l=>({type:l.type,payload:l}))))}function Kh(s,e,r,...o){const l=s.slice();return l.splice(e,r,...o),l}function ww(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class dE{constructor(e,r,o){this.ref=e,this.query=r,this.afs=o}stateChanges(e){let r=Lp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Be.U)(o=>o.filter(l=>e.indexOf(l.type)>-1)))),r.pipe((0,Ne.O)(void 0),pe(),(0,Oe.h)(([o,l])=>l.length>0||!o),(0,Be.U)(([o,l])=>l),se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((r,o)=>[...r,...o],[]))}snapshotChanges(e){const r=ww(e);return cE(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.iC)}valueChanges(e={}){return Fp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),se.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(se.iC)}add(e){return this.ref.add(e)}doc(e){return new hE(this.ref.doc(e),this.afs)}}class hE{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const o=this.ref.collection(e),{ref:l,query:h}=pE(o,r);return new dE(l,h,this.afs)}snapshotChanges(){return function(s,e){return uE(s,e).pipe((0,Ne.O)(void 0),pe(),(0,Be.U)(([r,o])=>o.exists?(null==r?void 0:r.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(se.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(se.iC)}}class kc{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)),(0,Oe.h)(r=>r.length>0),se.iC):Lp(this.query,this.afs.schedulers.outsideAngular).pipe(se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((r,o)=>[...r,...o],[]))}snapshotChanges(e){const r=ww(e);return cE(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.iC)}valueChanges(e={}){return Fp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(o=>o.payload.docs.map(l=>e.idField?Object.assign({[e.idField]:l.id},l.data()):l.data())),se.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(se.iC)}}const sy=new w.OlP("angularfire2.enableFirestorePersistence"),Fc=new w.OlP("angularfire2.firestore.persistenceSettings"),WI=new w.OlP("angularfire2.firestore.settings"),fE=new w.OlP("angularfire2.firestore.use-emulator");function pE(s,e=(r=>r)){return{query:e(s),ref:s}}let Iw=(()=>{class s{constructor(r,o,l,h,y,D,F,$,X,le,xe,Ke,Ye,pt,Xt,dr,Kr){this.schedulers=F;const rr=(0,je.on)(r,D,o),On=X;le&&kp(rr,D,xe,Ye,pt,Xt,Ke,dr),[this.firestore,this.persistenceEnabled$]=(0,je.cc)(`${rr.name}.firestore`,"AngularFirestore",rr.name,()=>{const Wn=D.runOutsideAngular(()=>rr.firestore());if(h&&Wn.settings(h),On&&Wn.useEmulator(...On),l&&!(0,Pe.PM)(y)){const hr=()=>{try{return(0,ve.D)(Wn.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(Ts){return"undefined"!=typeof console&&console.warn(Ts),(0,fe.of)(!1)}};return[Wn,D.runOutsideAngular(hr)]}return[Wn,(0,fe.of)(!1)]},[h,On,l])}collection(r,o){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:y}=pE(l,o),D=this.schedulers.ngZone.run(()=>h);return new dE(D,y,this)}collectionGroup(r,o){const l=o||(y=>y),h=this.firestore.collectionGroup(r);return new kc(l(h),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>o);return new hE(l,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(r){return new(r||s)(w.LFG(je.Dh),w.LFG(je.xv,8),w.LFG(sy,8),w.LFG(WI,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(se.HU),w.LFG(Fc,8),w.LFG(fE,8),w.LFG(Pc,8),w.LFG(_w,8),w.LFG(sE,8),w.LFG(oE,8),w.LFG(aE,8),w.LFG(Pp,8),w.LFG(ry,8),w.LFG(Np,8))},s.\u0275prov=w.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),oy=(()=>{class s{constructor(){mw.Z.registerVersion("angularfire",se.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:s,providers:[{provide:sy,useValue:!0},{provide:Fc,useValue:r}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=w.oAB({type:s}),s.\u0275inj=w.cJS({providers:[Iw]}),s})()},8118:(lt,Me,U)=>{U.d(Me,{hO:()=>we,xv:()=>ge,Dh:()=>pe,GT:()=>se,cc:()=>Ne,on:()=>Q,pX:()=>fe});var w=U(5312),O=U(6543),Z=U(4966);lt=U.hmd(lt);const ve=["ngOnDestroy"],fe=(je,Pe,$e,it={})=>new Proxy(je,{get:(Ee,ot)=>$e.runOutsideAngular(()=>{var Kt;if(je[ot])return(null===(Kt=null==it?void 0:it.spy)||void 0===Kt?void 0:Kt.get)&&it.spy.get(ot,je[ot]),je[ot];if(ve.indexOf(ot)>-1)return()=>{};const kt=Pe.toPromise().then(gt=>{const Zt=gt&&gt[ot];return"function"==typeof Zt?Zt.bind(gt):Zt&&Zt.then?Zt.then(Ft=>$e.run(()=>Ft)):$e.run(()=>Zt)});return new Proxy(()=>{},{get:(gt,Zt)=>kt[Zt],apply:(gt,Zt,Ft)=>kt.then(Ve=>{var Ot;const tt=Ve&&Ve(...Ft);return(null===(Ot=null==it?void 0:it.spy)||void 0===Ot?void 0:Ot.apply)&&it.spy.apply(ot,Ft,tt),tt})})})}),se=(je,Pe)=>{Pe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(it=>{Object.defineProperty(je.prototype,it,Object.getOwnPropertyDescriptor($e.prototype||$e,it))})})};class Ce{constructor(Pe){return Pe}}const pe=new w.OlP("angularfire2.app.options"),ge=new w.OlP("angularfire2.app.name");function Q(je,Pe,$e){const Ee="object"==typeof $e&&$e||{};Ee.name=Ee.name||"string"==typeof $e&&$e||"[DEFAULT]";const Kt=O.Z.apps.filter(kt=>kt&&kt.name===Ee.name)[0]||Pe.runOutsideAngular(()=>O.Z.initializeApp(je,Ee));try{JSON.stringify(je)!==JSON.stringify(Kt.options)&&J("error",`${Kt.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(kt){}return new Ce(Kt)}const J=(je,...Pe)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[je](...Pe)},ye={provide:Ce,useFactory:Q,deps:[pe,w.R0b,[new w.FiY,ge]]};let we=(()=>{class je{constructor($e){O.Z.registerVersion("angularfire",Z.q4.full,"core"),O.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),O.Z.registerVersion("angular",w.q4F.full,$e.toString())}static initializeApp($e,it){return{ngModule:je,providers:[{provide:pe,useValue:$e},{provide:ge,useValue:it}]}}}return je.\u0275fac=function($e){return new($e||je)(w.LFG(w.Lbi))},je.\u0275mod=w.oAB({type:je}),je.\u0275inj=w.cJS({providers:[ye]}),je})();function Ne(je,Pe,$e,it,Ee){const[,ot,Kt]=globalThis.\u0275AngularfireInstanceCache.find(kt=>kt[0]===je)||[];if(ot)return function(je,Pe){try{return je.toString()===Pe.toString()}catch($e){return je===Pe}}(Ee,Kt)||(Oe("error",`${Pe} was already initialized on the ${$e} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Ee,was:Kt})),ot;{const kt=it();return globalThis.\u0275AngularfireInstanceCache.push([je,kt,Ee]),kt}}const Re=!!lt.hot,Oe=(je,...Pe)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[je](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4966:(lt,Me,U)=>{U.d(Me,{q4:()=>ef,iC:()=>bs,HU:()=>Io,vb:()=>at,JM:()=>Pa});var w=U(5312),O=U(7334),Z=U(1921),ve=U(2646),fe=U(9842),se=U(7817),Ce=U(4516);const pe="@firebase/installations",J="w:0.5.8",ye="FIS_v2",je=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(S){return S instanceof fe.ZR&&S.code.includes("request-failed")}function $e({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function it(S){return{token:S.token,requestStatus:2,expiresIn:Ft(S.expiresIn),creationTime:Date.now()}}function Ee(S,k){return ot.apply(this,arguments)}function ot(){return(ot=(0,Z.Z)(function*(S,k){const ne=(yield k.json()).error;return je.create("request-failed",{requestName:S,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Kt({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function kt(S,{refreshToken:k}){const W=Kt(S);return W.append("Authorization",function(S){return`${ye} ${S}`}(k)),W}function gt(S){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,Z.Z)(function*(S){const k=yield S();return k.status>=500&&k.status<600?S():k})).apply(this,arguments)}function Ft(S){return Number(S.replace("s","000"))}function Ot(S,k){return tt.apply(this,arguments)}function tt(){return(tt=(0,Z.Z)(function*({appConfig:S,heartbeatServiceProvider:k},{fid:W}){const ne=$e(S),Ie=Kt(S),ke=k.getImmediate({optional:!0});if(ke){const sn=yield ke.getHeartbeatsHeader();sn&&Ie.append("x-firebase-client",sn)}const It={method:"POST",headers:Ie,body:JSON.stringify({fid:W,authVersion:ye,appId:S.appId,sdkVersion:J})},Dt=yield gt(()=>fetch(ne,It));if(Dt.ok){const sn=yield Dt.json();return{fid:sn.fid||W,registrationStatus:2,refreshToken:sn.refreshToken,authToken:it(sn.authToken)}}throw yield Ee("Create Installation",Dt)})).apply(this,arguments)}function dt(S){return new Promise(k=>{setTimeout(k,S)})}const Rr=/^[cdef][\w-]{21}$/;function Pi(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const W=function(S){return function(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Rr.test(W)?W:""}catch(S){return""}}function yr(S){return`${S.appName}!${S.appId}`}const li=new Map;function Jn(S,k){const W=yr(S);zt(W,k),function(S,k){const W=(!$n&&"BroadcastChannel"in self&&($n=new BroadcastChannel("[Firebase] FID Change"),$n.onmessage=S=>{zt(S.data.key,S.data.fid)}),$n);W&&W.postMessage({key:S,fid:k}),0===li.size&&$n&&($n.close(),$n=null)}(W,k)}function zt(S,k){const W=li.get(S);if(W)for(const ne of W)ne(k)}let $n=null;const fn="firebase-installations-store";let ze=null;function In(){return ze||(ze=(0,fe.X3)("firebase-installations-database",1,(S,k)=>{0===k&&S.createObjectStore(fn)})),ze}function Pt(S,k){return _r.apply(this,arguments)}function _r(){return(_r=(0,Z.Z)(function*(S,k){const W=yr(S),Ie=(yield In()).transaction(fn,"readwrite"),ke=Ie.objectStore(fn),Qe=yield ke.get(W);return yield ke.put(k,W),yield Ie.complete,(!Qe||Qe.fid!==k.fid)&&Jn(S,k.fid),k})).apply(this,arguments)}function Lt(S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,Z.Z)(function*(S){const k=yr(S),ne=(yield In()).transaction(fn,"readwrite");yield ne.objectStore(fn).delete(k),yield ne.complete})).apply(this,arguments)}function Br(S,k){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,Z.Z)(function*(S,k){const W=yr(S),Ie=(yield In()).transaction(fn,"readwrite"),ke=Ie.objectStore(fn),Qe=yield ke.get(W),It=k(Qe);return void 0===It?yield ke.delete(W):yield ke.put(It,W),yield Ie.complete,It&&(!Qe||Qe.fid!==It.fid)&&Jn(S,It.fid),It})).apply(this,arguments)}function ht(S){return jr.apply(this,arguments)}function jr(){return(jr=(0,Z.Z)(function*(S){let k;const W=yield Br(S.appConfig,ne=>{const Ie=ii(ne),ke=Nr(S,Ie);return k=ke.registrationPromise,ke.installationEntry});return""===W.fid?{installationEntry:yield k}:{installationEntry:W,registrationPromise:k}})).apply(this,arguments)}function ii(S){return yn(S||{fid:Pi(),registrationStatus:0})}function Nr(S,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(je.create("app-offline"))};const W={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ne=function(S,k){return bt.apply(this,arguments)}(S,W);return{installationEntry:W,registrationPromise:ne}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:Et(S)}:{installationEntry:k}}function bt(){return(bt=(0,Z.Z)(function*(S,k){try{const W=yield Ot(S,k);return Pt(S.appConfig,W)}catch(W){throw Pe(W)&&409===W.customData.serverCode?yield Lt(S.appConfig):yield Pt(S.appConfig,{fid:k.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Et(S){return ir.apply(this,arguments)}function ir(){return(ir=(0,Z.Z)(function*(S){let k=yield wi(S.appConfig);for(;1===k.registrationStatus;)yield dt(100),k=yield wi(S.appConfig);if(0===k.registrationStatus){const{installationEntry:W,registrationPromise:ne}=yield ht(S);return ne||W}return k})).apply(this,arguments)}function wi(S){return Br(S,k=>{if(!k)throw je.create("installation-not-found");return yn(k)})}function yn(S){return function(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Ct(S,k){return $r.apply(this,arguments)}function $r(){return($r=(0,Z.Z)(function*({appConfig:S,heartbeatServiceProvider:k},W){const ne=cn(S,W),Ie=kt(S,W),ke=k.getImmediate({optional:!0});if(ke){const sn=yield ke.getHeartbeatsHeader();sn&&Ie.append("x-firebase-client",sn)}const It={method:"POST",headers:Ie,body:JSON.stringify({installation:{sdkVersion:J,appId:S.appId}})},Dt=yield gt(()=>fetch(ne,It));if(Dt.ok)return it(yield Dt.json());throw yield Ee("Generate Auth Token",Dt)})).apply(this,arguments)}function cn(S,{fid:k}){return`${$e(S)}/${k}/authTokens:generate`}function Un(S){return yt.apply(this,arguments)}function yt(){return(yt=(0,Z.Z)(function*(S,k=!1){let W;const ne=yield Br(S.appConfig,ke=>{if(!_n(ke))throw je.create("not-registered");const Qe=ke.authToken;if(!k&&oe(Qe))return ke;if(1===Qe.requestStatus)return W=mt(S,k),ke;{if(!navigator.onLine)throw je.create("app-offline");const It=de(ke);return W=nt(S,It),It}});return W?yield W:ne.authToken})).apply(this,arguments)}function mt(S,k){return We.apply(this,arguments)}function We(){return(We=(0,Z.Z)(function*(S,k){let W=yield ct(S.appConfig);for(;1===W.authToken.requestStatus;)yield dt(100),W=yield ct(S.appConfig);const ne=W.authToken;return 0===ne.requestStatus?Un(S,k):ne})).apply(this,arguments)}function ct(S){return Br(S,k=>{if(!_n(k))throw je.create("not-registered");return function(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function nt(S,k){return un.apply(this,arguments)}function un(){return(un=(0,Z.Z)(function*(S,k){try{const W=yield Ct(S,k),ne=Object.assign(Object.assign({},k),{authToken:W});return yield Pt(S.appConfig,ne),W}catch(W){if(!Pe(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ne=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Pt(S.appConfig,ne)}else yield Lt(S.appConfig);throw W}})).apply(this,arguments)}function _n(S){return void 0!==S&&2===S.registrationStatus}function oe(S){return 2===S.requestStatus&&!function(S){const k=Date.now();return k<S.creationTime||S.creationTime+S.expiresIn<k+36e5}(S)}function de(S){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:k})}function Xe(){return(Xe=(0,Z.Z)(function*(S){const k=S,{installationEntry:W,registrationPromise:ne}=yield ht(k);return ne?ne.catch(console.error):Un(k).catch(console.error),W.fid})).apply(this,arguments)}function dn(){return(dn=(0,Z.Z)(function*(S,k=!1){const W=S;return yield zn(W),(yield Un(W,k)).token})).apply(this,arguments)}function zn(S){return kn.apply(this,arguments)}function kn(){return(kn=(0,Z.Z)(function*(S){const{registrationPromise:k}=yield ht(S);k&&(yield k)})).apply(this,arguments)}function Hn(S){return je.create("missing-app-config-values",{valueName:S})}const Dr="installations";(0,ve._registerComponent)(new se.wA(Dr,S=>{const k=S.getProvider("app").getImmediate(),W=function(S){if(!S||!S.options)throw Hn("App Configuration");if(!S.name)throw Hn("App Name");const k=["projectId","apiKey","appId"];for(const W of k)if(!S.options[W])throw Hn(W);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(k);return{app:k,appConfig:W,heartbeatServiceProvider:(0,ve._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ve._registerComponent)(new se.wA("installations-internal",S=>{const k=S.getProvider("app").getImmediate(),W=(0,ve._getProvider)(k,Dr).getImmediate();return{getId:()=>function(S){return Xe.apply(this,arguments)}(W),getToken:Ie=>function(S){return dn.apply(this,arguments)}(W,Ie)}},"PRIVATE")),(0,ve.registerVersion)(pe,"0.5.8"),(0,ve.registerVersion)(pe,"0.5.8","esm2017");const Jt="@firebase/remote-config",Rn=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hr{constructor(k,W,ne,Ie){this.client=k,this.storage=W,this.storageCache=ne,this.logger=Ie}isCachedDataFresh(k,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-W,Ie=ne<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Ie}.`),Ie}fetch(k){var W=this;return(0,Z.Z)(function*(){const[ne,Ie]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Ie&&W.isCachedDataFresh(k.cacheMaxAgeMillis,ne))return Ie;k.eTag=Ie&&Ie.eTag;const ke=yield W.client.fetch(k),Qe=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&Qe.push(W.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(Qe),ke})()}}function Tr(S=navigator){return S.languages&&S.languages[0]||S.language}class Po{constructor(k,W,ne,Ie,ke,Qe){this.firebaseInstallations=k,this.sdkVersion=W,this.namespace=ne,this.projectId=Ie,this.apiKey=ke,this.appId=Qe}fetch(k){var W=this;return(0,Z.Z)(function*(){const[ne,Ie]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Qe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,It={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Dt={sdk_version:W.sdkVersion,app_instance_id:ne,app_instance_id_token:Ie,app_id:W.appId,language_code:Tr()},sn={method:"POST",headers:It,body:JSON.stringify(Dt)},Rt=fetch(Qe,sn),hn=new Promise((Bs,Zi)=>{k.signal.addEventListener(()=>{const oi=new Error("The operation was aborted.");oi.name="AbortError",Zi(oi)})});let Ki;try{yield Promise.race([Rt,hn]),Ki=yield Rt}catch(Bs){let Zi="fetch-client-network";throw"AbortError"===Bs.name&&(Zi="fetch-timeout"),Rn.create(Zi,{originalErrorMessage:Bs.message})}let Sr=Ki.status;const Ho=Ki.headers.get("ETag")||void 0;let Go,Us;if(200===Ki.status){let Bs;try{Bs=yield Ki.json()}catch(Zi){throw Rn.create("fetch-client-parse",{originalErrorMessage:Zi.message})}Go=Bs.entries,Us=Bs.state}if("INSTANCE_STATE_UNSPECIFIED"===Us?Sr=500:"NO_CHANGE"===Us?Sr=304:("NO_TEMPLATE"===Us||"EMPTY_CONFIG"===Us)&&(Go={}),304!==Sr&&200!==Sr)throw Rn.create("fetch-status",{httpStatus:Sr});return{status:Sr,eTag:Ho,config:Go}})()}}class Or{constructor(k,W){this.client=k,this.storage=W}fetch(k){var W=this;return(0,Z.Z)(function*(){const ne=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(k,ne)})()}attemptFetch(k,{throttleEndTimeMillis:W,backoffCount:ne}){var Ie=this;return(0,Z.Z)(function*(){yield function(S,k){return new Promise((W,ne)=>{const Ie=Math.max(k-Date.now(),0),ke=setTimeout(W,Ie);S.addEventListener(()=>{clearTimeout(ke),ne(Rn.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,W);try{const ke=yield Ie.client.fetch(k);return yield Ie.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function(S){if(!(S instanceof fe.ZR&&S.customData))return!1;const k=Number(S.customData.httpStatus);return 429===k||500===k||503===k||504===k}(ke))throw ke;const Qe={throttleEndTimeMillis:Date.now()+(0,fe.$s)(ne),backoffCount:ne+1};return yield Ie.storage.setThrottleMetadata(Qe),Ie.attemptFetch(k,Qe)}})()}}class bi{constructor(k,W,ne,Ie,ke){this.app=k,this._client=W,this._storageCache=ne,this._storage=Ie,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qs(S,k){const W=S.target.error||void 0;return Rn.create(k,{originalErrorMessage:W&&W.message})}const Fn="app_namespace_store";class Li{constructor(k,W,ne,Ie=function(){return new Promise((S,k)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ne=>{k(qs(ne,"storage-open"))},W.onsuccess=ne=>{S(ne.target.result)},W.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Fn,{keyPath:"compositeKey"})}}catch(W){k(Rn.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=k,this.appName=W,this.namespace=ne,this.openDbPromise=Ie}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var W=this;return(0,Z.Z)(function*(){const ne=yield W.openDbPromise;return new Promise((Ie,ke)=>{const It=ne.transaction([Fn],"readonly").objectStore(Fn),Dt=W.createCompositeKey(k);try{const sn=It.get(Dt);sn.onerror=Rt=>{ke(qs(Rt,"storage-get"))},sn.onsuccess=Rt=>{const hn=Rt.target.result;Ie(hn?hn.value:void 0)}}catch(sn){ke(Rn.create("storage-get",{originalErrorMessage:sn&&sn.message}))}})})()}set(k,W){var ne=this;return(0,Z.Z)(function*(){const Ie=yield ne.openDbPromise;return new Promise((ke,Qe)=>{const Dt=Ie.transaction([Fn],"readwrite").objectStore(Fn),sn=ne.createCompositeKey(k);try{const Rt=Dt.put({compositeKey:sn,value:W});Rt.onerror=hn=>{Qe(qs(hn,"storage-set"))},Rt.onsuccess=()=>{ke()}}catch(Rt){Qe(Rn.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(k){var W=this;return(0,Z.Z)(function*(){const ne=yield W.openDbPromise;return new Promise((Ie,ke)=>{const It=ne.transaction([Fn],"readwrite").objectStore(Fn),Dt=W.createCompositeKey(k);try{const sn=It.delete(Dt);sn.onerror=Rt=>{ke(qs(Rt,"storage-delete"))},sn.onsuccess=()=>{Ie()}}catch(sn){ke(Rn.create("storage-delete",{originalErrorMessage:sn&&sn.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class ys{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,Z.Z)(function*(){const W=k.storage.getLastFetchStatus(),ne=k.storage.getLastSuccessfulFetchTimestampMillis(),Ie=k.storage.getActiveConfig(),ke=yield W;ke&&(k.lastFetchStatus=ke);const Qe=yield ne;Qe&&(k.lastSuccessfulFetchTimestampMillis=Qe);const It=yield Ie;It&&(k.activeConfig=It)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function _a(){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,Z.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,ve._registerComponent)(new se.wA("remote-config",function(k,{instanceIdentifier:W}){const ne=k.getProvider("app").getImmediate(),Ie=k.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,fe.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ke,apiKey:Qe,appId:It}=ne.options;if(!ke)throw Rn.create("registration-project-id");if(!Qe)throw Rn.create("registration-api-key");if(!It)throw Rn.create("registration-app-id");const Dt=new Li(It,ne.name,W=W||"firebase"),sn=new ys(Dt),Rt=new Ce.Yd(Jt);Rt.logLevel=Ce.in.ERROR;const hn=new Po(Ie,ve.SDK_VERSION,W,ke,Qe,It),Ki=new Or(hn,Dt),Sr=new Hr(Ki,Dt,sn,Rt),Ho=new bi(ne,Sr,sn,Dt,Rt);return function(S){const k=(0,fe.m9)(S);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(Ho),Ho},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Jt,"0.3.7"),(0,ve.registerVersion)(Jt,"0.3.7","esm2017");const fo="/firebase-messaging-sw.js",Rs="/firebase-cloud-messaging-push-scope",Ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ts="google.c.a.c_id",_s="google.c.a.c_l",ns="google.c.a.ts",Ui="google.c.a.e";var ji=(()=>{return(S=ji||(ji={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",ji;var S})();function Yn(S){const k=new Uint8Array(S);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ko(S){const W=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(W),Ie=new Uint8Array(ne.length);for(let ke=0;ke<ne.length;++ke)Ie[ke]=ne.charCodeAt(ke);return Ie}const rs="fcm_token_details_db",Zr="fcm_token_object_Store";function Os(S){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,Z.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(rs))return null;let k=null;return(yield(0,fe.X3)(rs,5,function(){var ne=(0,Z.Z)(function*(Ie,ke,Qe,It){var Dt;if(ke<2||!Ie.objectStoreNames.contains(Zr))return;const sn=It.objectStore(Zr),Rt=yield sn.index("fcmSenderId").get(S);if(yield sn.clear(),Rt)if(2===ke){const hn=Rt;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;k={token:hn.fcmToken,createTime:null!==(Dt=hn.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Yn(hn.vapidKey)}}}else if(3===ke){const hn=Rt;k={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Yn(hn.auth),p256dh:Yn(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Yn(hn.vapidKey)}}}else if(4===ke){const hn=Rt;k={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Yn(hn.auth),p256dh:Yn(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Yn(hn.vapidKey)}}}});return function(Ie,ke,Qe,It){return ne.apply(this,arguments)}}())).close(),yield(0,fe.Lj)(rs),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Zs(k)?k:null}),Wr.apply(this,arguments)}function Zs(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:k}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const wr="firebase-messaging-store";let is=null;function si(){return is||(is=(0,fe.X3)("firebase-messaging-database",1,(S,k)=>{0===k&&S.createObjectStore(wr)})),is}function vs(S){return N.apply(this,arguments)}function N(){return(N=(0,Z.Z)(function*(S){const k=A(S),ne=yield(yield si()).transaction(wr).objectStore(wr).get(k);if(ne)return ne;{const Ie=yield Os(S.appConfig.senderId);if(Ie)return yield H(S,Ie),Ie}})).apply(this,arguments)}function H(S,k){return R.apply(this,arguments)}function R(){return(R=(0,Z.Z)(function*(S,k){const W=A(S),Ie=(yield si()).transaction(wr,"readwrite");return yield Ie.objectStore(wr).put(k,W),yield Ie.complete,k})).apply(this,arguments)}function z(S){return ue.apply(this,arguments)}function ue(){return(ue=(0,Z.Z)(function*(S){const k=A(S),ne=(yield si()).transaction(wr,"readwrite");yield ne.objectStore(wr).delete(k),yield ne.complete})).apply(this,arguments)}function A({appConfig:S}){return S.appId}const C=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function B(S,k){return be.apply(this,arguments)}function be(){return(be=(0,Z.Z)(function*(S,k){const W=yield qn(S),ne=Yr(k),Ie={method:"POST",headers:W,body:JSON.stringify(ne)};let ke;try{ke=yield(yield fetch(tr(S.appConfig),Ie)).json()}catch(Qe){throw C.create("token-subscribe-failed",{errorInfo:Qe})}if(ke.error)throw C.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw C.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function et(S,k){return ft.apply(this,arguments)}function ft(){return(ft=(0,Z.Z)(function*(S,k){const W=yield qn(S),ne=Yr(k.subscriptionOptions),Ie={method:"PATCH",headers:W,body:JSON.stringify(ne)};let ke;try{ke=yield(yield fetch(`${tr(S.appConfig)}/${k.token}`,Ie)).json()}catch(Qe){throw C.create("token-update-failed",{errorInfo:Qe})}if(ke.error)throw C.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw C.create("token-update-no-token");return ke.token})).apply(this,arguments)}function on(S,k){return nn.apply(this,arguments)}function nn(){return(nn=(0,Z.Z)(function*(S,k){const ne={method:"DELETE",headers:yield qn(S)};try{const ke=yield(yield fetch(`${tr(S.appConfig)}/${k}`,ne)).json();if(ke.error)throw C.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(Ie){throw C.create("token-unsubscribe-failed",{errorInfo:Ie})}})).apply(this,arguments)}function tr({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function qn(S){return $i.apply(this,arguments)}function $i(){return($i=(0,Z.Z)(function*({appConfig:S,installations:k}){const W=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function Yr({p256dh:S,auth:k,endpoint:W,vapidKey:ne}){const Ie={web:{endpoint:W,auth:k,p256dh:S}};return ne!==Ns&&(Ie.web.applicationPubKey=ne),Ie}const ls=6048e5;function Hi(S){return wt.apply(this,arguments)}function wt(){return(wt=(0,Z.Z)(function*(S){const k=yield Za(S.swRegistration,S.vapidKey),W={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:k.endpoint,auth:Yn(k.getKey("auth")),p256dh:Yn(k.getKey("p256dh"))},ne=yield vs(S.firebaseDependencies);if(ne){if(En(ne.subscriptionOptions,W))return Date.now()>=ne.createTime+ls?Ea(S,{token:ne.token,createTime:Date.now(),subscriptionOptions:W}):ne.token;try{yield on(S.firebaseDependencies,ne.token)}catch(Ie){console.warn(Ie)}return wa(S.firebaseDependencies,W)}return wa(S.firebaseDependencies,W)})).apply(this,arguments)}function Fo(S){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,Z.Z)(function*(S){const k=yield vs(S.firebaseDependencies);k&&(yield on(S.firebaseDependencies,k.token),yield z(S.firebaseDependencies));const W=yield S.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Ea(S,k){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,Z.Z)(function*(S,k){try{const W=yield et(S.firebaseDependencies,k),ne=Object.assign(Object.assign({},k),{token:W,createTime:Date.now()});return yield H(S.firebaseDependencies,ne),W}catch(W){throw yield Fo(S),W}})).apply(this,arguments)}function wa(S,k){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,Z.Z)(function*(S,k){const ne={token:yield B(S,k),createTime:Date.now(),subscriptionOptions:k};return yield H(S,ne),ne.token})).apply(this,arguments)}function Za(S,k){return qe.apply(this,arguments)}function qe(){return(qe=(0,Z.Z)(function*(S,k){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ko(k)})})).apply(this,arguments)}function En(S,k){return k.vapidKey===S.vapidKey&&k.endpoint===S.endpoint&&k.auth===S.auth&&k.p256dh===S.p256dh}function Ia(S){const k={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function(S,k){if(!k.notification)return;S.notification={};const W=k.notification.title;W&&(S.notification.title=W);const ne=k.notification.body;ne&&(S.notification.body=ne);const Ie=k.notification.image;Ie&&(S.notification.image=Ie)}(k,S),function(S,k){!k.data||(S.data=k.data)}(k,S),function(S,k){if(!k.fcmOptions)return;S.fcmOptions={};const W=k.fcmOptions.link;W&&(S.fcmOptions.link=W);const ne=k.fcmOptions.analytics_label;ne&&(S.fcmOptions.analyticsLabel=ne)}(k,S),k}function cs(S){return"object"==typeof S&&!!S&&ts in S}function Es(S,k){const W=[];for(let ne=0;ne<S.length;ne++)W.push(S.charAt(ne)),ne<k.length&&W.push(k.charAt(ne));return W.join("")}function mo(S){return C.create("missing-app-config-values",{valueName:S})}Es("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Es("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jl{constructor(k,W,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ie=function(S){if(!S||!S.options)throw mo("App Configuration Object");if(!S.name)throw mo("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:W}=S;for(const ne of k)if(!W[ne])throw mo(ne);return{appName:S.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Ie,installations:W,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function Fs(S){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,Z.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(fo,{scope:Rs}),S.swRegistration.update().catch(()=>{})}catch(k){throw C.create("failed-service-worker-registration",{browserErrorMessage:k.message})}})).apply(this,arguments)}function zr(S,k){return hi.apply(this,arguments)}function hi(){return(hi=(0,Z.Z)(function*(S,k){if(!k&&!S.swRegistration&&(yield Fs(S)),k||!S.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw C.create("invalid-sw-registration");S.swRegistration=k}})).apply(this,arguments)}function ba(S,k){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,Z.Z)(function*(S,k){k?S.vapidKey=k:S.vapidKey||(S.vapidKey=Ns)})).apply(this,arguments)}function Ca(){return(Ca=(0,Z.Z)(function*(S,k){if(!navigator)throw C.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw C.create("permission-blocked");return yield ba(S,null==k?void 0:k.vapidKey),yield zr(S,null==k?void 0:k.serviceWorkerRegistration),Hi(S)})).apply(this,arguments)}function kr(S,k,W){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,Z.Z)(function*(S,k,W){const ne=$l(k);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:W[ts],message_name:W[_s],message_time:W[ns],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $l(S){switch(S){case ji.NOTIFICATION_CLICKED:return"notification_open";case ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ea(){return(ea=(0,Z.Z)(function*(S,k){const W=k.data;if(!W.isFirebaseMessaging)return;S.onMessageHandler&&W.messageType===ji.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Ia(W)):S.onMessageHandler.next(Ia(W)));const ne=W.data;cs(ne)&&"1"===ne[Ui]&&(yield kr(S,W.messageType,ne))})).apply(this,arguments)}const Da="@firebase/messaging";function Du(){return ss.apply(this,arguments)}function ss(){return(ss=(0,Z.Z)(function*(){try{yield(0,fe.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ve._registerComponent)(new se.wA("messaging",S=>{const k=new jl(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function(S,k){return ea.apply(this,arguments)}(k,W)),k},"PUBLIC")),(0,ve._registerComponent)(new se.wA("messaging-internal",S=>{const k=S.getProvider("messaging").getImmediate();return{getToken:ne=>function(S,k){return Ca.apply(this,arguments)}(k,ne)}},"PRIVATE")),(0,ve.registerVersion)(Da,"0.9.12"),(0,ve.registerVersion)(Da,"0.9.12","esm2017");const yo="analytics",ra="firebase_id",Uo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ia="https://www.googletagmanager.com/gtag/js",Lr=new Ce.Yd("@firebase/analytics");function Ys(S){return Promise.all(S.map(k=>k.catch(W=>W)))}function sa(S,k){const W=document.createElement("script");W.src=`${ia}?l=${S}&id=${k}`,W.async=!0,document.head.appendChild(W)}function Bo(S,k,W,ne,Ie,ke){return oa.apply(this,arguments)}function oa(){return(oa=(0,Z.Z)(function*(S,k,W,ne,Ie,ke){const Qe=ne[Ie];try{if(Qe)yield k[Qe];else{const Dt=(yield Ys(W)).find(sn=>sn.measurementId===Ie);Dt&&(yield k[Dt.appId])}}catch(It){Lr.error(It)}S("config",Ie,ke)})).apply(this,arguments)}function Qs(S,k,W,ne,Ie){return jn.apply(this,arguments)}function jn(){return(jn=(0,Z.Z)(function*(S,k,W,ne,Ie){try{let ke=[];if(Ie&&Ie.send_to){let Qe=Ie.send_to;Array.isArray(Qe)||(Qe=[Qe]);const It=yield Ys(W);for(const Dt of Qe){const sn=It.find(hn=>hn.measurementId===Dt),Rt=sn&&k[sn.appId];if(!Rt){ke=[];break}ke.push(Rt)}}0===ke.length&&(ke=Object.values(k)),yield Promise.all(ke),S("event",ne,Ie||{})}catch(ke){Lr.error(ke)}})).apply(this,arguments)}function _o(){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(ia))return k;return null}const Vr=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Js=new class{constructor(k={},W=1e3){this.throttleMetadata=k,this.intervalMillis=W}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,W){this.throttleMetadata[k]=W}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function al(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Au(S){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,Z.Z)(function*(S){var k;const{appId:W,apiKey:ne}=S,Ie={method:"GET",headers:al(ne)},ke=Uo.replace("{app-id}",W),Qe=yield fetch(ke,Ie);if(200!==Qe.status&&304!==Qe.status){let It="";try{const Dt=yield Qe.json();(null===(k=Dt.error)||void 0===k?void 0:k.message)&&(It=Dt.error.message)}catch(Dt){}throw Vr.create("config-fetch-failed",{httpStatus:Qe.status,responseMessage:It})}return Qe.json()})).apply(this,arguments)}function Bc(S){return ds.apply(this,arguments)}function ds(){return(ds=(0,Z.Z)(function*(S,k=Js,W){const{appId:ne,apiKey:Ie,measurementId:ke}=S.options;if(!ne)throw Vr.create("no-app-id");if(!Ie){if(ke)return{measurementId:ke,appId:ne};throw Vr.create("no-api-key")}const Qe=k.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},It=new Ma;return setTimeout((0,Z.Z)(function*(){It.abort()}),void 0!==W?W:6e4),Di({appId:ne,apiKey:Ie,measurementId:ke},Qe,It,k)})).apply(this,arguments)}function Di(S,k,W){return xa.apply(this,arguments)}function xa(){return(xa=(0,Z.Z)(function*(S,{throttleEndTimeMillis:k,backoffCount:W},ne,Ie=Js){const{appId:ke,measurementId:Qe}=S;try{yield eo(ne,k)}catch(It){if(Qe)return Lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${It.message}]`),{appId:ke,measurementId:Qe};throw It}try{const It=yield Au(S);return Ie.deleteThrottleMetadata(ke),It}catch(It){if(!Su(It)){if(Ie.deleteThrottleMetadata(ke),Qe)return Lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${It.message}]`),{appId:ke,measurementId:Qe};throw It}const Dt=503===Number(It.customData.httpStatus)?(0,fe.$s)(W,Ie.intervalMillis,30):(0,fe.$s)(W,Ie.intervalMillis),sn={throttleEndTimeMillis:Date.now()+Dt,backoffCount:W+1};return Ie.setThrottleMetadata(ke,sn),Lr.debug(`Calling attemptFetch again in ${Dt} millis`),Di(S,sn,ne,Ie)}})).apply(this,arguments)}function eo(S,k){return new Promise((W,ne)=>{const Ie=Math.max(k-Date.now(),0),ke=setTimeout(W,Ie);S.addEventListener(()=>{clearTimeout(ke),ne(Vr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Su(S){if(!(S instanceof fe.ZR&&S.customData))return!1;const k=Number(S.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Ma{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}function fi(){return ws.apply(this,arguments)}function ws(){return(ws=(0,Z.Z)(function*(){if(!(0,fe.hl)())return Lr.warn(Vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(S){return Lr.warn(Vr.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Ra(){return(Ra=(0,Z.Z)(function*(S,k,W,ne,Ie,ke,Qe){var It;const Dt=Bc(S);Dt.then(Sr=>{W[Sr.measurementId]=Sr.appId,S.options.measurementId&&Sr.measurementId!==S.options.measurementId&&Lr.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sr=>Lr.error(Sr)),k.push(Dt);const sn=fi().then(Sr=>{if(Sr)return ne.getId()}),[Rt,hn]=yield Promise.all([Dt,sn]);_o()||sa(ke,Rt.measurementId),Ie("js",new Date);const Ki=null!==(It=null==Qe?void 0:Qe.config)&&void 0!==It?It:{};return Ki.origin="firebase",Ki.update=!0,null!=hn&&(Ki[ra]=hn),Ie("config",Rt.measurementId,Ki),Rt.measurementId})).apply(this,arguments)}class eu{constructor(k){this.app=k}_delete(){return delete Ze[this.app.options.appId],Promise.resolve()}}let Ze={},cr=[];const vo={};let $t,tu,to="dataLayer",b=!1;function M(S,k,W){!function(){const S=[];if((0,fe.ru)()&&S.push("This is a browser extension environment."),(0,fe.zI)()||S.push("Cookies are not available."),S.length>0){const k=S.map((ne,Ie)=>`(${Ie+1}) ${ne}`).join(" "),W=Vr.create("invalid-analytics-context",{errorInfo:k});Lr.warn(W.message)}}();const ne=S.options.appId;if(!ne)throw Vr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Vr.create("no-api-key");Lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ze[ne])throw Vr.create("already-exists",{id:ne});if(!b){!function(S){let k=[];Array.isArray(window[S])?k=window[S]:window[S]=k}(to);const{wrappedGtag:ke,gtagCore:Qe}=function(S,k,W,ne,Ie){let ke=function(...Qe){window[ne].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(ke=window[Ie]),window[Ie]=function(S,k,W,ne){function ke(){return(ke=(0,Z.Z)(function*(Qe,It,Dt){try{"event"===Qe?yield Qs(S,k,W,It,Dt):"config"===Qe?yield Bo(S,k,W,ne,It,Dt):S("set",It)}catch(sn){Lr.error(sn)}})).apply(this,arguments)}return function(Qe,It,Dt){return ke.apply(this,arguments)}}(ke,S,k,W),{gtagCore:ke,wrappedGtag:window[Ie]}}(Ze,cr,vo,to,"gtag");tu=ke,$t=Qe,b=!0}return Ze[ne]=function(S,k,W,ne,Ie,ke,Qe){return Ra.apply(this,arguments)}(S,cr,vo,k,$t,to,W),new eu(S)}function G(){return(G=(0,Z.Z)(function*(S,k,W,ne,Ie){if(Ie&&Ie.global)S("event",W,ne);else{const ke=yield k;S("event",W,Object.assign(Object.assign({},ne),{send_to:ke}))}})).apply(this,arguments)}function At(){return qr.apply(this,arguments)}function qr(){return(qr=(0,Z.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(S){return!1}})).apply(this,arguments)}const ll="@firebase/analytics";(0,ve._registerComponent)(new se.wA(yo,(k,{options:W})=>M(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,ve._registerComponent)(new se.wA("analytics-internal",function(k){try{const W=k.getProvider(yo).getImmediate();return{logEvent:(ne,Ie,ke)=>function(S,k,W,ne){S=(0,fe.m9)(S),function(S,k,W,ne,Ie){return G.apply(this,arguments)}(tu,Ze[S.app.options.appId],k,W,ne).catch(Ie=>Lr.error(Ie))}(W,ne,Ie,ke)}}catch(W){throw Vr.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,ve.registerVersion)(ll,"0.7.8"),(0,ve.registerVersion)(ll,"0.7.8","esm2017");var jd=U(1734),qi=U(9449),Eo=U(2248),Xh=U(5193),gi=U(7923);const ef=new w.GfV("7.1.1"),ar="__angularfire_symbol__analyticsIsSupported",Ar="__angularfire_symbol__remoteConfigIsSupported",no="__angularfire_symbol__messagingIsSupported";function Pa(S,k,W){if(k){if(1===k.length)return k[0];const ke=k.filter(Qe=>Qe.app===W);if(1===ke.length)return ke[0]}return W.container.getProvider(S).getImmediate({optional:!0})}globalThis[ar]||(globalThis[ar]=At().then(S=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=S)),globalThis[no]||(globalThis[no]=Du().then(S=>globalThis.__angularfire_symbol__messagingIsSupportedValue=S)),globalThis[Ar]||(globalThis[Ar]=_a().then(S=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=S));const at=(S,k)=>{const W=k?[k]:(0,O.C6)(),ne=[];return W.forEach(Ie=>{Ie.container.getProvider(S).instances.forEach(Qe=>{ne.includes(Qe)||ne.push(Qe)})}),ne};function fs(){}class cl{constructor(k,W=jd.N){this.zone=k,this.delegate=W}now(){return this.delegate.now()}schedule(k,W,ne){const Ie=this.zone;return this.delegate.schedule(function(Qe){Ie.runGuarded(()=>{k.apply(this,[Qe])})},W,ne)}}class ka{constructor(k){this.zone=k,this.task=null}call(k,W){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fs,{},fs,fs)),W.pipe((0,Eo.b)({next:ne,complete:ne,error:ne})).subscribe(k).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Io=(()=>{class S{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new cl(Zone.current)),this.insideAngular=W.run(()=>new cl(Zone.current,qi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(W){return new(W||S)(w.LFG(w.R0b))},S.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ro(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function bs(S){return ro(),function(S){return function(W){return(W=W.lift(new ka(S.ngZone))).pipe((0,Xh.R)(S.outsideAngular),(0,gi.QV)(S.insideAngular))}}(ro())(S)}},9842:(lt,Me,U)=>{U.d(Me,{BH:()=>Ne,LL:()=>Qn,ZR:()=>dt,zI:()=>Ve,US:()=>Ce,tV:()=>Q,L:()=>ge,$s:()=>pn,r3:()=>zt,Sg:()=>Be,ne:()=>Pt,vZ:()=>tn,ZB:()=>ye,Lj:()=>un,pd:()=>ze,m9:()=>cn,z$:()=>Re,jU:()=>Pe,ru:()=>$e,d:()=>Ee,xb:()=>$n,w1:()=>ot,hl:()=>Zt,uI:()=>Oe,UG:()=>je,b$:()=>it,G6:()=>gt,Mn:()=>Kt,X3:()=>nt,xO:()=>Xn,zd:()=>fn,eu:()=>Ft});var w=U(1921);const fe=function(oe){const ee=[];let de=0;for(let Ae=0;Ae<oe.length;Ae++){let De=oe.charCodeAt(Ae);De<128?ee[de++]=De:De<2048?(ee[de++]=De>>6|192,ee[de++]=63&De|128):55296==(64512&De)&&Ae+1<oe.length&&56320==(64512&oe.charCodeAt(Ae+1))?(De=65536+((1023&De)<<10)+(1023&oe.charCodeAt(++Ae)),ee[de++]=De>>18|240,ee[de++]=De>>12&63|128,ee[de++]=De>>6&63|128,ee[de++]=63&De|128):(ee[de++]=De>>12|224,ee[de++]=De>>6&63|128,ee[de++]=63&De|128)}return ee},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(oe,ee){if(!Array.isArray(oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const de=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let De=0;De<oe.length;De+=3){const Xe=oe[De],Mt=De+1<oe.length,dn=Mt?oe[De+1]:0,zn=De+2<oe.length,kn=zn?oe[De+2]:0;let ur=(15&dn)<<2|kn>>6,lr=63&kn;zn||(lr=64,Mt||(ur=64)),Ae.push(de[Xe>>2],de[(3&Xe)<<4|dn>>4],de[ur],de[lr])}return Ae.join("")},encodeString(oe,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(oe):this.encodeByteArray(fe(oe),ee)},decodeString(oe,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(oe):function(oe){const ee=[];let de=0,Ae=0;for(;de<oe.length;){const De=oe[de++];if(De<128)ee[Ae++]=String.fromCharCode(De);else if(De>191&&De<224){const Xe=oe[de++];ee[Ae++]=String.fromCharCode((31&De)<<6|63&Xe)}else if(De>239&&De<365){const zn=((7&De)<<18|(63&oe[de++])<<12|(63&oe[de++])<<6|63&oe[de++])-65536;ee[Ae++]=String.fromCharCode(55296+(zn>>10)),ee[Ae++]=String.fromCharCode(56320+(1023&zn))}else{const Xe=oe[de++],Mt=oe[de++];ee[Ae++]=String.fromCharCode((15&De)<<12|(63&Xe)<<6|63&Mt)}}return ee.join("")}(this.decodeStringToByteArray(oe,ee))},decodeStringToByteArray(oe,ee){this.init_();const de=ee?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let De=0;De<oe.length;){const Xe=de[oe.charAt(De++)],dn=De<oe.length?de[oe.charAt(De)]:0;++De;const kn=De<oe.length?de[oe.charAt(De)]:64;++De;const Qt=De<oe.length?de[oe.charAt(De)]:64;if(++De,null==Xe||null==dn||null==kn||null==Qt)throw Error();Ae.push(Xe<<2|dn>>4),64!==kn&&(Ae.push(dn<<4&240|kn>>2),64!==Qt&&Ae.push(kn<<6&192|Qt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let oe=0;oe<this.ENCODED_VALS.length;oe++)this.byteToCharMap_[oe]=this.ENCODED_VALS.charAt(oe),this.charToByteMap_[this.byteToCharMap_[oe]]=oe,this.byteToCharMapWebSafe_[oe]=this.ENCODED_VALS_WEBSAFE.charAt(oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[oe]]=oe,oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(oe)]=oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(oe)]=oe)}}},ge=function(oe){return function(oe){const ee=fe(oe);return Ce.encodeByteArray(ee,!0)}(oe).replace(/\./g,"")},Q=function(oe){try{return Ce.decodeString(oe,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function ye(oe,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===oe&&(oe={});break;case Array:oe=[];break;default:return ee}for(const de in ee)!ee.hasOwnProperty(de)||!we(de)||(oe[de]=ye(oe[de],ee[de]));return oe}function we(oe){return"__proto__"!==oe}class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,de)=>{this.resolve=ee,this.reject=de})}wrapCallback(ee){return(de,Ae)=>{de?this.reject(de):this.resolve(Ae),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(de):ee(de,Ae))}}}function Be(oe,ee){if(oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=ee||"demo-project",De=oe.iat||0,Xe=oe.sub||oe.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Mt=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:De,exp:De+3600,auth_time:De,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},oe);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Mt)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function je(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(oe){return!1}}function Pe(){return"object"==typeof self&&self.self===self}function $e(){const oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof oe&&void 0!==oe.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ee(){return Re().indexOf("Electron/")>=0}function ot(){const oe=Re();return oe.indexOf("MSIE ")>=0||oe.indexOf("Trident/")>=0}function Kt(){return Re().indexOf("MSAppHost/")>=0}function gt(){return!je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zt(){return"object"==typeof indexedDB}function Ft(){return new Promise((oe,ee)=>{try{let de=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(Ae);De.onsuccess=()=>{De.result.close(),de||self.indexedDB.deleteDatabase(Ae),oe(!0)},De.onupgradeneeded=()=>{de=!1},De.onerror=()=>{var Xe;ee((null===(Xe=De.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(de){ee(de)}})}function Ve(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class dt extends Error{constructor(ee,de,Ae){super(de),this.code=ee,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qn.prototype.create)}}class Qn{constructor(ee,de,Ae){this.service=ee,this.serviceName=de,this.errors=Ae}create(ee,...de){const Ae=de[0]||{},De=`${this.service}/${ee}`,Xe=this.errors[ee],Mt=Xe?function(oe,ee){return oe.replace(ri,(de,Ae)=>{const De=ee[Ae];return null!=De?String(De):`<${Ae}?>`})}(Xe,Ae):"Error";return new dt(De,`${this.serviceName}: ${Mt} (${De}).`,Ae)}}const ri=/\{\$([^}]+)}/g;function zt(oe,ee){return Object.prototype.hasOwnProperty.call(oe,ee)}function $n(oe){for(const ee in oe)if(Object.prototype.hasOwnProperty.call(oe,ee))return!1;return!0}function tn(oe,ee){if(oe===ee)return!0;const de=Object.keys(oe),Ae=Object.keys(ee);for(const De of de){if(!Ae.includes(De))return!1;const Xe=oe[De],Mt=ee[De];if(ci(Xe)&&ci(Mt)){if(!tn(Xe,Mt))return!1}else if(Xe!==Mt)return!1}for(const De of Ae)if(!de.includes(De))return!1;return!0}function ci(oe){return null!==oe&&"object"==typeof oe}function Xn(oe){const ee=[];for(const[de,Ae]of Object.entries(oe))Array.isArray(Ae)?Ae.forEach(De=>{ee.push(encodeURIComponent(de)+"="+encodeURIComponent(De))}):ee.push(encodeURIComponent(de)+"="+encodeURIComponent(Ae));return ee.length?"&"+ee.join("&"):""}function fn(oe){const ee={};return oe.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[De,Xe]=Ae.split("=");ee[decodeURIComponent(De)]=decodeURIComponent(Xe)}}),ee}function ze(oe){const ee=oe.indexOf("?");if(!ee)return"";const de=oe.indexOf("#",ee);return oe.substring(ee,de>0?de:void 0)}function Pt(oe,ee){const de=new _r(oe,ee);return de.subscribe.bind(de)}class _r{constructor(ee,de){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=de,this.task.then(()=>{ee(this)}).catch(Ae=>{this.error(Ae)})}next(ee){this.forEachObserver(de=>{de.next(ee)})}error(ee){this.forEachObserver(de=>{de.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,de,Ae){let De;if(void 0===ee&&void 0===de&&void 0===Ae)throw new Error("Missing Observer.");De=function(oe,ee){if("object"!=typeof oe||null===oe)return!1;for(const de of["next","error","complete"])if(de in oe&&"function"==typeof oe[de])return!0;return!1}(ee)?ee:{next:ee,error:de,complete:Ae},void 0===De.next&&(De.next=Br),void 0===De.error&&(De.error=Br),void 0===De.complete&&(De.complete=Br);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch(Mt){}}),this.observers.push(De),Xe}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let de=0;de<this.observers.length;de++)this.sendOne(de,ee)}sendOne(ee,de){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{de(this.observers[ee])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Br(){}function pn(oe,ee=1e3,de=2){const Ae=ee*Math.pow(de,oe),De=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+De)}function cn(oe){return oe&&oe._delegate?oe._delegate:oe}function Un(oe,ee){return new Promise((de,Ae)=>{oe.onsuccess=De=>{de(De.target.result)},oe.onerror=De=>{var Xe;Ae(`${ee}: ${null===(Xe=De.target.error)||void 0===Xe?void 0:Xe.message}`)}})}class yt{constructor(ee){this._db=ee,this.objectStoreNames=this._db.objectStoreNames}transaction(ee,de="readonly"){return new mt(this._db.transaction.call(this._db,ee,de))}createObjectStore(ee,de){return new We(this._db.createObjectStore(ee,de))}close(){this._db.close()}}class mt{constructor(ee){this._transaction=ee,this.complete=new Promise((de,Ae)=>{this._transaction.oncomplete=function(){de()},this._transaction.onerror=()=>{Ae(this._transaction.error)},this._transaction.onabort=()=>{Ae(this._transaction.error)}})}objectStore(ee){return new We(this._transaction.objectStore(ee))}}class We{constructor(ee){this._store=ee}index(ee){return new ct(this._store.index(ee))}createIndex(ee,de,Ae){return new ct(this._store.createIndex(ee,de,Ae))}get(ee){return Un(this._store.get(ee),"Error reading from IndexedDB")}put(ee,de){return Un(this._store.put(ee,de),"Error writing to IndexedDB")}delete(ee){return Un(this._store.delete(ee),"Error deleting from IndexedDB")}clear(){return Un(this._store.clear(),"Error clearing IndexedDB object store")}}class ct{constructor(ee){this._index=ee}get(ee){return Un(this._index.get(ee),"Error reading from IndexedDB")}}function nt(oe,ee,de){return new Promise((Ae,De)=>{try{const Xe=indexedDB.open(oe,ee);Xe.onsuccess=Mt=>{Ae(new yt(Mt.target.result))},Xe.onerror=Mt=>{var dn;De(`Error opening indexedDB: ${null===(dn=Mt.target.error)||void 0===dn?void 0:dn.message}`)},Xe.onupgradeneeded=Mt=>{de(new yt(Xe.result),Mt.oldVersion,Mt.newVersion,new mt(Xe.transaction))}}catch(Xe){De(`Error opening indexedDB: ${Xe.message}`)}})}function un(oe){return _n.apply(this,arguments)}function _n(){return(_n=(0,w.Z)(function*(oe){return new Promise((ee,de)=>{try{const Ae=indexedDB.deleteDatabase(oe);Ae.onsuccess=()=>{ee()},Ae.onerror=De=>{var Xe;de(`Error deleting indexedDB database "${oe}": ${null===(Xe=De.target.error)||void 0===Xe?void 0:Xe.message}`)}}catch(Ae){de(`Error deleting indexedDB database "${oe}": ${Ae.message}`)}})})).apply(this,arguments)}},7334:(lt,Me,U)=>{U.d(Me,{Mq:()=>w.getApp,C6:()=>w.getApps});var w=U(2646);(0,w.registerVersion)("firebase","9.7.0","app")},6543:(lt,Me,U)=>{U.d(Me,{Z:()=>w.Z});var w=U(614);w.Z.registerVersion("firebase","9.7.0","app-compat")},7237:(lt,Me,U)=>{U.r(Me);var w=U(1921),O=U(614),Z=U(9842),ve=U(2646);function pe(g,d){var f={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&d.indexOf(E)<0&&(f[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var P=0;for(E=Object.getOwnPropertySymbols(g);P<E.length;P++)d.indexOf(E[P])<0&&Object.prototype.propertyIsEnumerable.call(g,E[P])&&(f[E[P]]=g[E[P]])}return f}var tt=U(4516),dt=U(7817);const Jn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ur=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Yt=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ln=new tt.Yd("@firebase/auth");function $n(g,...d){ln.logLevel<=tt.in.ERROR&&ln.error(`Auth (${ve.SDK_VERSION}): ${g}`,...d)}function wn(g,...d){throw fn(g,...d)}function tn(g,...d){return fn(g,...d)}function ci(g,d,f){const E=Object.assign(Object.assign({},Ur()),{[d]:f});return new Z.LL("auth","Firebase",E).create(d,{appName:g.name})}function Xn(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&wn(g,"argument-error"),ci(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fn(g,...d){if("string"!=typeof g){const f=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=g.name),g._errorFactory.create(f,...E)}return Yt.create(g,...d)}function ze(g,d,...f){if(!g)throw fn(d,...f)}function In(g){const d="INTERNAL ASSERTION FAILED: "+g;throw $n(d),new Error(d)}function Pt(g,d){g||In(d)}const _r=new Map;function Lt(g){Pt(g instanceof Function,"Expected a class definition");let d=_r.get(g);return d?(Pt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,_r.set(g,d),d)}function Xr(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function ht(){return"http:"===jr()||"https:"===jr()}function jr(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Sn{constructor(d,f){this.shortDelay=d,this.longDelay=f,Pt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,Z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function bt(g,d){Pt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class Et{static initialize(d,f,E){this.fetchImpl=d,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ir={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wi=new Sn(3e4,6e4);function yn(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function pn(g,d,f,E){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(g,d,f,E,P={}){return $r(g,P,(0,w.Z)(function*(){let j={},ce={};E&&("GET"===d?ce=E:j={body:JSON.stringify(E)});const Se=(0,Z.xO)(Object.assign({key:g.config.apiKey},ce)).slice(1),st=yield g._getAdditionalHeaders();return st["Content-Type"]="application/json",g.languageCode&&(st["X-Firebase-Locale"]=g.languageCode),Et.fetch()(mt(g,g.config.apiHost,f,Se),Object.assign({method:d,headers:st,referrerPolicy:"no-referrer"},j))}))})).apply(this,arguments)}function $r(g,d,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,w.Z)(function*(g,d,f){g._canInitEmulator=!1;const E=Object.assign(Object.assign({},ir),d);try{const P=new We(g),j=yield Promise.race([f(),P.promise]);P.clearNetworkTimeout();const ce=yield j.json();if("needConfirmation"in ce)throw ct(g,"account-exists-with-different-credential",ce);if(j.ok&&!("errorMessage"in ce))return ce;{const Se=j.ok?ce.errorMessage:ce.error.message,[st,Je]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw ct(g,"credential-already-in-use",ce);if("EMAIL_EXISTS"===st)throw ct(g,"email-already-in-use",ce);const St=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw ci(g,St,Je);wn(g,St)}}catch(P){if(P instanceof Z.ZR)throw P;wn(g,"network-request-failed")}})).apply(this,arguments)}function Un(g,d,f,E){return yt.apply(this,arguments)}function yt(){return(yt=(0,w.Z)(function*(g,d,f,E,P={}){const j=yield pn(g,d,f,E,P);return"mfaPendingCredential"in j&&wn(g,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function mt(g,d,f,E){const P=`${d}${f}?${E}`;return g.config.emulator?bt(g.config,P):`${g.config.apiScheme}://${P}`}class We{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(tn(this.auth,"network-request-failed")),wi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ct(g,d,f){const E={appName:g.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const P=tn(g,d,E);return P.customData._tokenResponse=f,P}function un(){return(un=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function _n(g,d){return oe.apply(this,arguments)}function oe(){return(oe=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ee(g,d){return de.apply(this,arguments)}function de(){return(de=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ae(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Mt(){return(Mt=(0,w.Z)(function*(g,d=!1){const f=(0,Z.m9)(g),E=yield f.getIdToken(d),P=zn(E);ze(P&&P.exp&&P.auth_time&&P.iat,f.auth,"internal-error");const j="object"==typeof P.firebase?P.firebase:void 0,ce=null==j?void 0:j.sign_in_provider;return{claims:P,token:E,authTime:Ae(dn(P.auth_time)),issuedAtTime:Ae(dn(P.iat)),expirationTime:Ae(dn(P.exp)),signInProvider:ce||null,signInSecondFactor:(null==j?void 0:j.sign_in_second_factor)||null}})).apply(this,arguments)}function dn(g){return 1e3*Number(g)}function zn(g){const[d,f,E]=g.split(".");if(void 0===d||void 0===f||void 0===E)return $n("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,Z.tV)(f);return P?JSON.parse(P):($n("Failed to decode base64 JWT payload"),null)}catch(P){return $n("Caught error parsing JWT payload as JSON",P),null}}function sr(g,d){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,w.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(E){throw E instanceof Z.ZR&&ur(E)&&g.auth.currentUser===g&&(yield g.auth.signOut()),E}})).apply(this,arguments)}function ur({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class lr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const P=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield f.iteration()}),E)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class Cr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ae(this.lastLoginAt),this.creationTime=Ae(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tt(g){return vr.apply(this,arguments)}function vr(){return(vr=(0,w.Z)(function*(g){var d;const f=g.auth,E=yield g.getIdToken(),P=yield sr(g,ee(f,{idToken:E}));ze(null==P?void 0:P.users.length,f,"internal-error");const j=P.users[0];g._notifyReloadListener(j);const ce=(null===(d=j.providerUserInfo)||void 0===d?void 0:d.length)?ut(j.providerUserInfo):[],Se=Dr(g.providerData,ce),St=!!g.isAnonymous&&!(g.email&&j.passwordHash||(null==Se?void 0:Se.length)),Nt={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:Se,metadata:new Cr(j.createdAt,j.lastLoginAt),isAnonymous:St};Object.assign(g,Nt)})).apply(this,arguments)}function Hn(){return(Hn=(0,w.Z)(function*(g){const d=(0,Z.m9)(g);yield Tt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Dr(g,d){return[...g.filter(E=>!d.some(P=>P.providerId===E.providerId)),...d]}function ut(g){return g.map(d=>{var{providerId:f}=d,E=pe(d,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function vn(){return(vn=(0,w.Z)(function*(g,d){const f=yield $r(g,{},(0,w.Z)(function*(){const E=(0,Z.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:P,apiKey:j}=g.config,ce=mt(g,P,"/v1/token",`key=${j}`),Se=yield g._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()(ce,{method:"POST",headers:Se,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Wt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ze(d.idToken,"internal-error"),ze(void 0!==d.idToken,"internal-error"),ze(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function(g){const d=zn(g);return ze(d,"internal-error"),ze(void 0!==d.exp,"internal-error"),ze(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var E=this;return(0,w.Z)(function*(){return ze(!E.accessToken||E.refreshToken,d,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var E=this;return(0,w.Z)(function*(){const{accessToken:P,refreshToken:j,expiresIn:ce}=yield function(g,d){return vn.apply(this,arguments)}(d,f);E.updateTokensAndExpiration(P,j,Number(ce))})()}updateTokensAndExpiration(d,f,E){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,f){const{refreshToken:E,accessToken:P,expirationTime:j}=f,ce=new Wt;return E&&(ze("string"==typeof E,"internal-error",{appName:d}),ce.refreshToken=E),P&&(ze("string"==typeof P,"internal-error",{appName:d}),ce.accessToken=P),j&&(ze("number"==typeof j,"internal-error",{appName:d}),ce.expirationTime=j),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Wt,this.toJSON())}_performRefresh(){return In("not implemented")}}function Jt(g,d){ze("string"==typeof g||void 0===g,"internal-error",{appName:d})}class xn{constructor(d){var{uid:f,auth:E,stsTokenManager:P}=d,j=pe(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new Cr(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,w.Z)(function*(){const E=yield sr(f,f.stsTokenManager.getToken(f.auth,d));return ze(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(d){return function(g){return Mt.apply(this,arguments)}(this,d)}reload(){return function(g){return Hn.apply(this,arguments)}(this)}_assign(d){this!==d&&(ze(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new xn(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var E=this;return(0,w.Z)(function*(){let P=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),P=!0),f&&(yield Tt(E)),yield E.auth._persistUserIfCurrent(E),P&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,w.Z)(function*(){const f=yield d.getIdToken();return yield sr(d,function(g,d){return un.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var E,P,j,ce,Se,st,Je,St;const Nt=null!==(E=f.displayName)&&void 0!==E?E:void 0,Vn=null!==(P=f.email)&&void 0!==P?P:void 0,Mi=null!==(j=f.phoneNumber)&&void 0!==j?j:void 0,Ha=null!==(ce=f.photoURL)&&void 0!==ce?ce:void 0,Le=null!==(Se=f.tenantId)&&void 0!==Se?Se:void 0,du=null!==(st=f._redirectEventId)&&void 0!==st?st:void 0,ao=null!==(Je=f.createdAt)&&void 0!==Je?Je:void 0,ld=null!==(St=f.lastLoginAt)&&void 0!==St?St:void 0,{uid:ju,emailVerified:hu,isAnonymous:sh,providerData:ha,stsTokenManager:Ga}=f;ze(ju&&Ga,d,"internal-error");const cd=Wt.fromJSON(this.name,Ga);ze("string"==typeof ju,d,"internal-error"),Jt(Nt,d.name),Jt(Vn,d.name),ze("boolean"==typeof hu,d,"internal-error"),ze("boolean"==typeof sh,d,"internal-error"),Jt(Mi,d.name),Jt(Ha,d.name),Jt(Le,d.name),Jt(du,d.name),Jt(ao,d.name),Jt(ld,d.name);const lc=new xn({uid:ju,auth:d,email:Vn,emailVerified:hu,displayName:Nt,isAnonymous:sh,photoURL:Ha,phoneNumber:Mi,tenantId:Le,stsTokenManager:cd,createdAt:ao,lastLoginAt:ld});return ha&&Array.isArray(ha)&&(lc.providerData=ha.map(Qi=>Object.assign({},Qi))),du&&(lc._redirectEventId=du),lc}static _fromIdTokenResponse(d,f,E=!1){return(0,w.Z)(function*(){const P=new Wt;P.updateFromServerResponse(f);const j=new xn({uid:f.localId,auth:d,stsTokenManager:P,isAnonymous:E});return yield Tt(j),j})()}}const Dn=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(f,E){var P=this;return(0,w.Z)(function*(){P.storage[f]=E})()}_get(f){var E=this;return(0,w.Z)(function*(){const P=E.storage[f];return void 0===P?null:P})()}_remove(f){var E=this;return(0,w.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return g.type="NONE",g})();function Er(g,d,f){return`firebase:${g}:${d}:${f}`}class Rn{constructor(d,f,E){this.persistence=d,this.auth=f,this.userKey=E;const{config:P,name:j}=this.auth;this.fullUserKey=Er(this.userKey,P.apiKey,j),this.fullPersistenceKey=Er("persistence",P.apiKey,j),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?xn._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,w.Z)(function*(){if(f.persistence===d)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,E="authUser"){return(0,w.Z)(function*(){if(!f.length)return new Rn(Lt(Dn),d,E);const P=(yield Promise.all(f.map(function(){var Je=(0,w.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let j=P[0]||Lt(Dn);const ce=Er(E,d.config.apiKey,d.name);let Se=null;for(const Je of f)try{const St=yield Je._get(ce);if(St){const Nt=xn._fromJSON(d,St);Je!==j&&(Se=Nt),j=Je;break}}catch(St){}const st=P.filter(Je=>Je._shouldAllowMigration);return j._shouldAllowMigration&&st.length?(j=st[0],Se&&(yield j._set(ce,Se.toJSON())),yield Promise.all(f.map(function(){var Je=(0,w.Z)(function*(St){if(St!==j)try{yield St._remove(ce)}catch(Nt){}});return function(St){return Je.apply(this,arguments)}}())),new Rn(j,d,E)):new Rn(j,d,E)})()}}function qt(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ki(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ss(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Fi(d))return"Blackberry";if(re(d))return"Webos";if(Ii(d))return"Safari";if((d.includes("chrome/")||Ji(d))&&!d.includes("edge/"))return"Chrome";if(Bn(d))return"Android";{const E=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ss(g=(0,Z.z$)()){return/firefox\//i.test(g)}function Ii(g=(0,Z.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ji(g=(0,Z.z$)()){return/crios\//i.test(g)}function ki(g=(0,Z.z$)()){return/iemobile/i.test(g)}function Bn(g=(0,Z.z$)()){return/android/i.test(g)}function Fi(g=(0,Z.z$)()){return/blackberry/i.test(g)}function re(g=(0,Z.z$)()){return/webos/i.test(g)}function ie(g=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(g)}function xt(g=(0,Z.z$)()){return ie(g)||Bn(g)||re(g)||Fi(g)||/windows phone/i.test(g)||ki(g)}function bn(g,d=[]){let f;switch(g){case"Browser":f=qt((0,Z.z$)());break;case"Worker":f=`${qt((0,Z.z$)())}-${g}`;break;default:f=g}const E=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ve.SDK_VERSION}/${E}`}class Zn{constructor(d,f,E){this.app=d,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new or(this),this.idTokenSubscription=new or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(d,f){var E=this;return f&&(this._popupRedirectResolver=Lt(f)),this._initializationPromise=this.queue((0,w.Z)(function*(){var P,j;if(!E._deleted&&(E.persistenceManager=yield Rn.create(E,d),!E._deleted)){if(null===(P=E._popupRedirectResolver)||void 0===P?void 0:P._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ce){}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(j=E.currentUser)||void 0===j?void 0:j.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f)}})()}initializeCurrentUser(d){var f=this;return(0,w.Z)(function*(){var E;let P=yield f.assertedPersistence.getCurrentUser();if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const j=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,ce=null==P?void 0:P._redirectEventId,Se=yield f.tryRedirectSignIn(d);(!j||j===ce)&&(null==Se?void 0:Se.user)&&(P=Se.user)}return P?P._redirectEventId?(ze(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===P._redirectEventId?f.directlySetCurrentUser(P):f.reloadAndSetCurrentUserOrClear(P)):f.reloadAndSetCurrentUserOrClear(P):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var f=this;return(0,w.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(P){yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,w.Z)(function*(){try{yield Tt(d)}catch(E){if("auth/network-request-failed"!==E.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,w.Z)(function*(){const E=d?(0,Z.m9)(d):null;return E&&ze(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(d){var f=this;return(0,w.Z)(function*(){if(!f._deleted)return d&&ze(f.tenantId===d.tenantId,f,"tenant-id-mismatch"),f.queue((0,w.Z)(function*(){yield f.directlySetCurrentUser(d),f.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var f=this;return this.queue((0,w.Z)(function*(){yield f.assertedPersistence.setPersistence(Lt(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new Z.LL("auth","Firebase",d())}onAuthStateChanged(d,f,E){return this.registerStateListener(this.authStateSubscription,d,f,E)}onIdTokenChanged(d,f,E){return this.registerStateListener(this.idTokenSubscription,d,f,E)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var E=this;return(0,w.Z)(function*(){const P=yield E.getOrInitRedirectPersistenceManager(f);return null===d?P.removeCurrentUser():P.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,w.Z)(function*(){if(!f.redirectPersistenceManager){const E=d&&Lt(d)||f._popupRedirectResolver;ze(E,f,"argument-error"),f.redirectPersistenceManager=yield Rn.create(f,[Lt(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,w.Z)(function*(){var E,P;return f._isInitialized&&(yield f.queue((0,w.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===d?f._currentUser:(null===(P=f.redirectUser)||void 0===P?void 0:P._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,w.Z)(function*(){if(d===f.currentUser)return f.queue((0,w.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,E,P){if(this._deleted)return()=>{};const j="function"==typeof f?f:f.next.bind(f),ce=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(ce,this,"internal-error"),ce.then(()=>j(this.currentUser)),"function"==typeof f?d.addObserver(f,E,P):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,w.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var f;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const P=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return P&&(E["X-Firebase-Client"]=P),E})()}}function Nn(g){return(0,Z.m9)(g)}class or{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,Z.ne)(f=>this.observer=f)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hr(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Po(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Gr{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return In("not implemented")}_getIdTokenResponse(d){return In("not implemented")}_linkToIdToken(d,f){return In("not implemented")}_getReauthenticationResolver(d){return In("not implemented")}}function Or(g,d){return gs.apply(this,arguments)}function gs(){return(gs=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:resetPassword",yn(g,d))})).apply(this,arguments)}function xs(g,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function qs(g,d){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:update",yn(g,d))})).apply(this,arguments)}function ms(){return(ms=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithPassword",yn(g,d))})).apply(this,arguments)}function Ms(g,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:sendOobCode",yn(g,d))})).apply(this,arguments)}function ys(g,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,w.Z)(function*(g,d){return Ms(g,d)})).apply(this,arguments)}function Yo(g,d){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,w.Z)(function*(g,d){return Ms(g,d)})).apply(this,arguments)}function _a(g,d){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,w.Z)(function*(g,d){return Ms(g,d)})).apply(this,arguments)}function fo(g,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,w.Z)(function*(g,d){return Ms(g,d)})).apply(this,arguments)}function es(){return(es=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithEmailLink",yn(g,d))})).apply(this,arguments)}function _s(){return(_s=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithEmailLink",yn(g,d))})).apply(this,arguments)}class ns extends Gr{constructor(d,f,E,P=null){super("password",E),this._email=d,this._password=f,this._tenantId=P}static _fromEmailAndPassword(d,f){return new ns(d,f,"password")}static _fromEmailAndCode(d,f,E=null){return new ns(d,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,w.Z)(function*(){switch(f.signInMethod){case"password":return function(g,d){return ms.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function(g,d){return es.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:wn(d,"internal-error")}})()}_linkToIdToken(d,f){var E=this;return(0,w.Z)(function*(){switch(E.signInMethod){case"password":return xs(d,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(g,d){return _s.apply(this,arguments)}(d,{idToken:f,email:E._email,oobCode:E._password});default:wn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ui(g,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithIdp",yn(g,d))})).apply(this,arguments)}class Yn extends Gr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Yn(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):wn("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:P}=f,j=pe(f,["providerId","signInMethod"]);if(!E||!P)return null;const ce=new Yn(E,P);return ce.idToken=j.idToken||void 0,ce.accessToken=j.accessToken||void 0,ce.secret=j.secret,ce.nonce=j.nonce,ce.pendingToken=j.pendingToken||null,ce}_getIdTokenResponse(d){return Ui(d,this.buildRequest())}_linkToIdToken(d,f){const E=this.buildRequest();return E.idToken=f,Ui(d,E)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ui(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,Z.xO)(f)}return d}}function ko(g,d){return rs.apply(this,arguments)}function rs(){return(rs=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:sendVerificationCode",yn(g,d))})).apply(this,arguments)}function Zr(){return(Zr=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithPhoneNumber",yn(g,d))})).apply(this,arguments)}function Wr(){return(Wr=(0,w.Z)(function*(g,d){const f=yield Un(g,"POST","/v1/accounts:signInWithPhoneNumber",yn(g,d));if(f.temporaryProof)throw ct(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Zs={USER_NOT_FOUND:"user-not-found"};function Pr(){return(Pr=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithPhoneNumber",yn(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Zs)})).apply(this,arguments)}class wr extends Gr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new wr({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new wr({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function(g,d){return Zr.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function(g,d){return Wr.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function(g,d){return Pr.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:E,verificationCode:P}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:E,code:P}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:E,phoneNumber:P,temporaryProof:j}=d;return E||f||P||j?new wr({verificationId:f,verificationCode:E,phoneNumber:P,temporaryProof:j}):null}}class vs{constructor(d){var f,E,P,j,ce,Se;const st=(0,Z.zd)((0,Z.pd)(d)),Je=null!==(f=st.apiKey)&&void 0!==f?f:null,St=null!==(E=st.oobCode)&&void 0!==E?E:null,Nt=function(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=st.mode)&&void 0!==P?P:null);ze(Je&&St&&Nt,"argument-error"),this.apiKey=Je,this.operation=Nt,this.code=St,this.continueUrl=null!==(j=st.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(ce=st.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(Se=st.tenantId)&&void 0!==Se?Se:null}static parseLink(d){const f=function(g){const d=(0,Z.zd)((0,Z.pd)(g)).link,f=d?(0,Z.zd)((0,Z.pd)(d)).deep_link_id:null,E=(0,Z.zd)((0,Z.pd)(g)).deep_link_id;return(E?(0,Z.zd)((0,Z.pd)(E)).link:null)||E||f||d||g}(d);try{return new vs(f)}catch(E){return null}}}let H=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,E){return ns._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const P=vs.parseLink(E);return ze(P,"argument-error"),ns._fromEmailAndCode(f,P.code,P.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class R{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class z extends R{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ue extends z{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ze("providerId"in f&&"signInMethod"in f,"argument-error"),Yn._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ze(d.idToken||d.accessToken,"argument-error"),Yn._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ue.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ue.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:P,pendingToken:j,nonce:ce,providerId:Se}=d;if(!E&&!P&&!f&&!j||!Se)return null;try{return new ue(Se)._credential({idToken:f,accessToken:E,nonce:ce,pendingToken:j})}catch(st){return null}}}let A=(()=>{class g extends z{constructor(){super("facebook.com")}static credential(f){return Yn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(E){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),T=(()=>{class g extends z{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Yn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:P}=f;if(!E&&!P)return null;try{return g.credential(E,P)}catch(j){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),C=(()=>{class g extends z{constructor(){super("github.com")}static credential(f){return Yn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(E){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class be extends Gr{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Ui(d,this.buildRequest())}_linkToIdToken(d,f){const E=this.buildRequest();return E.idToken=f,Ui(d,E)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ui(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:P,pendingToken:j}=f;return E&&P&&j&&E===P?new be(E,j):null}static _create(d,f){return new be(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ft extends R{constructor(d){ze(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ft.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ft.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=be.fromJSON(d);return ze(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:E}=d;if(!f||!E)return null;try{return be._create(E,f)}catch(P){return null}}}let on=(()=>{class g extends z{constructor(){super("twitter.com")}static credential(f,E){return Yn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:P}=f;if(!E||!P)return null;try{return g.credential(E,P)}catch(j){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function nn(g,d){return tr.apply(this,arguments)}function tr(){return(tr=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signUp",yn(g,d))})).apply(this,arguments)}class qn{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,E,P=!1){return(0,w.Z)(function*(){const j=yield xn._fromIdTokenResponse(d,E,P),ce=$i(E);return new qn({user:j,providerId:ce,_tokenResponse:E,operationType:f})})()}static _forOperation(d,f,E){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const P=$i(E);return new qn({user:d,providerId:P,_tokenResponse:E,operationType:f})})()}}function $i(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function ls(){return(ls=(0,w.Z)(function*(g){var d;const f=Nn(g);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new qn({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield nn(f,{returnSecureToken:!0}),P=yield qn._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}class Hi extends Z.ZR{constructor(d,f,E,P){var j;super(f.code,f.message),this.operationType=E,this.user=P,Object.setPrototypeOf(this,Hi.prototype),this.customData={appName:d.name,tenantId:null!==(j=d.tenantId)&&void 0!==j?j:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,f,E,P){return new Hi(d,f,E,P)}}function wt(g,d,f,E){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?Hi._fromErrorAndOperation(g,j,d,E):j})}function Fo(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Ea(){return(Ea=(0,w.Z)(function*(g,d){const f=(0,Z.m9)(g);yield Qo(!0,f,d);const{providerUserInfo:E}=yield _n(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),P=Fo(E||[]);return f.providerData=f.providerData.filter(j=>P.has(j.providerId)),P.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ps(g,d){return wa.apply(this,arguments)}function wa(){return(wa=(0,w.Z)(function*(g,d,f=!1){const E=yield sr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return qn._forOperation(g,"link",E)})).apply(this,arguments)}function Qo(g,d,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,w.Z)(function*(g,d,f){yield Tt(d);const P=!1===g?"provider-already-linked":"no-such-provider";ze(Fo(d.providerData).has(f)===g,d.auth,P)})).apply(this,arguments)}function qe(g,d){return En.apply(this,arguments)}function En(){return(En=(0,w.Z)(function*(g,d,f=!1){const{auth:E}=g,P="reauthenticate";try{const j=yield sr(g,wt(E,P,d,g),f);ze(j.idToken,E,"internal-error");const ce=zn(j.idToken);ze(ce,E,"internal-error");const{sub:Se}=ce;return ze(g.uid===Se,E,"user-mismatch"),qn._forOperation(g,P,j)}catch(j){throw"auth/user-not-found"===(null==j?void 0:j.code)&&wn(E,"user-mismatch"),j}})).apply(this,arguments)}function Ia(g,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,w.Z)(function*(g,d,f=!1){const E="signIn",P=yield wt(g,E,d),j=yield qn._fromIdTokenResponse(g,E,P);return f||(yield g._updateCurrentUser(j.user)),j})).apply(this,arguments)}function ks(g,d){return go.apply(this,arguments)}function go(){return(go=(0,w.Z)(function*(g,d){return Ia(Nn(g),d)})).apply(this,arguments)}function cs(g,d){return Es.apply(this,arguments)}function Es(){return(Es=(0,w.Z)(function*(g,d){const f=(0,Z.m9)(g);return yield Qo(!1,f,d.providerId),Ps(f,d)})).apply(this,arguments)}function Ya(g,d){return mo.apply(this,arguments)}function mo(){return(mo=(0,w.Z)(function*(g,d){return qe((0,Z.m9)(g),d)})).apply(this,arguments)}function jl(g,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,w.Z)(function*(g,d){return Un(g,"POST","/v1/accounts:signInWithCustomToken",yn(g,d))})).apply(this,arguments)}function zr(){return(zr=(0,w.Z)(function*(g,d){const f=Nn(g),E=yield jl(f,{token:d,returnSecureToken:!0}),P=yield qn._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}class hi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?ba._fromServerResponse(d,f):wn(d,"internal-error")}}class ba extends hi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new ba(f)}}function Ci(g,d,f){var E;ze((null===(E=f.url)||void 0===E?void 0:E.length)>0,g,"invalid-continue-uri"),ze(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ze(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ze(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Ca(){return(Ca=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g),P={requestType:"PASSWORD_RESET",email:d};f&&Ci(E,P,f),yield Yo(E,P)})).apply(this,arguments)}function Jo(){return(Jo=(0,w.Z)(function*(g,d,f){yield Or((0,Z.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Xo(){return(Xo=(0,w.Z)(function*(g,d){yield qs((0,Z.m9)(g),{oobCode:d})})).apply(this,arguments)}function ea(g,d){return Da.apply(this,arguments)}function Da(){return(Da=(0,w.Z)(function*(g,d){const f=(0,Z.m9)(g),E=yield Or(f,{oobCode:d}),P=E.requestType;switch(ze(P,f,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ze(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ze(E.mfaInfo,f,"internal-error");default:ze(E.email,f,"internal-error")}let j=null;return E.mfaInfo&&(j=hi._fromServerResponse(Nn(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:j},operation:P}})).apply(this,arguments)}function Qa(){return(Qa=(0,w.Z)(function*(g,d){const{data:f}=yield ea((0,Z.m9)(g),d);return f.email})).apply(this,arguments)}function Ls(){return(Ls=(0,w.Z)(function*(g,d,f){const E=Nn(g),P=yield nn(E,{returnSecureToken:!0,email:d,password:f}),j=yield qn._fromIdTokenResponse(E,"signIn",P);return yield E._updateCurrentUser(j.user),j})).apply(this,arguments)}function ta(){return(ta=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g),P={requestType:"EMAIL_SIGNIN",email:d};ze(f.handleCodeInApp,E,"argument-error"),f&&Ci(E,P,f),yield _a(E,P)})).apply(this,arguments)}function na(){return(na=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g),P=H.credentialWithLink(d,f||Xr());return ze(P._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ks(E,P)})).apply(this,arguments)}function Hl(g,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:createAuthUri",yn(g,d))})).apply(this,arguments)}function gr(){return(gr=(0,w.Z)(function*(g,d){const E={identifier:d,continueUri:ht()?Xr():"http://localhost"},{signinMethods:P}=yield Hl((0,Z.m9)(g),E);return P||[]})).apply(this,arguments)}function ra(){return(ra=(0,w.Z)(function*(g,d){const f=(0,Z.m9)(g),P={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ci(f.auth,P,d);const{email:j}=yield ys(f.auth,P);j!==g.email&&(yield g.reload())})).apply(this,arguments)}function Ja(){return(Ja=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Ci(E.auth,j,f);const{email:ce}=yield fo(E.auth,j);ce!==g.email&&(yield g.reload())})).apply(this,arguments)}function Uo(g,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,w.Z)(function*(g,d){return pn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ys(){return(Ys=(0,w.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const E=(0,Z.m9)(g),j={idToken:yield E.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},ce=yield sr(E,Uo(E.auth,j));E.displayName=ce.displayName||null,E.photoURL=ce.photoUrl||null;const Se=E.providerData.find(({providerId:st})=>"password"===st);Se&&(Se.displayName=E.displayName,Se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ce)})).apply(this,arguments)}function Bo(g,d,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,w.Z)(function*(g,d,f){const{auth:E}=g,j={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(j.email=d),f&&(j.password=f);const ce=yield sr(g,xs(E,j));yield g._updateTokensIfNecessary(ce,!0)})).apply(this,arguments)}class jn{constructor(d,f,E={}){this.isNewUser=d,this.providerId=f,this.profile=E}}class Tu extends jn{constructor(d,f,E,P){super(d,f,E),this.username=P}}class Sa extends jn{constructor(d,f){super(d,"facebook.com",f)}}class _o extends Tu{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class aa extends jn{constructor(d,f){super(d,"google.com",f)}}class Vr extends Tu{constructor(d,f,E){super(d,"twitter.com",f,E)}}function os(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function(g){var d,f;if(!g)return null;const{providerId:E}=g,P=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},j=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!E&&(null==g?void 0:g.idToken)){const ce=null===(f=null===(d=zn(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(ce)return new jn(j,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!E)return null;switch(E){case"facebook.com":return new Sa(j,P);case"github.com":return new _o(j,P);case"google.com":return new aa(j,P);case"twitter.com":return new Vr(j,P,g.screenName||null);case"custom":case"anonymous":return new jn(j,null);default:return new jn(j,E,P)}}(f)}class Di{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new Di("enroll",d)}static _fromMfaPendingCredential(d){return new Di("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,E;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Di._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(E=d.multiFactorSession)||void 0===E?void 0:E.idToken)return Di._fromIdtoken(d.multiFactorSession.idToken)}return null}}class xa{constructor(d,f,E){this.session=d,this.hints=f,this.signInResolver=E}static _fromError(d,f){const E=Nn(d),P=f.customData._serverResponse,j=(P.mfaInfo||[]).map(Se=>hi._fromServerResponse(E,Se));ze(P.mfaPendingCredential,E,"internal-error");const ce=Di._fromMfaPendingCredential(P.mfaPendingCredential);return new xa(ce,j,function(){var Se=(0,w.Z)(function*(st){const Je=yield st._process(E,ce);delete P.mfaInfo,delete P.mfaPendingCredential;const St=Object.assign(Object.assign({},P),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(f.operationType){case"signIn":const Nt=yield qn._fromIdTokenResponse(E,f.operationType,St);return yield E._updateCurrentUser(Nt.user),Nt;case"reauthenticate":return ze(f.user,E,"internal-error"),qn._forOperation(f.user,f.operationType,St);default:wn(E,"internal-error")}});return function(st){return Se.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,w.Z)(function*(){return f.signInResolver(d)})()}}function Su(g,d){return pn(g,"POST","/v2/accounts/mfaEnrollment:start",yn(g,d))}class ws{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>hi._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new ws(d)}getSession(){var d=this;return(0,w.Z)(function*(){return Di._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var E=this;return(0,w.Z)(function*(){const P=d,j=yield E.getSession(),ce=yield sr(E.user,P._process(E.user.auth,j,f));return yield E.user._updateTokensIfNecessary(ce),E.user.reload()})()}unenroll(d){var f=this;return(0,w.Z)(function*(){const E="string"==typeof d?d:d.uid,P=yield f.user.getIdToken(),j=yield sr(f.user,function(g,d){return pn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",yn(g,d))}(f.user.auth,{idToken:P,mfaEnrollmentId:E}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ce})=>ce!==E),yield f.user._updateTokensIfNecessary(j);try{yield f.user.reload()}catch(ce){if("auth/user-token-expired"!==ce.code)throw ce}})()}}const hs=new WeakMap,eu="__sak";class Ze{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const $t=(()=>{class g extends Ze{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const g=(0,Z.z$)();return Ii(g)||ie(g)}()&&function(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const P=this.storage.getItem(E),j=this.localCache[E];P!==j&&f(E,j,P)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((Se,st,Je)=>{this.notifyListeners(Se,Je)});const P=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(P);if(f.newValue!==Se)null!==f.newValue?this.storage.setItem(P,f.newValue):this.storage.removeItem(P);else if(this.localCache[P]===f.newValue&&!E)return}const j=()=>{const Se=this.storage.getItem(P);!E&&this.localCache[P]===Se||this.notifyListeners(P,Se)},ce=this.storage.getItem(P);(0,Z.w1)()&&10===document.documentMode&&ce!==f.newValue&&f.newValue!==f.oldValue?setTimeout(j,10):j()}notifyListeners(f,E){this.localCache[f]=E;const P=this.listeners[f];if(P)for(const j of Array.from(P))j(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var P=()=>super._set,j=this;return(0,w.Z)(function*(){yield P().call(j,f,E),j.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,P=this;return(0,w.Z)(function*(){const j=yield E().call(P,f);return P.localCache[f]=JSON.stringify(j),j})()}_remove(f){var E=()=>super._remove,P=this;return(0,w.Z)(function*(){yield E().call(P,f),delete P.localCache[f]})()}}return g.type="LOCAL",g})(),b=(()=>{class g extends Ze{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return g.type="SESSION",g})();let _=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(j=>j.isListeningto(f));if(E)return E;const P=new g(f);return this.receivers.push(P),P}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,w.Z)(function*(){const P=f,{eventId:j,eventType:ce,data:Se}=P.data,st=E.handlersMap[ce];if(!(null==st?void 0:st.size))return;P.ports[0].postMessage({status:"ack",eventId:j,eventType:ce});const Je=Array.from(st).map(function(){var Nt=(0,w.Z)(function*(Vn){return Vn(P.origin,Se)});return function(Vn){return Nt.apply(this,arguments)}}()),St=yield function(g){return Promise.all(g.map(function(){var d=(0,w.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return d.apply(this,arguments)}}()))}(Je);P.ports[0].postMessage({status:"done",eventId:j,eventType:ce,response:St})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function M(g="",d=10){let f="";for(let E=0;E<d;E++)f+=Math.floor(10*Math.random());return g+f}class L{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,E=50){var P=this;return(0,w.Z)(function*(){const j="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let ce,Se;return new Promise((st,Je)=>{const St=M("",20);j.port1.start();const Nt=setTimeout(()=>{Je(new Error("unsupported_event"))},E);Se={messageChannel:j,onMessage(Vn){const Mi=Vn;if(Mi.data.eventId===St)switch(Mi.data.status){case"ack":clearTimeout(Nt),ce=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),st(Mi.data.response);break;default:clearTimeout(Nt),clearTimeout(ce),Je(new Error("invalid_response"))}}},P.handlers.add(Se),j.port1.addEventListener("message",Se.onMessage),P.target.postMessage({eventType:d,eventId:St,data:f},[j.port2])}).finally(()=>{Se&&P.removeMessageHandler(Se)})})()}}function G(){return window}function he(){return void 0!==G().WorkerGlobalScope&&"function"==typeof G().importScripts}function vt(){return(vt=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const Ln="firebaseLocalStorageDb",pi="firebaseLocalStorage",zi="fbase_key";class At{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function qr(g,d){return g.transaction([pi],d?"readwrite":"readonly").objectStore(pi)}function Pn(){const g=indexedDB.open(Ln,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const E=g.result;try{E.createObjectStore(pi,{keyPath:zi})}catch(P){f(P)}}),g.addEventListener("success",(0,w.Z)(function*(){const E=g.result;E.objectStoreNames.contains(pi)?d(E):(E.close(),yield function(){const g=indexedDB.deleteDatabase(Ln);return new At(g).toPromise()}(),d(yield Pn()))}))})}function Ut(g,d,f){return ul.apply(this,arguments)}function ul(){return(ul=(0,w.Z)(function*(g,d,f){const E=qr(g,!0).put({[zi]:d,value:f});return new At(E).toPromise()})).apply(this,arguments)}function ll(){return(ll=(0,w.Z)(function*(g,d){const f=qr(g,!1).get(d),E=yield new At(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Oa(g,d){const f=qr(g,!0).delete(d);return new At(f).toPromise()}const Eo=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,w.Z)(function*(){return f.db||(f.db=yield Pn()),f.db})()}_withRetries(f){var E=this;return(0,w.Z)(function*(){let P=0;for(;;)try{const j=yield E._openDb();return yield f(j)}catch(j){if(P++>3)throw j;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,w.Z)(function*(){return he()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,w.Z)(function*(){f.receiver=_._getInstance(he()?self:null),f.receiver._subscribe("keyChanged",function(){var E=(0,w.Z)(function*(P,j){return{keyProcessed:(yield f._poll()).includes(j.key)}});return function(P,j){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,w.Z)(function*(P,j){return["keyChanged"]});return function(P,j){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,w.Z)(function*(){var E,P;if(f.activeServiceWorker=yield function(){return vt.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new L(f.activeServiceWorker);const j=yield f.sender._send("ping",{},800);!j||(null===(E=j[0])||void 0===E?void 0:E.fulfilled)&&(null===(P=j[0])||void 0===P?void 0:P.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,w.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch(P){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Pn();return yield Ut(f,eu,"1"),yield Oa(f,eu),!0}catch(f){}return!1})()}_withPendingWrite(f){var E=this;return(0,w.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var P=this;return(0,w.Z)(function*(){return P._withPendingWrite((0,w.Z)(function*(){return yield P._withRetries(j=>Ut(j,f,E)),P.localCache[f]=E,P.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,w.Z)(function*(){const P=yield E._withRetries(j=>function(g,d){return ll.apply(this,arguments)}(j,f));return E.localCache[f]=P,P})()}_remove(f){var E=this;return(0,w.Z)(function*(){return E._withPendingWrite((0,w.Z)(function*(){return yield E._withRetries(P=>Oa(P,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,w.Z)(function*(){const E=yield f._withRetries(ce=>{const Se=qr(ce,!1).getAll();return new At(Se).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const P=[],j=new Set;for(const{fbase_key:ce,value:Se}of E)j.add(ce),JSON.stringify(f.localCache[ce])!==JSON.stringify(Se)&&(f.notifyListeners(ce,Se),P.push(ce));for(const ce of Object.keys(f.localCache))f.localCache[ce]&&!j.has(ce)&&(f.notifyListeners(ce,null),P.push(ce));return P})()}notifyListeners(f,E){this.localCache[f]=E;const P=this.listeners[f];if(P)for(const j of Array.from(P))j(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Xh(g,d){return pn(g,"POST","/v2/accounts/mfaSignIn:start",yn(g,d))}function wo(){return(wo=(0,w.Z)(function*(g){return(yield pn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ua(g){return new Promise((d,f)=>{const E=document.createElement("script");E.setAttribute("src",g),E.onload=d,E.onerror=P=>{const j=tn("internal-error");j.customData=P,f(j)},E.type="text/javascript",E.charset="UTF-8",function(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(E)})}function Ar(g){return`__${g}${Math.floor(1e6*Math.random())}`}const Mu=1e12;class la{constructor(d){this.auth=d,this.counter=Mu,this._widgets=new Map}render(d,f){const E=this.counter;return this._widgets.set(E,new Ti(d,this.auth.name,f||{})),this.counter++,E}reset(d){var f;const E=d||Mu;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Mu))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,w.Z)(function*(){var E;return null===(E=f._widgets.get(d||Mu))||void 0===E||E.execute(),""})()}}class Ti{constructor(d,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof d?document.getElementById(d):d;ze(P,"argument-error",{appName:f}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}();const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pa=Ar("rcb"),at=new Sn(3e4,6e4);class cl{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!G().grecaptcha}load(d,f=""){return ze((g=f).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(G().grecaptcha):new Promise((E,P)=>{const j=G().setTimeout(()=>{P(tn(d,"network-request-failed"))},at.get());G()[Pa]=()=>{G().clearTimeout(j),delete G()[Pa];const Se=G().grecaptcha;if(!Se)return void P(tn(d,"internal-error"));const st=Se.render;Se.render=(Je,St)=>{const Nt=st(Je,St);return this.counter++,Nt},this.hostLanguage=f,E(Se)},ua(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Pa,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(j),P(tn(d,"internal-error"))})});var g}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!G().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Io{load(d){return(0,w.Z)(function*(){return new la(d)})()}clearedOneInstance(){}}const ro="recaptcha",Fa={theme:"light",type:"image"};class $o{constructor(d,f=Object.assign({},Fa),E){this.parameters=f,this.type=ro,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(E),this.isInvisible="invisible"===this.parameters.size,ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof d?document.getElementById(d):d;ze(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Io:new cl,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(f)||new Promise(j=>{const ce=Se=>{!Se||(d.tokenChangeListeners.delete(ce),j(Se))};d.tokenChangeListeners.add(ce),d.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ze(!this.parameters.sitekey,this.auth,"argument-error"),ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof d)d(f);else if("string"==typeof d){const E=G()[d];"function"==typeof E&&E(f)}}}assertNotDestroyed(){ze(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){ze(ht()&&!he(),d.auth,"internal-error"),yield function(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function(g){return wo.apply(this,arguments)}(d.auth);ze(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nu{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=wr._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function dl(){return(dl=(0,w.Z)(function*(g,d,f){const E=Nn(g),P=yield W(E,d,(0,Z.m9)(f));return new nu(P,j=>ks(E,j))})).apply(this,arguments)}function zl(){return(zl=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g);yield Qo(!1,E,"phone");const P=yield W(E.auth,d,(0,Z.m9)(f));return new nu(P,j=>cs(E,j))})).apply(this,arguments)}function k(){return(k=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g),P=yield W(E.auth,d,(0,Z.m9)(f));return new nu(P,j=>Ya(E,j))})).apply(this,arguments)}function W(g,d,f){return ne.apply(this,arguments)}function ne(){return(ne=(0,w.Z)(function*(g,d,f){var E;const P=yield f.verify();try{let j;if(ze("string"==typeof P,g,"argument-error"),ze(f.type===ro,g,"argument-error"),j="string"==typeof d?{phoneNumber:d}:d,"session"in j){const ce=j.session;if("phoneNumber"in j)return ze("enroll"===ce.type,g,"internal-error"),(yield Su(g,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{ze("signin"===ce.type,g,"internal-error");const Se=(null===(E=j.multiFactorHint)||void 0===E?void 0:E.uid)||j.multiFactorUid;return ze(Se,g,"missing-multi-factor-info"),(yield Xh(g,{mfaPendingCredential:ce.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield ko(g,{phoneNumber:j.phoneNumber,recaptchaToken:P});return ce}}finally{f._reset()}})).apply(this,arguments)}function ke(){return(ke=(0,w.Z)(function*(g,d){yield Ps((0,Z.m9)(g),d)})).apply(this,arguments)}let Qe=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Nn(f)}verifyPhoneNumber(f,E){return W(this.auth,f,(0,Z.m9)(E))}static credential(f,E){return wr._fromVerification(f,E)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:P}=f;return E&&P?wr._fromTokenResponse(E,P):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function It(g,d){return d?Lt(d):(ze(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Dt extends Gr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ui(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Ui(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Ui(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function sn(g){return Ia(g.auth,new Dt(g),g.bypassAuthState)}function Rt(g){const{auth:d,user:f}=g;return ze(f,d,"internal-error"),qe(f,new Dt(g),g.bypassAuthState)}function hn(g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,w.Z)(function*(g){const{auth:d,user:f}=g;return ze(f,d,"internal-error"),Ps(f,new Dt(g),g.bypassAuthState)})).apply(this,arguments)}class Sr{constructor(d,f,E,P,j=!1){this.auth=d,this.resolver=E,this.user=P,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,w.Z)(function*(E,P){d.pendingPromise={resolve:E,reject:P};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(j){d.reject(j)}});return function(E,P){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,w.Z)(function*(){const{urlResponse:E,sessionId:P,postBody:j,tenantId:ce,error:Se,type:st}=d;if(Se)return void f.reject(Se);const Je={auth:f.auth,requestUri:E,sessionId:P,tenantId:ce||void 0,postBody:j||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(st)(Je))}catch(St){f.reject(St)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return sn;case"linkViaPopup":case"linkViaRedirect":return hn;case"reauthViaPopup":case"reauthViaRedirect":return Rt;default:wn(this.auth,"internal-error")}}resolve(d){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ho=new Sn(2e3,1e4);function Us(){return(Us=(0,w.Z)(function*(g,d,f){const E=Nn(g);Xn(g,d,R);const P=It(E,f);return new $d(E,"signInViaPopup",d,P).executeNotNull()})).apply(this,arguments)}function Zi(){return(Zi=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g);Xn(E.auth,d,R);const P=It(E.auth,f);return new $d(E.auth,"reauthViaPopup",d,P,E).executeNotNull()})).apply(this,arguments)}function jc(){return(jc=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g);Xn(E.auth,d,R);const P=It(E.auth,f);return new $d(E.auth,"linkViaPopup",d,P,E).executeNotNull()})).apply(this,arguments)}let $d=(()=>{class g extends Sr{constructor(f,E,P,j,ce){super(f,E,j,ce),this.provider=P,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,w.Z)(function*(){const E=yield f.execute();return ze(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,w.Z)(function*(){Pt(1===f.filter.length,"Popup operations only handle one event");const E=M();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(P=>{f.reject(P)}),f.resolver._isIframeWebStorageSupported(f.auth,P=>{P||f.reject(tn(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,P;this.pollId=(null===(P=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===P?void 0:P.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Ho.get())};f()}}return g.currentPopupAction=null,g})();const iu=new Map;class ql extends Sr{constructor(d,f,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,w.Z)(function*(){let E=iu.get(f.auth._key());if(!E){try{const j=(yield function(g,d){return Ru.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;E=()=>Promise.resolve(j)}catch(P){E=()=>Promise.reject(P)}iu.set(f.auth._key(),E)}return f.bypassAuthState||iu.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,E=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(E,d);if("unknown"!==d.type){if(d.eventId){const P=yield E.auth._redirectUserForId(d.eventId);if(P)return E.user=P,f().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Ru(){return(Ru=(0,w.Z)(function*(g,d){const f=tf(d),E=Va(g);if(!(yield E._isAvailable()))return!1;const P="true"===(yield E._get(f));return yield E._remove(f),P})).apply(this,arguments)}function La(g,d){return bo.apply(this,arguments)}function bo(){return(bo=(0,w.Z)(function*(g,d){return Va(g)._set(tf(d),"true")})).apply(this,arguments)}function Va(g){return Lt(g._redirectPersistence)}function tf(g){return Er("pendingRedirect",g.config.apiKey,g.name)}function hl(){return(hl=(0,w.Z)(function*(g,d,f){const E=Nn(g);Xn(g,d,R);const P=It(E,f);return yield La(P,E),P._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function Hd(){return(Hd=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g);Xn(E.auth,d,R);const P=It(E.auth,f);yield La(P,E.auth);const j=yield Nu(E);return P._openRedirect(E.auth,d,"reauthViaRedirect",j)})).apply(this,arguments)}function Gd(){return(Gd=(0,w.Z)(function*(g,d,f){const E=(0,Z.m9)(g);Xn(E.auth,d,R);const P=It(E.auth,f);yield Qo(!1,E,d.providerId),yield La(P,E.auth);const j=yield Nu(E);return P._openRedirect(E.auth,d,"linkViaRedirect",j)})).apply(this,arguments)}function Zl(){return(Zl=(0,w.Z)(function*(g,d){return yield Nn(g)._initializationPromise,Co(g,d,!1)})).apply(this,arguments)}function Co(g,d){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,w.Z)(function*(g,d,f=!1){const E=Nn(g),P=It(E,d),ce=yield new ql(E,P,f).execute();return ce&&!f&&(delete ce.user._redirectEventId,yield E._persistUserIfCurrent(ce.user),yield E._setRedirectUser(null,d)),ce})).apply(this,arguments)}function Nu(g){return fl.apply(this,arguments)}function fl(){return(fl=(0,w.Z)(function*(g){const d=M(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Ou{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(f=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ua(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var E;if(d.error&&!Ua(d)){const P=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(tn(this.auth,P))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const E=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pl(d))}saveEventToCache(d){this.cachedEventUids.add(pl(d)),this.lastProcessedEventTime=Date.now()}}function pl(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Ua({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===(null==d?void 0:d.code)}function oo(g){return zd.apply(this,arguments)}function zd(){return(zd=(0,w.Z)(function*(g,d={}){return pn(g,"GET","/v1/projects",d)})).apply(this,arguments)}const su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gc=/^https?/;function ml(){return(ml=(0,w.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield oo(g);for(const f of d)try{if(qd(f))return}catch(E){}wn(g,"unauthorized-domain")})).apply(this,arguments)}function qd(g){const d=Xr(),{protocol:f,hostname:E}=new URL(d);if(g.startsWith("chrome-extension://")){const ce=new URL(g);return""===ce.hostname&&""===E?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&ce.hostname===E}if(!Gc.test(f))return!1;if(su.test(g))return E===g;const P=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(E)}const ou=new Sn(3e4,6e4);function sf(){const g=G().___jsl;if(null==g?void 0:g.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Yl=null;function af(g){return Yl=Yl||function(g){return new Promise((d,f)=>{var E,P,j;function ce(){sf(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{sf(),f(tn(g,"network-request-failed"))},timeout:ou.get()})}if(null===(P=null===(E=G().gapi)||void 0===E?void 0:E.iframes)||void 0===P?void 0:P.Iframe)d(gapi.iframes.getContext());else{if(!(null===(j=G().gapi)||void 0===j?void 0:j.load)){const Se=Ar("iframefcb");return G()[Se]=()=>{gapi.load?ce():f(tn(g,"network-request-failed"))},ua(`https://apis.google.com/js/api.js?onload=${Se}`).catch(st=>f(st))}ce()}}).catch(d=>{throw Yl=null,d})}(g),Yl}const zc=new Sn(5e3,15e3),Kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_l=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pu(g){const d=g.config;ze(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?bt(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,E={apiKey:d.apiKey,appName:g.name,v:ve.SDK_VERSION},P=_l.get(g.config.apiHost);P&&(E.eid=P);const j=g._getFrameworks();return j.length&&(E.fw=j.join(",")),`${f}?${(0,Z.xO)(E).slice(1)}`}function ja(){return ja=(0,w.Z)(function*(g){const d=yield af(g),f=G().gapi;return ze(f,g,"internal-error"),d.open({where:document.body,url:Pu(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kd,dontclear:!0},E=>new Promise(function(){var P=(0,w.Z)(function*(j,ce){yield E.restyle({setHideOnLeave:!1});const Se=tn(g,"network-request-failed"),st=G().setTimeout(()=>{ce(Se)},zc.get());function Je(){G().clearTimeout(st),j(E)}E.ping(Je).then(Je,()=>{ce(Se)})});return function(j,ce){return P.apply(this,arguments)}}()))}),ja.apply(this,arguments)}const lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hf{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Do(g,d,f,E,P,j){ze(g.config.authDomain,g,"auth-domain-config-required"),ze(g.config.apiKey,g,"invalid-api-key");const ce={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:E,v:ve.SDK_VERSION,eventId:P};if(d instanceof R){d.setDefaultLanguage(g.languageCode),ce.providerId=d.providerId||"",(0,Z.xb)(d.getCustomParameters())||(ce.customParameters=JSON.stringify(d.getCustomParameters()));for(const[st,Je]of Object.entries(j||{}))ce[st]=Je}if(d instanceof z){const st=d.getScopes().filter(Je=>""!==Je);st.length>0&&(ce.scopes=st.join(","))}g.tenantId&&(ce.tid=g.tenantId);const Se=ce;for(const st of Object.keys(Se))void 0===Se[st]&&delete Se[st];return`${function({config:g}){return g.emulator?bt(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Z.xO)(Se).slice(1)}`}const qc="webStorageSupport";class uu extends class{constructor(d){this.factorId=d}_process(d,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,E);case"signin":return this._finalizeSignIn(d,f.credential);default:return In("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new uu(d)}_finalizeEnroll(d,f,E){return function(g,d){return pn(g,"POST","/v2/accounts/mfaEnrollment:finalize",yn(g,d))}(d,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function(g,d){return pn(g,"POST","/v2/accounts/mfaSignIn:finalize",yn(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yp=(()=>{class g{constructor(){}static assertion(f){return uu._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var g,Xl="@firebase/auth",ec="0.19.12";class Lu{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,w.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(E=>{var P;d((null===(P=E)||void 0===P?void 0:P.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Mn(){return window}function da(){return da=(0,w.Z)(function*(g,d,f){var E;const{BuildInfo:P}=Mn();Pt(d.sessionId,"AuthEvent did not contain a session ID");const j=yield Qp(d.sessionId),ce={};return ie()?ce.ibi=P.packageName:Bn()?ce.apn=P.packageName:wn(g,"operation-not-supported-in-this-environment"),P.displayName&&(ce.appDisplayName=P.displayName),ce.sessionId=j,Do(g,f,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,ce)}),da.apply(this,arguments)}function $a(){return $a=(0,w.Z)(function*(g){const{BuildInfo:d}=Mn(),f={};ie()?f.iosBundleId=d.packageName:Bn()?f.androidPackageName=d.packageName:wn(g,"operation-not-supported-in-this-environment"),yield oo(g,f)}),$a.apply(this,arguments)}function Yc(){return Yc=(0,w.Z)(function*(g,d,f){const{cordova:E}=Mn();let P=()=>{};try{yield new Promise((j,ce)=>{let Se=null;function st(){var Nt;j();const Vn=null===(Nt=E.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof Vn&&Vn(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Je(){Se||(Se=window.setTimeout(()=>{ce(tn(g,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}d.addPassiveListener(st),document.addEventListener("resume",Je,!1),Bn()&&document.addEventListener("visibilitychange",St,!1),P=()=>{d.removePassiveListener(st),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",St,!1),Se&&window.clearTimeout(Se)}})}finally{P()}}),Yc.apply(this,arguments)}function Qp(g){return js.apply(this,arguments)}function js(){return js=(0,w.Z)(function*(g){const d=Yd(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(P=>P.toString(16).padStart(2,"0")).join("")}),js.apply(this,arguments)}function Yd(g){if(Pt(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let E=0;E<g.length;E++)f[E]=g.charCodeAt(E);return f}g="Browser",(0,ve._registerComponent)(new dt.wA("auth",(d,{options:f})=>{const E=d.getProvider("app").getImmediate(),P=d.getProvider("heartbeat"),{apiKey:j,authDomain:ce}=E.options;return((Se,st)=>{ze(j&&!j.includes(":"),"invalid-api-key",{appName:Se.name}),ze(!(null==ce?void 0:ce.includes(":")),"argument-error",{appName:Se.name});const Je={apiKey:j,authDomain:ce,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(g)},St=new Zn(Se,st,Je);return function(g,d){const f=(null==d?void 0:d.persistence)||[],E=(Array.isArray(f)?f:[f]).map(Lt);(null==d?void 0:d.errorMap)&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(E,null==d?void 0:d.popupRedirectResolver)}(St,f),St})(E,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,E)=>{d.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new dt.wA("auth-internal",d=>{const f=Nn(d.getProvider("auth").getImmediate());return new Lu(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(Xl,ec,void 0),(0,ve.registerVersion)(Xl,ec,"esm2017");class tc extends Ou{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function nr(g){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,w.Z)(function*(g){const d=yield Wo()._get(vi(g));return d&&(yield Wo()._remove(vi(g))),d}),Qd.apply(this,arguments)}function Jc(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*d.length);g.push(d.charAt(E))}return g.join("")}function Wo(){return Lt($t)}function vi(g){return Er("authEvent",g.config.apiKey,g.name)}function vl(g){if(!(null==g?void 0:g.includes("?")))return{};const[d,...f]=g.split("?");return(0,Z.zd)(f.join("?"))}function mf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tn("no-auth-event")}}function td(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function nd(g=(0,Z.z$)()){return!("file:"!==td()&&"ionic:"!==td()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function rd(){try{const g=self.localStorage,d=M();if(g)return g.setItem(d,"1"),g.removeItem(d),!function(g=(0,Z.z$)()){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)||function(g=(0,Z.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Z.hl)()}catch(g){return Vu()&&(0,Z.hl)()}return!1}function Vu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function th(){return("http:"===td()||"https:"===td()||(0,Z.ru)()||nd())&&!((0,Z.b$)()||(0,Z.UG)())&&rd()&&!Vu()}function id(){return nd()&&"undefined"!=typeof document}function nh(){return nh=(0,w.Z)(function*(){return!!id()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})}),nh.apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=ze,vf="persistence";function sd(g){return od.apply(this,arguments)}function od(){return od=(0,w.Z)(function*(g){yield g._initializationPromise;const d=ud(),f=Er(vf,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())}),od.apply(this,arguments)}function ud(){var g;try{return(null===(g="undefined"!=typeof window?window:null)||void 0===g?void 0:g.sessionStorage)||null}catch(d){return null}}const ng=ze;class lu{constructor(){this.browserResolver=Lt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b,this._completeRedirectFn=Co}_openPopup(d,f,E,P){var j=this;return(0,w.Z)(function*(){var ce;Pt(null===(ce=j.eventManagers[d._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const Se=Do(d,f,E,Xr(),P);return function(g,d,f,E=500,P=600){const j=Math.max((window.screen.availHeight-P)/2,0).toString(),ce=Math.max((window.screen.availWidth-E)/2,0).toString();let Se="";const st=Object.assign(Object.assign({},lf),{width:E.toString(),height:P.toString(),top:j,left:ce}),Je=(0,Z.z$)().toLowerCase();f&&(Se=Ji(Je)?"_blank":f),Ss(Je)&&(d=d||"http://localhost",st.scrollbars="yes");const St=Object.entries(st).reduce((Vn,[Mi,Ha])=>`${Vn}${Mi}=${Ha},`,"");if(function(g=(0,Z.z$)()){var d;return ie(g)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Je)&&"_self"!==Se)return function(g,d){const f=document.createElement("a");f.href=g,f.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(d||"",Se),new hf(null);const Nt=window.open(d||"",Se,St);ze(Nt,g,"popup-blocked");try{Nt.focus()}catch(Vn){}return new hf(Nt)}(d,Se,M())})()}_openRedirect(d,f,E,P){var j=this;return(0,w.Z)(function*(){return yield j._originValidation(d),g=Do(d,f,E,Xr(),P),G().location.href=g,new Promise(()=>{});var g})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:P,promise:j}=this.eventManagers[f];return P?Promise.resolve(P):(Pt(j,"If manager is not set, promise should be"),j)}const E=this.initAndGetManager(d);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(d){var f=this;return(0,w.Z)(function*(){const E=yield function(g){return ja.apply(this,arguments)}(d),P=new Ou(d);return E.register("authEvent",j=>(ze(null==j?void 0:j.authEvent,d,"invalid-auth-event"),{status:P.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:P},f.iframes[d._key()]=E,P})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(qc,{type:qc},P=>{var j;const ce=null===(j=null==P?void 0:P[0])||void 0===j?void 0:j[qc];void 0!==ce&&f(!!ce),wn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(g){return ml.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return xt()||Ii()||ie()}}),this.cordovaResolver=Lt(class{constructor(){this._redirectPersistence=b,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Co}_initialize(d){var f=this;return(0,w.Z)(function*(){const E=d._key();let P=f.eventManagers.get(E);return P||(P=new tc(d),f.eventManagers.set(E,P),f.attachCallbackListeners(d,P)),P})()}_openPopup(d){wn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,E,P){var j=this;return(0,w.Z)(function*(){!function(g){var d,f,E,P,j,ce,Se,st,Je,St;const Nt=Mn();ze("function"==typeof(null===(d=null==Nt?void 0:Nt.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ze(void 0!==(null===(f=null==Nt?void 0:Nt.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ze("function"==typeof(null===(j=null===(P=null===(E=null==Nt?void 0:Nt.cordova)||void 0===E?void 0:E.plugins)||void 0===P?void 0:P.browsertab)||void 0===j?void 0:j.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ze("function"==typeof(null===(st=null===(Se=null===(ce=null==Nt?void 0:Nt.cordova)||void 0===ce?void 0:ce.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===st?void 0:st.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ze("function"==typeof(null===(St=null===(Je=null==Nt?void 0:Nt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===St?void 0:St.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ce=yield j._initialize(d);yield ce.initialized(),ce.resetRedirect(),iu.clear(),yield j._originValidation(d);const Se=function(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Jc(),postBody:null,tenantId:g.tenantId,error:tn(g,"no-auth-event")}}(d,E,P);yield function(g,d){return Wo()._set(vi(g),d)}(d,Se);const st=yield function(g,d,f){return da.apply(this,arguments)}(d,Se,f),Je=yield function(g){const{cordova:d}=Mn();return new Promise(f=>{d.plugins.browsertab.isAvailable(E=>{let P=null;E?d.plugins.browsertab.openUrl(g):P=d.InAppBrowser.open(g,function(g=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(P)})})}(st);return function(g,d,f){return Yc.apply(this,arguments)}(d,ce,Je)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(g){return $a.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:E,handleOpenURL:P,BuildInfo:j}=Mn(),ce=setTimeout((0,w.Z)(function*(){yield nr(d),f.onEvent(mf())}),500),Se=function(){var St=(0,w.Z)(function*(Nt){clearTimeout(ce);const Vn=yield nr(d);let Mi=null;Vn&&(null==Nt?void 0:Nt.url)&&(Mi=function(g,d){var f,E;const P=function(g){const d=vl(g),f=d.link?decodeURIComponent(d.link):void 0,E=vl(f).link,P=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return vl(P).link||P||E||f||g}(d);if(P.includes("/__/auth/callback")){const j=vl(P),ce=j.firebaseError?function(g){try{return JSON.parse(g)}catch(d){return null}}(decodeURIComponent(j.firebaseError)):null,Se=null===(E=null===(f=null==ce?void 0:ce.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],st=Se?tn(Se):null;return st?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:st,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:P,postBody:null}}return null}(Vn,Nt.url)),f.onEvent(Mi||mf())});return function(Vn){return St.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,Se);const st=P,Je=`${j.packageName.toLowerCase()}://`;Mn().handleOpenURL=function(){var St=(0,w.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(Je)&&Se({url:Nt}),"function"==typeof st)try{st(Nt)}catch(Vn){console.error(Vn)}});return function(Nt){return St.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=b,this._completeRedirectFn=Co}_initialize(d){var f=this;return(0,w.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,E,P){var j=this;return(0,w.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openPopup(d,f,E,P)})()}_openRedirect(d,f,E,P){var j=this;return(0,w.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openRedirect(d,f,E,P)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return id()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ng(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const f=yield function(){return nh.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function cu(g){return g.unwrap()}function rg(g){return wf(g)}function wf(g){const{_tokenResponse:d}=g instanceof Z.ZR?g.customData:g;if(!d)return null;if(!(g instanceof Z.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Qe.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=T;break;case"facebook.com":E=A;break;case"github.com":E=C;break;case"twitter.com":E=on;break;default:const{oauthIdToken:P,oauthAccessToken:j,oauthTokenSecret:ce,pendingToken:Se,nonce:st}=d;return j||ce||P||Se?Se?f.startsWith("saml.")?be._create(f,Se):Yn._fromParams({providerId:f,signInMethod:f,pendingToken:Se,idToken:P,accessToken:j}):new ue(f).credential({idToken:P,accessToken:j,rawNonce:st}):null}return g instanceof Z.ZR?E.credentialFromError(g):E.credentialFromResult(g)}function Ei(g,d){return d.catch(f=>{throw f instanceof Z.ZR&&function(g,d){var f;const E=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new sg(g,function(g,d){var f;const E=(0,Z.m9)(g),P=d;return ze(d.customData.operationType,E,"argument-error"),ze(null===(f=P.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),xa._fromError(E,P)}(g,d));else if(E){const P=wf(d),j=d;P&&(j.credential=P,j.tenantId=E.tenantId||void 0,j.email=E.email||void 0,j.phoneNumber=E.phoneNumber||void 0)}}(g,f),f}).then(f=>{const P=f.user;return{operationType:f.operationType,credential:rg(f),additionalUserInfo:os(f),user:xi.getOrCreate(P)}})}function xr(g,d){return If.apply(this,arguments)}function If(){return If=(0,w.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:E=>Ei(g,f.confirm(E))}}),If.apply(this,arguments)}class sg{constructor(d,f){this.resolver=f,this.auth=function(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Ei(cu(this.auth),this.resolver.resolveSignIn(d))}}class xi{constructor(d){this._delegate=d,this.multiFactor=function(g){const d=(0,Z.m9)(g);return hs.has(d)||hs.set(d,ws._fromUser(d)),hs.get(d)}(d)}static getOrCreate(d){return xi.USER_MAP.has(d)||xi.USER_MAP.set(d,new xi(d)),xi.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,w.Z)(function*(){return Ei(f.auth,cs(f._delegate,d))})()}linkWithPhoneNumber(d,f){var E=this;return(0,w.Z)(function*(){return xr(E.auth,function(g,d,f){return zl.apply(this,arguments)}(E._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,w.Z)(function*(){return Ei(f.auth,function(g,d,f){return jc.apply(this,arguments)}(f._delegate,d,lu))})()}linkWithRedirect(d){var f=this;return(0,w.Z)(function*(){return yield sd(Nn(f.auth)),function(g,d,f){return function(g,d,f){return Gd.apply(this,arguments)}(g,d,f)}(f._delegate,d,lu)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,w.Z)(function*(){return Ei(f.auth,Ya(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return xr(this.auth,function(g,d,f){return k.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Ei(this.auth,function(g,d,f){return Zi.apply(this,arguments)}(this._delegate,d,lu))}reauthenticateWithRedirect(d){var f=this;return(0,w.Z)(function*(){return yield sd(Nn(f.auth)),function(g,d,f){return function(g,d,f){return Hd.apply(this,arguments)}(g,d,f)}(f._delegate,d,lu)})()}sendEmailVerification(d){return function(g,d){return ra.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,w.Z)(function*(){return yield function(g,d){return Ea.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function(g,d){return Bo((0,Z.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function(g,d){return Bo((0,Z.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function(g,d){return ke.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function(g,d){return Ys.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function(g,d,f){return Ja.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xi.USER_MAP=new WeakMap;const oc=ze;let $s=(()=>{class g{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=f.options;oc(P,"invalid-api-key",{appName:f.name}),oc(P,"invalid-api-key",{appName:f.name});const j="undefined"!=typeof window?lu:void 0;this._delegate=E.initialize({options:{persistence:rh(P,f.name),popupRedirectResolver:j}}),this._delegate._updateErrorMap(Jn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function(g,d,f){const E=Nn(g);ze(E._canInitEmulator,E,"emulator-config-failed"),ze(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const P=!!(null==f?void 0:f.disableWarnings),j=Hr(d),{host:ce,port:Se}=function(g){const d=Hr(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(E);if(P){const j=P[1];return{host:j,port:Po(E.substr(j.length+1))}}{const[j,ce]=E.split(":");return{host:j,port:Po(ce)}}}(d);E.config.emulator={url:`${j}//${ce}${null===Se?"":`:${Se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ce,port:Se,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,E)}applyActionCode(f){return function(g,d){return Xo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ea(this._delegate,f)}confirmPasswordReset(f,E){return function(g,d,f){return Jo.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var P=this;return(0,w.Z)(function*(){return Ei(P._delegate,function(g,d,f){return Ls.apply(this,arguments)}(P._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function(g,d){return gr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function(g,d){const f=vs.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,w.Z)(function*(){oc(th(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function(g,d){return Zl.apply(this,arguments)}(f._delegate,lu);return E?Ei(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function(g,d){Nn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,E,P){const{next:j,error:ce,complete:Se}=ac(f,E,P);return this._delegate.onAuthStateChanged(j,ce,Se)}onIdTokenChanged(f,E,P){const{next:j,error:ce,complete:Se}=ac(f,E,P);return this._delegate.onIdTokenChanged(j,ce,Se)}sendSignInLinkToEmail(f,E){return function(g,d,f){return ta.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function(g,d,f){return Ca.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,w.Z)(function*(){let P;switch(function(g,d){Uu(Object.values(ti).includes(d),g,"invalid-persistence-type"),(0,Z.b$)()?Uu(d!==ti.SESSION,g,"unsupported-persistence-type"):(0,Z.UG)()?Uu(d===ti.NONE,g,"unsupported-persistence-type"):Vu()?Uu(d===ti.NONE||d===ti.LOCAL&&(0,Z.hl)(),g,"unsupported-persistence-type"):Uu(d===ti.NONE||rd(),g,"unsupported-persistence-type")}(E._delegate,f),f){case ti.SESSION:P=b;break;case ti.LOCAL:P=(yield Lt(Eo)._isAvailable())?Eo:$t;break;case ti.NONE:P=Dn;break;default:return wn("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Ei(this._delegate,function(g){return ls.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Ei(this._delegate,ks(this._delegate,f))}signInWithCustomToken(f){return Ei(this._delegate,function(g,d){return zr.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Ei(this._delegate,function(g,d,f){return ks((0,Z.m9)(g),H.credential(d,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return Ei(this._delegate,function(g,d,f){return na.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return xr(this._delegate,function(g,d,f){return dl.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,w.Z)(function*(){return oc(th(),E._delegate,"operation-not-supported-in-this-environment"),Ei(E._delegate,function(g,d,f){return Us.apply(this,arguments)}(E._delegate,f,lu))})()}signInWithRedirect(f){var E=this;return(0,w.Z)(function*(){return oc(th(),E._delegate,"operation-not-supported-in-this-environment"),yield sd(E._delegate),function(g,d,f){return function(g,d,f){return hl.apply(this,arguments)}(g,d,f)}(E._delegate,f,lu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function(g,d){return Qa.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ti,g})();function ac(g,d,f){let E=g;"function"!=typeof g&&({next:E,error:d,complete:f}=g);const P=E;return{next:ce=>P(ce&&xi.getOrCreate(ce)),error:d,complete:f}}function rh(g,d){const f=function(g,d){const f=ud();if(!f)return[];const E=Er(vf,g,d);switch(f.getItem(E)){case ti.NONE:return[Dn];case ti.LOCAL:return[Eo,b];case ti.SESSION:return[b];default:return[]}}(g,d);if("undefined"!=typeof self&&!f.includes(Eo)&&f.push(Eo),"undefined"!=typeof window)for(const E of[$t,b])f.includes(E)||f.push(E);return f.includes(Dn)||f.push(Dn),f}class ih{constructor(){this.providerId="phone",this._delegate=new Qe(cu(O.Z.auth()))}static credential(d,f){return Qe.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}ih.PHONE_SIGN_IN_METHOD=Qe.PHONE_SIGN_IN_METHOD,ih.PROVIDER_ID=Qe.PROVIDER_ID;const bf=ze;class uc{constructor(d,f,E=O.Z.app()){var P;bf(null===(P=E.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new $o(d,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(g){g.INTERNAL.registerComponent(new dt.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new $s(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:H,FacebookAuthProvider:A,GithubAuthProvider:C,GoogleAuthProvider:T,OAuthProvider:ue,SAMLAuthProvider:ft,PhoneAuthProvider:ih,PhoneMultiFactorGenerator:Yp,RecaptchaVerifier:uc,TwitterAuthProvider:on,Auth:$s,AuthCredential:Gr,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(O.Z)},7810:(lt,Me,U)=>{U.d(Me,{X:()=>Z});var w=U(7807),O=U(2078);class Z extends w.xQ{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const se=super._subscribe(fe);return se&&!se.closed&&fe.next(this._value),se}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O.N;return this._value}next(fe){super.next(this._value=fe)}}},9423:(lt,Me,U)=>{U.d(Me,{y:()=>J});var w=U(2007),Z=U(4629),ve=U(2454),se=U(6563),Ce=U(8533);var Q=U(95);let J=(()=>{class we{constructor(Be){this._isScalar=!1,Be&&(this._subscribe=Be)}lift(Be){const Re=new we;return Re.source=this,Re.operator=Be,Re}subscribe(Be,Re,Oe){const{operator:je}=this,Pe=function(we,Ne,Be){if(we){if(we instanceof w.L)return we;if(we[Z.b])return we[Z.b]()}return we||Ne||Be?new w.L(we,Ne,Be):new w.L(ve.c)}(Be,Re,Oe);if(Pe.add(je?je.call(Pe,this.source):this.source||Q.v.useDeprecatedSynchronousErrorHandling&&!Pe.syncErrorThrowable?this._subscribe(Pe):this._trySubscribe(Pe)),Q.v.useDeprecatedSynchronousErrorHandling&&Pe.syncErrorThrowable&&(Pe.syncErrorThrowable=!1,Pe.syncErrorThrown))throw Pe.syncErrorValue;return Pe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(Re){Q.v.useDeprecatedSynchronousErrorHandling&&(Be.syncErrorThrown=!0,Be.syncErrorValue=Re),function(we){for(;we;){const{closed:Ne,destination:Be,isStopped:Re}=we;if(Ne||Re)return!1;we=Be&&Be instanceof w.L?Be:null}return!0}(Be)?Be.error(Re):console.warn(Re)}}forEach(Be,Re){return new(Re=ye(Re))((Oe,je)=>{let Pe;Pe=this.subscribe($e=>{try{Be($e)}catch(it){je(it),Pe&&Pe.unsubscribe()}},je,Oe)})}_subscribe(Be){const{source:Re}=this;return Re&&Re.subscribe(Be)}[se.L](){return this}pipe(...Be){return 0===Be.length?this:function(we){return 0===we.length?Ce.y:1===we.length?we[0]:function(Be){return we.reduce((Re,Oe)=>Oe(Re),Be)}}(Be)(this)}toPromise(Be){return new(Be=ye(Be))((Re,Oe)=>{let je;this.subscribe(Pe=>je=Pe,Pe=>Oe(Pe),()=>Re(je))})}}return we.create=Ne=>new we(Ne),we})();function ye(we){if(we||(we=Q.v.Promise||Promise),!we)throw new Error("no Promise impl found");return we}},2454:(lt,Me,U)=>{U.d(Me,{c:()=>Z});var w=U(95),O=U(6580);const Z={closed:!0,next(ve){},error(ve){if(w.v.useDeprecatedSynchronousErrorHandling)throw ve;(0,O.z)(ve)},complete(){}}},7807:(lt,Me,U)=>{U.d(Me,{Yc:()=>Ce,xQ:()=>pe});var w=U(9423),O=U(2007),Z=U(2858),ve=U(2078),fe=U(7248),se=U(4629);class Ce extends O.L{constructor(J){super(J),this.destination=J}}let pe=(()=>{class Q extends w.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[se.b](){return new Ce(this)}lift(ye){const we=new ge(this,this);return we.operator=ye,we}next(ye){if(this.closed)throw new ve.N;if(!this.isStopped){const{observers:we}=this,Ne=we.length,Be=we.slice();for(let Re=0;Re<Ne;Re++)Be[Re].next(ye)}}error(ye){if(this.closed)throw new ve.N;this.hasError=!0,this.thrownError=ye,this.isStopped=!0;const{observers:we}=this,Ne=we.length,Be=we.slice();for(let Re=0;Re<Ne;Re++)Be[Re].error(ye);this.observers.length=0}complete(){if(this.closed)throw new ve.N;this.isStopped=!0;const{observers:ye}=this,we=ye.length,Ne=ye.slice();for(let Be=0;Be<we;Be++)Ne[Be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ye){if(this.closed)throw new ve.N;return super._trySubscribe(ye)}_subscribe(ye){if(this.closed)throw new ve.N;return this.hasError?(ye.error(this.thrownError),Z.w.EMPTY):this.isStopped?(ye.complete(),Z.w.EMPTY):(this.observers.push(ye),new fe.W(this,ye))}asObservable(){const ye=new w.y;return ye.source=this,ye}}return Q.create=(J,ye)=>new ge(J,ye),Q})();class ge extends pe{constructor(J,ye){super(),this.destination=J,this.source=ye}next(J){const{destination:ye}=this;ye&&ye.next&&ye.next(J)}error(J){const{destination:ye}=this;ye&&ye.error&&this.destination.error(J)}complete(){const{destination:J}=this;J&&J.complete&&this.destination.complete()}_subscribe(J){const{source:ye}=this;return ye?this.source.subscribe(J):Z.w.EMPTY}}},7248:(lt,Me,U)=>{U.d(Me,{W:()=>O});var w=U(2858);class O extends w.w{constructor(ve,fe){super(),this.subject=ve,this.subscriber=fe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ve=this.subject,fe=ve.observers;if(this.subject=null,!fe||0===fe.length||ve.isStopped||ve.closed)return;const se=fe.indexOf(this.subscriber);-1!==se&&fe.splice(se,1)}}},2007:(lt,Me,U)=>{U.d(Me,{L:()=>Ce});var w=U(9813),O=U(2454),Z=U(2858),ve=U(4629),fe=U(95),se=U(6580);class Ce extends Z.w{constructor(Q,J,ye){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=O.c;break;case 1:if(!Q){this.destination=O.c;break}if("object"==typeof Q){Q instanceof Ce?(this.syncErrorThrowable=Q.syncErrorThrowable,this.destination=Q,Q.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,Q));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,Q,J,ye)}}[ve.b](){return this}static create(Q,J,ye){const we=new Ce(Q,J,ye);return we.syncErrorThrowable=!1,we}next(Q){this.isStopped||this._next(Q)}error(Q){this.isStopped||(this.isStopped=!0,this._error(Q))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Q){this.destination.next(Q)}_error(Q){this.destination.error(Q),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Q}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Q,this}}class pe extends Ce{constructor(Q,J,ye,we){super(),this._parentSubscriber=Q;let Ne,Be=this;(0,w.m)(J)?Ne=J:J&&(Ne=J.next,ye=J.error,we=J.complete,J!==O.c&&(Be=Object.create(J),(0,w.m)(Be.unsubscribe)&&this.add(Be.unsubscribe.bind(Be)),Be.unsubscribe=this.unsubscribe.bind(this))),this._context=Be,this._next=Ne,this._error=ye,this._complete=we}next(Q){if(!this.isStopped&&this._next){const{_parentSubscriber:J}=this;fe.v.useDeprecatedSynchronousErrorHandling&&J.syncErrorThrowable?this.__tryOrSetError(J,this._next,Q)&&this.unsubscribe():this.__tryOrUnsub(this._next,Q)}}error(Q){if(!this.isStopped){const{_parentSubscriber:J}=this,{useDeprecatedSynchronousErrorHandling:ye}=fe.v;if(this._error)ye&&J.syncErrorThrowable?(this.__tryOrSetError(J,this._error,Q),this.unsubscribe()):(this.__tryOrUnsub(this._error,Q),this.unsubscribe());else if(J.syncErrorThrowable)ye?(J.syncErrorValue=Q,J.syncErrorThrown=!0):(0,se.z)(Q),this.unsubscribe();else{if(this.unsubscribe(),ye)throw Q;(0,se.z)(Q)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Q}=this;if(this._complete){const J=()=>this._complete.call(this._context);fe.v.useDeprecatedSynchronousErrorHandling&&Q.syncErrorThrowable?(this.__tryOrSetError(Q,J),this.unsubscribe()):(this.__tryOrUnsub(J),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Q,J){try{Q.call(this._context,J)}catch(ye){if(this.unsubscribe(),fe.v.useDeprecatedSynchronousErrorHandling)throw ye;(0,se.z)(ye)}}__tryOrSetError(Q,J,ye){if(!fe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{J.call(this._context,ye)}catch(we){return fe.v.useDeprecatedSynchronousErrorHandling?(Q.syncErrorValue=we,Q.syncErrorThrown=!0,!0):((0,se.z)(we),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Q}=this;this._context=null,this._parentSubscriber=null,Q.unsubscribe()}}},2858:(lt,Me,U)=>{U.d(Me,{w:()=>se});var w=U(830),O=U(1458),Z=U(9813);const fe=(()=>{function pe(ge){return Error.call(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Q,J)=>`${J+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge,this}return pe.prototype=Object.create(Error.prototype),pe})();class se{constructor(ge){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ge&&(this._ctorUnsubscribe=!0,this._unsubscribe=ge)}unsubscribe(){let ge;if(this.closed)return;let{_parentOrParents:Q,_ctorUnsubscribe:J,_unsubscribe:ye,_subscriptions:we}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Q instanceof se)Q.remove(this);else if(null!==Q)for(let Ne=0;Ne<Q.length;++Ne)Q[Ne].remove(this);if((0,Z.m)(ye)){J&&(this._unsubscribe=void 0);try{ye.call(this)}catch(Ne){ge=Ne instanceof fe?Ce(Ne.errors):[Ne]}}if((0,w.k)(we)){let Ne=-1,Be=we.length;for(;++Ne<Be;){const Re=we[Ne];if((0,O.K)(Re))try{Re.unsubscribe()}catch(Oe){ge=ge||[],Oe instanceof fe?ge=ge.concat(Ce(Oe.errors)):ge.push(Oe)}}}if(ge)throw new fe(ge)}add(ge){let Q=ge;if(!ge)return se.EMPTY;switch(typeof ge){case"function":Q=new se(ge);case"object":if(Q===this||Q.closed||"function"!=typeof Q.unsubscribe)return Q;if(this.closed)return Q.unsubscribe(),Q;if(!(Q instanceof se)){const we=Q;Q=new se,Q._subscriptions=[we]}break;default:throw new Error("unrecognized teardown "+ge+" added to Subscription.")}let{_parentOrParents:J}=Q;if(null===J)Q._parentOrParents=this;else if(J instanceof se){if(J===this)return Q;Q._parentOrParents=[J,this]}else{if(-1!==J.indexOf(this))return Q;J.push(this)}const ye=this._subscriptions;return null===ye?this._subscriptions=[Q]:ye.push(Q),Q}remove(ge){const Q=this._subscriptions;if(Q){const J=Q.indexOf(ge);-1!==J&&Q.splice(J,1)}}}var pe;function Ce(pe){return pe.reduce((ge,Q)=>ge.concat(Q instanceof fe?Q.errors:Q),[])}se.EMPTY=((pe=new se).closed=!0,pe)},95:(lt,Me,U)=>{U.d(Me,{v:()=>O});let w=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const ve=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ve.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=Z},get useDeprecatedSynchronousErrorHandling(){return w}}},6303:(lt,Me,U)=>{U.d(Me,{IY:()=>ve,Ds:()=>se,ft:()=>pe});var w=U(2007),O=U(9423),Z=U(2057);class ve extends w.L{constructor(Q){super(),this.parent=Q}_next(Q){this.parent.notifyNext(Q)}_error(Q){this.parent.notifyError(Q),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class se extends w.L{notifyNext(Q){this.destination.next(Q)}notifyError(Q){this.destination.error(Q)}notifyComplete(){this.destination.complete()}}function pe(ge,Q){if(Q.closed)return;if(ge instanceof O.y)return ge.subscribe(Q);let J;try{J=(0,Z.s)(ge)(Q)}catch(ye){Q.error(ye)}return J}},6705:(lt,Me,U)=>{U.d(Me,{c:()=>fe,N:()=>se});var w=U(7807),O=U(9423),Z=U(2858),ve=U(6866);class fe extends O.y{constructor(J,ye){super(),this.source=J,this.subjectFactory=ye,this._refCount=0,this._isComplete=!1}_subscribe(J){return this.getSubject().subscribe(J)}getSubject(){const J=this._subject;return(!J||J.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let J=this._connection;return J||(this._isComplete=!1,J=this._connection=new Z.w,J.add(this.source.subscribe(new Ce(this.getSubject(),this))),J.closed&&(this._connection=null,J=Z.w.EMPTY)),J}refCount(){return(0,ve.x)()(this)}}const se=(()=>{const Q=fe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Q._subscribe},_isComplete:{value:Q._isComplete,writable:!0},getSubject:{value:Q.getSubject},connect:{value:Q.connect},refCount:{value:Q.refCount}}})();class Ce extends w.Yc{constructor(J,ye){super(J),this.connectable=ye}_error(J){this._unsubscribe(),super._error(J)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const J=this.connectable;if(J){this.connectable=null;const ye=J._connection;J._refCount=0,J._subject=null,J._connection=null,ye&&ye.unsubscribe()}}}},4968:(lt,Me,U)=>{U.d(Me,{z:()=>ve});var w=U(2429),O=U(6955);function ve(...fe){return(0,O.J)(1)((0,w.of)(...fe))}},5441:(lt,Me,U)=>{U.d(Me,{E:()=>O,c:()=>Z});var w=U(9423);const O=new w.y(fe=>fe.complete());function Z(fe){return fe?function(fe){return new w.y(se=>fe.schedule(()=>se.complete()))}(fe):O}},9164:(lt,Me,U)=>{U.d(Me,{D:()=>Be});var w=U(9423),O=U(2057),Z=U(2858),ve=U(6563),Ce=U(2411),pe=U(6203),J=U(5872),ye=U(4565);function Be(Re,Oe){return Oe?function(Re,Oe){if(null!=Re){if(function(Re){return Re&&"function"==typeof Re[ve.L]}(Re))return function(Re,Oe){return new w.y(je=>{const Pe=new Z.w;return Pe.add(Oe.schedule(()=>{const $e=Re[ve.L]();Pe.add($e.subscribe({next(it){Pe.add(Oe.schedule(()=>je.next(it)))},error(it){Pe.add(Oe.schedule(()=>je.error(it)))},complete(){Pe.add(Oe.schedule(()=>je.complete()))}}))})),Pe})}(Re,Oe);if((0,J.t)(Re))return function(Re,Oe){return new w.y(je=>{const Pe=new Z.w;return Pe.add(Oe.schedule(()=>Re.then($e=>{Pe.add(Oe.schedule(()=>{je.next($e),Pe.add(Oe.schedule(()=>je.complete()))}))},$e=>{Pe.add(Oe.schedule(()=>je.error($e)))}))),Pe})}(Re,Oe);if((0,ye.z)(Re))return(0,Ce.r)(Re,Oe);if(function(Re){return Re&&"function"==typeof Re[pe.hZ]}(Re)||"string"==typeof Re)return function(Re,Oe){if(!Re)throw new Error("Iterable cannot be null");return new w.y(je=>{const Pe=new Z.w;let $e;return Pe.add(()=>{$e&&"function"==typeof $e.return&&$e.return()}),Pe.add(Oe.schedule(()=>{$e=Re[pe.hZ](),Pe.add(Oe.schedule(function(){if(je.closed)return;let it,Ee;try{const ot=$e.next();it=ot.value,Ee=ot.done}catch(ot){return void je.error(ot)}Ee?je.complete():(je.next(it),this.schedule())}))})),Pe})}(Re,Oe)}throw new TypeError((null!==Re&&typeof Re||Re)+" is not observable")}(Re,Oe):Re instanceof w.y?Re:new w.y((0,O.s)(Re))}},801:(lt,Me,U)=>{U.d(Me,{n:()=>ve});var w=U(9423),O=U(202),Z=U(2411);function ve(fe,se){return se?(0,Z.r)(fe,se):new w.y((0,O.V)(fe))}},9301:(lt,Me,U)=>{U.d(Me,{T:()=>fe});var w=U(9423),O=U(2731),Z=U(6955),ve=U(801);function fe(...se){let Ce=Number.POSITIVE_INFINITY,pe=null,ge=se[se.length-1];return(0,O.K)(ge)?(pe=se.pop(),se.length>1&&"number"==typeof se[se.length-1]&&(Ce=se.pop())):"number"==typeof ge&&(Ce=se.pop()),null===pe&&1===se.length&&se[0]instanceof w.y?se[0]:(0,Z.J)(Ce)((0,ve.n)(se,pe))}},2429:(lt,Me,U)=>{U.d(Me,{of:()=>ve});var w=U(2731),O=U(801),Z=U(2411);function ve(...fe){let se=fe[fe.length-1];return(0,w.K)(se)?(fe.pop(),(0,Z.r)(fe,se)):(0,O.n)(fe)}},1692:(lt,Me,U)=>{U.d(Me,{d:()=>O});var w=U(2007);function O(fe=null){return se=>se.lift(new Z(fe))}class Z{constructor(se){this.defaultValue=se}call(se,Ce){return Ce.subscribe(new ve(se,this.defaultValue))}}class ve extends w.L{constructor(se,Ce){super(se),this.defaultValue=Ce,this.isEmpty=!0}_next(se){this.isEmpty=!1,this.destination.next(se)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},439:(lt,Me,U)=>{U.d(Me,{h:()=>O});var w=U(2007);function O(fe,se){return function(pe){return pe.lift(new Z(fe,se))}}class Z{constructor(se,Ce){this.predicate=se,this.thisArg=Ce}call(se,Ce){return Ce.subscribe(new ve(se,this.predicate,this.thisArg))}}class ve extends w.L{constructor(se,Ce,pe){super(se),this.predicate=Ce,this.thisArg=pe,this.count=0}_next(se){let Ce;try{Ce=this.predicate.call(this.thisArg,se,this.count++)}catch(pe){return void this.destination.error(pe)}Ce&&this.destination.next(se)}}},4187:(lt,Me,U)=>{U.d(Me,{P:()=>Ce});var w=U(5449),O=U(439),Z=U(3303),ve=U(1692),fe=U(3328),se=U(8533);function Ce(pe,ge){const Q=arguments.length>=2;return J=>J.pipe(pe?(0,O.h)((ye,we)=>pe(ye,we,J)):se.y,(0,Z.q)(1),Q?(0,ve.d)(ge):(0,fe.T)(()=>new w.K))}},8771:(lt,Me,U)=>{U.d(Me,{U:()=>O});var w=U(2007);function O(fe,se){return function(pe){if("function"!=typeof fe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new Z(fe,se))}}class Z{constructor(se,Ce){this.project=se,this.thisArg=Ce}call(se,Ce){return Ce.subscribe(new ve(se,this.project,this.thisArg))}}class ve extends w.L{constructor(se,Ce,pe){super(se),this.project=Ce,this.count=0,this.thisArg=pe||this}_next(se){let Ce;try{Ce=this.project.call(this.thisArg,se,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(Ce)}}},6955:(lt,Me,U)=>{U.d(Me,{J:()=>Z});var w=U(3199),O=U(8533);function Z(ve=Number.POSITIVE_INFINITY){return(0,w.zg)(O.y,ve)}},3199:(lt,Me,U)=>{U.d(Me,{zg:()=>ve});var w=U(8771),O=U(9164),Z=U(6303);function ve(pe,ge,Q=Number.POSITIVE_INFINITY){return"function"==typeof ge?J=>J.pipe(ve((ye,we)=>(0,O.D)(pe(ye,we)).pipe((0,w.U)((Ne,Be)=>ge(ye,Ne,we,Be))),Q)):("number"==typeof ge&&(Q=ge),J=>J.lift(new fe(pe,Q)))}class fe{constructor(ge,Q=Number.POSITIVE_INFINITY){this.project=ge,this.concurrent=Q}call(ge,Q){return Q.subscribe(new se(ge,this.project,this.concurrent))}}class se extends Z.Ds{constructor(ge,Q,J=Number.POSITIVE_INFINITY){super(ge),this.project=Q,this.concurrent=J,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ge){this.active<this.concurrent?this._tryNext(ge):this.buffer.push(ge)}_tryNext(ge){let Q;const J=this.index++;try{Q=this.project(ge,J)}catch(ye){return void this.destination.error(ye)}this.active++,this._innerSub(Q)}_innerSub(ge){const Q=new Z.IY(this),J=this.destination;J.add(Q);const ye=(0,Z.ft)(ge,Q);ye!==Q&&J.add(ye)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ge){this.destination.next(ge)}notifyComplete(){const ge=this.buffer;this.active--,ge.length>0?this._next(ge.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7923:(lt,Me,U)=>{U.d(Me,{ht:()=>J,QV:()=>ge});var w=U(2007),O=U(5441),Z=U(2429),ve=U(9423);class pe{constructor(Ne,Be,Re){this.kind=Ne,this.value=Be,this.error=Re,this.hasValue="N"===Ne}observe(Ne){switch(this.kind){case"N":return Ne.next&&Ne.next(this.value);case"E":return Ne.error&&Ne.error(this.error);case"C":return Ne.complete&&Ne.complete()}}do(Ne,Be,Re){switch(this.kind){case"N":return Ne&&Ne(this.value);case"E":return Be&&Be(this.error);case"C":return Re&&Re()}}accept(Ne,Be,Re){return Ne&&"function"==typeof Ne.next?this.observe(Ne):this.do(Ne,Be,Re)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return we=this.error,new ve.y(Be=>Be.error(we));case"C":return(0,O.c)()}var we;throw new Error("unexpected notification kind value")}static createNext(Ne){return void 0!==Ne?new pe("N",Ne):pe.undefinedValueNotification}static createError(Ne){return new pe("E",void 0,Ne)}static createComplete(){return pe.completeNotification}}function ge(we,Ne=0){return function(Re){return Re.lift(new Q(we,Ne))}}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class Q{constructor(Ne,Be=0){this.scheduler=Ne,this.delay=Be}call(Ne,Be){return Be.subscribe(new J(Ne,this.scheduler,this.delay))}}class J extends w.L{constructor(Ne,Be,Re=0){super(Ne),this.scheduler=Be,this.delay=Re}static dispatch(Ne){const{notification:Be,destination:Re}=Ne;Be.observe(Re),this.unsubscribe()}scheduleMessage(Ne){this.destination.add(this.scheduler.schedule(J.dispatch,this.delay,new ye(Ne,this.destination)))}_next(Ne){this.scheduleMessage(pe.createNext(Ne))}_error(Ne){this.scheduleMessage(pe.createError(Ne)),this.unsubscribe()}_complete(){this.scheduleMessage(pe.createComplete()),this.unsubscribe()}}class ye{constructor(Ne,Be){this.notification=Ne,this.destination=Be}}},6866:(lt,Me,U)=>{U.d(Me,{x:()=>O});var w=U(2007);function O(){return function(se){return se.lift(new Z(se))}}class Z{constructor(se){this.connectable=se}call(se,Ce){const{connectable:pe}=this;pe._refCount++;const ge=new ve(se,pe),Q=Ce.subscribe(ge);return ge.closed||(ge.connection=pe.connect()),Q}}class ve extends w.L{constructor(se,Ce){super(se),this.connectable=Ce}_unsubscribe(){const{connectable:se}=this;if(!se)return void(this.connection=null);this.connectable=null;const Ce=se._refCount;if(Ce<=0)return void(this.connection=null);if(se._refCount=Ce-1,Ce>1)return void(this.connection=null);const{connection:pe}=this,ge=se._connection;this.connection=null,ge&&(!pe||ge===pe)&&ge.unsubscribe()}}},3062:(lt,Me,U)=>{U.d(Me,{R:()=>O});var w=U(2007);function O(fe,se){let Ce=!1;return arguments.length>=2&&(Ce=!0),function(ge){return ge.lift(new Z(fe,se,Ce))}}class Z{constructor(se,Ce,pe=!1){this.accumulator=se,this.seed=Ce,this.hasSeed=pe}call(se,Ce){return Ce.subscribe(new ve(se,this.accumulator,this.seed,this.hasSeed))}}class ve extends w.L{constructor(se,Ce,pe,ge){super(se),this.accumulator=Ce,this._seed=pe,this.hasSeed=ge,this.index=0}get seed(){return this._seed}set seed(se){this.hasSeed=!0,this._seed=se}_next(se){if(this.hasSeed)return this._tryNext(se);this.seed=se,this.destination.next(se)}_tryNext(se){const Ce=this.index++;let pe;try{pe=this.accumulator(this.seed,se,Ce)}catch(ge){this.destination.error(ge)}this.seed=pe,this.destination.next(pe)}}},5148:(lt,Me,U)=>{U.d(Me,{O:()=>Z});var w=U(4968),O=U(2731);function Z(...ve){const fe=ve[ve.length-1];return(0,O.K)(fe)?(ve.pop(),se=>(0,w.z)(ve,se,fe)):se=>(0,w.z)(ve,se)}},5193:(lt,Me,U)=>{U.d(Me,{R:()=>Oe});var w=U(9423);let O=1;const Z=Promise.resolve(),ve={};function fe(Pe){return Pe in ve&&(delete ve[Pe],!0)}const se={setImmediate(Pe){const $e=O++;return ve[$e]=!0,Z.then(()=>fe($e)&&Pe()),$e},clearImmediate(Pe){fe(Pe)}};var pe=U(4384),Q=U(6054);const we=new class extends Q.v{flush($e){this.active=!0,this.scheduled=void 0;const{actions:it}=this;let Ee,ot=-1,Kt=it.length;$e=$e||it.shift();do{if(Ee=$e.execute($e.state,$e.delay))break}while(++ot<Kt&&($e=it.shift()));if(this.active=!1,Ee){for(;++ot<Kt&&($e=it.shift());)$e.unsubscribe();throw Ee}}}(class extends pe.o{constructor($e,it){super($e,it),this.scheduler=$e,this.work=it}requestAsyncId($e,it,Ee=0){return null!==Ee&&Ee>0?super.requestAsyncId($e,it,Ee):($e.actions.push(this),$e.scheduled||($e.scheduled=se.setImmediate($e.flush.bind($e,null))))}recycleAsyncId($e,it,Ee=0){if(null!==Ee&&Ee>0||null===Ee&&this.delay>0)return super.recycleAsyncId($e,it,Ee);0===$e.actions.length&&(se.clearImmediate(it),$e.scheduled=void 0)}});var Ne=U(830);class Re extends w.y{constructor($e,it=0,Ee=we){var Pe;super(),this.source=$e,this.delayTime=it,this.scheduler=Ee,(!(!(0,Ne.k)(Pe=it)&&Pe-parseFloat(Pe)+1>=0)||it<0)&&(this.delayTime=0),(!Ee||"function"!=typeof Ee.schedule)&&(this.scheduler=we)}static create($e,it=0,Ee=we){return new Re($e,it,Ee)}static dispatch($e){const{source:it,subscriber:Ee}=$e;return this.add(it.subscribe(Ee))}_subscribe($e){return this.scheduler.schedule(Re.dispatch,this.delayTime,{source:this.source,subscriber:$e})}}function Oe(Pe,$e=0){return function(Ee){return Ee.lift(new je(Pe,$e))}}class je{constructor($e,it){this.scheduler=$e,this.delay=it}call($e,it){return new Re(it,this.delay,this.scheduler).subscribe($e)}}},7060:(lt,Me,U)=>{U.d(Me,{w:()=>ve});var w=U(8771),O=U(9164),Z=U(6303);function ve(Ce,pe){return"function"==typeof pe?ge=>ge.pipe(ve((Q,J)=>(0,O.D)(Ce(Q,J)).pipe((0,w.U)((ye,we)=>pe(Q,ye,J,we))))):ge=>ge.lift(new fe(Ce))}class fe{constructor(pe){this.project=pe}call(pe,ge){return ge.subscribe(new se(pe,this.project))}}class se extends Z.Ds{constructor(pe,ge){super(pe),this.project=ge,this.index=0}_next(pe){let ge;const Q=this.index++;try{ge=this.project(pe,Q)}catch(J){return void this.destination.error(J)}this._innerSub(ge)}_innerSub(pe){const ge=this.innerSubscription;ge&&ge.unsubscribe();const Q=new Z.IY(this),J=this.destination;J.add(Q),this.innerSubscription=(0,Z.ft)(pe,Q),this.innerSubscription!==Q&&J.add(this.innerSubscription)}_complete(){const{innerSubscription:pe}=this;(!pe||pe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(pe){this.destination.next(pe)}}},3303:(lt,Me,U)=>{U.d(Me,{q:()=>ve});var w=U(2007),O=U(7689),Z=U(5441);function ve(Ce){return pe=>0===Ce?(0,Z.c)():pe.lift(new fe(Ce))}class fe{constructor(pe){if(this.total=pe,this.total<0)throw new O.W}call(pe,ge){return ge.subscribe(new se(pe,this.total))}}class se extends w.L{constructor(pe,ge){super(pe),this.total=ge,this.count=0}_next(pe){const ge=this.total,Q=++this.count;Q<=ge&&(this.destination.next(pe),Q===ge&&(this.destination.complete(),this.unsubscribe()))}}},2248:(lt,Me,U)=>{U.d(Me,{b:()=>ve});var w=U(2007);function O(){}var Z=U(9813);function ve(Ce,pe,ge){return function(J){return J.lift(new fe(Ce,pe,ge))}}class fe{constructor(pe,ge,Q){this.nextOrObserver=pe,this.error=ge,this.complete=Q}call(pe,ge){return ge.subscribe(new se(pe,this.nextOrObserver,this.error,this.complete))}}class se extends w.L{constructor(pe,ge,Q,J){super(pe),this._tapNext=O,this._tapError=O,this._tapComplete=O,this._tapError=Q||O,this._tapComplete=J||O,(0,Z.m)(ge)?(this._context=this,this._tapNext=ge):ge&&(this._context=ge,this._tapNext=ge.next||O,this._tapError=ge.error||O,this._tapComplete=ge.complete||O)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(ge){return void this.destination.error(ge)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(ge){return void this.destination.error(ge)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},3328:(lt,Me,U)=>{U.d(Me,{T:()=>Z});var w=U(5449),O=U(2007);function Z(Ce=se){return pe=>pe.lift(new ve(Ce))}class ve{constructor(pe){this.errorFactory=pe}call(pe,ge){return ge.subscribe(new fe(pe,this.errorFactory))}}class fe extends O.L{constructor(pe,ge){super(pe),this.errorFactory=ge,this.hasValue=!1}_next(pe){this.hasValue=!0,this.destination.next(pe)}_complete(){if(this.hasValue)return this.destination.complete();{let pe;try{pe=this.errorFactory()}catch(ge){pe=ge}this.destination.error(pe)}}}function se(){return new w.K}},2411:(lt,Me,U)=>{U.d(Me,{r:()=>Z});var w=U(9423),O=U(2858);function Z(ve,fe){return new w.y(se=>{const Ce=new O.w;let pe=0;return Ce.add(fe.schedule(function(){pe!==ve.length?(se.next(ve[pe++]),se.closed||Ce.add(this.schedule())):se.complete()})),Ce})}},4384:(lt,Me,U)=>{U.d(Me,{o:()=>Z});var w=U(2858);class O extends w.w{constructor(fe,se){super()}schedule(fe,se=0){return this}}class Z extends O{constructor(fe,se){super(fe,se),this.scheduler=fe,this.work=se,this.pending=!1}schedule(fe,se=0){if(this.closed)return this;this.state=fe;const Ce=this.id,pe=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(pe,Ce,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(pe,this.id,se),this}requestAsyncId(fe,se,Ce=0){return setInterval(fe.flush.bind(fe,this),Ce)}recycleAsyncId(fe,se,Ce=0){if(null!==Ce&&this.delay===Ce&&!1===this.pending)return se;clearInterval(se)}execute(fe,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(fe,se);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,se){let pe,Ce=!1;try{this.work(fe)}catch(ge){Ce=!0,pe=!!ge&&ge||new Error(ge)}if(Ce)return this.unsubscribe(),pe}_unsubscribe(){const fe=this.id,se=this.scheduler,Ce=se.actions,pe=Ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&Ce.splice(pe,1),null!=fe&&(this.id=this.recycleAsyncId(se,fe,null)),this.delay=null}}},6054:(lt,Me,U)=>{U.d(Me,{v:()=>O});let w=(()=>{class Z{constructor(fe,se=Z.now){this.SchedulerAction=fe,this.now=se}schedule(fe,se=0,Ce){return new this.SchedulerAction(this,fe).schedule(Ce,se)}}return Z.now=()=>Date.now(),Z})();class O extends w{constructor(ve,fe=w.now){super(ve,()=>O.delegate&&O.delegate!==this?O.delegate.now():fe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ve,fe=0,se){return O.delegate&&O.delegate!==this?O.delegate.schedule(ve,fe,se):super.schedule(ve,fe,se)}flush(ve){const{actions:fe}=this;if(this.active)return void fe.push(ve);let se;this.active=!0;do{if(se=ve.execute(ve.state,ve.delay))break}while(ve=fe.shift());if(this.active=!1,se){for(;ve=fe.shift();)ve.unsubscribe();throw se}}}},9449:(lt,Me,U)=>{U.d(Me,{z:()=>Z});var w=U(4384);const Z=new(U(6054).v)(w.o)},1734:(lt,Me,U)=>{U.d(Me,{c:()=>se,N:()=>fe});var w=U(4384),Z=U(6054);const fe=new class extends Z.v{}(class extends w.o{constructor(pe,ge){super(pe,ge),this.scheduler=pe,this.work=ge}schedule(pe,ge=0){return ge>0?super.schedule(pe,ge):(this.delay=ge,this.state=pe,this.scheduler.flush(this),this)}execute(pe,ge){return ge>0||this.closed?super.execute(pe,ge):this._execute(pe,ge)}requestAsyncId(pe,ge,Q=0){return null!==Q&&Q>0||null===Q&&this.delay>0?super.requestAsyncId(pe,ge,Q):pe.flush(this)}}),se=fe},6203:(lt,Me,U)=>{U.d(Me,{hZ:()=>O});const O="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6563:(lt,Me,U)=>{U.d(Me,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},4629:(lt,Me,U)=>{U.d(Me,{b:()=>w});const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7689:(lt,Me,U)=>{U.d(Me,{W:()=>O});const O=(()=>{function Z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Z.prototype=Object.create(Error.prototype),Z})()},5449:(lt,Me,U)=>{U.d(Me,{K:()=>O});const O=(()=>{function Z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2078:(lt,Me,U)=>{U.d(Me,{N:()=>O});const O=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},6580:(lt,Me,U)=>{function w(O){setTimeout(()=>{throw O},0)}U.d(Me,{z:()=>w})},8533:(lt,Me,U)=>{function w(O){return O}U.d(Me,{y:()=>w})},830:(lt,Me,U)=>{U.d(Me,{k:()=>w});const w=Array.isArray||(O=>O&&"number"==typeof O.length)},4565:(lt,Me,U)=>{U.d(Me,{z:()=>w});const w=O=>O&&"number"==typeof O.length&&"function"!=typeof O},9813:(lt,Me,U)=>{function w(O){return"function"==typeof O}U.d(Me,{m:()=>w})},1458:(lt,Me,U)=>{function w(O){return null!==O&&"object"==typeof O}U.d(Me,{K:()=>w})},5872:(lt,Me,U)=>{function w(O){return!!O&&"function"!=typeof O.subscribe&&"function"==typeof O.then}U.d(Me,{t:()=>w})},2731:(lt,Me,U)=>{function w(O){return O&&"function"==typeof O.schedule}U.d(Me,{K:()=>w})},2057:(lt,Me,U)=>{U.d(Me,{s:()=>J});var w=U(202),O=U(6580),ve=U(6203),se=U(6563),pe=U(4565),ge=U(5872),Q=U(1458);const J=ye=>{if(ye&&"function"==typeof ye[se.L])return(ye=>we=>{const Ne=ye[se.L]();if("function"!=typeof Ne.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ne.subscribe(we)})(ye);if((0,pe.z)(ye))return(0,w.V)(ye);if((0,ge.t)(ye))return(ye=>we=>(ye.then(Ne=>{we.closed||(we.next(Ne),we.complete())},Ne=>we.error(Ne)).then(null,O.z),we))(ye);if(ye&&"function"==typeof ye[ve.hZ])return(ye=>we=>{const Ne=ye[ve.hZ]();for(;;){let Be;try{Be=Ne.next()}catch(Re){return we.error(Re),we}if(Be.done){we.complete();break}if(we.next(Be.value),we.closed)break}return"function"==typeof Ne.return&&we.add(()=>{Ne.return&&Ne.return()}),we})(ye);{const Ne=`You provided ${(0,Q.K)(ye)?"an invalid object":`'${ye}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ne)}}},202:(lt,Me,U)=>{U.d(Me,{V:()=>w});const w=O=>Z=>{for(let ve=0,fe=O.length;ve<fe&&!Z.closed;ve++)Z.next(O[ve]);Z.complete()}},2890:(lt,Me,U)=>{U.d(Me,{m:()=>fe});var w=U(6019),O=U(7816),Z=U(5312);const ve=[w.ez,O.UX];let fe=(()=>{class se{}return se.\u0275fac=function(pe){return new(pe||se)},se.\u0275mod=Z.oAB({type:se}),se.\u0275inj=Z.cJS({providers:[],imports:[[...ve],w.ez,O.UX]}),se})()},2027:(lt,Me,U)=>{U.d(Me,{I:()=>Z});var w=U(7810),O=U(5312);let Z=(()=>{class ve{constructor(){this.title=new w.X(""),this.userLoggedIn=new w.X(!1),this.userIsAdmin=new w.X(!1)}addProductToCart(se){let Ce=this.getProductsFromLocalStorage();Ce.includes(se)||(Ce.push(se),localStorage.setItem("cartElements",JSON.stringify(Ce))),se.stock--}removeProductFromCart(se){let Ce=this.getProductsFromLocalStorage();console.log(se);for(let pe=0;pe<Ce.length;++pe)Ce[pe].documentReference===se.documentReference&&Ce.splice(pe,1);localStorage.setItem("cartElements",JSON.stringify(Ce)),window.location.reload()}getProductsFromLocalStorage(){return JSON.parse(localStorage.getItem("cartElements"))||[]}addCartToOrder(){console.log(this.getProductsFromLocalStorage)}}return ve.\u0275fac=function(se){return new(se||ve)},ve.\u0275prov=O.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})()},9850:(lt,Me,U)=>{var w=U(6019),O=U(5312);class Z extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends Z{static makeCurrent(){(0,w.HT)(new ve)}onAndCancel(ie,K,_e){return ie.addEventListener(K,_e,!1),()=>{ie.removeEventListener(K,_e,!1)}}dispatchEvent(ie,K){ie.dispatchEvent(K)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,K){return(K=K||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,K){return"window"===K?window:"document"===K?ie:"body"===K?ie.body:null}getBaseHref(ie){const K=(fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null);return null==K?null:function(re){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",re);const ie=Ce.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(K)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,w.Mx)(document.cookie,ie)}}let Ce,fe=null;const ge=new O.OlP("TRANSITION_ID"),J=[{provide:O.ip1,useFactory:function(re,ie,K){return()=>{K.get(O.CZH).donePromise.then(()=>{const _e=(0,w.q)(),He=ie.querySelectorAll(`style[ng-transition="${re}"]`);for(let xt=0;xt<He.length;xt++)_e.remove(He[xt])})}},deps:[ge,w.K0,O.zs3],multi:!0}];class ye{static init(){(0,O.VLi)(new ye)}addToWindow(ie){O.dqk.getAngularTestability=(_e,He=!0)=>{const xt=ie.findTestabilityInTree(_e,He);if(null==xt)throw new Error("Could not find testability for element.");return xt},O.dqk.getAllAngularTestabilities=()=>ie.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>ie.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(_e=>{const He=O.dqk.getAllAngularTestabilities();let xt=He.length,jt=!1;const bn=function(Zn){jt=jt||Zn,xt--,0==xt&&_e(jt)};He.forEach(function(Zn){Zn.whenStable(bn)})})}findTestabilityInTree(ie,K,_e){if(null==K)return null;const He=ie.getTestability(K);return null!=He?He:_e?(0,w.q)().isShadowRoot(K)?this.findTestabilityInTree(ie,K.host,!0):this.findTestabilityInTree(ie,K.parentElement,!0):null}}let we=(()=>{class re{build(){return new XMLHttpRequest}}return re.\u0275fac=function(K){return new(K||re)},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();const Ft=new O.OlP("EventManagerPlugins");let Ve=(()=>{class re{constructor(K,_e){this._zone=_e,this._eventNameToPlugin=new Map,K.forEach(He=>He.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,_e,He){return this._findPluginFor(_e).addEventListener(K,_e,He)}addGlobalEventListener(K,_e,He){return this._findPluginFor(_e).addGlobalEventListener(K,_e,He)}getZone(){return this._zone}_findPluginFor(K){const _e=this._eventNameToPlugin.get(K);if(_e)return _e;const He=this._plugins;for(let xt=0;xt<He.length;xt++){const jt=He[xt];if(jt.supports(K))return this._eventNameToPlugin.set(K,jt),jt}throw new Error(`No event manager plugin found for event ${K}`)}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(Ft),O.LFG(O.R0b))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();class Ot{constructor(ie){this._doc=ie}addGlobalEventListener(ie,K,_e){const He=(0,w.q)().getGlobalEventTarget(this._doc,ie);if(!He)throw new Error(`Unsupported event target ${He} for event ${K}`);return this.addEventListener(He,K,_e)}}let tt=(()=>{class re{constructor(){this._stylesSet=new Set}addStyles(K){const _e=new Set;K.forEach(He=>{this._stylesSet.has(He)||(this._stylesSet.add(He),_e.add(He))}),this.onStylesAdded(_e)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return re.\u0275fac=function(K){return new(K||re)},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})(),dt=(()=>{class re extends tt{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,_e,He){K.forEach(xt=>{const jt=this._doc.createElement("style");jt.textContent=xt,He.push(_e.appendChild(jt))})}addHost(K){const _e=[];this._addStylesToHost(this._stylesSet,K,_e),this._hostNodes.set(K,_e)}removeHost(K){const _e=this._hostNodes.get(K);_e&&_e.forEach(Qn),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((_e,He)=>{this._addStylesToHost(K,He,_e)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(Qn))}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(w.K0))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();function Qn(re){(0,w.q)().remove(re)}const Rr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ri=/%COMP%/g;function Yt(re,ie,K){for(let _e=0;_e<ie.length;_e++){let He=ie[_e];Array.isArray(He)?Yt(re,He,K):(He=He.replace(ri,re),K.push(He))}return K}function zt(re){return ie=>{if("__ngUnwrap__"===ie)return re;!1===re(ie)&&(ie.preventDefault(),ie.returnValue=!1)}}let $n=(()=>{class re{constructor(K,_e,He){this.eventManager=K,this.sharedStylesHost=_e,this.appId=He,this.rendererByCompId=new Map,this.defaultRenderer=new wn(K)}createRenderer(K,_e){if(!K||!_e)return this.defaultRenderer;switch(_e.encapsulation){case O.ifc.Emulated:{let He=this.rendererByCompId.get(_e.id);return He||(He=new Xn(this.eventManager,this.sharedStylesHost,_e,this.appId),this.rendererByCompId.set(_e.id,He)),He.applyToHost(K),He}case 1:case O.ifc.ShadowDom:return new fn(this.eventManager,this.sharedStylesHost,K,_e);default:if(!this.rendererByCompId.has(_e.id)){const He=Yt(_e.id,_e.styles,[]);this.sharedStylesHost.addStyles(He),this.rendererByCompId.set(_e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(Ve),O.LFG(dt),O.LFG(O.AFp))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();class wn{constructor(ie){this.eventManager=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,K){return K?document.createElementNS(Rr[K]||K,ie):document.createElement(ie)}createComment(ie){return document.createComment(ie)}createText(ie){return document.createTextNode(ie)}appendChild(ie,K){ie.appendChild(K)}insertBefore(ie,K,_e){ie&&ie.insertBefore(K,_e)}removeChild(ie,K){ie&&ie.removeChild(K)}selectRootElement(ie,K){let _e="string"==typeof ie?document.querySelector(ie):ie;if(!_e)throw new Error(`The selector "${ie}" did not match any elements`);return K||(_e.textContent=""),_e}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,K,_e,He){if(He){K=He+":"+K;const xt=Rr[He];xt?ie.setAttributeNS(xt,K,_e):ie.setAttribute(K,_e)}else ie.setAttribute(K,_e)}removeAttribute(ie,K,_e){if(_e){const He=Rr[_e];He?ie.removeAttributeNS(He,K):ie.removeAttribute(`${_e}:${K}`)}else ie.removeAttribute(K)}addClass(ie,K){ie.classList.add(K)}removeClass(ie,K){ie.classList.remove(K)}setStyle(ie,K,_e,He){He&(O.JOm.DashCase|O.JOm.Important)?ie.style.setProperty(K,_e,He&O.JOm.Important?"important":""):ie.style[K]=_e}removeStyle(ie,K,_e){_e&O.JOm.DashCase?ie.style.removeProperty(K):ie.style[K]=""}setProperty(ie,K,_e){ie[K]=_e}setValue(ie,K){ie.nodeValue=K}listen(ie,K,_e){return"string"==typeof ie?this.eventManager.addGlobalEventListener(ie,K,zt(_e)):this.eventManager.addEventListener(ie,K,zt(_e))}}class Xn extends wn{constructor(ie,K,_e,He){super(ie),this.component=_e;const xt=Yt(He+"-"+_e.id,_e.styles,[]);K.addStyles(xt),this.contentAttr="_ngcontent-%COMP%".replace(ri,He+"-"+_e.id),this.hostAttr="_nghost-%COMP%".replace(ri,He+"-"+_e.id)}applyToHost(ie){super.setAttribute(ie,this.hostAttr,"")}createElement(ie,K){const _e=super.createElement(ie,K);return super.setAttribute(_e,this.contentAttr,""),_e}}class fn extends wn{constructor(ie,K,_e,He){super(ie),this.sharedStylesHost=K,this.hostEl=_e,this.shadowRoot=_e.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const xt=Yt(He.id,He.styles,[]);for(let jt=0;jt<xt.length;jt++){const bn=document.createElement("style");bn.textContent=xt[jt],this.shadowRoot.appendChild(bn)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ie,K){return super.appendChild(this.nodeOrShadowRoot(ie),K)}insertBefore(ie,K,_e){return super.insertBefore(this.nodeOrShadowRoot(ie),K,_e)}removeChild(ie,K){return super.removeChild(this.nodeOrShadowRoot(ie),K)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}}let ze=(()=>{class re extends Ot{constructor(K){super(K)}supports(K){return!0}addEventListener(K,_e,He){return K.addEventListener(_e,He,!1),()=>this.removeEventListener(K,_e,He)}removeEventListener(K,_e,He){return K.removeEventListener(_e,He)}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(w.K0))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();const ii=["alt","control","meta","shift"],Sn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Et={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let ir=(()=>{class re extends Ot{constructor(K){super(K)}supports(K){return null!=re.parseEventName(K)}addEventListener(K,_e,He){const xt=re.parseEventName(_e),jt=re.eventCallback(xt.fullKey,He,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(K,xt.domEventName,jt))}static parseEventName(K){const _e=K.toLowerCase().split("."),He=_e.shift();if(0===_e.length||"keydown"!==He&&"keyup"!==He)return null;const xt=re._normalizeKey(_e.pop());let jt="";if(ii.forEach(Zn=>{const Nn=_e.indexOf(Zn);Nn>-1&&(_e.splice(Nn,1),jt+=Zn+".")}),jt+=xt,0!=_e.length||0===xt.length)return null;const bn={};return bn.domEventName=He,bn.fullKey=jt,bn}static getEventFullKey(K){let _e="",He=function(re){let ie=re.key;if(null==ie){if(ie=re.keyIdentifier,null==ie)return"Unidentified";ie.startsWith("U+")&&(ie=String.fromCharCode(parseInt(ie.substring(2),16)),3===re.location&&bt.hasOwnProperty(ie)&&(ie=bt[ie]))}return Sn[ie]||ie}(K);return He=He.toLowerCase()," "===He?He="space":"."===He&&(He="dot"),ii.forEach(xt=>{xt!=He&&Et[xt](K)&&(_e+=xt+".")}),_e+=He,_e}static eventCallback(K,_e,He){return xt=>{re.getEventFullKey(xt)===K&&He.runGuarded(()=>_e(xt))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(w.K0))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac}),re})();const nt=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:w.bD},{provide:O.g9A,useValue:function(){ve.makeCurrent(),ye.init()},multi:!0},{provide:w.K0,useFactory:function(){return(0,O.RDi)(document),document},deps:[]}]),un=[[],{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function(){return new O.qLn},deps:[]},{provide:Ft,useClass:ze,multi:!0,deps:[w.K0,O.R0b,O.Lbi]},{provide:Ft,useClass:ir,multi:!0,deps:[w.K0]},[],{provide:$n,useClass:$n,deps:[Ve,dt,O.AFp]},{provide:O.FYo,useExisting:$n},{provide:tt,useExisting:dt},{provide:dt,useClass:dt,deps:[w.K0]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b]},{provide:Ve,useClass:Ve,deps:[Ft,O.R0b]},{provide:w.JF,useClass:we,deps:[]},[]];let _n=(()=>{class re{constructor(K){if(K)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(K){return{ngModule:re,providers:[{provide:O.AFp,useValue:K.appId},{provide:ge,useExisting:O.AFp},J]}}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(re,12))},re.\u0275mod=O.oAB({type:re}),re.\u0275inj=O.cJS({providers:un,imports:[w.ez,O.hGG]}),re})();"undefined"!=typeof window&&window;const Gt_firebaseConfig={apiKey:"AIzaSyApP6gBULbHlDW-QHiQQqxWQFyakMLxmNA",authDomain:"nail-da314.firebaseapp.com",projectId:"nail-da314",storageBucket:"nail-da314.appspot.com",messagingSenderId:"308686171166",appId:"1:308686171166:web:efd752fa63613e42b2920f",measurementId:"G-E35QK1FE09"};var vn=U(8118),Wt=U(3700),Jt=U(5951),xn=U(2027);let er=(()=>{class re{constructor(K,_e){this._router=K,this.navbarService=_e}canActivate(K,_e){return null===sessionStorage.getItem("CREDENTIALS")?(this._router.navigate(["/sign-in"]),this.navbarService.userLoggedIn.next(!1),!1):(this.navbarService.userLoggedIn.next(!0),!0)}}return re.\u0275fac=function(K){return new(K||re)(O.LFG(Jt.F0),O.LFG(xn.I))},re.\u0275prov=O.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})();const Dn=[{path:"home",loadChildren:()=>U.e(671).then(U.bind(U,8671)).then(re=>re.HomePageModule)},{path:"profile",loadChildren:()=>Promise.all([U.e(592),U.e(845)]).then(U.bind(U,2845)).then(re=>re.ProfliePageModule),canActivate:[er]},{path:"about",loadChildren:()=>U.e(840).then(U.bind(U,8840)).then(re=>re.AboutPageModule)},{path:"history",loadChildren:()=>U.e(981).then(U.bind(U,6981)).then(re=>re.HistoryPageModule),canActivate:[er]},{path:"contact",loadChildren:()=>U.e(210).then(U.bind(U,5210)).then(re=>re.ContactPageModule)},{path:"regist",loadChildren:()=>Promise.all([U.e(592),U.e(377)]).then(U.bind(U,377)).then(re=>re.RegistPageModule)},{path:"cart",loadChildren:()=>U.e(653).then(U.bind(U,8653)).then(re=>re.CartPageModule),canActivate:[er]},{path:"delivery-from-cart",loadChildren:()=>U.e(814).then(U.bind(U,1814)).then(re=>re.DeliveryFromCartPageModule),canActivate:[er]},{path:"paying",loadChildren:()=>Promise.all([U.e(592),U.e(557)]).then(U.bind(U,7557)).then(re=>re.PayingPageModule),canActivate:[er]},{path:"ordered",loadChildren:()=>U.e(549).then(U.bind(U,3549)).then(re=>re.OrderedPageModule),canActivate:[er]},{path:"delivery",loadChildren:()=>Promise.all([U.e(592),U.e(608)]).then(U.bind(U,5608)).then(re=>re.DeliveryPageModule),canActivate:[er]},{path:"products",loadChildren:()=>Promise.all([U.e(592),U.e(394)]).then(U.bind(U,7394)).then(re=>re.ProductsPageModule)},{path:"sign-in",loadChildren:()=>Promise.all([U.e(592),U.e(506)]).then(U.bind(U,3506)).then(re=>re.SignInPageModule)},{path:"admin",loadChildren:()=>Promise.all([U.e(592),U.e(455)]).then(U.bind(U,455)).then(re=>re.AdminPageModule)},{path:"",redirectTo:"products",pathMatch:"full"},{path:"**",redirectTo:"products",pathMatch:"full"}];let Er=(()=>{class re{}return re.\u0275fac=function(K){return new(K||re)},re.\u0275mod=O.oAB({type:re}),re.\u0275inj=O.cJS({imports:[[Jt.Bz.forRoot(Dn)],Jt.Bz]}),re})();var Rn=U(7816);function qt(re,ie){1&re&&(O.TgZ(0,"ul",22),O.TgZ(1,"li"),O.TgZ(2,"a",23),O._UZ(3,"span",24),O._uU(4," Admin"),O.qZA(),O.qZA(),O.qZA())}function Ss(re,ie){1&re&&(O.TgZ(0,"ul",22),O.TgZ(1,"li"),O.TgZ(2,"a",25),O._UZ(3,"span",26),O._uU(4," Profil"),O.qZA(),O.qZA(),O.TgZ(5,"li"),O.TgZ(6,"a",27),O._UZ(7,"span",28),O._uU(8," Rendel\xe9seim"),O.qZA(),O.qZA(),O.TgZ(9,"li"),O.TgZ(10,"a",29),O._UZ(11,"span",30),O._uU(12," Kos\xe1r "),O._UZ(13,"span"),O.qZA(),O.qZA(),O.qZA())}function Ii(re,ie){1&re&&(O.TgZ(0,"ul",22),O.TgZ(1,"li"),O.TgZ(2,"a",31),O._UZ(3,"span",32),O._uU(4," Bejelentkez\xe9s"),O.qZA(),O.qZA(),O.TgZ(5,"li"),O.TgZ(6,"a",33),O._UZ(7,"span",34),O._uU(8," Regisztr\xe1ci\xf3"),O.qZA(),O.qZA(),O.qZA())}let Ji=(()=>{class re{constructor(K){this.navbarService=K}ngOnInit(){}}return re.\u0275fac=function(K){return new(K||re)(O.Y36(xn.I))},re.\u0275cmp=O.Xpm({type:re,selectors:[["app-navbar"]],decls:43,vars:9,consts:[["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"],[1,"navbar","navbar-inverse"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12"],[1,"navbar-header"],["data-target","#mobile_menu","data-toggle","collapse",1,"navbar-toggle"],[1,"icon-bar"],["href","products",1,"navbar-brand"],["src","../../../assets/logo.jpg",2,"width","120%","height","170%"],["id","mobile_menu",1,"navbar-collapse","collapse"],[1,"nav","navbar-nav"],["href","about"],["href","contact"],["href","products"],["action","",1,"navbar-form"],[1,"form-group"],[1,"input-group"],["type","search","name","search","placeholder","Keres\xe9s...",1,"form-control"],[1,"input-group-addon"],[1,"glyphicon","glyphicon-search"],["class","nav navbar-nav navbar-right",4,"ngIf"],[1,"nav","navbar-nav","navbar-right"],["href","admin"],[1,"glyphicon","glyphicon-admin"],["href","profile"],[1,"glyphicon","glyphicon-user"],["href","delivery"],[1,"glyphicon","glyphicon-list-alt"],["href","cart"],[1,"glyphicon","glyphicon-shopping-cart"],["href","sign-in"],[1,"glyphicon","glyphicon-log-in"],["href","regist"],[1,"glyphicon","glyphicon-plus-sign"]],template:function(K,_e){1&K&&(O._UZ(0,"link",0),O.TgZ(1,"div",1),O.TgZ(2,"div",2),O.TgZ(3,"div",3),O.TgZ(4,"div",4),O.TgZ(5,"div",5),O.TgZ(6,"button",6),O._UZ(7,"span",7),O._UZ(8,"span",7),O._UZ(9,"span",7),O.qZA(),O.TgZ(10,"a",8),O._UZ(11,"img",9),O.qZA(),O.qZA(),O.TgZ(12,"div",10),O.TgZ(13,"ul",11),O.TgZ(14,"li"),O.TgZ(15,"a",12),O._uU(16,"R\xf3lunk"),O.qZA(),O.qZA(),O.TgZ(17,"li"),O.TgZ(18,"a",13),O._uU(19,"Kapcsolat"),O.qZA(),O.qZA(),O.TgZ(20,"li"),O.TgZ(21,"a",14),O._uU(22,"K\xf6r\xf6mlakk"),O.qZA(),O.qZA(),O.TgZ(23,"li"),O.TgZ(24,"a",14),O._uU(25,"\xc9p\xedt\u0151anyag"),O.qZA(),O.qZA(),O.TgZ(26,"li"),O.TgZ(27,"a",14),O._uU(28,"Kieg\xe9sz\xedt\u0151k"),O.qZA(),O.qZA(),O.qZA(),O.TgZ(29,"ul",11),O.TgZ(30,"li"),O.TgZ(31,"form",15),O.TgZ(32,"div",16),O.TgZ(33,"div",17),O._UZ(34,"input",18),O.TgZ(35,"span",19),O._UZ(36,"span",20),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.YNc(37,qt,5,0,"ul",21),O.ALo(38,"async"),O.YNc(39,Ss,14,0,"ul",21),O.ALo(40,"async"),O.YNc(41,Ii,9,0,"ul",21),O.ALo(42,"async"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA()),2&K&&(O.xp6(37),O.Q6J("ngIf",O.lcZ(38,3,_e.navbarService.userIsAdmin&&_e.navbarService.userLoggedIn)),O.xp6(2),O.Q6J("ngIf",O.lcZ(40,5,_e.navbarService.userLoggedIn)),O.xp6(2),O.Q6J("ngIf",!O.lcZ(42,7,_e.navbarService.userLoggedIn)))},directives:[Rn._Y,Rn.JL,w.O5],pipes:[w.Ov],styles:[""]}),re})(),ki=(()=>{class re{constructor(){this.title="webshop"}}return re.\u0275fac=function(K){return new(K||re)},re.\u0275cmp=O.Xpm({type:re,selectors:[["app-root"]],decls:2,vars:0,template:function(K,_e){1&K&&(O._UZ(0,"app-navbar"),O._UZ(1,"router-outlet"))},directives:[Ji,Jt.lC],styles:[""]}),re})();var Bn=U(2890);let Fi=(()=>{class re{}return re.\u0275fac=function(K){return new(K||re)},re.\u0275mod=O.oAB({type:re,bootstrap:[ki]}),re.\u0275inj=O.cJS({providers:[],imports:[[_n,Er,Bn.m,vn.hO.initializeApp(Gt_firebaseConfig),Wt.yb]]}),re})();(0,O.G48)(),nt().bootstrapModule(Fi).catch(re=>console.error(re))},1921:(lt,Me,U)=>{function w(Z,ve,fe,se,Ce,pe,ge){try{var Q=Z[pe](ge),J=Q.value}catch(ye){return void fe(ye)}Q.done?ve(J):Promise.resolve(J).then(se,Ce)}function O(Z){return function(){var ve=this,fe=arguments;return new Promise(function(se,Ce){var pe=Z.apply(ve,fe);function ge(J){w(pe,se,Ce,ge,Q,"next",J)}function Q(J){w(pe,se,Ce,ge,Q,"throw",J)}ge(void 0)})}}U.d(Me,{Z:()=>O})},614:(lt,Me,U)=>{U.d(Me,{Z:()=>Be});var w=U(9842),O=U(7817),Z=U(2646),ve=U(4516);class fe{constructor(Oe,je){this._delegate=Oe,this.firebase=je,(0,Z._addComponent)(Oe,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Oe,je=Z._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(Oe);return!$e.isInitialized()&&"EXPLICIT"===(null===(Pe=$e.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:je})}_removeServiceInstance(Oe,je=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(je)}_addComponent(Oe){(0,Z._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,Z._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function ge(){const Re=function(Re){const Oe={},je={__esModule:!0,initializeApp:function(kt,gt={}){const Zt=Z.initializeApp(kt,gt);if((0,w.r3)(Oe,Zt.name))return Oe[Zt.name];const Ft=new Re(Zt,je);return Oe[Zt.name]=Ft,Ft},app:$e,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function(kt){const gt=kt.name,Zt=gt.replace("-compat","");if(Z._registerComponent(kt)&&"PUBLIC"===kt.type){const Ft=(Ve=$e())=>{if("function"!=typeof Ve[Zt])throw Ce.create("invalid-app-argument",{appName:gt});return Ve[Zt]()};void 0!==kt.serviceProps&&(0,w.ZB)(Ft,kt.serviceProps),je[Zt]=Ft,Re.prototype[Zt]=function(...Ve){return this._getService.bind(this,gt).apply(this,kt.multipleInstances?Ve:[])}}return"PUBLIC"===kt.type?je[Zt]:null},removeApp:function(kt){delete Oe[kt]},useAsService:function(kt,gt){return"serverAuth"===gt?null:gt},modularAPIs:Z}};function $e(kt){if(!(0,w.r3)(Oe,kt=kt||Z._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:kt});return Oe[kt]}return je.default=je,Object.defineProperty(je,"apps",{get:function(){return Object.keys(Oe).map(kt=>Oe[kt])}}),$e.App=Re,je}(fe);return Re.INTERNAL=Object.assign(Object.assign({},Re.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(je){(0,w.ZB)(Re,je)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Re}(),J=new ve.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Re=self.firebase.SDK_VERSION;Re&&Re.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=Q;(0,Z.registerVersion)("@firebase/app-compat","0.1.23",undefined)},2646:(lt,Me,U)=>{U.r(Me),U.d(Me,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>ri,_addComponent:()=>li,_addOrOverwriteComponent:()=>Jn,_apps:()=>mr,_clearComponents:()=>ln,_components:()=>yr,_getProvider:()=>Yt,_registerComponent:()=>Ur,_removeServiceInstance:()=>zt,deleteApp:()=>In,getApp:()=>fn,getApps:()=>ze,initializeApp:()=>Xn,onLog:()=>Lt,registerVersion:()=>_r,setLogLevel:()=>Jr});var w=U(1921),O=U(7817),Z=U(4516),ve=U(9842);class fe{constructor(We){this.container=We}getPlatformInfoString(){return this.container.getProviders().map(ct=>{if(function(mt){const We=mt.getComponent();return"VERSION"===(null==We?void 0:We.type)}(ct)){const nt=ct.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(ct=>ct).join(" ")}}const Ce="@firebase/app",ge=new Z.Yd("@firebase/app"),ri="[DEFAULT]",Pi={[Ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mr=new Map,yr=new Map;function li(mt,We){try{mt.container.addComponent(We)}catch(ct){ge.debug(`Component ${We.name} failed to register with FirebaseApp ${mt.name}`,ct)}}function Jn(mt,We){mt.container.addOrOverwriteComponent(We)}function Ur(mt){const We=mt.name;if(yr.has(We))return ge.debug(`There were multiple attempts to register component ${We}.`),!1;yr.set(We,mt);for(const ct of mr.values())li(ct,mt);return!0}function Yt(mt,We){const ct=mt.container.getProvider("heartbeat").getImmediate({optional:!0});return ct&&ct.triggerHeartbeat(),mt.container.getProvider(We)}function zt(mt,We,ct=ri){Yt(mt,We).clearInstance(ct)}function ln(){yr.clear()}const wn=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class tn{constructor(We,ct,nt){this._isDeleted=!1,this._options=Object.assign({},We),this._config=Object.assign({},ct),this._name=ct.name,this._automaticDataCollectionEnabled=ct.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this.checkDestroyed(),this._automaticDataCollectionEnabled=We}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(We){this._isDeleted=We}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const ci="9.7.0";function Xn(mt,We={}){"object"!=typeof We&&(We={name:We});const ct=Object.assign({name:ri,automaticDataCollectionEnabled:!1},We),nt=ct.name;if("string"!=typeof nt||!nt)throw wn.create("bad-app-name",{appName:String(nt)});const un=mr.get(nt);if(un){if((0,ve.vZ)(mt,un.options)&&(0,ve.vZ)(ct,un.config))return un;throw wn.create("duplicate-app",{appName:nt})}const _n=new O.H0(nt);for(const ee of yr.values())_n.addComponent(ee);const oe=new tn(mt,ct,_n);return mr.set(nt,oe),oe}function fn(mt=ri){const We=mr.get(mt);if(!We)throw wn.create("no-app",{appName:mt});return We}function ze(){return Array.from(mr.values())}function In(mt){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,w.Z)(function*(mt){const We=mt.name;mr.has(We)&&(mr.delete(We),yield Promise.all(mt.container.getProviders().map(ct=>ct.delete())),mt.isDeleted=!0)})).apply(this,arguments)}function _r(mt,We,ct){var nt;let un=null!==(nt=Pi[mt])&&void 0!==nt?nt:mt;ct&&(un+=`-${ct}`);const _n=un.match(/\s|\//),oe=We.match(/\s|\//);if(_n||oe){const ee=[`Unable to register library "${un}" with version "${We}":`];return _n&&ee.push(`library name "${un}" contains illegal characters (whitespace or "/")`),_n&&oe&&ee.push("and"),oe&&ee.push(`version name "${We}" contains illegal characters (whitespace or "/")`),void ge.warn(ee.join(" "))}Ur(new O.wA(`${un}-version`,()=>({library:un,version:We}),"VERSION"))}function Lt(mt,We){if(null!==mt&&"function"!=typeof mt)throw wn.create("invalid-log-argument");(0,Z.Am)(mt,We)}function Jr(mt){(0,Z.Ub)(mt)}const ht="firebase-heartbeat-store";let jr=null;function ii(){return jr||(jr=(0,ve.X3)("firebase-heartbeat-database",1,(mt,We)=>{0===We&&mt.createObjectStore(ht)}).catch(mt=>{throw wn.create("storage-open",{originalErrorMessage:mt.message})})),jr}function Sn(){return(Sn=(0,w.Z)(function*(mt){try{return(yield ii()).transaction(ht).objectStore(ht).get(ir(mt))}catch(We){throw wn.create("storage-get",{originalErrorMessage:We.message})}})).apply(this,arguments)}function bt(mt,We){return Et.apply(this,arguments)}function Et(){return(Et=(0,w.Z)(function*(mt,We){try{const nt=(yield ii()).transaction(ht,"readwrite");return yield nt.objectStore(ht).put(We,ir(mt)),nt.complete}catch(ct){throw wn.create("storage-set",{originalErrorMessage:ct.message})}})).apply(this,arguments)}function ir(mt){return`${mt.name}!${mt.options.appId}`}class pn{constructor(We){this.container=We,this._heartbeatsCache=null;const ct=this.container.getProvider("app").getImmediate();this._storage=new cn(ct),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var We=this;return(0,w.Z)(function*(){const nt=We.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),un=Ct();if(null===We._heartbeatsCache&&(We._heartbeatsCache=yield We._heartbeatsCachePromise),We._heartbeatsCache.lastSentHeartbeatDate!==un&&!We._heartbeatsCache.heartbeats.some(_n=>_n.date===un))return We._heartbeatsCache.heartbeats.push({date:un,agent:nt}),We._heartbeatsCache.heartbeats=We._heartbeatsCache.heartbeats.filter(_n=>{const oe=new Date(_n.date).valueOf();return Date.now()-oe<=2592e6}),We._storage.overwrite(We._heartbeatsCache)})()}getHeartbeatsHeader(){var We=this;return(0,w.Z)(function*(){if(null===We._heartbeatsCache&&(yield We._heartbeatsCachePromise),null===We._heartbeatsCache||0===We._heartbeatsCache.heartbeats.length)return"";const ct=Ct(),{heartbeatsToSend:nt,unsentEntries:un}=function(mt,We=1024){const ct=[];let nt=mt.slice();for(const un of mt){const _n=ct.find(oe=>oe.agent===un.agent);if(_n){if(_n.dates.push(un.date),Un(ct)>We){_n.dates.pop();break}}else if(ct.push({agent:un.agent,dates:[un.date]}),Un(ct)>We){ct.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:ct,unsentEntries:nt}}(We._heartbeatsCache.heartbeats),_n=(0,ve.L)(JSON.stringify({version:2,heartbeats:nt}));return We._heartbeatsCache.lastSentHeartbeatDate=ct,un.length>0?(We._heartbeatsCache.heartbeats=un,yield We._storage.overwrite(We._heartbeatsCache)):(We._heartbeatsCache.heartbeats=[],We._storage.overwrite(We._heartbeatsCache)),_n})()}}function Ct(){return(new Date).toISOString().substring(0,10)}class cn{constructor(We){this.app=We,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var We=this;return(0,w.Z)(function*(){return(yield We._canUseIndexedDBPromise)&&(yield function(mt){return Sn.apply(this,arguments)}(We.app))||{heartbeats:[]}})()}overwrite(We){var ct=this;return(0,w.Z)(function*(){var nt;if(yield ct._canUseIndexedDBPromise){const _n=yield ct.read();return bt(ct.app,{lastSentHeartbeatDate:null!==(nt=We.lastSentHeartbeatDate)&&void 0!==nt?nt:_n.lastSentHeartbeatDate,heartbeats:We.heartbeats})}})()}add(We){var ct=this;return(0,w.Z)(function*(){var nt;if(yield ct._canUseIndexedDBPromise){const _n=yield ct.read();return bt(ct.app,{lastSentHeartbeatDate:null!==(nt=We.lastSentHeartbeatDate)&&void 0!==nt?nt:_n.lastSentHeartbeatDate,heartbeats:[..._n.heartbeats,...We.heartbeats]})}})()}}function Un(mt){return(0,ve.L)(JSON.stringify({version:2,heartbeats:mt})).length}Ur(new O.wA("platform-logger",We=>new fe(We),"PRIVATE")),Ur(new O.wA("heartbeat",We=>new pn(We),"PRIVATE")),_r(Ce,"0.7.22",""),_r(Ce,"0.7.22","esm2017"),_r("fire-js","")},7817:(lt,Me,U)=>{U.d(Me,{wA:()=>Z,H0:()=>pe});var w=U(1921),O=U(9842);class Z{constructor(Q,J,ye){this.name=Q,this.instanceFactory=J,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ve="[DEFAULT]";class fe{constructor(Q,J){this.name=Q,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const J=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(J)){const ye=new O.BH;if(this.instancesDeferred.set(J,ye),this.isInitialized(J)||this.shouldAutoInitialize())try{const we=this.getOrInitializeService({instanceIdentifier:J});we&&ye.resolve(we)}catch(we){}}return this.instancesDeferred.get(J).promise}getImmediate(Q){var J;const ye=this.normalizeInstanceIdentifier(null==Q?void 0:Q.identifier),we=null!==(J=null==Q?void 0:Q.optional)&&void 0!==J&&J;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(we)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(Ne){if(we)return null;throw Ne}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if("EAGER"===Q.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ve})}catch(J){}for(const[J,ye]of this.instancesDeferred.entries()){const we=this.normalizeInstanceIdentifier(J);try{const Ne=this.getOrInitializeService({instanceIdentifier:we});ye.resolve(Ne)}catch(Ne){}}}}clearInstance(Q=ve){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,w.Z)(function*(){const J=Array.from(Q.instances.values());yield Promise.all([...J.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...J.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ve){return this.instances.has(Q)}getOptions(Q=ve){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:J={}}=Q,ye=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const we=this.getOrInitializeService({instanceIdentifier:ye,options:J});for(const[Ne,Be]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(Ne)&&Be.resolve(we);return we}onInit(Q,J){var ye;const we=this.normalizeInstanceIdentifier(J),Ne=null!==(ye=this.onInitCallbacks.get(we))&&void 0!==ye?ye:new Set;Ne.add(Q),this.onInitCallbacks.set(we,Ne);const Be=this.instances.get(we);return Be&&Q(Be,we),()=>{Ne.delete(Q)}}invokeOnInitCallbacks(Q,J){const ye=this.onInitCallbacks.get(J);if(ye)for(const we of ye)try{we(Q,J)}catch(Ne){}}getOrInitializeService({instanceIdentifier:Q,options:J={}}){let ye=this.instances.get(Q);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=Q,ge===ve?void 0:ge),options:J}),this.instances.set(Q,ye),this.instancesOptions.set(Q,J),this.invokeOnInitCallbacks(ye,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ye)}catch(we){}var ge;return ye||null}normalizeInstanceIdentifier(Q=ve){return this.component?this.component.multipleInstances?Q:ve:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const J=this.getProvider(Q.name);if(J.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);J.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const J=new fe(Q,this);return this.providers.set(Q,J),J}getProviders(){return Array.from(this.providers.values())}}},4516:(lt,Me,U)=>{U.d(Me,{in:()=>O,Yd:()=>Ce,Ub:()=>pe,Am:()=>ge});const w=[];var O=(()=>{return(Q=O||(O={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",O;var Q})();const Z={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},ve=O.INFO,fe={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},se=(Q,J,...ye)=>{if(J<Q.logLevel)return;const we=(new Date).toISOString(),Ne=fe[J];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[Ne](`[${we}]  ${Q.name}:`,...ye)};class Ce{constructor(J){this.name=J,this._logLevel=ve,this._logHandler=se,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in O))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?Z[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...J),this._logHandler(this,O.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...J),this._logHandler(this,O.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,O.INFO,...J),this._logHandler(this,O.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,O.WARN,...J),this._logHandler(this,O.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...J),this._logHandler(this,O.ERROR,...J)}}function pe(Q){w.forEach(J=>{J.setLogLevel(Q)})}function ge(Q,J){for(const ye of w){let we=null;J&&J.level&&(we=Z[J.level]),ye.userLogHandler=null===Q?null:(Ne,Be,...Re)=>{const Oe=Re.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch(Pe){return null}}).filter(je=>je).join(" ");Be>=(null!=we?we:Ne.logLevel)&&Q({level:O[Be].toLowerCase(),message:Oe,args:Re,type:Ne.name})}}}},6019:(lt,Me,U)=>{U.d(Me,{mr:()=>Pe,Ov:()=>bi,ez:()=>Bi,K0:()=>Ce,uU:()=>Li,Do:()=>it,V_:()=>Q,Ye:()=>Ee,S$:()=>Oe,sg:()=>Fi,O5:()=>K,b0:()=>$e,lw:()=>pe,EM:()=>va,JF:()=>vs,p6:()=>ir,PM:()=>Zr,w_:()=>se,bD:()=>ji,q:()=>Z,Mx:()=>Ii,HT:()=>fe});var w=U(5312);let O=null;function Z(){return O}function fe(N){O||(O=N)}class se{}const Ce=new w.OlP("DocumentToken");let pe=(()=>{class N{historyGo(R){throw new Error("Not implemented")}}return N.\u0275fac=function(R){return new(R||N)},N.\u0275prov=w.Yz7({token:N,factory:function(){return(0,w.LFG)(J)},providedIn:"platform"}),N})();const Q=new w.OlP("Location Initialized");let J=(()=>{class N extends pe{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(R){const z=Z().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",R,!1),()=>z.removeEventListener("popstate",R)}onHashChange(R){const z=Z().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",R,!1),()=>z.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,z,ue){ye()?this._history.pushState(R,z,ue):this.location.hash=ue}replaceState(R,z,ue){ye()?this._history.replaceState(R,z,ue):this.location.hash=ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return N.\u0275fac=function(R){return new(R||N)(w.LFG(Ce))},N.\u0275prov=w.Yz7({token:N,factory:function(){return new J((0,w.LFG)(Ce))},providedIn:"platform"}),N})();function ye(){return!!window.history.pushState}function Ne(N,H){if(0==N.length)return H;if(0==H.length)return N;let R=0;return N.endsWith("/")&&R++,H.startsWith("/")&&R++,2==R?N+H.substring(1):1==R?N+H:N+"/"+H}function Be(N){const H=N.match(/#|\?|$/),R=H&&H.index||N.length;return N.slice(0,R-("/"===N[R-1]?1:0))+N.slice(R)}function Re(N){return N&&"?"!==N[0]?"?"+N:N}let Oe=(()=>{class N{historyGo(R){throw new Error("Not implemented")}}return N.\u0275fac=function(R){return new(R||N)},N.\u0275prov=w.Yz7({token:N,factory:function(){return function(N){const H=(0,w.LFG)(Ce).location;return new $e((0,w.LFG)(pe),H&&H.origin||"")}()},providedIn:"root"}),N})();const Pe=new w.OlP("appBaseHref");let $e=(()=>{class N extends Oe{constructor(R,z){if(super(),this._platformLocation=R,this._removeListenerFns=[],null==z&&(z=this._platformLocation.getBaseHrefFromDOM()),null==z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return Ne(this._baseHref,R)}path(R=!1){const z=this._platformLocation.pathname+Re(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&R?`${z}${ue}`:z}pushState(R,z,ue,A){const T=this.prepareExternalUrl(ue+Re(A));this._platformLocation.pushState(R,z,T)}replaceState(R,z,ue,A){const T=this.prepareExternalUrl(ue+Re(A));this._platformLocation.replaceState(R,z,T)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var z,ue;null==(ue=(z=this._platformLocation).historyGo)||ue.call(z,R)}}return N.\u0275fac=function(R){return new(R||N)(w.LFG(pe),w.LFG(Pe,8))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac}),N})(),it=(()=>{class N extends Oe{constructor(R,z){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(R){const z=Ne(this._baseHref,R);return z.length>0?"#"+z:z}pushState(R,z,ue,A){let T=this.prepareExternalUrl(ue+Re(A));0==T.length&&(T=this._platformLocation.pathname),this._platformLocation.pushState(R,z,T)}replaceState(R,z,ue,A){let T=this.prepareExternalUrl(ue+Re(A));0==T.length&&(T=this._platformLocation.pathname),this._platformLocation.replaceState(R,z,T)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var z,ue;null==(ue=(z=this._platformLocation).historyGo)||ue.call(z,R)}}return N.\u0275fac=function(R){return new(R||N)(w.LFG(pe),w.LFG(Pe,8))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac}),N})(),Ee=(()=>{class N{constructor(R,z){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=R;const ue=this._platformStrategy.getBaseHref();this._platformLocation=z,this._baseHref=Be(kt(ue)),this._platformStrategy.onPopState(A=>{this._subject.emit({url:this.path(!0),pop:!0,state:A.state,type:A.type})})}path(R=!1){return this.normalize(this._platformStrategy.path(R))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(R,z=""){return this.path()==this.normalize(R+Re(z))}normalize(R){return N.stripTrailingSlash(function(N,H){return N&&H.startsWith(N)?H.substring(N.length):H}(this._baseHref,kt(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._platformStrategy.prepareExternalUrl(R)}go(R,z="",ue=null){this._platformStrategy.pushState(ue,"",R,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Re(z)),ue)}replaceState(R,z="",ue=null){this._platformStrategy.replaceState(ue,"",R,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Re(z)),ue)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(R=0){var z,ue;null==(ue=(z=this._platformStrategy).historyGo)||ue.call(z,R)}onUrlChange(R){this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}))}_notifyUrlChangeListeners(R="",z){this._urlChangeListeners.forEach(ue=>ue(R,z))}subscribe(R,z,ue){return this._subject.subscribe({next:R,error:z,complete:ue})}}return N.normalizeQueryParams=Re,N.joinWithSlash=Ne,N.stripTrailingSlash=Be,N.\u0275fac=function(R){return new(R||N)(w.LFG(Oe),w.LFG(pe))},N.\u0275prov=w.Yz7({token:N,factory:function(){return new Ee((0,w.LFG)(Oe),(0,w.LFG)(pe))},providedIn:"root"}),N})();function kt(N){return N.replace(/\/index.html$/,"")}var Ft=(()=>((Ft=Ft||{})[Ft.Zero=0]="Zero",Ft[Ft.One=1]="One",Ft[Ft.Two=2]="Two",Ft[Ft.Few=3]="Few",Ft[Ft.Many=4]="Many",Ft[Ft.Other=5]="Other",Ft))(),Ve=(()=>((Ve=Ve||{})[Ve.Format=0]="Format",Ve[Ve.Standalone=1]="Standalone",Ve))(),Ot=(()=>((Ot=Ot||{})[Ot.Narrow=0]="Narrow",Ot[Ot.Abbreviated=1]="Abbreviated",Ot[Ot.Wide=2]="Wide",Ot[Ot.Short=3]="Short",Ot))(),tt=(()=>((tt=tt||{})[tt.Short=0]="Short",tt[tt.Medium=1]="Medium",tt[tt.Long=2]="Long",tt[tt.Full=3]="Full",tt))(),dt=(()=>((dt=dt||{})[dt.Decimal=0]="Decimal",dt[dt.Group=1]="Group",dt[dt.List=2]="List",dt[dt.PercentSign=3]="PercentSign",dt[dt.PlusSign=4]="PlusSign",dt[dt.MinusSign=5]="MinusSign",dt[dt.Exponential=6]="Exponential",dt[dt.SuperscriptingExponent=7]="SuperscriptingExponent",dt[dt.PerMille=8]="PerMille",dt[dt.Infinity=9]="Infinity",dt[dt.NaN=10]="NaN",dt[dt.TimeSeparator=11]="TimeSeparator",dt[dt.CurrencyDecimal=12]="CurrencyDecimal",dt[dt.CurrencyGroup=13]="CurrencyGroup",dt))();function Ur(N,H){return Lt((0,w.cg1)(N)[w.wAp.DateFormat],H)}function Yt(N,H){return Lt((0,w.cg1)(N)[w.wAp.TimeFormat],H)}function zt(N,H){return Lt((0,w.cg1)(N)[w.wAp.DateTimeFormat],H)}function ln(N,H){const R=(0,w.cg1)(N),z=R[w.wAp.NumberSymbols][H];if(void 0===z){if(H===dt.CurrencyDecimal)return R[w.wAp.NumberSymbols][dt.Decimal];if(H===dt.CurrencyGroup)return R[w.wAp.NumberSymbols][dt.Group]}return z}const fn=w.kL8;function ze(N){if(!N[w.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${N[w.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Lt(N,H){for(let R=H;R>-1;R--)if(void 0!==N[R])return N[R];throw new Error("Locale data API: locale data undefined")}function Jr(N){const[H,R]=N.split(":");return{hours:+H,minutes:+R}}const jr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ii={},Nr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Sn=(()=>((Sn=Sn||{})[Sn.Short=0]="Short",Sn[Sn.ShortGMT=1]="ShortGMT",Sn[Sn.Long=2]="Long",Sn[Sn.Extended=3]="Extended",Sn))(),bt=(()=>((bt=bt||{})[bt.FullYear=0]="FullYear",bt[bt.Month=1]="Month",bt[bt.Date=2]="Date",bt[bt.Hours=3]="Hours",bt[bt.Minutes=4]="Minutes",bt[bt.Seconds=5]="Seconds",bt[bt.FractionalSeconds=6]="FractionalSeconds",bt[bt.Day=7]="Day",bt))(),Et=(()=>((Et=Et||{})[Et.DayPeriods=0]="DayPeriods",Et[Et.Days=1]="Days",Et[Et.Months=2]="Months",Et[Et.Eras=3]="Eras",Et))();function ir(N,H,R,z){let ue=function(N){if(kn(N))return N;if("number"==typeof N&&!isNaN(N))return new Date(N);if("string"==typeof N){if(N=N.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(N)){const[ue,A=1,T=1]=N.split("-").map(C=>+C);return wi(ue,A-1,T)}const R=parseFloat(N);if(!isNaN(N-R))return new Date(R);let z;if(z=N.match(jr))return function(N){const H=new Date(0);let R=0,z=0;const ue=N[8]?H.setUTCFullYear:H.setFullYear,A=N[8]?H.setUTCHours:H.setHours;N[9]&&(R=Number(N[9]+N[10]),z=Number(N[9]+N[11])),ue.call(H,Number(N[1]),Number(N[2])-1,Number(N[3]));const T=Number(N[4]||0)-R,C=Number(N[5]||0)-z,B=Number(N[6]||0),be=Math.floor(1e3*parseFloat("0."+(N[7]||0)));return A.call(H,T,C,B,be),H}(z)}const H=new Date(N);if(!kn(H))throw new Error(`Unable to convert "${N}" into a date`);return H}(N);H=yn(R,H)||H;let C,T=[];for(;H;){if(C=Nr.exec(H),!C){T.push(H);break}{T=T.concat(C.slice(1));const et=T.pop();if(!et)break;H=et}}let B=ue.getTimezoneOffset();z&&(B=De(z,B),ue=function(N,H,R){const ue=N.getTimezoneOffset();return function(N,H){return(N=new Date(N.getTime())).setMinutes(N.getMinutes()+H),N}(N,-1*(De(H,ue)-ue))}(ue,z));let be="";return T.forEach(et=>{const ft=function(N){if(de[N])return de[N];let H;switch(N){case"G":case"GG":case"GGG":H=yt(Et.Eras,Ot.Abbreviated);break;case"GGGG":H=yt(Et.Eras,Ot.Wide);break;case"GGGGG":H=yt(Et.Eras,Ot.Narrow);break;case"y":H=cn(bt.FullYear,1,0,!1,!0);break;case"yy":H=cn(bt.FullYear,2,0,!0,!0);break;case"yyy":H=cn(bt.FullYear,3,0,!1,!0);break;case"yyyy":H=cn(bt.FullYear,4,0,!1,!0);break;case"Y":H=ee(1);break;case"YY":H=ee(2,!0);break;case"YYY":H=ee(3);break;case"YYYY":H=ee(4);break;case"M":case"L":H=cn(bt.Month,1,1);break;case"MM":case"LL":H=cn(bt.Month,2,1);break;case"MMM":H=yt(Et.Months,Ot.Abbreviated);break;case"MMMM":H=yt(Et.Months,Ot.Wide);break;case"MMMMM":H=yt(Et.Months,Ot.Narrow);break;case"LLL":H=yt(Et.Months,Ot.Abbreviated,Ve.Standalone);break;case"LLLL":H=yt(Et.Months,Ot.Wide,Ve.Standalone);break;case"LLLLL":H=yt(Et.Months,Ot.Narrow,Ve.Standalone);break;case"w":H=oe(1);break;case"ww":H=oe(2);break;case"W":H=oe(1,!0);break;case"d":H=cn(bt.Date,1);break;case"dd":H=cn(bt.Date,2);break;case"c":case"cc":H=cn(bt.Day,1);break;case"ccc":H=yt(Et.Days,Ot.Abbreviated,Ve.Standalone);break;case"cccc":H=yt(Et.Days,Ot.Wide,Ve.Standalone);break;case"ccccc":H=yt(Et.Days,Ot.Narrow,Ve.Standalone);break;case"cccccc":H=yt(Et.Days,Ot.Short,Ve.Standalone);break;case"E":case"EE":case"EEE":H=yt(Et.Days,Ot.Abbreviated);break;case"EEEE":H=yt(Et.Days,Ot.Wide);break;case"EEEEE":H=yt(Et.Days,Ot.Narrow);break;case"EEEEEE":H=yt(Et.Days,Ot.Short);break;case"a":case"aa":case"aaa":H=yt(Et.DayPeriods,Ot.Abbreviated);break;case"aaaa":H=yt(Et.DayPeriods,Ot.Wide);break;case"aaaaa":H=yt(Et.DayPeriods,Ot.Narrow);break;case"b":case"bb":case"bbb":H=yt(Et.DayPeriods,Ot.Abbreviated,Ve.Standalone,!0);break;case"bbbb":H=yt(Et.DayPeriods,Ot.Wide,Ve.Standalone,!0);break;case"bbbbb":H=yt(Et.DayPeriods,Ot.Narrow,Ve.Standalone,!0);break;case"B":case"BB":case"BBB":H=yt(Et.DayPeriods,Ot.Abbreviated,Ve.Format,!0);break;case"BBBB":H=yt(Et.DayPeriods,Ot.Wide,Ve.Format,!0);break;case"BBBBB":H=yt(Et.DayPeriods,Ot.Narrow,Ve.Format,!0);break;case"h":H=cn(bt.Hours,1,-12);break;case"hh":H=cn(bt.Hours,2,-12);break;case"H":H=cn(bt.Hours,1);break;case"HH":H=cn(bt.Hours,2);break;case"m":H=cn(bt.Minutes,1);break;case"mm":H=cn(bt.Minutes,2);break;case"s":H=cn(bt.Seconds,1);break;case"ss":H=cn(bt.Seconds,2);break;case"S":H=cn(bt.FractionalSeconds,1);break;case"SS":H=cn(bt.FractionalSeconds,2);break;case"SSS":H=cn(bt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":H=We(Sn.Short);break;case"ZZZZZ":H=We(Sn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":H=We(Sn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":H=We(Sn.Long);break;default:return null}return de[N]=H,H}(et);be+=ft?ft(ue,R,B):"''"===et?"'":et.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),be}function wi(N,H,R){const z=new Date(0);return z.setFullYear(N,H,R),z.setHours(0,0,0),z}function yn(N,H){const R=function(N){return(0,w.cg1)(N)[w.wAp.LocaleId]}(N);if(ii[R]=ii[R]||{},ii[R][H])return ii[R][H];let z="";switch(H){case"shortDate":z=Ur(N,tt.Short);break;case"mediumDate":z=Ur(N,tt.Medium);break;case"longDate":z=Ur(N,tt.Long);break;case"fullDate":z=Ur(N,tt.Full);break;case"shortTime":z=Yt(N,tt.Short);break;case"mediumTime":z=Yt(N,tt.Medium);break;case"longTime":z=Yt(N,tt.Long);break;case"fullTime":z=Yt(N,tt.Full);break;case"short":const ue=yn(N,"shortTime"),A=yn(N,"shortDate");z=pn(zt(N,tt.Short),[ue,A]);break;case"medium":const T=yn(N,"mediumTime"),C=yn(N,"mediumDate");z=pn(zt(N,tt.Medium),[T,C]);break;case"long":const B=yn(N,"longTime"),be=yn(N,"longDate");z=pn(zt(N,tt.Long),[B,be]);break;case"full":const et=yn(N,"fullTime"),ft=yn(N,"fullDate");z=pn(zt(N,tt.Full),[et,ft])}return z&&(ii[R][H]=z),z}function pn(N,H){return H&&(N=N.replace(/\{([^}]+)}/g,function(R,z){return null!=H&&z in H?H[z]:R})),N}function Ct(N,H,R="-",z,ue){let A="";(N<0||ue&&N<=0)&&(ue?N=1-N:(N=-N,A=R));let T=String(N);for(;T.length<H;)T="0"+T;return z&&(T=T.substr(T.length-H)),A+T}function cn(N,H,R=0,z=!1,ue=!1){return function(A,T){let C=function(N,H){switch(N){case bt.FullYear:return H.getFullYear();case bt.Month:return H.getMonth();case bt.Date:return H.getDate();case bt.Hours:return H.getHours();case bt.Minutes:return H.getMinutes();case bt.Seconds:return H.getSeconds();case bt.FractionalSeconds:return H.getMilliseconds();case bt.Day:return H.getDay();default:throw new Error(`Unknown DateType value "${N}".`)}}(N,A);if((R>0||C>-R)&&(C+=R),N===bt.Hours)0===C&&-12===R&&(C=12);else if(N===bt.FractionalSeconds)return function(N,H){return Ct(N,3).substr(0,H)}(C,H);const B=ln(T,dt.MinusSign);return Ct(C,H,B,z,ue)}}function yt(N,H,R=Ve.Format,z=!1){return function(ue,A){return function(N,H,R,z,ue,A){switch(R){case Et.Months:return function(N,H,R){const z=(0,w.cg1)(N),A=Lt([z[w.wAp.MonthsFormat],z[w.wAp.MonthsStandalone]],H);return Lt(A,R)}(H,ue,z)[N.getMonth()];case Et.Days:return function(N,H,R){const z=(0,w.cg1)(N),A=Lt([z[w.wAp.DaysFormat],z[w.wAp.DaysStandalone]],H);return Lt(A,R)}(H,ue,z)[N.getDay()];case Et.DayPeriods:const T=N.getHours(),C=N.getMinutes();if(A){const be=function(N){const H=(0,w.cg1)(N);return ze(H),(H[w.wAp.ExtraData][2]||[]).map(z=>"string"==typeof z?Jr(z):[Jr(z[0]),Jr(z[1])])}(H),et=function(N,H,R){const z=(0,w.cg1)(N);ze(z);const A=Lt([z[w.wAp.ExtraData][0],z[w.wAp.ExtraData][1]],H)||[];return Lt(A,R)||[]}(H,ue,z),ft=be.findIndex(on=>{if(Array.isArray(on)){const[nn,tr]=on,qn=T>=nn.hours&&C>=nn.minutes,$i=T<tr.hours||T===tr.hours&&C<tr.minutes;if(nn.hours<tr.hours){if(qn&&$i)return!0}else if(qn||$i)return!0}else if(on.hours===T&&on.minutes===C)return!0;return!1});if(-1!==ft)return et[ft]}return function(N,H,R){const z=(0,w.cg1)(N),A=Lt([z[w.wAp.DayPeriodsFormat],z[w.wAp.DayPeriodsStandalone]],H);return Lt(A,R)}(H,ue,z)[T<12?0:1];case Et.Eras:return function(N,H){return Lt((0,w.cg1)(N)[w.wAp.Eras],H)}(H,z)[N.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${R}`)}}(ue,A,N,H,R,z)}}function We(N){return function(H,R,z){const ue=-1*z,A=ln(R,dt.MinusSign),T=ue>0?Math.floor(ue/60):Math.ceil(ue/60);switch(N){case Sn.Short:return(ue>=0?"+":"")+Ct(T,2,A)+Ct(Math.abs(ue%60),2,A);case Sn.ShortGMT:return"GMT"+(ue>=0?"+":"")+Ct(T,1,A);case Sn.Long:return"GMT"+(ue>=0?"+":"")+Ct(T,2,A)+":"+Ct(Math.abs(ue%60),2,A);case Sn.Extended:return 0===z?"Z":(ue>=0?"+":"")+Ct(T,2,A)+":"+Ct(Math.abs(ue%60),2,A);default:throw new Error(`Unknown zone width "${N}"`)}}}function _n(N){return wi(N.getFullYear(),N.getMonth(),N.getDate()+(4-N.getDay()))}function oe(N,H=!1){return function(R,z){let ue;if(H){const A=new Date(R.getFullYear(),R.getMonth(),1).getDay()-1,T=R.getDate();ue=1+Math.floor((T+A)/7)}else{const A=_n(R),T=function(N){const H=wi(N,0,1).getDay();return wi(N,0,1+(H<=4?4:11)-H)}(A.getFullYear()),C=A.getTime()-T.getTime();ue=1+Math.round(C/6048e5)}return Ct(ue,N,ln(z,dt.MinusSign))}}function ee(N,H=!1){return function(R,z){return Ct(_n(R).getFullYear(),N,ln(z,dt.MinusSign),H)}}const de={};function De(N,H){N=N.replace(/:/g,"");const R=Date.parse("Jan 01, 1970 00:00:00 "+N)/6e4;return isNaN(R)?H:R}function kn(N){return N instanceof Date&&!isNaN(N.valueOf())}class Er{}let qt=(()=>{class N extends Er{constructor(R){super(),this.locale=R}getPluralCategory(R,z){switch(fn(z||this.locale)(R)){case Ft.Zero:return"zero";case Ft.One:return"one";case Ft.Two:return"two";case Ft.Few:return"few";case Ft.Many:return"many";default:return"other"}}}return N.\u0275fac=function(R){return new(R||N)(w.LFG(w.soG))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac}),N})();function Ii(N,H){H=encodeURIComponent(H);for(const R of N.split(";")){const z=R.indexOf("="),[ue,A]=-1==z?[R,""]:[R.slice(0,z),R.slice(z+1)];if(ue.trim()===H)return decodeURIComponent(A)}return null}class Bn{constructor(H,R,z,ue){this.$implicit=H,this.ngForOf=R,this.index=z,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fi=(()=>{class N{constructor(R,z,ue){this._viewContainer=R,this._template=z,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;if(!this._differ&&R)try{this._differ=this._differs.find(R).create(this.ngForTrackBy)}catch(z){throw new Error(`Cannot find a differ supporting object '${R}' of type '${function(N){return N.name||typeof N}(R)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const z=[];R.forEachOperation((ue,A,T)=>{if(null==ue.previousIndex){const C=this._viewContainer.createEmbeddedView(this._template,new Bn(null,this._ngForOf,-1,-1),null===T?void 0:T),B=new re(ue,C);z.push(B)}else if(null==T)this._viewContainer.remove(null===A?void 0:A);else if(null!==A){const C=this._viewContainer.get(A);this._viewContainer.move(C,T);const B=new re(ue,C);z.push(B)}});for(let ue=0;ue<z.length;ue++)this._perViewChange(z[ue].view,z[ue].record);for(let ue=0,A=this._viewContainer.length;ue<A;ue++){const T=this._viewContainer.get(ue);T.context.index=ue,T.context.count=A,T.context.ngForOf=this._ngForOf}R.forEachIdentityChange(ue=>{this._viewContainer.get(ue.currentIndex).context.$implicit=ue.item})}_perViewChange(R,z){R.context.$implicit=z.item}static ngTemplateContextGuard(R,z){return!0}}return N.\u0275fac=function(R){return new(R||N)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),N})();class re{constructor(H,R){this.record=H,this.view=R}}let K=(()=>{class N{constructor(R,z){this._viewContainer=R,this._context=new _e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){He("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){He("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,z){return!0}}return N.\u0275fac=function(R){return new(R||N)(w.Y36(w.s_b),w.Y36(w.Rgc))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),N})();class _e{constructor(){this.$implicit=null,this.ngIf=null}}function He(N,H){if(H&&!H.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,w.AaK)(H)}'.`)}function fr(N,H){return Error(`InvalidPipeArgument: '${H}' for pipe '${(0,w.AaK)(N)}'`)}class Gr{createSubscription(H,R){return H.subscribe({next:R,error:z=>{throw z}})}dispose(H){H.unsubscribe()}onDestroy(H){H.unsubscribe()}}class Or{createSubscription(H,R){return H.then(R,z=>{throw z})}dispose(H){}onDestroy(H){}}const gs=new Or,xs=new Gr;let bi=(()=>{class N{constructor(R){this._ref=R,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(R){return this._obj?R!==this._obj?(this._dispose(),this.transform(R)):this._latestValue:(R&&this._subscribe(R),this._latestValue)}_subscribe(R){this._obj=R,this._strategy=this._selectStrategy(R),this._subscription=this._strategy.createSubscription(R,z=>this._updateLatestValue(R,z))}_selectStrategy(R){if((0,w.QGY)(R))return gs;if((0,w.F4k)(R))return xs;throw fr(N,R)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(R,z){R===this._obj&&(this._latestValue=z,this._ref.markForCheck())}}return N.\u0275fac=function(R){return new(R||N)(w.Y36(w.sBO,16))},N.\u0275pipe=w.Yjl({name:"async",type:N,pure:!1}),N})();const Ms=new w.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Li=(()=>{class N{constructor(R,z){this.locale=R,this.defaultTimezone=z}transform(R,z="mediumDate",ue,A){var T;if(null==R||""===R||R!=R)return null;try{return ir(R,z,A||this.locale,null!=(T=null!=ue?ue:this.defaultTimezone)?T:void 0)}catch(C){throw fr(N,C.message)}}}return N.\u0275fac=function(R){return new(R||N)(w.Y36(w.soG,16),w.Y36(Ms,24))},N.\u0275pipe=w.Yjl({name:"date",type:N,pure:!0}),N})(),Bi=(()=>{class N{}return N.\u0275fac=function(R){return new(R||N)},N.\u0275mod=w.oAB({type:N}),N.\u0275inj=w.cJS({providers:[{provide:Er,useClass:qt}]}),N})();const ji="browser";function Zr(N){return"server"===N}let va=(()=>{class N{}return N.\u0275prov=(0,w.Yz7)({token:N,providedIn:"root",factory:()=>new Pr((0,w.LFG)(Ce),window)}),N})();class Pr{constructor(H,R){this.document=H,this.window=R,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const R=function(N,H){const R=N.getElementById(H)||N.getElementsByName(H)[0];if(R)return R;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const z=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let ue=z.currentNode;for(;ue;){const A=ue.shadowRoot;if(A){const T=A.getElementById(H)||A.querySelector(`[name="${H}"]`);if(T)return T}ue=z.nextNode()}}return null}(this.document,H);R&&(this.scrollToElement(R),this.attemptFocus(R))}setHistoryScrollRestoration(H){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=H)}}scrollToElement(H){const R=H.getBoundingClientRect(),z=R.left+this.window.pageXOffset,ue=R.top+this.window.pageYOffset,A=this.offset();this.window.scrollTo(z-A[0],ue-A[1])}attemptFocus(H){return H.focus(),this.document.activeElement===H}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const H=wr(this.window.history)||wr(Object.getPrototypeOf(this.window.history));return!(!H||!H.writable&&!H.set)}catch(H){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(H){return!1}}}function wr(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class vs{}},5312:(lt,Me,U)=>{U.d(Me,{deG:()=>jd,tb:()=>bb,AFp:()=>Eb,ip1:()=>kw,CZH:()=>Up,hGG:()=>zT,z2F:()=>cy,sBO:()=>mT,Sil:()=>Vw,_Vd:()=>Wh,EJc:()=>Db,SBq:()=>tl,qLn:()=>ti,vpe:()=>Bl,tBr:()=>La,XFs:()=>ht,OlP:()=>Bt,zs3:()=>ni,ZZ4:()=>CE,aQg:()=>DE,soG:()=>EE,YKP:()=>sy,h0i:()=>kc,PXZ:()=>uT,R0b:()=>Ka,FiY:()=>bo,Lbi:()=>Ib,g9A:()=>wb,Qsj:()=>mw,FYo:()=>ny,JOm:()=>$s,Tiy:()=>Pp,q3G:()=>br,tp0:()=>Va,Rgc:()=>uy,dDg:()=>Mb,q4F:()=>kp,GfV:()=>ry,s_b:()=>yE,ifc:()=>pn,eFA:()=>kb,G48:()=>tT,Gpc:()=>Re,X6Q:()=>Hw,_c5:()=>UT,VLi:()=>eT,c2e:()=>Cb,zSh:()=>fa,wAp:()=>an,vHH:()=>$e,EiD:()=>Yi,mCW:()=>au,qzn:()=>yl,JVY:()=>_l,pB0:()=>lf,eBb:()=>uf,L6k:()=>Pu,LAX:()=>ja,cg1:()=>km,Tjo:()=>TT,kL8:()=>Tv,yhl:()=>Kd,dqk:()=>yt,sIi:()=>Sd,CqO:()=>Od,QGY:()=>xh,F4k:()=>H_,RDi:()=>vs,AaK:()=>we,z3N:()=>Ba,qOj:()=>rm,TTD:()=>Yn,_Bn:()=>Xm,xp6:()=>uh,uIk:()=>Dh,ekj:()=>Im,Suo:()=>JI,Xpm:()=>Xe,lG2:()=>lr,Yz7:()=>tn,cJS:()=>Xn,oAB:()=>sr,Yjl:()=>Cr,Y36:()=>Fl,_UZ:()=>dp,BQk:()=>hp,ynx:()=>Qu,qZA:()=>_m,TgZ:()=>ym,EpF:()=>fp,n5z:()=>Vt,LFG:()=>oi,$8M:()=>rn,$Z:()=>Nd,NdJ:()=>Pd,CRH:()=>XI,oxw:()=>_u,ALo:()=>Wn,lcZ:()=>Ts,Q6J:()=>cp,s9C:()=>pp,iGM:()=>QI,MAs:()=>hm,CHM:()=>Ia,LSH:()=>Yd,YNc:()=>cm,_uU:()=>Tm,Oqu:()=>vp,hij:()=>Ul});var w=U(7807),O=U(2858),Z=U(9423),ve=U(9301),fe=U(6705);var pe=U(6866);function ge(){return new w.xQ}function J(t){for(let n in t)if(t[n]===J)return n;throw Error("Could not find renamed property on target object.")}function ye(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function we(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(we).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Ne(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Be=J({__forward_ref__:J});function Re(t){return t.__forward_ref__=Re,t.toString=function(){return we(this())},t}function Oe(t){return je(t)?t():t}function je(t){return"function"==typeof t&&t.hasOwnProperty(Be)&&t.__forward_ref__===Re}class $e extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function ot(t){return"string"==typeof t?t:null==t?"":String(t)}function Kt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ot(t)}function Ft(t,n){const i=n?` in ${n}`:"";throw new $e("201",`No provider for ${Kt(t)} found${i}`)}function Yt(t,n){null==t&&function(t,n,i,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${i} ${a} ${n} <=Actual]`))}(n,t,null,"!=")}function tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function fn(t){return ze(t,Lt)||ze(t,Br)}function ze(t,n){return t.hasOwnProperty(n)?t[n]:null}function _r(t){return t&&(t.hasOwnProperty(Jr)||t.hasOwnProperty(Xr))?t[Jr]:null}const Lt=J({\u0275prov:J}),Jr=J({\u0275inj:J}),Br=J({ngInjectableDef:J}),Xr=J({ngInjectorDef:J});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let jr;function Nr(t){const n=jr;return jr=t,n}function Sn(t,n,i){const a=fn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:i&ht.Optional?null:void 0!==n?n:void Ft(we(t),"Injector")}function Et(t){return{toString:t}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),pn=(()=>{return(t=pn||(pn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",pn;var t})();const Ct="undefined"!=typeof globalThis&&globalThis,$r="undefined"!=typeof window&&window,cn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yt=Ct||"undefined"!=typeof global&&global||$r||cn,ct={},nt=[],un=J({\u0275cmp:J}),_n=J({\u0275dir:J}),oe=J({\u0275pipe:J}),ee=J({\u0275mod:J}),de=J({\u0275fac:J}),Ae=J({__NG_ELEMENT_ID__:J});let De=0;function Xe(t){return Et(()=>{const i={},a={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||nt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||pn.Emulated,id:"c",styles:t.styles||nt,_:null,setInput:null,schemas:t.schemas||null,tView:null},u=t.directives,c=t.features,p=t.pipes;return a.id+=De++,a.inputs=ur(t.inputs,i),a.outputs=ur(t.outputs),c&&c.forEach(m=>m(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(dn):null,a.pipeDefs=p?()=>("function"==typeof p?p():p).map(zn):null,a})}function dn(t){return Tt(t)||function(t){return t[_n]||null}(t)}function zn(t){return function(t){return t[oe]||null}(t)}const kn={};function sr(t){return Et(()=>{const n={type:t.type,bootstrap:t.bootstrap||nt,declarations:t.declarations||nt,imports:t.imports||nt,exports:t.exports||nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(kn[t.id]=t.type),n})}function ur(t,n){if(null==t)return ct;const i={};for(const a in t)if(t.hasOwnProperty(a)){let u=t[a],c=u;Array.isArray(u)&&(c=u[1],u=u[0]),i[u]=a,n&&(n[u]=c)}return i}const lr=Xe;function Cr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Tt(t){return t[un]||null}function Hn(t,n){const i=t[ee]||null;if(!i&&!0===n)throw new Error(`Type ${we(t)} does not have '\u0275mod' property.`);return i}const K=20;function Hr(t){return Array.isArray(t)&&"object"==typeof t[1]}function Tr(t){return Array.isArray(t)&&!0===t[1]}function Po(t){return 0!=(8&t.flags)}function fr(t){return 2==(2&t.flags)}function Gr(t){return 1==(1&t.flags)}function Or(t){return null!==t.template}function gs(t){return 0!=(512&t[2])}function Bi(t,n){return t.hasOwnProperty(de)?t[de]:null}class ji{constructor(n,i,a){this.previousValue=n,this.currentValue=i,this.firstChange=a}isFirstChange(){return this.firstChange}}function Yn(){return ko}function ko(t){return t.type.prototype.ngOnChanges&&(t.setInput=po),rs}function rs(){const t=Os(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===ct)t.previous=n;else for(let a in n)i[a]=n[a];t.current=null,this.ngOnChanges(n)}}function po(t,n,i,a){const u=Os(t)||function(t,n){return t[Zr]=n}(t,{previous:ct,current:null}),c=u.current||(u.current={}),p=u.previous,m=this.declaredInputs[i],I=p[m];c[m]=new ji(I&&I.currentValue,n,p===ct),t[a]=n}Yn.ngInherit=!0;const Zr="__ngSimpleChanges__";function Os(t){return t[Zr]||null}let si;function vs(t){si=t}function R(t){return!!t.listen}const z={createRenderer:(t,n)=>void 0!==si?si:"undefined"!=typeof document?document:void 0};function A(t){for(;Array.isArray(t);)t=t[0];return t}function B(t,n){return A(n[t])}function be(t,n){return A(n[t.index])}function ft(t,n){return t.data[n]}function on(t,n){return t[n]}function nn(t,n){const i=n[t];return Hr(i)?i:i[0]}function tr(t){return 4==(4&t[2])}function qn(t){return 128==(128&t[2])}function Yr(t,n){return null==n?null:t[n]}function ls(t){t[18]=0}function Hi(t,n){t[5]+=n;let i=t,a=t[3];for(;null!==a&&(1===n&&1===i[5]||-1===n&&0===i[5]);)a[5]+=n,i=a,a=a[3]}const wt={lFrame:ss(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wa(){return wt.bindingsEnabled}function qe(){return wt.lFrame.lView}function En(){return wt.lFrame.tView}function Ia(t){return wt.lFrame.contextLView=t,t[8]}function pr(){let t=ks();for(;null!==t&&64===t.type;)t=t.parent;return t}function ks(){return wt.lFrame.currentTNode}function cs(t,n){const i=wt.lFrame;i.currentTNode=t,i.isParent=n}function Es(){return wt.lFrame.isParent}function Ya(){wt.lFrame.isParent=!1}function Fs(){return wt.isInCheckNoChangesMode}function Gi(t){wt.isInCheckNoChangesMode=t}function Ci(){return wt.lFrame.bindingIndex++}function Jo(t,n){const i=wt.lFrame;i.bindingIndex=i.bindingRootIndex=t,Xo(n)}function Xo(t){wt.lFrame.currentDirectiveIndex=t}function Da(){return wt.lFrame.currentQueryIndex}function Ta(t){wt.lFrame.currentQueryIndex=t}function Qa(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Cu(t,n,i){if(i&ht.SkipSelf){let u=n,c=t;for(;!(u=u.parent,null!==u||i&ht.Host||(u=Qa(c),null===u||(c=c[15],10&u.type))););if(null===u)return!1;n=u,t=c}const a=wt.lFrame=Du();return a.currentTNode=n,a.lView=t,!0}function Ls(t){const n=Du(),i=t[1];wt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Du(){const t=wt.lFrame,n=null===t?null:t.child;return null===n?ss(t):n}function ss(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function ta(){const t=wt.lFrame;return wt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Aa=ta;function Vo(){const t=ta();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fr(){return wt.lFrame.selectedIndex}function Vs(t){wt.lFrame.selectedIndex=t}function gr(){const t=wt.lFrame;return ft(t.tView,t.selectedIndex)}function Lr(t,n){for(let i=n.directiveStart,a=n.directiveEnd;i<a;i++){const c=t.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:m,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:V}=c;p&&(t.contentHooks||(t.contentHooks=[])).push(-i,p),m&&((t.contentHooks||(t.contentHooks=[])).push(i,m),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,m)),I&&(t.viewHooks||(t.viewHooks=[])).push(-i,I),x&&((t.viewHooks||(t.viewHooks=[])).push(i,x),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,x)),null!=V&&(t.destroyHooks||(t.destroyHooks=[])).push(i,V)}}function Ys(t,n,i){Bo(t,n,3,i)}function sa(t,n,i,a){(3&t[2])===i&&Bo(t,n,i,a)}function Xa(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function Bo(t,n,i,a){const c=null!=a?a:-1,p=n.length-1;let m=0;for(let I=void 0!==a?65535&t[18]:0;I<p;I++)if("number"==typeof n[I+1]){if(m=n[I],null!=a&&m>=a)break}else n[I]<0&&(t[18]+=65536),(m<c||-1==c)&&(oa(t,i,n,I),t[18]=(4294901760&t[18])+I+2),I++}function oa(t,n,i,a){const u=i[a]<0,c=i[a+1],m=t[u?-i[a]:i[a]];if(u){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{c.call(m)}finally{}}}else try{c.call(m)}finally{}}class jn{constructor(n,i,a){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=a}}function Js(t,n,i){const a=R(t);let u=0;for(;u<i.length;){const c=i[u];if("number"==typeof c){if(0!==c)break;u++;const p=i[u++],m=i[u++],I=i[u++];a?t.setAttribute(n,m,I,p):n.setAttributeNS(p,m,I)}else{const p=c,m=i[++u];Au(p)?a&&t.setProperty(n,p,m):a?t.setAttribute(n,p,m):n.setAttribute(p,m),u++}}return u}function al(t){return 3===t||4===t||6===t}function Au(t){return 64===t.charCodeAt(0)}function Xs(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?i=u:0===i||Bc(t,i,u,null,-1===i||2===i?n[++a]:null)}}return t}function Bc(t,n,i,a,u){let c=0,p=t.length;if(-1===n)p=-1;else for(;c<t.length;){const m=t[c++];if("number"==typeof m){if(m===n){p=-1;break}if(m>n){p=c-1;break}}}for(;c<t.length;){const m=t[c];if("number"==typeof m)break;if(m===i){if(null===a)return void(null!==u&&(t[c+1]=u));if(a===t[c+1])return void(t[c+2]=u)}c++,null!==a&&c++,null!==u&&c++}-1!==p&&(t.splice(p,0,n),c=p+1),t.splice(c++,0,i),null!==a&&t.splice(c++,0,a),null!==u&&t.splice(c++,0,u)}function ds(t){return-1!==t}function Di(t){return 32767&t}function eo(t,n){let i=function(t){return t>>16}(t),a=n;for(;i>0;)a=a[15],i--;return a}let Su=!0;function Ma(t){const n=Su;return Su=t,n}let Ra=0;function Ze(t,n){const i=vo(t,n);if(-1!==i)return i;const a=n[1];a.firstCreatePass&&(t.injectorIndex=n.length,cr(a.data,t),cr(n,null),cr(a.blueprint,null));const u=to(t,n),c=t.injectorIndex;if(ds(u)){const p=Di(u),m=eo(u,n),I=m[1].data;for(let x=0;x<8;x++)n[c+x]=m[p+x]|I[p+x]}return n[c+8]=u,c}function cr(t,n){t.push(0,0,0,0,0,0,0,0,n)}function vo(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function to(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,a=null,u=n;for(;null!==u;){const c=u[1],p=c.type;if(a=2===p?c.declTNode:1===p?u[6]:null,null===a)return-1;if(i++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|i<<16}return-1}function _t(t,n,i){!function(t,n,i){let a;"string"==typeof i?a=i.charCodeAt(0)||0:i.hasOwnProperty(Ae)&&(a=i[Ae]),null==a&&(a=i[Ae]=Ra++);const u=255&a;n.data[t+(u>>5)]|=1<<u}(t,n,i)}function tu(t,n,i){if(i&ht.Optional)return t;Ft(n,"NodeInjector")}function b(t,n,i,a){if(i&ht.Optional&&void 0===a&&(a=null),0==(i&(ht.Self|ht.Host))){const u=t[9],c=Nr(void 0);try{return u?u.get(n,a,i&ht.Optional):Sn(n,a,i&ht.Optional)}finally{Nr(c)}}return tu(a,n,i)}function v(t,n,i,a=ht.Default,u){if(null!==t){const c=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ae)?t[Ae]:void 0;return"number"==typeof n?n>=0?255&n:M:n}(i);if("function"==typeof c){if(!Cu(n,t,a))return a&ht.Host?tu(u,i,a):b(n,i,a,u);try{const p=c(a);if(null!=p||a&ht.Optional)return p;Ft(i)}finally{Aa()}}else if("number"==typeof c){let p=null,m=vo(t,n),I=-1,x=a&ht.Host?n[16][6]:null;for((-1===m||a&ht.SkipSelf)&&(I=-1===m?to(t,n):n[m+8],-1!==I&&vt(a,!1)?(p=n[1],m=Di(I),n=eo(I,n)):m=-1);-1!==m;){const V=n[1];if(Ue(c,m,V.data)){const q=L(m,n,i,p,a,x);if(q!==_)return q}I=n[m+8],-1!==I&&vt(a,n[1].data[m+8]===x)&&Ue(c,m,n)?(p=V,m=Di(I),n=eo(I,n)):m=-1}}}return b(n,i,a,u)}const _={};function M(){return new Tn(pr(),qe())}function L(t,n,i,a,u,c){const p=n[1],m=p.data[t+8],V=G(m,p,i,null==a?fr(m)&&Su:a!=p&&0!=(3&m.type),u&ht.Host&&c===m);return null!==V?te(n,p,V,m):_}function G(t,n,i,a,u){const c=t.providerIndexes,p=n.data,m=1048575&c,I=t.directiveStart,V=c>>20,Y=u?m+V:t.directiveEnd;for(let ae=a?m:m+V;ae<Y;ae++){const me=p[ae];if(ae<I&&i===me||ae>=I&&me.type===i)return ae}if(u){const ae=p[I];if(ae&&Or(ae)&&ae.type===i)return I}return null}function te(t,n,i,a){let u=t[i];const c=n.data;if(function(t){return t instanceof jn}(u)){const p=u;p.resolving&&function(t,n){throw new $e("200",`Circular dependency in DI detected for ${t}`)}(Kt(c[i]));const m=Ma(p.canSeeViewProviders);p.resolving=!0;const I=p.injectImpl?Nr(p.injectImpl):null;Cu(t,a,ht.Default);try{u=t[i]=p.factory(void 0,c,t,a),n.firstCreatePass&&i>=a.directiveStart&&function(t,n,i){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:c}=n.type.prototype;if(a){const p=ko(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,p),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,p)}u&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,u),c&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,c),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,c))}(i,c[i],n)}finally{null!==I&&Nr(I),Ma(m),p.resolving=!1,Aa()}}return u}function Ue(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function vt(t,n){return!(t&ht.Self||t&ht.Host&&n)}class Tn{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,a){return v(this._tNode,this._lView,n,a,i)}}function Vt(t){return Et(()=>{const n=t.prototype.constructor,i=n[de]||Ln(n),a=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==a;){const c=u[de]||Ln(u);if(c&&c!==i)return c;u=Object.getPrototypeOf(u)}return c=>new c})}function Ln(t){return je(t)?()=>{const n=Ln(Oe(t));return n&&n()}:Bi(t)}function rn(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const a=i.length;let u=0;for(;u<a;){const c=i[u];if(al(c))break;if(0===c)u+=2;else if("number"==typeof c)for(u++;u<a&&"string"==typeof i[u];)u++;else{if(c===n)return i[u+1];u+=2}}}return null}(pr(),t)}const zi="__parameters__";function Pn(t,n,i){return Et(()=>{const a=function(t){return function(...i){if(t){const a=t(...i);for(const u in a)this[u]=a[u]}}}(n);function u(...c){if(this instanceof u)return a.apply(this,c),this;const p=new u(...c);return m.annotation=p,m;function m(I,x,V){const q=I.hasOwnProperty(zi)?I[zi]:Object.defineProperty(I,zi,{value:[]})[zi];for(;q.length<=V;)q.push(null);return(q[V]=q[V]||[]).push(p),I}}return i&&(u.prototype=Object.create(i.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}class Bt{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=tn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jd=new Bt("AnalyzeForEntryComponents");function Ti(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let a=t[i];Array.isArray(a)?(n===t&&(n=t.slice(0,i)),Ti(a,n)):n!==t&&n.push(a)}return n}function Is(t,n){t.forEach(i=>Array.isArray(i)?Is(i,n):n(i))}function Pa(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function at(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ai(t,n,i){let a=bs(t,n);return a>=0?t[1|a]=i:(a=~a,function(t,n,i,a){let u=t.length;if(u==n)t.push(i,a);else if(1===u)t.push(a,t[0]),t[0]=i;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=i,t[n+1]=a}}(t,a,n,i)),a}function nu(t,n){const i=bs(t,n);if(i>=0)return t[1|i]}function bs(t,n){return function(t,n,i){let a=0,u=t.length>>i;for(;u!==a;){const c=a+(u-a>>1),p=t[c<<i];if(n===p)return c<<i;p>n?u=c:a=c+1}return~(u<<i)}(t,n,1)}const Dt={},sn="__NG_DI_FLAG__",Rt="ngTempTokenPath",Ki=/\n/gm,Ho="__source",Go=J({provide:String,useValue:J});let Us;function Bs(t){const n=Us;return Us=t,n}function Zi(t,n=ht.Default){if(void 0===Us)throw new Error("inject() must be called from an injection context");return null===Us?Sn(t,void 0,n):Us.get(t,n&ht.Optional?null:void 0,n)}function oi(t,n=ht.Default){return(jr||Zi)(Oe(t),n)}function io(t){const n=[];for(let i=0;i<t.length;i++){const a=Oe(t[i]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let u,c=ht.Default;for(let p=0;p<a.length;p++){const m=a[p],I=ql(m);"number"==typeof I?-1===I?u=m.token:c|=I:u=m}n.push(oi(u,c))}else n.push(oi(a))}return n}function iu(t,n){return t[sn]=n,t.prototype[sn]=n,t}function ql(t){return t[sn]}function Kl(t,n,i,a){const u=t[Rt];throw n[Ho]&&u.unshift(n[Ho]),t.message=function(t,n,i,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let u=we(n);if(Array.isArray(n))u=n.map(we).join(" -> ");else if("object"==typeof n){let c=[];for(let p in n)if(n.hasOwnProperty(p)){let m=n[p];c.push(p+":"+("string"==typeof m?JSON.stringify(m):we(m)))}u=`{${c.join(", ")}}`}return`${i}${a?"("+a+")":""}[${u}]: ${t.replace(Ki,"\n  ")}`}("\n"+t.message,u,i,a),t.ngTokenPath=u,t[Rt]=null,t}const La=iu(Pn("Inject",t=>({token:t})),-1),bo=iu(Pn("Optional"),8),Va=iu(Pn("SkipSelf"),4);let Ou;function Ua(t){var n;return(null==(n=function(){if(void 0===Ou&&(Ou=null,yt.trustedTypes))try{Ou=yt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ou}())?void 0:n.createHTML(t))||t}class ou{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sf extends ou{getTypeName(){return"HTML"}}class of extends ou{getTypeName(){return"Style"}}class Yl extends ou{getTypeName(){return"Script"}}class af extends ou{getTypeName(){return"URL"}}class zc extends ou{getTypeName(){return"ResourceURL"}}function Ba(t){return t instanceof ou?t.changingThisBreaksApplicationSecurity:t}function yl(t,n){const i=Kd(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Kd(t){return t instanceof ou&&t.getTypeName()||null}function _l(t){return new sf(t)}function Pu(t){return new of(t)}function uf(t){return new Yl(t)}function ja(t){return new af(t)}function lf(t){return new zc(t)}class cf{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Ua(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class df{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const a=this.inertDocument.createElement("body");i.appendChild(a)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=Ua(n),i;const a=this.inertDocument.createElement("body");return a.innerHTML=Ua(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(n){const i=n.attributes;for(let u=i.length-1;0<u;u--){const p=i.item(u).name;("xmlns:ns1"===p||0===p.indexOf("ns1:"))&&n.removeAttribute(p)}let a=n.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const hf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function au(t){return(t=String(t)).match(hf)||t.match(yi)?t:"unsafe:"+t}function Do(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function Fu(...t){const n={};for(const i of t)for(const a in i)i.hasOwnProperty(a)&&(n[a]=!0);return n}const qc=Do("area,br,col,hr,img,wbr"),Zd=Do("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kc=Do("rp,rt"),Xl=Fu(qc,Fu(Zd,Do("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fu(Kc,Do("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fu(Kc,Zd)),ec=Do("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lu=Do("srcset"),_i=Fu(ec,Lu,Do("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Do("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Mn=Do("script,style,template");class pf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,a=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?a=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,a&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let u=this.checkClobberedElement(i,i.nextSibling);if(u){i=u;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Xl.hasOwnProperty(i))return this.sanitizedSomething=!0,!Mn.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const a=n.attributes;for(let u=0;u<a.length;u++){const c=a.item(u),p=c.name,m=p.toLowerCase();if(!_i.hasOwnProperty(m)){this.sanitizedSomething=!0;continue}let I=c.value;ec[m]&&(I=au(I)),Lu[m]&&(t=I,I=(t=String(t)).split(",").map(n=>au(n.trim())).join(", ")),this.buf.push(" ",p,'="',ei(I),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Xl.hasOwnProperty(i)&&!qc.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(ei(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const gf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,da=/([^\#-~ |!])/g;function ei(t){return t.replace(/&/g,"&amp;").replace(gf,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(da,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $a;function Yi(t,n){let i=null;try{$a=$a||function(t){const n=new df(t);return function(){try{return!!(new window.DOMParser).parseFromString(Ua(""),"text/html")}catch(t){return!1}}()?new cf(n):n}(t);let a=n?String(n):"";i=$a.getInertBodyElement(a);let u=5,c=a;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,a=c,c=i.innerHTML,i=$a.getInertBodyElement(a)}while(a!==c);return Ua((new pf).sanitizeChildren(Ir(i)||i))}finally{if(i){const a=Ir(i)||i;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Ir(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=(()=>((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br))();function Yd(t){const n=function(){const t=qe();return t&&t[12]}();return n?n.sanitize(br.URL,t)||"":yl(t,"URL")?Ba(t):au(ot(t))}const vl="__ngContext__";function ps(t,n){t[vl]=n}function ed(t){const n=function(t){return t[vl]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function sc(t){return t.ngOriginalError}function tg(t,...n){t.error(...n)}class ti{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),a=this._findContext(n),u=(t=n)&&t.ngErrorLogger||tg;var t;u(this._console,"ERROR",n),i&&u(this._console,"ORIGINAL ERROR",i),a&&u(this._console,"ERROR CONTEXT",a)}_findContext(n){return n?n.ngDebugContext||this._findContext(sc(n)):null}_findOriginalError(n){let i=n&&sc(n);for(;i&&sc(i);)i=sc(i);return i||null}}const Bu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yt))();function xr(t){return t instanceof Function?t():t}var $s=(()=>(($s=$s||{})[$s.Important=1]="Important",$s[$s.DashCase=2]="DashCase",$s))();function rh(t,n){return undefined(t,n)}function uc(t){const n=t[3];return Tr(n)?n[3]:n}function g(t){return f(t[13])}function d(t){return f(t[4])}function f(t){for(;null!==t&&!Tr(t);)t=t[4];return t}function P(t,n,i,a,u){if(null!=a){let c,p=!1;Tr(a)?c=a:Hr(a)&&(p=!0,a=a[0]);const m=A(a);0===t&&null!==i?null==u?cd(n,i,m):Ga(n,i,m,u||null,!0):1===t&&null!==i?Ga(n,i,m,u||null,!0):2===t?function(t,n,i){const a=dd(t,n);a&&function(t,n,i,a){R(t)?t.removeChild(n,i,a):n.removeChild(i)}(t,a,n,i)}(n,m,p):3===t&&n.destroyNode(m),null!=c&&function(t,n,i,a,u){const c=i[7];c!==A(i)&&P(n,t,a,c,u);for(let m=10;m<i.length;m++){const I=i[m];dc(I[1],I,t,n,a,c)}}(n,t,c,i,u)}}function st(t,n,i){return R(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Le(t,n){const i=t[9],a=i.indexOf(n),u=n[3];1024&n[2]&&(n[2]&=-1025,Hi(u,-1)),i.splice(a,1)}function du(t,n){if(t.length<=10)return;const i=10+n,a=t[i];if(a){const u=a[17];null!==u&&u!==t&&Le(u,a),n>0&&(t[i-1][4]=a[4]);const c=at(t,10+n);!function(t,n){dc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(a[1],a);const p=c[19];null!==p&&p.detachView(c[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function ao(t,n){if(!(256&n[2])){const i=n[11];R(i)&&i.destroyNode&&dc(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return ld(t[1],t);for(;n;){let i=null;if(Hr(n))i=n[13];else{const a=n[10];a&&(i=a)}if(!i){for(;n&&!n[4]&&n!==t;)Hr(n)&&ld(n[1],n),n=n[3];null===n&&(n=t),Hr(n)&&ld(n[1],n),i=n&&n[4]}n=i}}(n)}}function ld(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let a=0;a<i.length;a+=2){const u=n[i[a]];if(!(u instanceof jn)){const c=i[a+1];if(Array.isArray(c))for(let p=0;p<c.length;p+=2){const m=u[c[p]],I=c[p+1];try{I.call(m)}finally{}}else try{c.call(u)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,a=n[7];let u=-1;if(null!==i)for(let c=0;c<i.length-1;c+=2)if("string"==typeof i[c]){const p=i[c+1],m="function"==typeof p?p(n):A(n[p]),I=a[u=i[c+2]],x=i[c+3];"boolean"==typeof x?m.removeEventListener(i[c],I,x):x>=0?a[u=x]():a[u=-x].unsubscribe(),c+=2}else{const p=a[u=i[c+1]];i[c].call(p)}if(null!==a){for(let c=u+1;c<a.length;c++)a[c]();n[7]=null}}(t,n),1===n[1].type&&R(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&Tr(n[3])){i!==n[3]&&Le(i,n);const a=n[19];null!==a&&a.detachView(t)}}}function sh(t,n,i){return function(t,n,i){let a=n;for(;null!==a&&40&a.type;)a=(n=a).parent;if(null===a)return i[0];if(2&a.flags){const u=t.data[a.directiveStart].encapsulation;if(u===pn.None||u===pn.Emulated)return null}return be(a,i)}(t,n.parent,i)}function Ga(t,n,i,a,u){R(t)?t.insertBefore(n,i,a,u):n.insertBefore(i,a,u)}function cd(t,n,i){R(t)?t.appendChild(n,i):n.appendChild(i)}function lc(t,n,i,a,u){null!==a?Ga(t,n,i,a,u):cd(t,n,i)}function dd(t,n){return R(t)?t.parentNode(n):n.parentNode}let ag=function(t,n,i){return 40&t.type?be(t,i):null};function cc(t,n,i,a){const u=sh(t,a,n),c=n[11],m=function(t,n,i){return ag(t,n,i)}(a.parent||n[6],a,n);if(null!=u)if(Array.isArray(i))for(let I=0;I<i.length;I++)lc(c,u,i[I],m,!1);else lc(c,u,i,m,!1)}function fu(t,n){if(null!==n){const i=n.type;if(3&i)return be(n,t);if(4&i)return Il(-1,t[n.index]);if(8&i){const a=n.child;if(null!==a)return fu(t,a);{const u=t[n.index];return Tr(u)?Il(-1,u):A(u)}}if(32&i)return rh(n,t)()||A(t[n.index]);{const a=wl(t,n);return null!==a?Array.isArray(a)?a[0]:fu(uc(t[16]),a):fu(t,n.next)}}return null}function wl(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Il(t,n){const i=10+t+1;if(i<n.length){const a=n[i],u=a[1].firstChild;if(null!==u)return fu(a,u)}return n[7]}function Af(t,n,i,a,u,c,p){for(;null!=i;){const m=a[i.index],I=i.type;if(p&&0===n&&(m&&ps(A(m),a),i.flags|=4),64!=(64&i.flags))if(8&I)Af(t,n,i.child,a,u,c,!1),P(n,t,u,m,c);else if(32&I){const x=rh(i,a);let V;for(;V=x();)P(n,t,u,V,c);P(n,t,u,m,c)}else 16&I?dg(t,n,a,i,u,c):P(n,t,u,m,c);i=p?i.projectionNext:i.next}}function dc(t,n,i,a,u,c){Af(i,a,t.firstChild,n,u,c,!1)}function dg(t,n,i,a,u,c){const p=i[16],I=p[6].projection[a.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)P(n,t,u,I[x],c);else Af(t,n,I,p[3],u,c,!0)}function hg(t,n,i){R(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function oh(t,n,i){R(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function fd(t,n,i){let a=t.length;for(;;){const u=t.indexOf(n,i);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const c=n.length;if(u+c===a||t.charCodeAt(u+c)<=32)return u}i=u+1}}const Ty="ng-template";function Ay(t,n,i){let a=0;for(;a<t.length;){let u=t[a++];if(i&&"class"===u){if(u=t[a],-1!==fd(u.toLowerCase(),n,0))return!0}else if(1===u){for(;a<t.length&&"string"==typeof(u=t[a++]);)if(u.toLowerCase()===n)return!0;return!1}}return!1}function Sy(t){return 4===t.type&&t.value!==Ty}function LE(t,n,i){return n===(4!==t.type||i?t.value:Ty)}function VE(t,n,i){let a=4;const u=t.attrs||[],c=function(t){for(let n=0;n<t.length;n++)if(al(t[n]))return n;return t.length}(u);let p=!1;for(let m=0;m<n.length;m++){const I=n[m];if("number"!=typeof I){if(!p)if(4&a){if(a=2|1&a,""!==I&&!LE(t,I,i)||""===I&&1===n.length){if(uo(a))return!1;p=!0}}else{const x=8&a?I:n[++m];if(8&a&&null!==t.attrs){if(!Ay(t.attrs,x,i)){if(uo(a))return!1;p=!0}continue}const q=bl(8&a?"class":I,u,Sy(t),i);if(-1===q){if(uo(a))return!1;p=!0;continue}if(""!==x){let Y;Y=q>c?"":u[q+1].toLowerCase();const ae=8&a?Y:null;if(ae&&-1!==fd(ae,x,0)||2&a&&x!==Y){if(uo(a))return!1;p=!0}}}}else{if(!p&&!uo(a)&&!uo(I))return!1;if(p&&uo(I))continue;p=!1,a=I|1&a}}return uo(a)||p}function uo(t){return 0==(1&t)}function bl(t,n,i,a){if(null===n)return-1;let u=0;if(a||!i){let c=!1;for(;u<n.length;){const p=n[u];if(p===t)return u;if(3===p||6===p)c=!0;else{if(1===p||2===p){let m=n[++u];for(;"string"==typeof m;)m=n[++u];continue}if(4===p)break;if(0===p){u+=4;continue}}u+=c?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const a=t[i];if("number"==typeof a)return-1;if(a===n)return i;i++}return-1}(n,t)}function Cl(t,n,i=!1){for(let a=0;a<n.length;a++)if(VE(t,n[a],i))return!0;return!1}function hc(t,n){return t?":not("+n.trim()+")":n}function jE(t){let n=t[0],i=1,a=2,u="",c=!1;for(;i<t.length;){let p=t[i];if("string"==typeof p)if(2&a){const m=t[++i];u+="["+p+(m.length>0?'="'+m+'"':"")+"]"}else 8&a?u+="."+p:4&a&&(u+=" "+p);else""!==u&&!uo(p)&&(n+=hc(c,u),u=""),a=p,c=c||!uo(a);i++}return""!==u&&(n+=hc(c,u)),n}const gn={};function uh(t){pg(En(),qe(),Fr()+t,Fs())}function pg(t,n,i,a){if(!a)if(3==(3&n[2])){const c=t.preOrderCheckHooks;null!==c&&Ys(n,c,i)}else{const c=t.preOrderHooks;null!==c&&sa(n,c,0,i)}Vs(i)}function lh(t,n){return t<<17|n<<2}function To(t){return t>>17&32767}function pu(t){return 2|t}function Ao(t){return(131068&t)>>2}function xf(t,n){return-131069&t|n<<2}function gg(t){return 1|t}function Tg(t,n){const i=t.contentQueries;if(null!==i)for(let a=0;a<i.length;a+=2){const u=i[a],c=i[a+1];if(-1!==c){const p=t.data[c];Ta(u),p.contentQueries(2,n[c],c)}}}function hh(t,n,i,a,u,c,p,m,I,x){const V=n.blueprint.slice();return V[0]=u,V[2]=140|a,ls(V),V[3]=V[15]=t,V[8]=i,V[10]=p||t&&t[10],V[11]=m||t&&t[11],V[12]=I||t&&t[12]||null,V[9]=x||t&&t[9]||null,V[6]=c,V[16]=2==n.type?t[16]:V,V}function Tl(t,n,i,a,u){let c=t.data[n];if(null===c)c=function(t,n,i,a,u){const c=ks(),p=Es(),I=t.data[n]=function(t,n,i,a,u,c){return{type:i,index:a,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?c:c&&c.parent,i,n,a,u);return null===t.firstChild&&(t.firstChild=I),null!==c&&(p?null==c.child&&null!==I.parent&&(c.child=I):null===c.next&&(c.next=I)),I}(t,n,i,a,u),wt.lFrame.inI18n&&(c.flags|=64);else if(64&c.type){c.type=i,c.value=a,c.attrs=u;const p=function(){const t=wt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();c.injectorIndex=null===p?-1:p.injectorIndex}return cs(c,!0),c}function yd(t,n,i,a){if(0===i)return-1;const u=n.length;for(let c=0;c<i;c++)n.push(a),t.blueprint.push(a),t.data.push(null);return u}function gc(t,n,i){Ls(n);try{const a=t.viewQuery;null!==a&&zf(1,a,i);const u=t.template;null!==u&&Uy(t,n,u,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Tg(t,n),t.staticViewQueries&&zf(2,t.viewQuery,i);const c=t.components;null!==c&&function(t,n){for(let i=0;i<n.length;i++)Vg(t,n[i])}(n,c)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{n[2]&=-5,Vo()}}function ai(t,n,i,a){const u=n[2];if(256==(256&u))return;Ls(n);const c=Fs();try{ls(n),function(t){wt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Uy(t,n,i,2,a);const p=3==(3&u);if(!c)if(p){const x=t.preOrderCheckHooks;null!==x&&Ys(n,x,null)}else{const x=t.preOrderHooks;null!==x&&sa(n,x,0,null),Xa(n,0)}if(function(t){for(let n=g(t);null!==n;n=d(n)){if(!n[2])continue;const i=n[9];for(let a=0;a<i.length;a++){const u=i[a],c=u[3];0==(1024&u[2])&&Hi(c,1),u[2]|=1024}}}(n),function(t){for(let n=g(t);null!==n;n=d(n))for(let i=10;i<n.length;i++){const a=n[i],u=a[1];qn(a)&&ai(u,a,u.template,a[8])}}(n),null!==t.contentQueries&&Tg(t,n),!c)if(p){const x=t.contentCheckHooks;null!==x&&Ys(n,x)}else{const x=t.contentHooks;null!==x&&sa(n,x,1),Xa(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let a=0;a<i.length;a++){const u=i[a];if(u<0)Vs(~u);else{const c=u,p=i[++a],m=i[++a];Jo(p,c),m(2,n[c])}}}finally{Vs(-1)}}(t,n);const m=t.components;null!==m&&function(t,n){for(let i=0;i<n.length;i++)Fg(t,n[i])}(n,m);const I=t.viewQuery;if(null!==I&&zf(2,I,a),!c)if(p){const x=t.viewCheckHooks;null!==x&&Ys(n,x)}else{const x=t.viewHooks;null!==x&&sa(n,x,2),Xa(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),c||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Hi(n[3],-1))}finally{Vo()}}function YE(t,n,i,a){const u=n[10],c=!Fs(),p=tr(n);try{c&&!p&&u.begin&&u.begin(),p&&gc(t,n,a),ai(t,n,i,a)}finally{c&&!p&&u.end&&u.end()}}function Uy(t,n,i,a,u){const c=Fr(),p=2&a;try{Vs(-1),p&&n.length>K&&pg(t,n,K,Fs()),i(a,u)}finally{Vs(c)}}function By(t,n,i){if(Po(n)){const u=n.directiveEnd;for(let c=n.directiveStart;c<u;c++){const p=t.data[c];p.contentQueries&&p.contentQueries(1,i[c],c)}}}function xg(t,n,i){!wa()||(function(t,n,i,a){const u=i.directiveStart,c=i.directiveEnd;t.firstCreatePass||Ze(i,n),ps(a,n);const p=i.initialInputs;for(let m=u;m<c;m++){const I=t.data[m],x=Or(I);x&&Hf(n,i,I);const V=te(n,t,m,i);ps(V,n),null!==p&&Zy(0,m-u,V,I,0,p),x&&(nn(i.index,n)[8]=V)}}(t,n,i,be(i,n)),128==(128&i.flags)&&function(t,n,i){const a=i.directiveStart,u=i.directiveEnd,p=i.index,m=wt.lFrame.currentDirectiveIndex;try{Vs(p);for(let I=a;I<u;I++){const x=t.data[I],V=n[I];Xo(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&qy(x,V)}}finally{Vs(-1),Xo(m)}}(t,n,i))}function Mg(t,n,i=be){const a=n.localNames;if(null!==a){let u=n.index+1;for(let c=0;c<a.length;c+=2){const p=a[c+1],m=-1===p?i(n,t):t[p];t[u++]=m}}}function jy(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=_d(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function _d(t,n,i,a,u,c,p,m,I,x){const V=K+a,q=V+u,Y=function(t,n){const i=[];for(let a=0;a<n;a++)i.push(a<t?null:gn);return i}(V,q),ae="function"==typeof x?x():x;return Y[1]={type:t,blueprint:Y,template:i,queries:null,viewQuery:m,declTNode:n,data:Y.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:I,consts:ae,incompleteFirstPass:!1}}function vd(t,n,i,a){const u=qf(n);null===i?u.push(a):(u.push(i),t.firstCreatePass&&Jy(t).push(a,u.length-1))}function Uf(t,n,i){for(let a in t)if(t.hasOwnProperty(a)){const u=t[a];(i=null===i?{}:i).hasOwnProperty(a)?i[a].push(n,u):i[a]=[n,u]}return i}function So(t,n,i,a,u,c,p,m){const I=be(n,i);let V,x=n.inputs;!m&&null!=x&&(V=x[a])?(Zf(t,i,V,a,u),fr(n)&&function(t,n){const i=nn(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(a=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=p?p(u,n.value||"",a):u,R(c)?c.setProperty(I,a,u):Au(a)||(I.setProperty?I.setProperty(a,u):I[a]=u))}function mc(t,n,i,a){let u=!1;if(wa()){const c=function(t,n,i){const a=t.directiveRegistry;let u=null;if(a)for(let c=0;c<a.length;c++){const p=a[c];Cl(i,p.selectors,!1)&&(u||(u=[]),_t(Ze(i,n),t,p.type),Or(p)?(Ky(t,i),u.unshift(p)):u.push(p))}return u}(t,n,i),p=null===a?null:{"":-1};if(null!==c){u=!0,yc(i,t.data.length,c.length);for(let V=0;V<c.length;V++){const q=c[V];q.providersResolver&&q.providersResolver(q)}let m=!1,I=!1,x=yd(t,n,c.length,null);for(let V=0;V<c.length;V++){const q=c[V];i.mergedAttrs=Xs(i.mergedAttrs,q.hostAttrs),$f(t,i,n,x,q),Pg(x,q,p),null!==q.contentQueries&&(i.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(i.flags|=128);const Y=q.type.prototype;!m&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),m=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),I=!0),x++}!function(t,n){const a=n.directiveEnd,u=t.data,c=n.attrs,p=[];let m=null,I=null;for(let x=n.directiveStart;x<a;x++){const V=u[x],q=V.inputs,Y=null===c||Sy(n)?null:kg(q,c);p.push(Y),m=Uf(q,x,m),I=Uf(V.outputs,x,I)}null!==m&&(m.hasOwnProperty("class")&&(n.flags|=16),m.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=p,n.inputs=m,n.outputs=I}(t,i)}p&&function(t,n,i){if(n){const a=t.localNames=[];for(let u=0;u<n.length;u+=2){const c=i[n[u+1]];if(null==c)throw new $e("301",`Export of name '${n[u+1]}' not found!`);a.push(n[u],c)}}}(i,a,p)}return i.mergedAttrs=Xs(i.mergedAttrs,i.attrs),u}function jf(t,n,i,a,u,c){const p=c.hostBindings;if(p){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const I=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(m)!=I&&m.push(I),m.push(a,u,p)}}function qy(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Ky(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Pg(t,n,i){if(i){if(n.exportAs)for(let a=0;a<n.exportAs.length;a++)i[n.exportAs[a]]=t;Or(n)&&(i[""]=t)}}function yc(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function $f(t,n,i,a,u){t.data[a]=u;const c=u.factory||(u.factory=Bi(u.type)),p=new jn(c,Or(u),null);t.blueprint[a]=p,i[a]=p,jf(t,n,0,a,yd(t,i,u.hostVars,gn),u)}function Hf(t,n,i){const a=be(n,t),u=jy(i),c=t[10],p=Ed(t,hh(t,u,null,i.onPush?64:16,a,n,c,c.createRenderer(a,i),null,null));t[n.index]=p}function xo(t,n,i,a,u,c){const p=be(t,n);!function(t,n,i,a,u,c,p){if(null==c)R(t)?t.removeAttribute(n,u,i):n.removeAttribute(u);else{const m=null==p?ot(c):p(c,a||"",u);R(t)?t.setAttribute(n,u,m,i):i?n.setAttributeNS(i,u,m):n.setAttribute(u,m)}}(n[11],p,c,t.value,i,a,u)}function Zy(t,n,i,a,u,c){const p=c[n];if(null!==p){const m=a.setInput;for(let I=0;I<p.length;){const x=p[I++],V=p[I++],q=p[I++];null!==m?a.setInput(i,q,x,V):i[V]=q}}}function kg(t,n){let i=null,a=0;for(;a<n.length;){const u=n[a];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===i&&(i=[]),i.push(u,t[u],n[a+1])),a+=2}else a+=2;else a+=4}return i}function Gu(t,n,i,a){return new Array(t,!0,!1,n,null,0,a,i,null,null)}function Fg(t,n){const i=nn(n,t);if(qn(i)){const a=i[1];80&i[2]?ai(a,i,a.template,i[8]):i[5]>0&&Lg(i)}}function Lg(t){for(let a=g(t);null!==a;a=d(a))for(let u=10;u<a.length;u++){const c=a[u];if(1024&c[2]){const p=c[1];ai(p,c,p.template,c[8])}else c[5]>0&&Lg(c)}const i=t[1].components;if(null!==i)for(let a=0;a<i.length;a++){const u=nn(i[a],t);qn(u)&&u[5]>0&&Lg(u)}}function Vg(t,n){const i=nn(n,t),a=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(a,i),gc(a,i,i[8])}function Ed(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function wd(t){for(;t;){t[2]|=64;const n=uc(t);if(gs(t)&&!n)return t;t=n}return null}function Al(t,n,i){const a=n[10];a.begin&&a.begin();try{ai(t,n,t.template,i)}catch(u){throw Xy(n,u),u}finally{a.end&&a.end()}}function Wf(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],a=ed(i),u=a[1];YE(u,a,u.template,i)}}(t[8])}function zf(t,n,i){Ta(0),n(t,i)}const u0=(()=>Promise.resolve(null))();function qf(t){return t[7]||(t[7]=[])}function Jy(t){return t.cleanup||(t.cleanup=[])}function Xy(t,n){const i=t[9],a=i?i.get(ti,null):null;a&&a.handleError(n)}function Zf(t,n,i,a,u){for(let c=0;c<i.length;){const p=i[c++],m=i[c++],I=n[p],x=t.data[p];null!==x.setInput?x.setInput(I,u,a,m):I[m]=u}}function Wu(t,n,i){const a=B(n,t);!function(t,n,i){R(t)?t.setValue(n,i):n.textContent=i}(t[11],a,i)}function Id(t,n,i){let a=i?t.styles:null,u=i?t.classes:null,c=0;if(null!==n)for(let p=0;p<n.length;p++){const m=n[p];"number"==typeof m?c=m:1==c?u=Ne(u,m):2==c&&(a=Ne(a,m+": "+n[++p]+";"))}i?t.styles=a:t.stylesWithoutHost=a,i?t.classes=u:t.classesWithoutHost=u}const _c=new Bt("INJECTOR",-1);class vc{get(n,i=Dt){if(i===Dt){const a=new Error(`NullInjectorError: No provider for ${we(n)}!`);throw a.name="NullInjectorError",a}return i}}const fa=new Bt("Set Injector scope."),Ec={},bd={};let Sl;function jg(){return void 0===Sl&&(Sl=new vc),Sl}function n_(t,n=null,i=null,a){return new l0(t,i,n||jg(),a)}class l0{constructor(n,i,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];i&&Is(i,m=>this.processProvider(m,n,i)),Is([n],m=>this.processInjectorType(m,[],c)),this.records.set(_c,Dd(void 0,this));const p=this.records.get(fa);this.scope=null!=p?p.value:null,this.source=u||("object"==typeof n?null:we(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=Dt,a=ht.Default){this.assertNotDestroyed();const u=Bs(this),c=Nr(void 0);try{if(!(a&ht.SkipSelf)){let m=this.records.get(n);if(void 0===m){const I=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Bt)&&fn(n);m=I&&this.injectableDefInScope(I)?Dd(mh(n),Ec):null,this.records.set(n,m)}if(null!=m)return this.hydrate(n,m)}return(a&ht.Self?jg():this.parent).get(n,i=a&ht.Optional&&i===Dt?null:i)}catch(p){if("NullInjectorError"===p.name){if((p[Rt]=p[Rt]||[]).unshift(we(n)),u)throw p;return Kl(p,n,"R3InjectorError",this.source)}throw p}finally{Nr(c),Bs(u)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((a,u)=>n.push(we(u))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,a){if(!(n=Oe(n)))return!1;let u=_r(n);const c=null==u&&n.ngModule||void 0,p=void 0===c?n:c,m=-1!==a.indexOf(p);if(void 0!==c&&(u=_r(c)),null==u)return!1;if(null!=u.imports&&!m){let V;a.push(p);try{Is(u.imports,q=>{this.processInjectorType(q,i,a)&&(void 0===V&&(V=[]),V.push(q))})}finally{}if(void 0!==V)for(let q=0;q<V.length;q++){const{ngModule:Y,providers:ae}=V[q];Is(ae,me=>this.processProvider(me,Y,ae||nt))}}this.injectorDefTypes.add(p);const I=Bi(p)||(()=>new p);this.records.set(p,Dd(I,Ec));const x=u.providers;if(null!=x&&!m){const V=n;Is(x,q=>this.processProvider(q,V,x))}return void 0!==c&&void 0!==n.providers}processProvider(n,i,a){let u=Td(n=Oe(n))?n:Oe(n&&n.provide);const c=(t=n,r_(t)?Dd(void 0,t.useValue):Dd(Yf(t),Ec));var t;if(Td(n)||!0!==n.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Dd(void 0,Ec,!0),p.factory=()=>io(p.multi),this.records.set(u,p)),u=n,p.multi.push(n)}this.records.set(u,c)}hydrate(n,i){return i.value===Ec&&(i.value=bd,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Oe(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function mh(t){const n=fn(t),i=null!==n?n.factory:Bi(t);if(null!==i)return i;if(t instanceof Bt)throw new Error(`Token ${we(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const a=function(t,n){const i=[];for(let a=0;a<t;a++)i.push(n);return i}(n,"?");throw new Error(`Can't resolve all parameters for ${we(t)}: (${a.join(", ")}).`)}const i=function(t){const n=t&&(t[Lt]||t[Br]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function Yf(t,n,i){let a;if(Td(t)){const u=Oe(t);return Bi(u)||mh(u)}if(r_(t))a=()=>Oe(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...io(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))a=()=>oi(Oe(t.useExisting));else{const u=Oe(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Bi(u)||mh(u);a=()=>new u(...io(t.deps))}return a}function Dd(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function r_(t){return null!==t&&"object"==typeof t&&Go in t}function Td(t){return"function"==typeof t}const u_=function(t,n,i){return function(t,n=null,i=null,a){const u=n_(t,n,i,a);return u._resolveInjectorDefTypes(),u}({name:i},n,t,i)};let ni=(()=>{class t{static create(i,a){return Array.isArray(i)?u_(i,a,""):u_(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=Dt,t.NULL=new vc,t.\u0275prov=tn({token:t,providedIn:"any",factory:()=>oi(_c)}),t.__NG_ELEMENT_ID__=-1,t})();function v_(t,n){Lr(ed(t)[1],pr())}function rm(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const a=[t];for(;n;){let u;if(Or(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");u=n.\u0275dir}if(u){if(i){a.push(u);const p=t;p.inputs=wh(t.inputs),p.declaredInputs=wh(t.declaredInputs),p.outputs=wh(t.outputs);const m=u.hostBindings;m&&sm(t,m);const I=u.viewQuery,x=u.contentQueries;if(I&&y0(t,I),x&&im(t,x),ye(t.inputs,u.inputs),ye(t.declaredInputs,u.declaredInputs),ye(t.outputs,u.outputs),Or(u)&&u.data.animation){const V=t.data;V.animation=(V.animation||[]).concat(u.data.animation)}}const c=u.features;if(c)for(let p=0;p<c.length;p++){const m=c[p];m&&m.ngInherit&&m(t),m===rm&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let a=t.length-1;a>=0;a--){const u=t[a];u.hostVars=n+=u.hostVars,u.hostAttrs=Xs(u.hostAttrs,i=Xs(i,u.hostAttrs))}}(a)}function wh(t){return t===ct?{}:t===nt?[]:t}function y0(t,n){const i=t.viewQuery;t.viewQuery=i?(a,u)=>{n(a,u),i(a,u)}:n}function im(t,n){const i=t.contentQueries;t.contentQueries=i?(a,u,c)=>{n(a,u,c),i(a,u,c)}:n}function sm(t,n){const i=t.hostBindings;t.hostBindings=i?(a,u)=>{n(a,u),i(a,u)}:n}let Ih=null;function Ad(){if(!Ih){const t=yt.Symbol;if(t&&t.iterator)Ih=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const a=n[i];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ih=a)}}}return Ih}function Sd(t){return!!am(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ad()in t)}function am(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Cs(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Dh(t,n,i,a){const u=qe();return Cs(u,Ci(),n)&&(En(),xo(gr(),u,t,n,i,a)),Dh}function Ku(t,n,i,a){return Cs(t,Ci(),i)?n+ot(i)+a:gn}function cm(t,n,i,a,u,c,p,m){const I=qe(),x=En(),V=t+K,q=x.firstCreatePass?function(t,n,i,a,u,c,p,m,I){const x=n.consts,V=Tl(n,t,4,p||null,Yr(x,m));mc(n,i,V,Yr(x,I)),Lr(n,V);const q=V.tViews=_d(2,V,a,u,c,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x);return null!==n.queries&&(n.queries.template(n,V),q.queries=n.queries.embeddedTView(V)),V}(V,x,I,n,i,a,u,c,p):x.data[V];cs(q,!1);const Y=I[11].createComment("");cc(x,I,Y,q),ps(Y,I),Ed(I,I[V]=Gu(Y,I,Y,q)),Gr(q)&&xg(x,I,q),null!=p&&Mg(I,q,m)}function hm(t){return on(wt.lFrame.contextLView,K+t)}function Fl(t,n=ht.Default){const i=qe();return null===i?oi(t,n):v(pr(),i,Oe(t),n)}function Nd(){throw new Error("invalid")}function cp(t,n,i){const a=qe();return Cs(a,Ci(),n)&&So(En(),gr(),a,t,n,a[11],i,!1),cp}function Sh(t,n,i,a,u){const p=u?"class":"style";Zf(t,i,n.inputs[p],p,a)}function ym(t,n,i,a){const u=qe(),c=En(),p=K+t,m=u[11],I=u[p]=st(m,n,wt.lFrame.currentNamespace),x=c.firstCreatePass?function(t,n,i,a,u,c,p){const m=n.consts,x=Tl(n,t,2,u,Yr(m,c));return mc(n,i,x,Yr(m,p)),null!==x.attrs&&Id(x,x.attrs,!1),null!==x.mergedAttrs&&Id(x,x.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,x),x}(p,c,u,0,n,i,a):c.data[p];cs(x,!0);const V=x.mergedAttrs;null!==V&&Js(m,I,V);const q=x.classes;null!==q&&oh(m,I,q);const Y=x.styles;null!==Y&&hg(m,I,Y),64!=(64&x.flags)&&cc(c,u,I,x),0===wt.lFrame.elementDepthCount&&ps(I,u),wt.lFrame.elementDepthCount++,Gr(x)&&(xg(c,u,x),By(c,x,u)),null!==a&&Mg(u,x)}function _m(){let t=pr();Es()?Ya():(t=t.parent,cs(t,!1));const n=t;wt.lFrame.elementDepthCount--;const i=En();i.firstCreatePass&&(Lr(i,t),Po(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Sh(i,n,qe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Sh(i,n,qe(),n.stylesWithoutHost,!1)}function dp(t,n,i,a){ym(t,n,i,a),_m()}function Qu(t,n,i){const a=qe(),u=En(),c=t+K,p=u.firstCreatePass?function(t,n,i,a,u){const c=n.consts,p=Yr(c,a),m=Tl(n,t,8,"ng-container",p);return null!==p&&Id(m,p,!0),mc(n,i,m,Yr(c,u)),null!==n.queries&&n.queries.elementStart(n,m),m}(c,u,a,n,i):u.data[c];cs(p,!0);const m=a[c]=a[11].createComment("");cc(u,a,m,p),ps(m,a),Gr(p)&&(xg(u,a,p),By(u,p,a)),null!=i&&Mg(a,p)}function hp(){let t=pr();const n=En();Es()?Ya():(t=t.parent,cs(t,!1)),n.firstCreatePass&&(Lr(n,t),Po(t)&&n.queries.elementEnd(t))}function fp(){return qe()}function xh(t){return!!t&&"function"==typeof t.then}function H_(t){return!!t&&"function"==typeof t.subscribe}const Od=H_;function Pd(t,n,i,a){const u=qe(),c=En(),p=pr();return function(t,n,i,a,u,c,p,m){const I=Gr(a),V=t.firstCreatePass&&Jy(t),q=n[8],Y=qf(n);let ae=!0;if(3&a.type||m){const Te=be(a,n),rt=m?m(Te):Te,Ge=Y.length,Ht=m?mn=>m(A(mn[a.index])):a.index;if(R(i)){let mn=null;if(!m&&I&&(mn=function(t,n,i,a){const u=t.cleanup;if(null!=u)for(let c=0;c<u.length-1;c+=2){const p=u[c];if(p===i&&u[c+1]===a){const m=n[7],I=u[c+2];return m.length>I?m[I]:null}"string"==typeof p&&(c+=2)}return null}(t,n,u,a.index)),null!==mn)(mn.__ngLastListenerFn__||mn).__ngNextListenerFn__=c,mn.__ngLastListenerFn__=c,ae=!1;else{c=Ju(a,n,q,c,!1);const Kn=i.listen(rt,u,c);Y.push(c,Kn),V&&V.push(u,Ht,Ge,Ge+1)}}else c=Ju(a,n,q,c,!0),rt.addEventListener(u,c,p),Y.push(c),V&&V.push(u,Ht,Ge,p)}else c=Ju(a,n,q,c,!1);const me=a.outputs;let Fe;if(ae&&null!==me&&(Fe=me[u])){const Te=Fe.length;if(Te)for(let rt=0;rt<Te;rt+=2){const As=n[Fe[rt]][Fe[rt+1]].subscribe(c),bu=Y.length;Y.push(c,As),V&&V.push(u,a.index,bu,-(bu+1))}}}(c,u,u[11],p,t,n,!!i,a),Pd}function Rh(t,n,i,a){try{return!1!==i(a)}catch(u){return Xy(t,u),!1}}function Ju(t,n,i,a,u){return function c(p){if(p===Function)return a;const m=2&t.flags?nn(t.index,n):n;0==(32&n[2])&&wd(m);let I=Rh(n,0,a,p),x=c.__ngNextListenerFn__;for(;x;)I=Rh(n,0,x,p)&&I,x=x.__ngNextListenerFn__;return u&&!1===I&&(p.preventDefault(),p.returnValue=!1),I}}function _u(t=1){return function(t){return(wt.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,wt.lFrame.contextLView))[8]}(t)}function pp(t,n,i){return gp(t,"",n,"",i),pp}function gp(t,n,i,a,u){const c=qe(),p=Ku(c,n,i,a);return p!==gn&&So(En(),gr(),c,t,p,c[11],u,!1),gp}function Q_(t,n,i,a,u){const c=t[i+1],p=null===n;let m=a?To(c):Ao(c),I=!1;for(;0!==m&&(!1===I||p);){const V=t[m+1];J_(t[m],n)&&(I=!0,t[m+1]=a?gg(V):pu(V)),m=a?To(V):Ao(V)}I&&(t[i+1]=a?pu(c):gg(c))}function J_(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&bs(t,n)>=0}function Im(t,n){return function(t,n,i,a){const u=qe(),c=En(),p=function(t){const n=wt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);c.firstUpdatePass&&function(t,n,i,a){const u=t.data;if(null===u[i+1]){const c=u[Fr()],p=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(c,a)&&null===n&&!p&&(n=!1),n=function(t,n,i,a){const u=function(t){const n=wt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let c=a?n.residualClasses:n.residualStyles;if(null===u)0===(a?n.classBindings:n.styleBindings)&&(i=Ph(i=Cm(null,t,n,i,a),n.attrs,a),c=null);else{const p=n.directiveStylingLast;if(-1===p||t[p]!==u)if(i=Cm(u,t,n,i,a),null===c){let I=function(t,n,i){const a=i?n.classBindings:n.styleBindings;if(0!==Ao(a))return t[To(a)]}(t,n,a);void 0!==I&&Array.isArray(I)&&(I=Cm(null,t,n,I[1],a),I=Ph(I,n.attrs,a),function(t,n,i,a){t[To(i?n.classBindings:n.styleBindings)]=a}(t,n,a,I))}else c=function(t,n,i){let a;const u=n.directiveEnd;for(let c=1+n.directiveStylingLast;c<u;c++)a=Ph(a,t[c].hostAttrs,i);return Ph(a,n.attrs,i)}(t,n,a)}return void 0!==c&&(a?n.residualClasses=c:n.residualStyles=c),i}(u,c,n,a),function(t,n,i,a,u,c){let p=c?n.classBindings:n.styleBindings,m=To(p),I=Ao(p);t[a]=i;let V,x=!1;if(Array.isArray(i)){const q=i;V=q[1],(null===V||bs(q,V)>0)&&(x=!0)}else V=i;if(u)if(0!==I){const Y=To(t[m+1]);t[a+1]=lh(Y,m),0!==Y&&(t[Y+1]=xf(t[Y+1],a)),t[m+1]=function(t,n){return 131071&t|n<<17}(t[m+1],a)}else t[a+1]=lh(m,0),0!==m&&(t[m+1]=xf(t[m+1],a)),m=a;else t[a+1]=lh(I,0),0===m?m=a:t[I+1]=xf(t[I+1],a),I=a;x&&(t[a+1]=pu(t[a+1])),Q_(t,V,a,!0),Q_(t,V,a,!1),function(t,n,i,a,u){const c=u?t.residualClasses:t.residualStyles;null!=c&&"string"==typeof n&&bs(c,n)>=0&&(i[a+1]=gg(i[a+1]))}(n,V,t,a,c),p=lh(m,I),c?n.classBindings=p:n.styleBindings=p}(u,c,n,i,p,a)}}(c,t,p,a),n!==gn&&Cs(u,p,n)&&function(t,n,i,a,u,c,p,m){if(!(3&n.type))return;const I=t.data,x=I[m+1];yp(function(t){return 1==(1&t)}(x)?Dm(I,n,i,u,Ao(x),p):void 0)||(yp(c)||function(t){return 2==(2&t)}(x)&&(c=Dm(I,null,i,u,m,p)),function(t,n,i,a,u){const c=R(t);if(n)u?c?t.addClass(i,a):i.classList.add(a):c?t.removeClass(i,a):i.classList.remove(a);else{let p=-1===a.indexOf("-")?void 0:$s.DashCase;if(null==u)c?t.removeStyle(i,a,p):i.style.removeProperty(a);else{const m="string"==typeof u&&u.endsWith("!important");m&&(u=u.slice(0,-10),p|=$s.Important),c?t.setStyle(i,a,u,p):i.style.setProperty(a,u,m?"important":"")}}}(a,p,B(Fr(),i),u,c))}(c,c.data[Fr()],u,u[11],t,u[p+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=we(Ba(t)))),t}(n,i),a,p)}(t,n,null,!0),Im}function Cm(t,n,i,a,u){let c=null;const p=i.directiveEnd;let m=i.directiveStylingLast;for(-1===m?m=i.directiveStart:m++;m<p&&(c=n[m],a=Ph(a,c.hostAttrs,u),c!==t);)m++;return null!==t&&(i.directiveStylingLast=m),a}function Ph(t,n,i){const a=i?1:2;let u=-1;if(null!==n)for(let c=0;c<n.length;c++){const p=n[c];"number"==typeof p?u=p:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ai(t,p,!!i||n[++c]))}return void 0===t?null:t}function Dm(t,n,i,a,u,c){const p=null===n;let m;for(;u>0;){const I=t[u],x=Array.isArray(I),V=x?I[1]:I,q=null===V;let Y=i[u+1];Y===gn&&(Y=q?nt:void 0);let ae=q?nu(Y,a):V===a?Y:void 0;if(x&&!yp(ae)&&(ae=nu(I,a)),yp(ae)&&(m=ae,p))return m;const me=t[u+1];u=p?To(me):Ao(me)}if(null!==n){let I=c?n.residualClasses:n.residualStyles;null!=I&&(m=nu(I,a))}return m}function yp(t){return void 0!==t}function Tm(t,n=""){const i=qe(),a=En(),u=t+K,c=a.firstCreatePass?Tl(a,u,1,n,null):a.data[u],p=i[u]=function(t,n){return R(t)?t.createText(n):t.createTextNode(n)}(i[11],n);cc(a,i,p,c),cs(c,!1)}function vp(t){return Ul("",t,""),vp}function Ul(t,n,i){const a=qe(),u=Ku(a,t,n,i);return u!==gn&&Wu(a,Fr(),u),Ul}const xc=void 0;var Om=["en",[["a","p"],["AM","PM"],xc],[["AM","PM"],xc,xc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xc,"{1} 'at' {0}",xc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const i=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let Mc={};function km(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=wp(n);if(i)return i;const a=n.split("-")[0];if(i=wp(a),i)return i;if("en"===a)return Om;throw new Error(`Missing locale data for the locale "${t}".`)}function Tv(t){return km(t)[an.PluralCase]}function wp(t){return t in Mc||(Mc[t]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[t]),Mc[t]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const Fm="en-US";let z0=Fm;function Mp(t,n,i,a,u){if(t=Oe(t),Array.isArray(t))for(let c=0;c<t.length;c++)Mp(t[c],n,i,a,u);else{const c=En(),p=qe();let m=Td(t)?t:Oe(t.provide),I=Yf(t);const x=pr(),V=1048575&x.providerIndexes,q=x.directiveStart,Y=x.providerIndexes>>20;if(Td(t)||!t.multi){const ae=new jn(I,u,Fl),me=nE(m,n,u?V:V+Y,q);-1===me?(_t(Ze(x,p),c,m),eE(c,t,n.length),n.push(m),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),i.push(ae),p.push(ae)):(i[me]=ae,p[me]=ae)}else{const ae=nE(m,n,V+Y,q),me=nE(m,n,V,V+Y),Fe=ae>=0&&i[ae],Te=me>=0&&i[me];if(u&&!Te||!u&&!Fe){_t(Ze(x,p),c,m);const rt=function(t,n,i,a,u){const c=new jn(t,i,Fl);return c.multi=[],c.index=n,c.componentProviders=0,tE(c,u,a&&!i),c}(u?Jm:BI,i.length,u,a,I);!u&&Te&&(i[me].providerFactory=rt),eE(c,t,n.length,0),n.push(m),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),i.push(rt),p.push(rt)}else eE(c,t,ae>-1?ae:me,tE(i[u?me:ae],I,!u&&a));!u&&a&&Te&&i[me].componentProviders++}}}function eE(t,n,i,a){const u=Td(n);if(u||function(t){return!!t.useClass}(n)){const p=(n.useClass||n).prototype.ngOnDestroy;if(p){const m=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const I=m.indexOf(i);-1===I?m.push(i,[a,p]):m[I+1].push(a,p)}else m.push(i,p)}}}function tE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function nE(t,n,i,a){for(let u=i;u<a;u++)if(n[u]===t)return u;return-1}function BI(t,n,i,a){return rE(this.multi,[])}function Jm(t,n,i,a){const u=this.multi;let c;if(this.providerFactory){const p=this.providerFactory.componentProviders,m=te(i,i[1],this.providerFactory.index,a);c=m.slice(0,p),rE(u,c);for(let I=p;I<m.length;I++)c.push(m[I])}else c=[],rE(u,c);return c}function rE(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function Xm(t,n=[]){return i=>{i.providersResolver=(a,u)=>function(t,n,i){const a=En();if(a.firstCreatePass){const u=Or(t);Mp(i,a.data,a.blueprint,u,!0),Mp(n,a.data,a.blueprint,u,!1)}}(a,u?u(t):t,n)}}class ey{}const Np="ngComponent";class ty{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${we(t)}. Did you add it to @NgModule.entryComponents?`);return n[Np]=t,n}(n)}}let Wh=(()=>{class t{}return t.NULL=new ty,t})();function Op(...t){}function zh(t,n){return new tl(be(t,n))}const GI=function(){return zh(pr(),qe())};let tl=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=GI,t})();function gw(t){return t instanceof tl?t.nativeElement:t}class ny{}let mw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>sE(),t})();const sE=function(){const t=qe(),i=nn(pr().index,t);return function(t){return t[11]}(Hr(i)?i:t)};let Pp=(()=>{class t{}return t.\u0275prov=tn({token:t,providedIn:"root",factory:()=>null}),t})();class ry{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const kp=new ry("13.0.1"),Pc={};function iy(t,n,i,a,u=!1){for(;null!==i;){const c=n[i.index];if(null!==c&&a.push(A(c)),Tr(c))for(let m=10;m<c.length;m++){const I=c[m],x=I[1].firstChild;null!==x&&iy(I[1],I,x,a)}const p=i.type;if(8&p)iy(t,n,i.child,a);else if(32&p){const m=rh(i,n);let I;for(;I=m();)a.push(I)}else if(16&p){const m=wl(n,i);if(Array.isArray(m))a.push(...m);else{const I=uc(n[16]);iy(I[1],I,m,a,!0)}}i=u?i.projectionNext:i.next}return a}class qh{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return iy(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Tr(n)){const i=n[8],a=i?i.indexOf(this):-1;a>-1&&(du(n,a),at(i,a))}this._attachedToViewContainer=!1}ao(this._lView[1],this._lView)}onDestroy(n){vd(this._lView[1],this._lView,null,n)}markForCheck(){wd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Al(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){Gi(!0);try{Al(t,n,i)}finally{Gi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,dc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class uE extends qh{constructor(n){super(n),this._view=n}detectChanges(){Wf(this._view)}checkNoChanges(){!function(t){Gi(!0);try{Wf(t)}finally{Gi(!1)}}(this._view)}get context(){return null}}class lE extends Wh{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Tt(n);return new Kh(i,this.ngModule)}}function Fp(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const cE=new Bt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bu});class Kh extends ey{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(jE).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return Fp(this.componentDef.inputs)}get outputs(){return Fp(this.componentDef.outputs)}create(n,i,a,u){const c=(u=u||this.ngModule)?function(t,n){return{get:(i,a,u)=>{const c=t.get(i,Pc,u);return c!==Pc||a===Pc?c:n.get(i,a,u)}}}(n,u.injector):n,p=c.get(ny,z),m=c.get(Pp,null),I=p.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",V=a?function(t,n,i){if(R(t))return t.selectRootElement(n,i===pn.ShadowDom);let a="string"==typeof n?t.querySelector(n):n;return a.textContent="",a}(I,a,this.componentDef.encapsulation):st(p.createRenderer(null,this.componentDef),x,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(x)),q=this.componentDef.onPush?576:528,Y=function(t,n){return{components:[],scheduler:t||Bu,clean:u0,playerHandler:n||null,flags:0}}(),ae=_d(0,null,null,1,0,null,null,null,null,null),me=hh(null,ae,Y,q,null,null,p,I,m,c);let Fe,Te;Ls(me);try{const rt=function(t,n,i,a,u,c){const p=i[1];i[20]=t;const I=Tl(p,20,2,"#host",null),x=I.mergedAttrs=n.hostAttrs;null!==x&&(Id(I,x,!0),null!==t&&(Js(u,t,x),null!==I.classes&&oh(u,t,I.classes),null!==I.styles&&hg(u,t,I.styles)));const V=a.createRenderer(t,n),q=hh(i,jy(n),null,n.onPush?64:16,i[20],I,a,V,c||null,null);return p.firstCreatePass&&(_t(Ze(I,i),p,n.type),Ky(p,I),yc(I,i.length,1)),Ed(i,q),i[20]=q}(V,this.componentDef,me,p,I);if(V)if(a)Js(I,V,["ng-version",kp.full]);else{const{attrs:Ge,classes:Ht}=function(t){const n=[],i=[];let a=1,u=2;for(;a<t.length;){let c=t[a];if("string"==typeof c)2===u?""!==c&&n.push(c,t[++a]):8===u&&i.push(c);else{if(!uo(u))break;u=c}a++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);Ge&&Js(I,V,Ge),Ht&&Ht.length>0&&oh(I,V,Ht.join(" "))}if(Te=ft(ae,K),void 0!==i){const Ge=Te.projection=[];for(let Ht=0;Ht<this.ngContentSelectors.length;Ht++){const mn=i[Ht];Ge.push(null!=mn?Array.from(mn):null)}}Fe=function(t,n,i,a,u){const c=i[1],p=function(t,n,i){const a=pr();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),$f(t,a,n,yd(t,n,1,null),i));const u=te(n,t,a.directiveStart,a);ps(u,n);const c=be(a,n);return c&&ps(c,n),u}(c,i,n);if(a.components.push(p),t[8]=p,u&&u.forEach(I=>I(p,n)),n.contentQueries){const I=pr();n.contentQueries(1,p,I.directiveStart)}const m=pr();return!c.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Vs(m.index),jf(i[1],m,0,m.directiveStart,m.directiveEnd,n),qy(n,p)),p}(rt,this.componentDef,me,Y,[v_]),gc(ae,me,null)}finally{Vo()}return new dE(this.componentType,Fe,zh(Te,me),me,Te)}}class dE extends class{}{constructor(n,i,a,u,c){super(),this.location=a,this._rootLView=u,this._tNode=c,this.instance=i,this.hostView=this.changeDetectorRef=new uE(u),this.componentType=n}get injector(){return new Tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class kc{}class sy{}const Fc=new Map;class o extends kc{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lE(this);const a=Hn(n);this._bootstrapComponents=xr(a.bootstrap),this._r3Injector=n_(n,i,[{provide:kc,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],we(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=ni.THROW_IF_NOT_FOUND,a=ht.Default){return n===ni||n===kc||n===_c?this:this._r3Injector.get(n,i,a)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class l extends sy{constructor(n){super(),this.moduleType=n,null!==Hn(n)&&function(t){const n=new Set;!function i(a){const u=Hn(a,!0),c=u.id;null!==c&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${we(n)} vs ${we(n.name)}`)}(c,Fc.get(c),a),Fc.set(c,a));const p=xr(u.imports);for(const m of p)n.has(m)||(n.add(m),i(m))}(t)}(n)}create(n){return new o(this.moduleType,n)}}function Xt(t,n,i,a,u,c){const p=n+i;return Cs(t,p,u)?function(t,n,i){return t[n]=i}(t,p+1,c?a.call(c,u):a(u)):function(t,n){const i=t[n];return i===gn?void 0:i}(t,p+1)}function Wn(t,n){const i=En();let a;const u=t+K;i.firstCreatePass?(a=function(t,n){if(n)for(let i=n.length-1;i>=0;i--){const a=n[i];if(t===a.name)return a}throw new $e("302",`The pipe '${t}' could not be found!`)}(n,i.pipeRegistry),i.data[u]=a,a.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(u,a.onDestroy)):a=i.data[u];const c=a.factory||(a.factory=Bi(a.type)),p=Nr(Fl);try{const m=Ma(!1),I=c();return Ma(m),function(t,n,i,a){i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),n[i]=a}(i,qe(),u,I),I}finally{Nr(p)}}function Ts(t,n,i){const a=t+K,u=qe(),c=on(u,a);return function(t,n){return t[1].data[n].pure}(u,a)?Xt(u,function(){const t=wt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),n,c.transform,i,c):c.transform(i)}function bw(t){return n=>{setTimeout(t,void 0,n)}}const Bl=class extends w.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,a){var I,x,V;let u=n,c=i||(()=>null),p=a;if(n&&"object"==typeof n){const q=n;u=null==(I=q.next)?void 0:I.bind(q),c=null==(x=q.error)?void 0:x.bind(q),p=null==(V=q.complete)?void 0:V.bind(q)}this.__isAsync&&(c=bw(c),u&&(u=bw(u)),p&&(p=bw(p)));const m=super.subscribe({next:u,error:c,complete:p});return n instanceof O.w&&n.add(m),m}};function zC(){return this._results[Ad()]()}class gE{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Ad(),a=gE.prototype;a[i]||(a[i]=zC)}get changes(){return this._changes||(this._changes=new Bl)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const a=this;a.dirty=!1;const u=Ti(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],c=n[a];if(i&&(u=i(u),c=i(c)),c!==u)return!1}return!0}(a._results,u,i))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const KC=function(){return mE(pr(),qe())};let uy=(()=>{class t{}return t.__NG_ELEMENT_ID__=KC,t})();const ZC=uy,YC=class extends ZC{constructor(n,i,a){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=a}createEmbeddedView(n){const i=this._declarationTContainer.tViews,a=hh(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(a[19]=c.createEmbeddedView(i)),gc(i,a,n),new qh(a)}};function mE(t,n){return 4&t.type?new YC(n,t,zh(t,n)):null}const XC=function(){return KI(pr(),qe())};let yE=(()=>{class t{}return t.__NG_ELEMENT_ID__=XC,t})();const tD=yE,zI=class extends tD{constructor(n,i,a){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=a}get element(){return zh(this._hostTNode,this._hostLView)}get injector(){return new Tn(this._hostTNode,this._hostLView)}get parentInjector(){const n=to(this._hostTNode,this._hostLView);if(ds(n)){const i=eo(n,this._hostLView),a=Di(n);return new Tn(i[1].data[a+8],i)}return new Tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=qI(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,a){const u=n.createEmbeddedView(i||{});return this.insert(u,a),u}createComponent(n,i,a,u,c){const p=n&&!("function"==typeof n);let m;if(p)m=i;else{const q=i||{};m=q.index,a=q.injector,u=q.projectableNodes,c=q.ngModuleRef}const I=p?n:new Kh(Tt(n)),x=a||this.parentInjector;if(!c&&null==I.ngModule&&x){const q=x.get(kc,null);q&&(c=q)}const V=I.create(x,u,void 0,c);return this.insert(V.hostView,m),V}insert(n,i){const a=n._lView,u=a[1];if(Tr(a[3])){const V=this.indexOf(n);if(-1!==V)this.detach(V);else{const q=a[3],Y=new zI(q,q[6],q[3]);Y.detach(Y.indexOf(n))}}const c=this._adjustIndex(i),p=this._lContainer;!function(t,n,i,a){const u=10+a,c=i.length;a>0&&(i[u-1][4]=n),a<c-10?(n[4]=i[u],Pa(i,10+a,n)):(i.push(n),n[4]=null),n[3]=i;const p=n[17];null!==p&&i!==p&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(p,n);const m=n[19];null!==m&&m.insertView(t),n[2]|=128}(u,a,p,c);const m=Il(c,p),I=a[11],x=dd(I,p[7]);return null!==x&&function(t,n,i,a,u,c){a[0]=u,a[6]=n,dc(t,a,i,1,u,c)}(u,p[6],I,a,x,m),n.attachToViewContainerRef(),Pa(Cw(p),c,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=qI(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),a=du(this._lContainer,i);a&&(at(Cw(this._lContainer),i),ao(a[1],a))}detach(n){const i=this._adjustIndex(n,-1),a=du(this._lContainer,i);return a&&null!=at(Cw(this._lContainer),i)?new qh(a):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function qI(t){return t[8]}function Cw(t){return t[8]||(t[8]=[])}function KI(t,n){let i;const a=n[t.index];if(Tr(a))i=a;else{let u;if(8&t.type)u=A(a);else{const c=n[11];u=c.createComment("");const p=be(t,n);Ga(c,dd(c,p),u,function(t,n){return R(t)?t.nextSibling(n):n.nextSibling}(c,p),!1)}n[t.index]=i=Gu(a,n,u,t),Ed(n,i)}return new zI(i,t,n)}class Dw{constructor(n){this.queryList=n,this.matches=null}clone(){return new Dw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tw{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const a=null!==n.contentQueries?n.contentQueries[0]:i.length,u=[];for(let c=0;c<a;c++){const p=i.getByIndex(c);u.push(this.queries[p.indexInDeclarationView].clone())}return new Tw(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==nb(n,i).matches&&this.queries[i].setDirty()}}class ZI{constructor(n,i,a=null){this.predicate=n,this.flags=i,this.read=a}}class Aw{constructor(n=[]){this.queries=n}elementStart(n,i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let a=0;a<this.length;a++){const u=null!==i?i.length:0,c=this.getByIndex(a).embeddedTView(n,u);c&&(c.indexInDeclarationView=a,null!==i?i.push(c):i=[c])}return null!==i?new Aw(i):null}template(n,i){for(let a=0;a<this.queries.length;a++)this.queries[a].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Sw{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Sw(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let a=n.parent;for(;null!==a&&8&a.type&&a.index!==i;)a=a.parent;return i===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const c=a[u];this.matchTNodeWithReadOption(n,i,iD(i,c)),this.matchTNodeWithReadOption(n,i,G(i,n,c,!1,!1))}else a===uy?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,G(i,n,a,!1,!1))}matchTNodeWithReadOption(n,i,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===tl||u===yE||u===uy&&4&i.type)this.addMatch(i.index,-2);else{const c=G(i,n,u,!1,!1);null!==c&&this.addMatch(i.index,c)}else this.addMatch(i.index,a)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function iD(t,n){const i=t.localNames;if(null!==i)for(let a=0;a<i.length;a+=2)if(i[a]===n)return i[a+1];return null}function oD(t,n,i,a){return-1===i?function(t,n){return 11&t.type?zh(t,n):4&t.type?mE(t,n):null}(n,t):-2===i?function(t,n,i){return i===tl?zh(n,t):i===uy?mE(n,t):i===yE?KI(n,t):void 0}(t,n,a):te(t,t[1],i,n)}function YI(t,n,i,a){const u=n[19].queries[a];if(null===u.matches){const c=t.data,p=i.matches,m=[];for(let I=0;I<p.length;I+=2){const x=p[I];m.push(x<0?null:oD(n,c[x],p[I+1],i.metadata.read))}u.matches=m}return u.matches}function xw(t,n,i,a){const u=t.queries.getByIndex(i),c=u.matches;if(null!==c){const p=YI(t,n,u,i);for(let m=0;m<c.length;m+=2){const I=c[m];if(I>0)a.push(p[m/2]);else{const x=c[m+1],V=n[-I];for(let q=10;q<V.length;q++){const Y=V[q];Y[17]===Y[3]&&xw(Y[1],Y,x,a)}if(null!==V[9]){const q=V[9];for(let Y=0;Y<q.length;Y++){const ae=q[Y];xw(ae[1],ae,x,a)}}}}}return a}function QI(t){const n=qe(),i=En(),a=Da();Ta(a+1);const u=nb(i,a);if(t.dirty&&tr(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const c=u.crossesNgTemplate?xw(i,n,a,[]):YI(i,n,u,a);t.reset(c,gw),t.notifyOnChanges()}return!0}return!1}function JI(t,n,i,a){const u=En();if(u.firstCreatePass){const c=pr();(function(t,n,i){null===t.queries&&(t.queries=new Aw),t.queries.track(new Sw(n,i))})(u,new ZI(n,i,a),c.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(u,t),2==(2&i)&&(u.staticContentQueries=!0)}!function(t,n,i){const a=new gE(4==(4&i));vd(t,n,a,a.destroy),null===n[19]&&(n[19]=new Tw),n[19].queries.push(new Dw(a))}(u,qe(),i)}function XI(){return t=qe(),n=Da(),t[19].queries[n].queryList;var t,n}function nb(t,n){return t.queries.getByIndex(n)}const kw=new Bt("Application Initializer");let Up=(()=>{class t{constructor(i){this.appInits=i,this.resolve=Op,this.reject=Op,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const i=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const c=this.appInits[u]();if(xh(c))i.push(c);else if(Od(c)){const p=new Promise((m,I)=>{c.subscribe({complete:m,error:I})});i.push(p)}}Promise.all(i).then(()=>{a()}).catch(u=>{this.reject(u)}),0===i.length&&a(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(oi(kw,8))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const Eb=new Bt("AppId"),VD={provide:Eb,useFactory:function(){return`${Fw()}${Fw()}${Fw()}`},deps:[]};function Fw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wb=new Bt("Platform Initializer"),Ib=new Bt("Platform ID"),bb=new Bt("appBootstrapListener");let Cb=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const EE=new Bt("LocaleId"),Db=new Bt("DefaultCurrencyCode");class BD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const Lw=function(t){return new l(t)},jD=Lw,$D=function(t){return Promise.resolve(Lw(t))},Ab=function(t){const n=Lw(t),a=xr(Hn(t).declarations).reduce((u,c)=>{const p=Tt(c);return p&&u.push(new Kh(p)),u},[]);return new BD(n,a)},HD=Ab,GD=function(t){return Promise.resolve(Ab(t))};let Vw=(()=>{class t{constructor(){this.compileModuleSync=jD,this.compileModuleAsync=$D,this.compileModuleAndAllComponentsSync=HD,this.compileModuleAndAllComponentsAsync=GD}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const qD=(()=>Promise.resolve(0))();function Uw(t){"undefined"==typeof Zone?qD.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ka{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bl(!1),this.onMicrotaskEmpty=new Bl(!1),this.onStable=new Bl(!1),this.onError=new Bl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&i,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let t=yt.requestAnimationFrame,n=yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(yt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,jw(t),t.isCheckStableRunning=!0,Bw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),jw(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,a,u,c,p,m)=>{try{return Sb(t),i.invokeTask(u,c,p,m)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||t.shouldCoalesceRunChangeDetection)&&n(),xb(t)}},onInvoke:(i,a,u,c,p,m,I)=>{try{return Sb(t),i.invoke(u,c,p,m,I)}finally{t.shouldCoalesceRunChangeDetection&&n(),xb(t)}},onHasTask:(i,a,u,c)=>{i.hasTask(u,c),a===u&&("microTask"==c.change?(t._hasPendingMicrotasks=c.microTask,jw(t),Bw(t)):"macroTask"==c.change&&(t.hasPendingMacrotasks=c.macroTask))},onHandleError:(i,a,u,c)=>(i.handleError(u,c),t.runOutsideAngular(()=>t.onError.emit(c)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ka.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ka.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,a){return this._inner.run(n,i,a)}runTask(n,i,a,u){const c=this._inner,p=c.scheduleEventTask("NgZoneEvent: "+u,n,ZD,Op,Op);try{return c.runTask(p,i,a)}finally{c.cancelTask(p)}}runGuarded(n,i,a){return this._inner.runGuarded(n,i,a)}runOutsideAngular(n){return this._outer.run(n)}}const ZD={};function Bw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function jw(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Sb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xb(t){t._nesting--,Bw(t)}class JD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bl,this.onMicrotaskEmpty=new Bl,this.onStable=new Bl,this.onError=new Bl}run(n,i,a){return n.apply(i,a)}runGuarded(n,i,a){return n.apply(i,a)}runOutsideAngular(n){return n()}runTask(n,i,a,u){return n.apply(i,a)}}let Mb=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ka.assertNotInAngularZone(),Uw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uw(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(i)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,a,u){let c=-1;a&&a>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==c),i(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:i,timeoutId:c,updateCb:u})}whenStable(i,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,a,u){return[]}}return t.\u0275fac=function(i){return new(i||t)(oi(Ka))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})(),Rb=(()=>{class t{constructor(){this._applications=new Map,$w.addToWindow(this)}registerApplication(i,a){this._applications.set(i,a)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,a=!0){return $w.findTestabilityInTree(this,i,a)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();class XD{addToWindow(n){}findTestabilityInTree(n,i,a){return null}}function eT(t){$w=t}let $w=new XD,Nb=!0,Ob=!1;function Hw(){return Ob=!0,Nb}function tT(){if(Ob)throw new Error("Cannot enable prod mode after platform setup.");Nb=!1}let nl;const Pb=new Bt("AllowMultipleToken");class uT{constructor(n,i){this.name=n,this.token=i}}function kb(t,n,i=[]){const a=`Platform: ${n}`,u=new Bt(a);return(c=[])=>{let p=Fb();if(!p||p.injector.get(Pb,!1))if(t)t(i.concat(c).concat({provide:u,useValue:!0}));else{const m=i.concat(c).concat({provide:u,useValue:!0},{provide:fa,useValue:"platform"});!function(t){if(nl&&!nl.destroyed&&!nl.injector.get(Pb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");nl=t.get(Lb);const n=t.get(wb,null);n&&n.forEach(i=>i())}(ni.create({providers:m,name:a}))}return function(t){const n=Fb();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(u)}}function Fb(){return nl&&!nl.destroyed?nl:null}let Lb=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,a){const m=function(t,n){let i;return i="noop"===t?new JD:("zone.js"===t?void 0:t)||new Ka({enableLongStackTrace:Hw(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),I=[{provide:Ka,useValue:m}];return m.run(()=>{const x=ni.create({providers:I,parent:this.injector,name:i.moduleType.name}),V=i.create(x),q=V.injector.get(ti,null);if(!q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return m.runOutsideAngular(()=>{const Y=m.onError.subscribe({next:ae=>{q.handleError(ae)}});V.onDestroy(()=>{Gw(this._modules,V),Y.unsubscribe()})}),function(t,n,i){try{const a=i();return xh(a)?a.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw n.runOutsideAngular(()=>t.handleError(a)),a}}(q,m,()=>{const Y=V.injector.get(Up);return Y.runInitializers(),Y.donePromise.then(()=>(function(t){Yt(t,"Expected localeId to be defined"),"string"==typeof t&&(z0=t.toLowerCase().replace(/_/g,"-"))}(V.injector.get(EE,Fm)||Fm),this._moduleDoBootstrap(V),V))})})}bootstrapModule(i,a=[]){const u=Vb({},a);return function(t,n,i){const a=new l(i);return Promise.resolve(a)}(0,0,i).then(c=>this.bootstrapModuleFactory(c,u))}_moduleDoBootstrap(i){const a=i.injector.get(cy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${we(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(a)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(oi(ni))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();function Vb(t,n){return Array.isArray(n)?n.reduce(Vb,t):en(en({},t),n)}let cy=(()=>{class t{constructor(i,a,u,c,p){this._zone=i,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new Z.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),I=new Z.y(x=>{let V;this._zone.runOutsideAngular(()=>{V=this._zone.onStable.subscribe(()=>{Ka.assertNotInAngularZone(),Uw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Ka.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{V.unsubscribe(),q.unsubscribe()}});this.isStable=(0,ve.T)(m,I.pipe(t=>(0,pe.x)()(function(t,n){return function(a){let u;u="function"==typeof t?t:function(){return t};const c=Object.create(a,fe.N);return c.source=a,c.subjectFactory=u,c}}(ge)(t))))}bootstrap(i,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=i instanceof ey?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(u.componentType);const c=function(t){return t.isBoundToModule}(u)?void 0:this._injector.get(kc),m=u.create(ni.NULL,[],a||u.selector,c),I=m.location.nativeElement,x=m.injector.get(Mb,null),V=x&&m.injector.get(Rb);return x&&V&&V.registerApplication(I,x),m.onDestroy(()=>{this.detachView(m.hostView),Gw(this.components,m),V&&V.unregisterApplication(I)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const a=i;this._views.push(a),a.attachToAppRef(this)}detachView(i){const a=i;Gw(this._views,a),a.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(bb,[]).concat(this._bootstrapListeners).forEach(u=>u(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(oi(Ka),oi(ni),oi(ti),oi(Wh),oi(Up))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();function Gw(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const gT=function(t){return function(t,n,i){if(fr(t)&&!i){const a=nn(t.index,n);return new qh(a,a)}return 47&t.type?new qh(n[16],n):null}(pr(),qe(),16==(16&t))};let mT=(()=>{class t{}return t.__NG_ELEMENT_ID__=gT,t})();const TT=function(t){return null};class Wb{constructor(){}supports(n){return Sd(n)}create(n){return new xT(n)}}const ST=(t,n)=>n;class xT{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||ST}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,a=this._removalsHead,u=0,c=null;for(;i||a;){const p=!a||i&&i.currentIndex<qb(a,u,c)?i:a,m=qb(p,u,c),I=p.currentIndex;if(p===a)u--,a=a._nextRemoved;else if(i=i._next,null==p.previousIndex)u++;else{c||(c=[]);const x=m-u,V=I-u;if(x!=V){for(let Y=0;Y<x;Y++){const ae=Y<c.length?c[Y]:c[Y]=0,me=ae+Y;V<=me&&me<x&&(c[Y]=ae+1)}c[p.previousIndex]=V-x}}m!==I&&n(p,m,I)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Sd(n))throw new Error(`Error trying to diff '${we(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,c,p,i=this._itHead,a=!1;if(Array.isArray(n)){this.length=n.length;for(let m=0;m<this.length;m++)c=n[m],p=this._trackByFn(m,c),null!==i&&Object.is(i.trackById,p)?(a&&(i=this._verifyReinsertion(i,c,p,m)),Object.is(i.item,c)||this._addIdentityChange(i,c)):(i=this._mismatch(i,c,p,m),a=!0),i=i._next}else u=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Ad()]();let a;for(;!(a=i.next()).done;)n(a.value)}}(n,m=>{p=this._trackByFn(u,m),null!==i&&Object.is(i.trackById,p)?(a&&(i=this._verifyReinsertion(i,m,p,u)),Object.is(i.item,m)||this._addIdentityChange(i,m)):(i=this._mismatch(i,m,p,u),a=!0),i=i._next,u++}),this.length=u;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,a,u){let c;return null===n?c=this._itTail:(c=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,c,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,c,u)):n=this._addAfter(new MT(i,a),c,u),n}_verifyReinsertion(n,i,a,u){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==c?n=this._reinsertAfter(c,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,c=n._nextRemoved;return null===u?this._removalsHead=c:u._nextRemoved=c,null===c?this._removalsTail=u:c._prevRemoved=u,this._insertAfter(n,i,a),this._addToMoves(n,a),n}_moveAfter(n,i,a){return this._unlink(n),this._insertAfter(n,i,a),this._addToMoves(n,a),n}_addAfter(n,i,a){return this._insertAfter(n,i,a),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,a){const u=null===i?this._itHead:i._next;return n._next=u,n._prev=i,null===u?this._itTail=n:u._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new zb),this._linkedRecords.put(n),n.currentIndex=a,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,a=n._next;return null===i?this._itHead=a:i._next=a,null===a?this._itTail=i:a._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zb),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class MT{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RT{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===i||i<=a.currentIndex)&&Object.is(a.trackById,n))return a;return null}remove(n){const i=n._prevDup,a=n._nextDup;return null===i?this._head=a:i._nextDup=a,null===a?this._tail=i:a._prevDup=i,null===this._head}}class zb{constructor(){this.map=new Map}put(n){const i=n.trackById;let a=this.map.get(i);a||(a=new RT,this.map.set(i,a)),a.add(n)}get(n,i){const u=this.map.get(n);return u?u.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qb(t,n,i){const a=t.previousIndex;if(null===a)return a;let u=0;return i&&a<i.length&&(u=i[a]),a+n+u}class Kb{constructor(){}supports(n){return n instanceof Map||am(n)}create(){return new NT}}class NT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||am(n)))throw new Error(`Error trying to diff '${we(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(a,u)=>{if(i&&i.key===u)this._maybeAddToChanges(i,a),this._appendAfter=i,i=i._next;else{const c=this._getOrCreateRecordForKey(u,a);i=this._insertBeforeOrAppend(i,c)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let a=i;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const a=n._prev;return i._next=n,i._prev=a,n._prev=i,a&&(a._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,i);const c=u._prev,p=u._next;return c&&(c._next=p),p&&(p._prev=c),u._next=null,u._prev=null,u}const a=new OT(n);return this._records.set(n,a),a.currentValue=i,this._addToAdditions(a),a}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(a=>i(n[a],a))}}class OT{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zb(){return new CE([new Wb])}let CE=(()=>{class t{constructor(i){this.factories=i}static create(i,a){if(null!=a){const u=a.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||Zb()),deps:[[t,new Va,new bo]]}}find(i){const a=this.factories.find(u=>u.supports(i));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=tn({token:t,providedIn:"root",factory:Zb}),t})();function Yb(){return new DE([new Kb])}let DE=(()=>{class t{constructor(i){this.factories=i}static create(i,a){if(a){const u=a.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||Yb()),deps:[[t,new Va,new bo]]}}find(i){const a=this.factories.find(u=>u.supports(i));if(a)return a;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=tn({token:t,providedIn:"root",factory:Yb}),t})();const kT=[new Kb],LT=new CE([new Wb]),VT=new DE(kT),UT=kb(null,"core",[{provide:Ib,useValue:"unknown"},{provide:Lb,deps:[ni]},{provide:Rb,deps:[]},{provide:Cb,deps:[]}]),GT=[{provide:cy,useClass:cy,deps:[Ka,ni,ti,Wh,Up]},{provide:cE,deps:[Ka],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Up,useClass:Up,deps:[[new bo,kw]]},{provide:Vw,useClass:Vw,deps:[]},VD,{provide:CE,useFactory:function(){return LT},deps:[]},{provide:DE,useFactory:function(){return VT},deps:[]},{provide:EE,useFactory:function(t){return t||"undefined"!=typeof $localize&&$localize.locale||Fm},deps:[[new La(EE),new bo,new Va]]},{provide:Db,useValue:"USD"}];let zT=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(oi(cy))},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({providers:GT}),t})()},7816:(lt,Me,U)=>{U.d(Me,{Fj:()=>je,qu:()=>z,u:()=>Fn,sg:()=>fr,JJ:()=>Br,JL:()=>Xr,YN:()=>ys,wV:()=>_e,_:()=>Zn,UX:()=>H,Q7:()=>Yn,EJ:()=>Li,_Y:()=>ie,Kr:()=>fo});var w=U(5312),O=U(6019),Z=U(9423),ve=U(830),fe=U(8771),se=U(1458),Ce=U(9164);function ge(A,T){return new Z.y(C=>{const B=A.length;if(0===B)return void C.complete();const be=new Array(B);let et=0,ft=0;for(let on=0;on<B;on++){const nn=(0,Ce.D)(A[on]);let tr=!1;C.add(nn.subscribe({next:qn=>{tr||(tr=!0,ft++),be[on]=qn},error:qn=>C.error(qn),complete:()=>{et++,(et===B||!tr)&&(ft===B&&C.next(T?T.reduce((qn,$i,Yr)=>(qn[$i]=be[Yr],qn),{}):be),C.complete())}}))}})}let Q=(()=>{class A{constructor(C,B){this._renderer=C,this._elementRef=B,this.onChange=be=>{},this.onTouched=()=>{}}setProperty(C,B){this._renderer.setProperty(this._elementRef.nativeElement,C,B)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(w.Qsj),w.Y36(w.SBq))},A.\u0275dir=w.lG2({type:A}),A})(),J=(()=>{class A extends Q{}return A.\u0275fac=function(){let T;return function(B){return(T||(T=w.n5z(A)))(B||A)}}(),A.\u0275dir=w.lG2({type:A,features:[w.qOj]}),A})();const ye=new w.OlP("NgValueAccessor"),Be={provide:ye,useExisting:(0,w.Gpc)(()=>je),multi:!0},Oe=new w.OlP("CompositionEventMode");let je=(()=>{class A extends Q{constructor(C,B,be){super(C,B),this._compositionMode=be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const A=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(A.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Oe,8))},A.\u0275dir=w.lG2({type:A,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,B){1&C&&w.NdJ("input",function(et){return B._handleInput(et.target.value)})("blur",function(){return B.onTouched()})("compositionstart",function(){return B._compositionStart()})("compositionend",function(et){return B._compositionEnd(et.target.value)})},features:[w._Bn([Be]),w.qOj]}),A})();const it=new w.OlP("NgValidators"),Ee=new w.OlP("NgAsyncValidators");function Rr(A){return null!=A}function ri(A){const T=(0,w.QGY)(A)?(0,Ce.D)(A):A;return(0,w.CqO)(T),T}function Pi(A){let T={};return A.forEach(C=>{T=null!=C?en(en({},T),C):T}),0===Object.keys(T).length?null:T}function mr(A,T){return T.map(C=>C(A))}function li(A){return A.map(T=>function(A){return!A.validate}(T)?T:C=>T.validate(C))}function Ur(A){return null!=A?function(A){if(!A)return null;const T=A.filter(Rr);return 0==T.length?null:function(C){return Pi(mr(C,T))}}(li(A)):null}function zt(A){return null!=A?function(A){if(!A)return null;const T=A.filter(Rr);return 0==T.length?null:function(C){return function(...A){if(1===A.length){const T=A[0];if((0,ve.k)(T))return ge(T,null);if((0,se.K)(T)&&Object.getPrototypeOf(T)===Object.prototype){const C=Object.keys(T);return ge(C.map(B=>T[B]),C)}}if("function"==typeof A[A.length-1]){const T=A.pop();return ge(A=1===A.length&&(0,ve.k)(A[0])?A[0]:A,null).pipe((0,fe.U)(C=>T(...C)))}return ge(A,null)}(mr(C,T).map(ri)).pipe((0,fe.U)(Pi))}}(li(A)):null}function ln(A,T){return null===A?[T]:Array.isArray(A)?[...A,T]:[A,T]}function $n(A){return A._rawValidators}function wn(A){return A._rawAsyncValidators}function tn(A){return A?Array.isArray(A)?A:[A]:[]}function ci(A,T){return Array.isArray(A)?A.includes(T):A===T}function Xn(A,T){const C=tn(T);return tn(A).forEach(be=>{ci(C,be)||C.push(be)}),C}function fn(A,T){return tn(T).filter(C=>!ci(A,C))}class ze{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(T){this._rawValidators=T||[],this._composedValidatorFn=Ur(this._rawValidators)}_setAsyncValidators(T){this._rawAsyncValidators=T||[],this._composedAsyncValidatorFn=zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(T){this._onDestroyCallbacks.push(T)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(T=>T()),this._onDestroyCallbacks=[]}reset(T){this.control&&this.control.reset(T)}hasError(T,C){return!!this.control&&this.control.hasError(T,C)}getError(T,C){return this.control?this.control.getError(T,C):null}}class In extends ze{get formDirective(){return null}get path(){return null}}class Pt extends ze{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _r{constructor(T){this._cd=T}is(T){var C,B,be;return"submitted"===T?!!(null==(C=this._cd)?void 0:C.submitted):!!(null==(be=null==(B=this._cd)?void 0:B.control)?void 0:be[T])}}let Br=(()=>{class A extends _r{constructor(C){super(C)}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(Pt,2))},A.\u0275dir=w.lG2({type:A,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,B){2&C&&w.ekj("ng-untouched",B.is("untouched"))("ng-touched",B.is("touched"))("ng-pristine",B.is("pristine"))("ng-dirty",B.is("dirty"))("ng-valid",B.is("valid"))("ng-invalid",B.is("invalid"))("ng-pending",B.is("pending"))},features:[w.qOj]}),A})(),Xr=(()=>{class A extends _r{constructor(C){super(C)}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(In,10))},A.\u0275dir=w.lG2({type:A,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(C,B){2&C&&w.ekj("ng-untouched",B.is("untouched"))("ng-touched",B.is("touched"))("ng-pristine",B.is("pristine"))("ng-dirty",B.is("dirty"))("ng-valid",B.is("valid"))("ng-invalid",B.is("invalid"))("ng-pending",B.is("pending"))("ng-submitted",B.is("submitted"))},features:[w.qOj]}),A})();function cn(A,T){We(A,T),T.valueAccessor.writeValue(A.value),function(A,T){T.valueAccessor.registerOnChange(C=>{A._pendingValue=C,A._pendingChange=!0,A._pendingDirty=!0,"change"===A.updateOn&&_n(A,T)})}(A,T),function(A,T){const C=(B,be)=>{T.valueAccessor.writeValue(B),be&&T.viewToModelUpdate(B)};A.registerOnChange(C),T._registerOnDestroy(()=>{A._unregisterOnChange(C)})}(A,T),function(A,T){T.valueAccessor.registerOnTouched(()=>{A._pendingTouched=!0,"blur"===A.updateOn&&A._pendingChange&&_n(A,T),"submit"!==A.updateOn&&A.markAsTouched()})}(A,T),function(A,T){if(T.valueAccessor.setDisabledState){const C=B=>{T.valueAccessor.setDisabledState(B)};A.registerOnDisabledChange(C),T._registerOnDestroy(()=>{A._unregisterOnDisabledChange(C)})}}(A,T)}function Un(A,T,C=!0){const B=()=>{};T.valueAccessor&&(T.valueAccessor.registerOnChange(B),T.valueAccessor.registerOnTouched(B)),ct(A,T),A&&(T._invokeOnDestroyCallbacks(),A._registerOnCollectionChange(()=>{}))}function yt(A,T){A.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(T)})}function We(A,T){const C=$n(A);null!==T.validator?A.setValidators(ln(C,T.validator)):"function"==typeof C&&A.setValidators([C]);const B=wn(A);null!==T.asyncValidator?A.setAsyncValidators(ln(B,T.asyncValidator)):"function"==typeof B&&A.setAsyncValidators([B]);const be=()=>A.updateValueAndValidity();yt(T._rawValidators,be),yt(T._rawAsyncValidators,be)}function ct(A,T){let C=!1;if(null!==A){if(null!==T.validator){const be=$n(A);if(Array.isArray(be)&&be.length>0){const et=be.filter(ft=>ft!==T.validator);et.length!==be.length&&(C=!0,A.setValidators(et))}}if(null!==T.asyncValidator){const be=wn(A);if(Array.isArray(be)&&be.length>0){const et=be.filter(ft=>ft!==T.asyncValidator);et.length!==be.length&&(C=!0,A.setAsyncValidators(et))}}}const B=()=>{};return yt(T._rawValidators,B),yt(T._rawAsyncValidators,B),C}function _n(A,T){A._pendingDirty&&A.markAsDirty(),A.setValue(A._pendingValue,{emitModelToViewChange:!1}),T.viewToModelUpdate(A._pendingValue),A._pendingChange=!1}function kn(A,T){const C=A.indexOf(T);C>-1&&A.splice(C,1)}const Qt="VALID",ur="INVALID",lr="PENDING",Cr="DISABLED";function vr(A){return(ut(A)?A.validators:A)||null}function di(A){return Array.isArray(A)?Ur(A):A||null}function Hn(A,T){return(ut(T)?T.asyncValidators:A)||null}function Dr(A){return Array.isArray(A)?zt(A):A||null}function ut(A){return null!=A&&!Array.isArray(A)&&"object"==typeof A}class Gt{constructor(T,C){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=T,this._rawAsyncValidators=C,this._composedValidatorFn=di(this._rawValidators),this._composedAsyncValidatorFn=Dr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(T){this._rawValidators=this._composedValidatorFn=T}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(T){this._rawAsyncValidators=this._composedAsyncValidatorFn=T}get parent(){return this._parent}get valid(){return this.status===Qt}get invalid(){return this.status===ur}get pending(){return this.status==lr}get disabled(){return this.status===Cr}get enabled(){return this.status!==Cr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(T){this._rawValidators=T,this._composedValidatorFn=di(T)}setAsyncValidators(T){this._rawAsyncValidators=T,this._composedAsyncValidatorFn=Dr(T)}addValidators(T){this.setValidators(Xn(T,this._rawValidators))}addAsyncValidators(T){this.setAsyncValidators(Xn(T,this._rawAsyncValidators))}removeValidators(T){this.setValidators(fn(T,this._rawValidators))}removeAsyncValidators(T){this.setAsyncValidators(fn(T,this._rawAsyncValidators))}hasValidator(T){return ci(this._rawValidators,T)}hasAsyncValidator(T){return ci(this._rawAsyncValidators,T)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(T={}){this.touched=!0,this._parent&&!T.onlySelf&&this._parent.markAsTouched(T)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(T=>T.markAllAsTouched())}markAsUntouched(T={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!T.onlySelf&&this._parent._updateTouched(T)}markAsDirty(T={}){this.pristine=!1,this._parent&&!T.onlySelf&&this._parent.markAsDirty(T)}markAsPristine(T={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!T.onlySelf&&this._parent._updatePristine(T)}markAsPending(T={}){this.status=lr,!1!==T.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!T.onlySelf&&this._parent.markAsPending(T)}disable(T={}){const C=this._parentMarkedDirty(T.onlySelf);this.status=Cr,this.errors=null,this._forEachChild(B=>{B.disable(zs(en({},T),{onlySelf:!0}))}),this._updateValue(),!1!==T.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(zs(en({},T),{skipPristineCheck:C})),this._onDisabledChange.forEach(B=>B(!0))}enable(T={}){const C=this._parentMarkedDirty(T.onlySelf);this.status=Qt,this._forEachChild(B=>{B.enable(zs(en({},T),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:T.emitEvent}),this._updateAncestors(zs(en({},T),{skipPristineCheck:C})),this._onDisabledChange.forEach(B=>B(!1))}_updateAncestors(T){this._parent&&!T.onlySelf&&(this._parent.updateValueAndValidity(T),T.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(T){this._parent=T}updateValueAndValidity(T={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qt||this.status===lr)&&this._runAsyncValidator(T.emitEvent)),!1!==T.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!T.onlySelf&&this._parent.updateValueAndValidity(T)}_updateTreeValidity(T={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(T)),this.updateValueAndValidity({onlySelf:!0,emitEvent:T.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cr:Qt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(T){if(this.asyncValidator){this.status=lr,this._hasOwnPendingAsyncValidator=!0;const C=ri(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(B=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(B,{emitEvent:T})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(T,C={}){this.errors=T,this._updateControlsErrors(!1!==C.emitEvent)}get(T){return function(A,T,C){if(null==T||(Array.isArray(T)||(T=T.split(".")),Array.isArray(T)&&0===T.length))return null;let B=A;return T.forEach(be=>{B=B instanceof Wt?B.controls.hasOwnProperty(be)?B.controls[be]:null:B instanceof Jt&&B.at(be)||null}),B}(this,T)}getError(T,C){const B=C?this.get(C):this;return B&&B.errors?B.errors[T]:null}hasError(T,C){return!!this.getError(T,C)}get root(){let T=this;for(;T._parent;)T=T._parent;return T}_updateControlsErrors(T){this.status=this._calculateStatus(),T&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(T)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Cr:this.errors?ur:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lr)?lr:this._anyControlsHaveStatus(ur)?ur:Qt}_anyControlsHaveStatus(T){return this._anyControls(C=>C.status===T)}_anyControlsDirty(){return this._anyControls(T=>T.dirty)}_anyControlsTouched(){return this._anyControls(T=>T.touched)}_updatePristine(T={}){this.pristine=!this._anyControlsDirty(),this._parent&&!T.onlySelf&&this._parent._updatePristine(T)}_updateTouched(T={}){this.touched=this._anyControlsTouched(),this._parent&&!T.onlySelf&&this._parent._updateTouched(T)}_isBoxedValue(T){return"object"==typeof T&&null!==T&&2===Object.keys(T).length&&"value"in T&&"disabled"in T}_registerOnCollectionChange(T){this._onCollectionChange=T}_setUpdateStrategy(T){ut(T)&&null!=T.updateOn&&(this._updateOn=T.updateOn)}_parentMarkedDirty(T){return!T&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vn extends Gt{constructor(T=null,C,B){super(vr(C),Hn(B,C)),this._onChange=[],this._applyFormState(T),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(T,C={}){this.value=this._pendingValue=T,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(B=>B(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(T,C={}){this.setValue(T,C)}reset(T=null,C={}){this._applyFormState(T),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(T){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(T){this._onChange.push(T)}_unregisterOnChange(T){kn(this._onChange,T)}registerOnDisabledChange(T){this._onDisabledChange.push(T)}_unregisterOnDisabledChange(T){kn(this._onDisabledChange,T)}_forEachChild(T){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(T){this._isBoxedValue(T)?(this.value=this._pendingValue=T.value,T.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=T}}class Wt extends Gt{constructor(T,C,B){super(vr(C),Hn(B,C)),this.controls=T,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(T,C){return this.controls[T]?this.controls[T]:(this.controls[T]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(T,C,B={}){this.registerControl(T,C),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}removeControl(T,C={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),delete this.controls[T],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(T,C,B={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),delete this.controls[T],C&&this.registerControl(T,C),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}contains(T){return this.controls.hasOwnProperty(T)&&this.controls[T].enabled}setValue(T,C={}){this._checkAllValuesPresent(T),Object.keys(T).forEach(B=>{this._throwIfControlMissing(B),this.controls[B].setValue(T[B],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(T,C={}){null!=T&&(Object.keys(T).forEach(B=>{this.controls[B]&&this.controls[B].patchValue(T[B],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(T={},C={}){this._forEachChild((B,be)=>{B.reset(T[be],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(T,C,B)=>(T[B]=C instanceof vn?C.value:C.getRawValue(),T))}_syncPendingControls(){let T=this._reduceChildren(!1,(C,B)=>!!B._syncPendingControls()||C);return T&&this.updateValueAndValidity({onlySelf:!0}),T}_throwIfControlMissing(T){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[T])throw new Error(`Cannot find form control with name: ${T}.`)}_forEachChild(T){Object.keys(this.controls).forEach(C=>{const B=this.controls[C];B&&T(B,C)})}_setUpControls(){this._forEachChild(T=>{T.setParent(this),T._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(T){for(const C of Object.keys(this.controls)){const B=this.controls[C];if(this.contains(C)&&T(B))return!0}return!1}_reduceValue(){return this._reduceChildren({},(T,C,B)=>((C.enabled||this.disabled)&&(T[B]=C.value),T))}_reduceChildren(T,C){let B=T;return this._forEachChild((be,et)=>{B=C(B,be,et)}),B}_allControlsDisabled(){for(const T of Object.keys(this.controls))if(this.controls[T].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(T){this._forEachChild((C,B)=>{if(void 0===T[B])throw new Error(`Must supply a value for form control with name: '${B}'.`)})}}class Jt extends Gt{constructor(T,C,B){super(vr(C),Hn(B,C)),this.controls=T,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(T){return this.controls[T]}push(T,C={}){this.controls.push(T),this._registerControl(T),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(T,C,B={}){this.controls.splice(T,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:B.emitEvent})}removeAt(T,C={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),this.controls.splice(T,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(T,C,B={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),this.controls.splice(T,1),C&&(this.controls.splice(T,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(T,C={}){this._checkAllValuesPresent(T),T.forEach((B,be)=>{this._throwIfControlMissing(be),this.at(be).setValue(B,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(T,C={}){null!=T&&(T.forEach((B,be)=>{this.at(be)&&this.at(be).patchValue(B,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(T=[],C={}){this._forEachChild((B,be)=>{B.reset(T[be],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(T=>T instanceof vn?T.value:T.getRawValue())}clear(T={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:T.emitEvent}))}_syncPendingControls(){let T=this.controls.reduce((C,B)=>!!B._syncPendingControls()||C,!1);return T&&this.updateValueAndValidity({onlySelf:!0}),T}_throwIfControlMissing(T){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(T))throw new Error(`Cannot find form control at index ${T}`)}_forEachChild(T){this.controls.forEach((C,B)=>{T(C,B)})}_updateValue(){this.value=this.controls.filter(T=>T.enabled||this.disabled).map(T=>T.value)}_anyControls(T){return this.controls.some(C=>C.enabled&&T(C))}_setUpControls(){this._forEachChild(T=>this._registerControl(T))}_checkAllValuesPresent(T){this._forEachChild((C,B)=>{if(void 0===T[B])throw new Error(`Must supply a value for form control at index: ${B}.`)})}_allControlsDisabled(){for(const T of this.controls)if(T.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(T){T.setParent(this),T._registerOnCollectionChange(this._onCollectionChange)}}let ie=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275dir=w.lG2({type:A,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),A})();const K={provide:ye,useExisting:(0,w.Gpc)(()=>_e),multi:!0};let _e=(()=>{class A extends J{writeValue(C){this.setProperty("value",null==C?"":C)}registerOnChange(C){this.onChange=B=>{C(""==B?null:parseFloat(B))}}}return A.\u0275fac=function(){let T;return function(B){return(T||(T=w.n5z(A)))(B||A)}}(),A.\u0275dir=w.lG2({type:A,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(C,B){1&C&&w.NdJ("input",function(et){return B.onChange(et.target.value)})("blur",function(){return B.onTouched()})},features:[w._Bn([K]),w.qOj]}),A})();const He={provide:ye,useExisting:(0,w.Gpc)(()=>Zn),multi:!0};let jt=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275mod=w.oAB({type:A}),A.\u0275inj=w.cJS({}),A})(),bn=(()=>{class A{constructor(){this._accessors=[]}add(C,B){this._accessors.push([C,B])}remove(C){for(let B=this._accessors.length-1;B>=0;--B)if(this._accessors[B][1]===C)return void this._accessors.splice(B,1)}select(C){this._accessors.forEach(B=>{this._isSameGroup(B,C)&&B[1]!==C&&B[1].fireUncheck(C.value)})}_isSameGroup(C,B){return!!C[0].control&&C[0]._parent===B._control._parent&&C[1].name===B.name}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:jt}),A})(),Zn=(()=>{class A extends J{constructor(C,B,be,et){super(C,B),this._registry=be,this._injector=et,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Pt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(C){this._state=C===this.value,this.setProperty("checked",this._state)}registerOnChange(C){this._fn=C,this.onChange=()=>{C(this.value),this._registry.select(this)}}fireUncheck(C){this.writeValue(C)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(bn),w.Y36(w.zs3))},A.\u0275dir=w.lG2({type:A,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(C,B){1&C&&w.NdJ("change",function(){return B.onChange()})("blur",function(){return B.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[w._Bn([He]),w.qOj]}),A})();const Oo=new w.OlP("NgModelWithFormControlWarning"),Po={provide:In,useExisting:(0,w.Gpc)(()=>fr)};let fr=(()=>{class A extends In{constructor(C,B){super(),this.validators=C,this.asyncValidators=B,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(C),this._setAsyncValidators(B)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ct(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const B=this.form.get(C.path);return cn(B,C),B.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),B}getControl(C){return this.form.get(C.path)}removeControl(C){Un(C.control||null,C,!1),kn(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,B){this.form.get(C.path).setValue(B)}onSubmit(C){return this.submitted=!0,function(A,T){A._syncPendingControls(),T.forEach(C=>{const B=C.control;"submit"===B.updateOn&&B._pendingChange&&(C.viewToModelUpdate(B._pendingValue),B._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const B=C.control,be=this.form.get(C.path);B!==be&&(Un(B||null,C),be instanceof vn&&(cn(be,C),C.control=be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const B=this.form.get(C.path);(function(A,T){We(A,T)})(B,C),B.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const B=this.form.get(C.path);B&&function(A,T){return ct(A,T)}(B,C)&&B.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){We(this.form,this),this._oldForm&&ct(this._oldForm,this)}_checkFormPresent(){}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(it,10),w.Y36(Ee,10))},A.\u0275dir=w.lG2({type:A,selectors:[["","formGroup",""]],hostBindings:function(C,B){1&C&&w.NdJ("submit",function(et){return B.onSubmit(et)})("reset",function(){return B.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([Po]),w.qOj,w.TTD]}),A})();const qs={provide:Pt,useExisting:(0,w.Gpc)(()=>Fn)};let Fn=(()=>{class A extends Pt{constructor(C,B,be,et,ft){super(),this._ngModelWarningConfig=ft,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=C,this._setValidators(B),this._setAsyncValidators(be),this.valueAccessor=function(A,T){if(!T)return null;let C,B,be;return Array.isArray(T),T.forEach(et=>{et.constructor===je?C=et:function(A){return Object.getPrototypeOf(A.constructor)===J}(et)?B=et:be=et}),be||B||C||null}(0,et)}set isDisabled(C){}ngOnChanges(C){this._added||this._setUpControl(),function(A,T){if(!A.hasOwnProperty("model"))return!1;const C=A.model;return!!C.isFirstChange()||!Object.is(T,C.currentValue)}(C,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}get path(){return function(A,T){return[...T.path,A]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return A._ngModelWarningSentOnce=!1,A.\u0275fac=function(C){return new(C||A)(w.Y36(In,13),w.Y36(it,10),w.Y36(Ee,10),w.Y36(ye,10),w.Y36(Oo,8))},A.\u0275dir=w.lG2({type:A,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([qs]),w.qOj,w.TTD]}),A})();const ya={provide:ye,useExisting:(0,w.Gpc)(()=>Li),multi:!0};function ms(A,T){return null==A?`${T}`:(T&&"object"==typeof T&&(T="Object"),`${A}: ${T}`.slice(0,50))}let Li=(()=>{class A extends J{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){this.value=C;const B=this._getOptionId(C);null==B&&this.setProperty("selectedIndex",-1);const be=ms(B,C);this.setProperty("value",be)}registerOnChange(C){this.onChange=B=>{this.value=this._getOptionValue(B),C(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(C){for(const B of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(B),C))return B;return null}_getOptionValue(C){const B=function(A){return A.split(":")[0]}(C);return this._optionMap.has(B)?this._optionMap.get(B):C}}return A.\u0275fac=function(){let T;return function(B){return(T||(T=w.n5z(A)))(B||A)}}(),A.\u0275dir=w.lG2({type:A,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(C,B){1&C&&w.NdJ("change",function(et){return B.onChange(et.target.value)})("blur",function(){return B.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([ya]),w.qOj]}),A})(),ys=(()=>{class A{constructor(C,B,be){this._element=C,this._renderer=B,this._select=be,this._select&&(this.id=this._select._registerOption())}set ngValue(C){null!=this._select&&(this._select._optionMap.set(this.id,C),this._setElementValue(ms(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._setElementValue(C),this._select&&this._select.writeValue(this._select.value)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Li,9))},A.\u0275dir=w.lG2({type:A,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),A})();const Ks={provide:ye,useExisting:(0,w.Gpc)(()=>Vi),multi:!0};function Yo(A,T){return null==A?`${T}`:("string"==typeof T&&(T=`'${T}'`),T&&"object"==typeof T&&(T="Object"),`${A}: ${T}`.slice(0,50))}let Vi=(()=>{class A extends J{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){let B;if(this.value=C,Array.isArray(C)){const be=C.map(et=>this._getOptionId(et));B=(et,ft)=>{et._setSelected(be.indexOf(ft.toString())>-1)}}else B=(be,et)=>{be._setSelected(!1)};this._optionMap.forEach(B)}registerOnChange(C){this.onChange=B=>{const be=[];if(void 0!==B.selectedOptions){const et=B.selectedOptions;for(let ft=0;ft<et.length;ft++){const on=et.item(ft),nn=this._getOptionValue(on.value);be.push(nn)}}else{const et=B.options;for(let ft=0;ft<et.length;ft++){const on=et.item(ft);if(on.selected){const nn=this._getOptionValue(on.value);be.push(nn)}}}this.value=be,C(be)}}_registerOption(C){const B=(this._idCounter++).toString();return this._optionMap.set(B,C),B}_getOptionId(C){for(const B of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(B)._value,C))return B;return null}_getOptionValue(C){const B=function(A){return A.split(":")[0]}(C);return this._optionMap.has(B)?this._optionMap.get(B)._value:C}}return A.\u0275fac=function(){let T;return function(B){return(T||(T=w.n5z(A)))(B||A)}}(),A.\u0275dir=w.lG2({type:A,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(C,B){1&C&&w.NdJ("change",function(et){return B.onChange(et.target)})("blur",function(){return B.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([Ks]),w.qOj]}),A})(),fo=(()=>{class A{constructor(C,B,be){this._element=C,this._renderer=B,this._select=be,this._select&&(this.id=this._select._registerOption(this))}set ngValue(C){null!=this._select&&(this._value=C,this._setElementValue(Yo(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._select?(this._value=C,this._setElementValue(Yo(this.id,C)),this._select.writeValue(this._select.value)):this._setElementValue(C)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}_setSelected(C){this._renderer.setProperty(this._element.nativeElement,"selected",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return A.\u0275fac=function(C){return new(C||A)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Vi,9))},A.\u0275dir=w.lG2({type:A,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),A})();const Bi={provide:it,useExisting:(0,w.Gpc)(()=>Yn),multi:!0};let Yn=(()=>{class A{constructor(){this._required=!1}get required(){return this._required}set required(C){this._required=null!=C&&!1!==C&&"false"!=`${C}`,this._onChange&&this._onChange()}validate(C){return this.required?function(A){return function(A){return null==A||0===A.length}(A.value)?{required:!0}:null}(C):null}registerOnValidatorChange(C){this._onChange=C}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275dir=w.lG2({type:A,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(C,B){2&C&&w.uIk("required",B.required?"":null)},inputs:{required:"required"},features:[w._Bn([Bi])]}),A})(),vs=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275mod=w.oAB({type:A}),A.\u0275inj=w.cJS({imports:[[jt]]}),A})(),H=(()=>{class A{static withConfig(C){return{ngModule:A,providers:[{provide:Oo,useValue:C.warnOnNgModelWithFormControl}]}}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275mod=w.oAB({type:A}),A.\u0275inj=w.cJS({imports:[vs]}),A})(),z=(()=>{class A{group(C,B=null){const be=this._reduceControls(C);let on,et=null,ft=null;return null!=B&&(function(A){return void 0!==A.asyncValidators||void 0!==A.validators||void 0!==A.updateOn}(B)?(et=null!=B.validators?B.validators:null,ft=null!=B.asyncValidators?B.asyncValidators:null,on=null!=B.updateOn?B.updateOn:void 0):(et=null!=B.validator?B.validator:null,ft=null!=B.asyncValidator?B.asyncValidator:null)),new Wt(be,{asyncValidators:ft,updateOn:on,validators:et})}control(C,B,be){return new vn(C,B,be)}array(C,B,be){const et=C.map(ft=>this._createControl(ft));return new Jt(et,B,be)}_reduceControls(C){const B={};return Object.keys(C).forEach(be=>{B[be]=this._createControl(C[be])}),B}_createControl(C){return C instanceof vn||C instanceof Wt||C instanceof Jt?C:Array.isArray(C)?this.control(C[0],C.length>1?C[1]:null,C.length>2?C[2]:null):this.control(C)}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:H}),A})()},5951:(lt,Me,U)=>{U.d(Me,{F0:()=>jn,Bz:()=>Su,lC:()=>H});var w=U(6019),O=U(5312),Z=U(2731),ve=U(830),fe=U(2007);class se extends fe.L{notifyNext(v,_,M,L,G){this.destination.next(_)}notifyError(v,_){this.destination.error(v)}notifyComplete(v){this.destination.complete()}}class Ce extends fe.L{constructor(v,_,M){super(),this.parent=v,this.outerValue=_,this.outerIndex=M,this.index=0}_next(v){this.parent.notifyNext(this.outerValue,v,this.outerIndex,this.index++,this)}_error(v){this.parent.notifyError(v,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var pe=U(2057),ge=U(9423);function Q(b,v,_,M,L=new Ce(b,_,M)){if(!L.closed)return v instanceof ge.y?v.subscribe(L):(0,pe.s)(v)(L)}var J=U(801);const ye={};class Ne{constructor(v){this.resultSelector=v}call(v,_){return _.subscribe(new Be(v,this.resultSelector))}}class Be extends se{constructor(v,_){super(v),this.resultSelector=_,this.active=0,this.values=[],this.observables=[]}_next(v){this.values.push(ye),this.observables.push(v)}_complete(){const v=this.observables,_=v.length;if(0===_)this.destination.complete();else{this.active=_,this.toRespond=_;for(let M=0;M<_;M++)this.add(Q(this,v[M],void 0,M))}}notifyComplete(v){0==(this.active-=1)&&this.destination.complete()}notifyNext(v,_,M){const L=this.values,te=this.toRespond?L[M]===ye?--this.toRespond:this.toRespond:0;L[M]=_,0===te&&(this.resultSelector?this._tryResultSelector(L):this.destination.next(L.slice()))}_tryResultSelector(v){let _;try{_=this.resultSelector.apply(this,v)}catch(M){return void this.destination.error(M)}this.destination.next(_)}}var Re=U(9164),Oe=U(5441);function je(b){return new ge.y(v=>{let _;try{_=b()}catch(L){return void v.error(L)}return(_?(0,Re.D)(_):(0,Oe.c)()).subscribe(v)})}var Pe=U(2429),$e=U(7810),it=U(5449),Ee=U(4968),ot=U(6705),Kt=U(7807),kt=U(6303);function gt(b){return function(_){const M=new Zt(b),L=_.lift(M);return M.caught=L}}class Zt{constructor(v){this.selector=v}call(v,_){return _.subscribe(new Ft(v,this.selector,this.caught))}}class Ft extends kt.Ds{constructor(v,_,M){super(v),this.selector=_,this.caught=M}error(v){if(!this.isStopped){let _;try{_=this.selector(v,this.caught)}catch(G){return void super.error(G)}this._unsubscribeAndRecycle();const M=new kt.IY(this);this.add(M);const L=(0,kt.ft)(_,M);L!==M&&this.add(L)}}}var Ve=U(3199);function Ot(b,v){return(0,Ve.zg)(b,v,1)}var tt=U(439),dt=U(7689);function Qn(b){return function(_){return 0===b?(0,Oe.c)():_.lift(new Rr(b))}}class Rr{constructor(v){if(this.total=v,this.total<0)throw new dt.W}call(v,_){return _.subscribe(new ri(v,this.total))}}class ri extends fe.L{constructor(v,_){super(v),this.total=_,this.ring=new Array,this.count=0}_next(v){const _=this.ring,M=this.total,L=this.count++;_.length<M?_.push(v):_[L%M]=v}_complete(){const v=this.destination;let _=this.count;if(_>0){const M=this.count>=this.total?this.total:this.count,L=this.ring;for(let G=0;G<M;G++){const te=_++%M;v.next(L[te])}}v.complete()}}var Pi=U(3328),mr=U(1692),yr=U(8533),Jn=U(2858);class Yt{constructor(v){this.callback=v}call(v,_){return _.subscribe(new zt(v,this.callback))}}class zt extends fe.L{constructor(v,_){super(v),this.add(new Jn.w(_))}}var ln=U(8771),$n=U(7060),wn=U(3303),tn=U(5148),ci=U(3062),Xn=U(4187),fn=U(2248),ze=U(6866),In=U(6955);class Pt{constructor(v,_){this.id=v,this.url=_}}class _r extends Pt{constructor(v,_,M="imperative",L=null){super(v,_),this.navigationTrigger=M,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lt extends Pt{constructor(v,_,M){super(v,_),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jr extends Pt{constructor(v,_,M){super(v,_),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Br extends Pt{constructor(v,_,M){super(v,_),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xr extends Pt{constructor(v,_,M,L){super(v,_),this.urlAfterRedirects=M,this.state=L}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ht extends Pt{constructor(v,_,M,L){super(v,_),this.urlAfterRedirects=M,this.state=L}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jr extends Pt{constructor(v,_,M,L,G){super(v,_),this.urlAfterRedirects=M,this.state=L,this.shouldActivate=G}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ii extends Pt{constructor(v,_,M,L){super(v,_),this.urlAfterRedirects=M,this.state=L}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends Pt{constructor(v,_,M,L){super(v,_),this.urlAfterRedirects=M,this.state=L}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sn{constructor(v){this.route=v}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bt{constructor(v){this.route=v}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Et{constructor(v){this.snapshot=v}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ir{constructor(v){this.snapshot=v}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wi{constructor(v){this.snapshot=v}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yn{constructor(v){this.snapshot=v}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pn{constructor(v,_,M){this.routerEvent=v,this.position=_,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ct="primary";class $r{constructor(v){this.params=v||{}}has(v){return Object.prototype.hasOwnProperty.call(this.params,v)}get(v){if(this.has(v)){const _=this.params[v];return Array.isArray(_)?_[0]:_}return null}getAll(v){if(this.has(v)){const _=this.params[v];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function cn(b){return new $r(b)}const Un="ngNavigationCancelingError";function yt(b){const v=Error("NavigationCancelingError: "+b);return v[Un]=!0,v}function We(b,v,_){const M=_.path.split("/");if(M.length>b.length||"full"===_.pathMatch&&(v.hasChildren()||M.length<b.length))return null;const L={};for(let G=0;G<M.length;G++){const te=M[G],he=b[G];if(te.startsWith(":"))L[te.substring(1)]=he;else if(te!==he.path)return null}return{consumed:b.slice(0,M.length),posParams:L}}function nt(b,v){const _=b?Object.keys(b):void 0,M=v?Object.keys(v):void 0;if(!_||!M||_.length!=M.length)return!1;let L;for(let G=0;G<_.length;G++)if(L=_[G],!un(b[L],v[L]))return!1;return!0}function un(b,v){if(Array.isArray(b)&&Array.isArray(v)){if(b.length!==v.length)return!1;const _=[...b].sort(),M=[...v].sort();return _.every((L,G)=>M[G]===L)}return b===v}function _n(b){return Array.prototype.concat.apply([],b)}function oe(b){return b.length>0?b[b.length-1]:null}function de(b,v){for(const _ in b)b.hasOwnProperty(_)&&v(b[_],_)}function Ae(b){return(0,O.CqO)(b)?b:(0,O.QGY)(b)?(0,Re.D)(Promise.resolve(b)):(0,Pe.of)(b)}const Xe={exact:function kn(b,v,_){if(!Hn(b.segments,v.segments)||!lr(b.segments,v.segments,_)||b.numberOfChildren!==v.numberOfChildren)return!1;for(const M in v.children)if(!b.children[M]||!kn(b.children[M],v.children[M],_))return!1;return!0},subset:Qt},Mt={exact:function(b,v){return nt(b,v)},subset:function(b,v){return Object.keys(v).length<=Object.keys(b).length&&Object.keys(v).every(_=>un(b[_],v[_]))},ignored:()=>!0};function dn(b,v,_){return Xe[_.paths](b.root,v.root,_.matrixParams)&&Mt[_.queryParams](b.queryParams,v.queryParams)&&!("exact"===_.fragment&&b.fragment!==v.fragment)}function Qt(b,v,_){return ur(b,v,v.segments,_)}function ur(b,v,_,M){if(b.segments.length>_.length){const L=b.segments.slice(0,_.length);return!(!Hn(L,_)||v.hasChildren()||!lr(L,_,M))}if(b.segments.length===_.length){if(!Hn(b.segments,_)||!lr(b.segments,_,M))return!1;for(const L in v.children)if(!b.children[L]||!Qt(b.children[L],v.children[L],M))return!1;return!0}{const L=_.slice(0,b.segments.length),G=_.slice(b.segments.length);return!!(Hn(b.segments,L)&&lr(b.segments,L,M)&&b.children[Ct])&&ur(b.children[Ct],v,G,M)}}function lr(b,v,_){return v.every((M,L)=>Mt[_](b[L].parameters,M.parameters))}class Cr{constructor(v,_,M){this.root=v,this.queryParams=_,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return vn.serialize(this)}}class Tt{constructor(v,_){this.segments=v,this.children=_,this.parent=null,de(_,(M,L)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wt(this)}}class vr{constructor(v,_){this.path=v,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=cn(this.parameters)),this._parameterMap}toString(){return Ss(this)}}function Hn(b,v){return b.length===v.length&&b.every((_,M)=>_.path===v[M].path)}class ut{}class Gt{parse(v){const _=new _e(v);return new Cr(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(v){const _=`/${Jt(v.root,!0)}`,M=function(b){const v=Object.keys(b).map(_=>{const M=b[_];return Array.isArray(M)?M.map(L=>`${er(_)}=${er(L)}`).join("&"):`${er(_)}=${er(M)}`}).filter(_=>!!_);return v.length?`?${v.join("&")}`:""}(v.queryParams);var b;return`${_}${M}${"string"==typeof v.fragment?`#${b=v.fragment,encodeURI(b)}`:""}`}}const vn=new Gt;function Wt(b){return b.segments.map(v=>Ss(v)).join("/")}function Jt(b,v){if(!b.hasChildren())return Wt(b);if(v){const _=b.children[Ct]?Jt(b.children[Ct],!1):"",M=[];return de(b.children,(L,G)=>{G!==Ct&&M.push(`${G}:${Jt(L,!1)}`)}),M.length>0?`${_}(${M.join("//")})`:_}{const _=function(b,v){let _=[];return de(b.children,(M,L)=>{L===Ct&&(_=_.concat(v(M,L)))}),de(b.children,(M,L)=>{L!==Ct&&(_=_.concat(v(M,L)))}),_}(b,(M,L)=>L===Ct?[Jt(b.children[Ct],!1)]:[`${L}:${Jt(M,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[Ct]?`${Wt(b)}/${_[0]}`:`${Wt(b)}/(${_.join("//")})`}}function xn(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function er(b){return xn(b).replace(/%3B/gi,";")}function Er(b){return xn(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rn(b){return decodeURIComponent(b)}function qt(b){return Rn(b.replace(/\+/g,"%20"))}function Ss(b){return`${Er(b.path)}${function(b){return Object.keys(b).map(v=>`;${Er(v)}=${Er(b[v])}`).join("")}(b.parameters)}`}const ki=/^[^\/()?;=#]+/;function Bn(b){const v=b.match(ki);return v?v[0]:""}const Fi=/^[^=?&#]+/,ie=/^[^&#]+/;class _e{constructor(v){this.url=v,this.remaining=v}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const v={};if(this.consumeOptional("?"))do{this.parseQueryParam(v)}while(this.consumeOptional("&"));return v}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const v=[];for(this.peekStartsWith("(")||v.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),v.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(v.length>0||Object.keys(_).length>0)&&(M[Ct]=new Tt(v,_)),M}parseSegment(){const v=Bn(this.remaining);if(""===v&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(v),new vr(Rn(v),this.parseMatrixParams())}parseMatrixParams(){const v={};for(;this.consumeOptional(";");)this.parseParam(v);return v}parseParam(v){const _=Bn(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const L=Bn(this.remaining);L&&(M=L,this.capture(M))}v[Rn(_)]=Rn(M)}parseQueryParam(v){const _=function(b){const v=b.match(Fi);return v?v[0]:""}(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const te=function(b){const v=b.match(ie);return v?v[0]:""}(this.remaining);te&&(M=te,this.capture(M))}const L=qt(_),G=qt(M);if(v.hasOwnProperty(L)){let te=v[L];Array.isArray(te)||(te=[te],v[L]=te),te.push(G)}else v[L]=G}parseParens(v){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Bn(this.remaining),L=this.remaining[M.length];if("/"!==L&&")"!==L&&";"!==L)throw new Error(`Cannot parse url '${this.url}'`);let G;M.indexOf(":")>-1?(G=M.substr(0,M.indexOf(":")),this.capture(G),this.capture(":")):v&&(G=Ct);const te=this.parseChildren();_[G]=1===Object.keys(te).length?te[Ct]:new Tt([],te),this.consumeOptional("//")}return _}peekStartsWith(v){return this.remaining.startsWith(v)}consumeOptional(v){return!!this.peekStartsWith(v)&&(this.remaining=this.remaining.substring(v.length),!0)}capture(v){if(!this.consumeOptional(v))throw new Error(`Expected "${v}".`)}}class He{constructor(v){this._root=v}get root(){return this._root.value}parent(v){const _=this.pathFromRoot(v);return _.length>1?_[_.length-2]:null}children(v){const _=xt(v,this._root);return _?_.children.map(M=>M.value):[]}firstChild(v){const _=xt(v,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(v){const _=jt(v,this._root);return _.length<2?[]:_[_.length-2].children.map(L=>L.value).filter(L=>L!==v)}pathFromRoot(v){return jt(v,this._root).map(_=>_.value)}}function xt(b,v){if(b===v.value)return v;for(const _ of v.children){const M=xt(b,_);if(M)return M}return null}function jt(b,v){if(b===v.value)return[v];for(const _ of v.children){const M=jt(b,_);if(M.length)return M.unshift(v),M}return[]}class bn{constructor(v,_){this.value=v,this.children=_}toString(){return`TreeNode(${this.value})`}}function Zn(b){const v={};return b&&b.children.forEach(_=>v[_.value.outlet]=_),v}class Nn extends He{constructor(v,_){super(v),this.snapshot=_,Or(this,v)}toString(){return this.snapshot.toString()}}function or(b,v){const _=function(b,v){const te=new fr([],{},{},"",{},Ct,v,null,b.root,-1,{});return new Gr("",new bn(te,[]))}(b,v),M=new $e.X([new vr("",{})]),L=new $e.X({}),G=new $e.X({}),te=new $e.X({}),he=new $e.X(""),Ue=new Hr(M,L,te,he,G,Ct,v,_.root);return Ue.snapshot=_.root,new Nn(new bn(Ue,[]),_)}class Hr{constructor(v,_,M,L,G,te,he,Ue){this.url=v,this.params=_,this.queryParams=M,this.fragment=L,this.data=G,this.outlet=te,this.component=he,this._futureSnapshot=Ue}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(v=>cn(v)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(v=>cn(v)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tr(b,v="emptyOnly"){const _=b.pathFromRoot;let M=0;if("always"!==v)for(M=_.length-1;M>=1;){const L=_[M],G=_[M-1];if(L.routeConfig&&""===L.routeConfig.path)M--;else{if(G.component)break;M--}}return function(b){return b.reduce((v,_)=>({params:en(en({},v.params),_.params),data:en(en({},v.data),_.data),resolve:en(en({},v.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(M))}class fr{constructor(v,_,M,L,G,te,he,Ue,vt,Tn,Vt){this.url=v,this.params=_,this.queryParams=M,this.fragment=L,this.data=G,this.outlet=te,this.component=he,this.routeConfig=Ue,this._urlSegment=vt,this._lastPathIndex=Tn,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gr extends He{constructor(v,_){super(_),this.url=v,Or(this,_)}toString(){return gs(this._root)}}function Or(b,v){v.value._routerState=b,v.children.forEach(_=>Or(b,_))}function gs(b){const v=b.children.length>0?` { ${b.children.map(gs).join(", ")} } `:"";return`${b.value}${v}`}function xs(b){if(b.snapshot){const v=b.snapshot,_=b._futureSnapshot;b.snapshot=_,nt(v.queryParams,_.queryParams)||b.queryParams.next(_.queryParams),v.fragment!==_.fragment&&b.fragment.next(_.fragment),nt(v.params,_.params)||b.params.next(_.params),function(b,v){if(b.length!==v.length)return!1;for(let _=0;_<b.length;++_)if(!nt(b[_],v[_]))return!1;return!0}(v.url,_.url)||b.url.next(_.url),nt(v.data,_.data)||b.data.next(_.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function bi(b,v){const _=nt(b.params,v.params)&&function(b,v){return Hn(b,v)&&b.every((_,M)=>nt(_.parameters,v[M].parameters))}(b.url,v.url);return _&&!(!b.parent!=!v.parent)&&(!b.parent||bi(b.parent,v.parent))}function Fn(b,v,_){if(_&&b.shouldReuseRoute(v.value,_.value.snapshot)){const M=_.value;M._futureSnapshot=v.value;const L=function(b,v,_){return v.children.map(M=>{for(const L of _.children)if(b.shouldReuseRoute(M.value,L.value.snapshot))return Fn(b,M,L);return Fn(b,M)})}(b,v,_);return new bn(M,L)}{if(b.shouldAttach(v.value)){const G=b.retrieve(v.value);if(null!==G){const te=G.route;return te.value._futureSnapshot=v.value,te.children=v.children.map(he=>Fn(b,he)),te}}const M=function(b){return new Hr(new $e.X(b.url),new $e.X(b.params),new $e.X(b.queryParams),new $e.X(b.fragment),new $e.X(b.data),b.outlet,b.component,b)}(v.value),L=v.children.map(G=>Fn(b,G));return new bn(M,L)}}function Li(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function ys(b){return"object"==typeof b&&null!=b&&b.outlets}function Ks(b,v,_,M,L){let G={};return M&&de(M,(te,he)=>{G[he]=Array.isArray(te)?te.map(Ue=>`${Ue}`):`${te}`}),new Cr(_.root===b?v:Yo(_.root,b,v),G,L)}function Yo(b,v,_){const M={};return de(b.children,(L,G)=>{M[G]=L===v?_:Yo(L,v,_)}),new Tt(b.segments,M)}class Xi{constructor(v,_,M){if(this.isAbsolute=v,this.numberOfDoubleDots=_,this.commands=M,v&&M.length>0&&Li(M[0]))throw new Error("Root segment cannot have matrix parameters");const L=M.find(ys);if(L&&L!==oe(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vi{constructor(v,_,M){this.segmentGroup=v,this.processChildren=_,this.index=M}}function es(b,v,_){if(b||(b=new Tt([],{})),0===b.segments.length&&b.hasChildren())return ts(b,v,_);const M=function(b,v,_){let M=0,L=v;const G={match:!1,pathIndex:0,commandIndex:0};for(;L<b.segments.length;){if(M>=_.length)return G;const te=b.segments[L],he=_[M];if(ys(he))break;const Ue=`${he}`,vt=M<_.length-1?_[M+1]:null;if(L>0&&void 0===Ue)break;if(Ue&&vt&&"object"==typeof vt&&void 0===vt.outlets){if(!ji(Ue,vt,te))return G;M+=2}else{if(!ji(Ue,{},te))return G;M++}L++}return{match:!0,pathIndex:L,commandIndex:M}}(b,v,_),L=_.slice(M.commandIndex);if(M.match&&M.pathIndex<b.segments.length){const G=new Tt(b.segments.slice(0,M.pathIndex),{});return G.children[Ct]=new Tt(b.segments.slice(M.pathIndex),b.children),ts(G,0,L)}return M.match&&0===L.length?new Tt(b.segments,{}):M.match&&!b.hasChildren()?ns(b,v,_):M.match?ts(b,0,L):ns(b,v,_)}function ts(b,v,_){if(0===_.length)return new Tt(b.segments,{});{const M=function(b){return ys(b[0])?b[0].outlets:{[Ct]:b}}(_),L={};return de(M,(G,te)=>{"string"==typeof G&&(G=[G]),null!==G&&(L[te]=es(b.children[te],v,G))}),de(b.children,(G,te)=>{void 0===M[te]&&(L[te]=G)}),new Tt(b.segments,L)}}function ns(b,v,_){const M=b.segments.slice(0,v);let L=0;for(;L<_.length;){const G=_[L];if(ys(G)){const Ue=Ui(G.outlets);return new Tt(M,Ue)}if(0===L&&Li(_[0])){M.push(new vr(b.segments[v].path,Bi(_[0]))),L++;continue}const te=ys(G)?G.outlets[Ct]:`${G}`,he=L<_.length-1?_[L+1]:null;te&&he&&Li(he)?(M.push(new vr(te,Bi(he))),L+=2):(M.push(new vr(te,{})),L++)}return new Tt(M,{})}function Ui(b){const v={};return de(b,(_,M)=>{"string"==typeof _&&(_=[_]),null!==_&&(v[M]=ns(new Tt([],{}),0,_))}),v}function Bi(b){const v={};return de(b,(_,M)=>v[M]=`${_}`),v}function ji(b,v,_){return b==_.path&&nt(v,_.parameters)}class ko{constructor(v,_,M,L){this.routeReuseStrategy=v,this.futureState=_,this.currState=M,this.forwardEvent=L}activate(v){const _=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,M,v),xs(this.futureState.root),this.activateChildRoutes(_,M,v)}deactivateChildRoutes(v,_,M){const L=Zn(_);v.children.forEach(G=>{const te=G.value.outlet;this.deactivateRoutes(G,L[te],M),delete L[te]}),de(L,(G,te)=>{this.deactivateRouteAndItsChildren(G,M)})}deactivateRoutes(v,_,M){const L=v.value,G=_?_.value:null;if(L===G)if(L.component){const te=M.getContext(L.outlet);te&&this.deactivateChildRoutes(v,_,te.children)}else this.deactivateChildRoutes(v,_,M);else G&&this.deactivateRouteAndItsChildren(_,M)}deactivateRouteAndItsChildren(v,_){this.routeReuseStrategy.shouldDetach(v.value.snapshot)?this.detachAndStoreRouteSubtree(v,_):this.deactivateRouteAndOutlet(v,_)}detachAndStoreRouteSubtree(v,_){const M=_.getContext(v.value.outlet),L=M&&v.value.component?M.children:_,G=Zn(v);for(const te of Object.keys(G))this.deactivateRouteAndItsChildren(G[te],L);if(M&&M.outlet){const te=M.outlet.detach(),he=M.children.onOutletDeactivated();this.routeReuseStrategy.store(v.value.snapshot,{componentRef:te,route:v,contexts:he})}}deactivateRouteAndOutlet(v,_){const M=_.getContext(v.value.outlet),L=M&&v.value.component?M.children:_,G=Zn(v);for(const te of Object.keys(G))this.deactivateRouteAndItsChildren(G[te],L);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(v,_,M){const L=Zn(_);v.children.forEach(G=>{this.activateRoutes(G,L[G.value.outlet],M),this.forwardEvent(new yn(G.value.snapshot))}),v.children.length&&this.forwardEvent(new ir(v.value.snapshot))}activateRoutes(v,_,M){const L=v.value,G=_?_.value:null;if(xs(L),L===G)if(L.component){const te=M.getOrCreateContext(L.outlet);this.activateChildRoutes(v,_,te.children)}else this.activateChildRoutes(v,_,M);else if(L.component){const te=M.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const he=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),te.children.onOutletReAttached(he.contexts),te.attachRef=he.componentRef,te.route=he.route.value,te.outlet&&te.outlet.attach(he.componentRef,he.route.value),xs(he.route.value),this.activateChildRoutes(v,null,te.children)}else{const he=function(b){for(let v=b.parent;v;v=v.parent){const _=v.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(L.snapshot),Ue=he?he.module.componentFactoryResolver:null;te.attachRef=null,te.route=L,te.resolver=Ue,te.outlet&&te.outlet.activateWith(L,Ue),this.activateChildRoutes(v,null,te.children)}}else this.activateChildRoutes(v,null,M)}}class po{constructor(v,_){this.routes=v,this.module=_}}function Zr(b){return"function"==typeof b}function Wr(b){return b instanceof Cr}const is=Symbol("INITIAL_VALUE");function si(){return(0,$n.w)(b=>function(...b){let v,_;return(0,Z.K)(b[b.length-1])&&(_=b.pop()),"function"==typeof b[b.length-1]&&(v=b.pop()),1===b.length&&(0,ve.k)(b[0])&&(b=b[0]),(0,J.n)(b,_).lift(new Ne(v))}(b.map(v=>v.pipe((0,wn.q)(1),(0,tn.O)(is)))).pipe((0,ci.R)((v,_)=>{let M=!1;return _.reduce((L,G,te)=>L!==is?L:(G===is&&(M=!0),M||!1!==G&&te!==_.length-1&&!Wr(G)?L:G),v)},is),(0,tt.h)(v=>v!==is),(0,ln.U)(v=>Wr(v)?v:!0===v),(0,wn.q)(1)))}class vs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new N,this.attachRef=null}}class N{constructor(){this.contexts=new Map}onChildOutletCreated(v,_){const M=this.getOrCreateContext(v);M.outlet=_,this.contexts.set(v,M)}onChildOutletDestroyed(v){const _=this.getContext(v);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let _=this.getContext(v);return _||(_=new vs,this.contexts.set(v,_)),_}getContext(v){return this.contexts.get(v)||null}}let H=(()=>{class b{constructor(_,M,L,G,te){this.parentContexts=_,this.location=M,this.resolver=L,this.changeDetector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.attachEvents=new O.vpe,this.detachEvents=new O.vpe,this.name=G||Ct,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,M){this.activated=_,this._activatedRoute=M,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const te=(M=M||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),he=this.parentContexts.getOrCreateContext(this.name).children,Ue=new R(_,he,this.location.injector);this.activated=this.location.createComponent(te,this.location.length,Ue),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(_){return new(_||b)(O.Y36(N),O.Y36(O.s_b),O.Y36(O._Vd),O.$8M("name"),O.Y36(O.sBO))},b.\u0275dir=O.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),b})();class R{constructor(v,_,M){this.route=v,this.childContexts=_,this.parent=M}get(v,_){return v===Hr?this.route:v===N?this.childContexts:this.parent.get(v,_)}}let z=(()=>{class b{}return b.\u0275fac=function(_){return new(_||b)},b.\u0275cmp=O.Xpm({type:b,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,M){1&_&&O._UZ(0,"router-outlet")},directives:[H],encapsulation:2}),b})();function ue(b,v=""){for(let _=0;_<b.length;_++){const M=b[_];A(M,T(v,M))}}function A(b,v){b.children&&ue(b.children,v)}function T(b,v){return v?b||v.path?b&&!v.path?`${b}/`:!b&&v.path?v.path:`${b}/${v.path}`:"":b}function C(b){const v=b.children&&b.children.map(C),_=v?zs(en({},b),{children:v}):en({},b);return!_.component&&(v||_.loadChildren)&&_.outlet&&_.outlet!==Ct&&(_.component=z),_}function B(b){return b.outlet||Ct}function be(b,v){const _=b.filter(M=>B(M)===v);return _.push(...b.filter(M=>B(M)!==v)),_}const et={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ft(b,v,_){var he;if(""===v.path)return"full"===v.pathMatch&&(b.hasChildren()||_.length>0)?en({},et):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const L=(v.matcher||We)(_,b,v);if(!L)return en({},et);const G={};de(L.posParams,(Ue,vt)=>{G[vt]=Ue.path});const te=L.consumed.length>0?en(en({},G),L.consumed[L.consumed.length-1].parameters):G;return{matched:!0,consumedSegments:L.consumed,lastChild:L.consumed.length,parameters:te,positionalParamSegments:null!=(he=L.posParams)?he:{}}}function on(b,v,_,M,L="corrected"){if(_.length>0&&function(b,v,_){return _.some(M=>Yr(b,v,M)&&B(M)!==Ct)}(b,_,M)){const te=new Tt(v,function(b,v,_,M){const L={};L[Ct]=M,M._sourceSegment=b,M._segmentIndexShift=v.length;for(const G of _)if(""===G.path&&B(G)!==Ct){const te=new Tt([],{});te._sourceSegment=b,te._segmentIndexShift=v.length,L[B(G)]=te}return L}(b,v,M,new Tt(_,b.children)));return te._sourceSegment=b,te._segmentIndexShift=v.length,{segmentGroup:te,slicedSegments:[]}}if(0===_.length&&function(b,v,_){return _.some(M=>Yr(b,v,M))}(b,_,M)){const te=new Tt(b.segments,function(b,v,_,M,L,G){const te={};for(const he of M)if(Yr(b,_,he)&&!L[B(he)]){const Ue=new Tt([],{});Ue._sourceSegment=b,Ue._segmentIndexShift="legacy"===G?b.segments.length:v.length,te[B(he)]=Ue}return en(en({},L),te)}(b,v,_,M,b.children,L));return te._sourceSegment=b,te._segmentIndexShift=v.length,{segmentGroup:te,slicedSegments:_}}const G=new Tt(b.segments,b.children);return G._sourceSegment=b,G._segmentIndexShift=v.length,{segmentGroup:G,slicedSegments:_}}function Yr(b,v,_){return(!(b.hasChildren()||v.length>0)||"full"!==_.pathMatch)&&""===_.path}function ls(b,v,_,M){return!!(B(b)===M||M!==Ct&&Yr(v,_,b))&&("**"===b.path||ft(v,b,_).matched)}function Hi(b,v,_){return 0===v.length&&!b.children[_]}class wt{constructor(v){this.segmentGroup=v||null}}class Fo{constructor(v){this.urlTree=v}}function Lo(b){return new ge.y(v=>v.error(new wt(b)))}function Ea(b){return new ge.y(v=>v.error(new Fo(b)))}function Ps(b){return new ge.y(v=>v.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${b}'`)))}class Za{constructor(v,_,M,L,G){this.configLoader=_,this.urlSerializer=M,this.urlTree=L,this.config=G,this.allowRedirects=!0,this.ngModule=v.get(O.h0i)}apply(){const v=on(this.urlTree.root,[],[],this.config).segmentGroup,_=new Tt(v.segments,v.children);return this.expandSegmentGroup(this.ngModule,this.config,_,Ct).pipe((0,ln.U)(G=>this.createUrlTree(En(G),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gt(G=>{if(G instanceof Fo)return this.allowRedirects=!1,this.match(G.urlTree);throw G instanceof wt?this.noMatchError(G):G}))}match(v){return this.expandSegmentGroup(this.ngModule,this.config,v.root,Ct).pipe((0,ln.U)(L=>this.createUrlTree(En(L),v.queryParams,v.fragment))).pipe(gt(L=>{throw L instanceof wt?this.noMatchError(L):L}))}noMatchError(v){return new Error(`Cannot match any routes. URL Segment: '${v.segmentGroup}'`)}createUrlTree(v,_,M){const L=v.segments.length>0?new Tt([],{[Ct]:v}):v;return new Cr(L,_,M)}expandSegmentGroup(v,_,M,L){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(v,_,M).pipe((0,ln.U)(G=>new Tt([],G))):this.expandSegment(v,M,_,M.segments,L,!0)}expandChildren(v,_,M){const L=[];for(const G of Object.keys(M.children))"primary"===G?L.unshift(G):L.push(G);return(0,Re.D)(L).pipe(Ot(G=>{const te=M.children[G],he=be(_,G);return this.expandSegmentGroup(v,he,te,G).pipe((0,ln.U)(Ue=>({segment:Ue,outlet:G})))}),(0,ci.R)((G,te)=>(G[te.outlet]=te.segment,G),{}),function(b,v){const _=arguments.length>=2;return M=>M.pipe(b?(0,tt.h)((L,G)=>b(L,G,M)):yr.y,Qn(1),_?(0,mr.d)(v):(0,Pi.T)(()=>new it.K))}())}expandSegment(v,_,M,L,G,te){return(0,Re.D)(M).pipe(Ot(he=>this.expandSegmentAgainstRoute(v,_,M,he,L,G,te).pipe(gt(vt=>{if(vt instanceof wt)return(0,Pe.of)(null);throw vt}))),(0,Xn.P)(he=>!!he),gt((he,Ue)=>{if(he instanceof it.K||"EmptyError"===he.name){if(Hi(_,L,G))return(0,Pe.of)(new Tt([],{}));throw new wt(_)}throw he}))}expandSegmentAgainstRoute(v,_,M,L,G,te,he){return ls(L,_,G,te)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(v,_,L,G,te):he&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(v,_,M,L,G,te):Lo(_):Lo(_)}expandSegmentAgainstRouteUsingRedirect(v,_,M,L,G,te){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(v,M,L,te):this.expandRegularSegmentAgainstRouteUsingRedirect(v,_,M,L,G,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(v,_,M,L){const G=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Ea(G):this.lineralizeSegments(M,G).pipe((0,Ve.zg)(te=>{const he=new Tt(te,{});return this.expandSegment(v,he,_,te,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(v,_,M,L,G,te){const{matched:he,consumedSegments:Ue,lastChild:vt,positionalParamSegments:Tn}=ft(_,L,G);if(!he)return Lo(_);const Vt=this.applyRedirectCommands(Ue,L.redirectTo,Tn);return L.redirectTo.startsWith("/")?Ea(Vt):this.lineralizeSegments(L,Vt).pipe((0,Ve.zg)(Ln=>this.expandSegment(v,_,M,Ln.concat(G.slice(vt)),te,!1)))}matchSegmentAgainstRoute(v,_,M,L,G){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,Pe.of)(M._loadedConfig):this.configLoader.load(v.injector,M)).pipe((0,ln.U)(Ln=>(M._loadedConfig=Ln,new Tt(L,{})))):(0,Pe.of)(new Tt(L,{}));const{matched:te,consumedSegments:he,lastChild:Ue}=ft(_,M,L);if(!te)return Lo(_);const vt=L.slice(Ue);return this.getChildConfig(v,M,L).pipe((0,Ve.zg)(Vt=>{const Ln=Vt.module,rn=Vt.routes,{segmentGroup:pi,slicedSegments:zi}=on(_,he,vt,rn),At=new Tt(pi.segments,pi.children);if(0===zi.length&&At.hasChildren())return this.expandChildren(Ln,rn,At).pipe((0,ln.U)(Ut=>new Tt(he,Ut)));if(0===rn.length&&0===zi.length)return(0,Pe.of)(new Tt(he,{}));const qr=B(M)===G;return this.expandSegment(Ln,At,rn,zi,qr?Ct:G,!0).pipe((0,ln.U)(Pn=>new Tt(he.concat(Pn.segments),Pn.children)))}))}getChildConfig(v,_,M){return _.children?(0,Pe.of)(new po(_.children,v)):_.loadChildren?void 0!==_._loadedConfig?(0,Pe.of)(_._loadedConfig):this.runCanLoadGuards(v.injector,_,M).pipe((0,Ve.zg)(L=>{return L?this.configLoader.load(v.injector,_).pipe((0,ln.U)(G=>(_._loadedConfig=G,G))):(b=_,new ge.y(v=>v.error(yt(`Cannot load children because the guard of the route "path: '${b.path}'" returned false`))));var b})):(0,Pe.of)(new po([],v))}runCanLoadGuards(v,_,M){const L=_.canLoad;if(!L||0===L.length)return(0,Pe.of)(!0);const G=L.map(te=>{const he=v.get(te);let Ue;if((b=he)&&Zr(b.canLoad))Ue=he.canLoad(_,M);else{if(!Zr(he))throw new Error("Invalid CanLoad guard");Ue=he(_,M)}var b;return Ae(Ue)});return(0,Pe.of)(G).pipe(si(),(0,fn.b)(te=>{if(!Wr(te))return;const he=yt(`Redirecting to "${this.urlSerializer.serialize(te)}"`);throw he.url=te,he}),(0,ln.U)(te=>!0===te))}lineralizeSegments(v,_){let M=[],L=_.root;for(;;){if(M=M.concat(L.segments),0===L.numberOfChildren)return(0,Pe.of)(M);if(L.numberOfChildren>1||!L.children[Ct])return Ps(v.redirectTo);L=L.children[Ct]}}applyRedirectCommands(v,_,M){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),v,M)}applyRedirectCreatreUrlTree(v,_,M,L){const G=this.createSegmentGroup(v,_.root,M,L);return new Cr(G,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(v,_){const M={};return de(v,(L,G)=>{if("string"==typeof L&&L.startsWith(":")){const he=L.substring(1);M[G]=_[he]}else M[G]=L}),M}createSegmentGroup(v,_,M,L){const G=this.createSegments(v,_.segments,M,L);let te={};return de(_.children,(he,Ue)=>{te[Ue]=this.createSegmentGroup(v,he,M,L)}),new Tt(G,te)}createSegments(v,_,M,L){return _.map(G=>G.path.startsWith(":")?this.findPosParam(v,G,L):this.findOrReturn(G,M))}findPosParam(v,_,M){const L=M[_.path.substring(1)];if(!L)throw new Error(`Cannot redirect to '${v}'. Cannot find '${_.path}'.`);return L}findOrReturn(v,_){let M=0;for(const L of _){if(L.path===v.path)return _.splice(M),L;M++}return v}}function En(b){const v={};for(const M of Object.keys(b.children)){const G=En(b.children[M]);(G.segments.length>0||G.hasChildren())&&(v[M]=G)}return function(b){if(1===b.numberOfChildren&&b.children[Ct]){const v=b.children[Ct];return new Tt(b.segments.concat(v.segments),v.children)}return b}(new Tt(b.segments,v))}class pr{constructor(v){this.path=v,this.route=this.path[this.path.length-1]}}class ks{constructor(v,_){this.component=v,this.route=_}}function go(b,v,_){const M=b._root;return mo(M,v?v._root:null,_,[M.value])}function Es(b,v,_){const M=function(b){if(!b)return null;for(let v=b.parent;v;v=v.parent){const _=v.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(v);return(M?M.module.injector:_).get(b)}function mo(b,v,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const G=Zn(v);return b.children.forEach(te=>{(function(b,v,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const G=b.value,te=v?v.value:null,he=_?_.getContext(b.value.outlet):null;if(te&&G.routeConfig===te.routeConfig){const Ue=function(b,v,_){if("function"==typeof _)return _(b,v);switch(_){case"pathParamsChange":return!Hn(b.url,v.url);case"pathParamsOrQueryParamsChange":return!Hn(b.url,v.url)||!nt(b.queryParams,v.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bi(b,v)||!nt(b.queryParams,v.queryParams);default:return!bi(b,v)}}(te,G,G.routeConfig.runGuardsAndResolvers);Ue?L.canActivateChecks.push(new pr(M)):(G.data=te.data,G._resolvedData=te._resolvedData),mo(b,v,G.component?he?he.children:null:_,M,L),Ue&&he&&he.outlet&&he.outlet.isActivated&&L.canDeactivateChecks.push(new ks(he.outlet.component,te))}else te&&Gi(v,he,L),L.canActivateChecks.push(new pr(M)),mo(b,null,G.component?he?he.children:null:_,M,L)})(te,G[te.value.outlet],_,M.concat([te.value]),L),delete G[te.value.outlet]}),de(G,(te,he)=>Gi(te,_.getContext(he),L)),L}function Gi(b,v,_){const M=Zn(b),L=b.value;de(M,(G,te)=>{Gi(G,L.component?v?v.children.getContext(te):null:v,_)}),_.canDeactivateChecks.push(new ks(L.component&&v&&v.outlet&&v.outlet.isActivated?v.outlet.component:null,L))}class $l{}function Xo(b){return new ge.y(v=>v.error(b))}class Da{constructor(v,_,M,L,G,te){this.rootComponentType=v,this.config=_,this.urlTree=M,this.url=L,this.paramsInheritanceStrategy=G,this.relativeLinkResolution=te}recognize(){const v=on(this.urlTree.root,[],[],this.config.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,v,Ct);if(null===_)return null;const M=new fr([],Object.freeze({}),Object.freeze(en({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new bn(M,_),G=new Gr(this.url,L);return this.inheritParamsAndData(G._root),G}inheritParamsAndData(v){const _=v.value,M=Tr(_,this.paramsInheritanceStrategy);_.params=Object.freeze(M.params),_.data=Object.freeze(M.data),v.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(v,_,M){return 0===_.segments.length&&_.hasChildren()?this.processChildren(v,_):this.processSegment(v,_,_.segments,M)}processChildren(v,_){const M=[];for(const G of Object.keys(_.children)){const te=_.children[G],he=be(v,G),Ue=this.processSegmentGroup(he,te,G);if(null===Ue)return null;M.push(...Ue)}const L=Ls(M);return L.sort((v,_)=>v.value.outlet===Ct?-1:_.value.outlet===Ct?1:v.value.outlet.localeCompare(_.value.outlet)),L}processSegment(v,_,M,L){for(const G of v){const te=this.processSegmentAgainstRoute(G,_,M,L);if(null!==te)return te}return Hi(_,M,L)?[]:null}processSegmentAgainstRoute(v,_,M,L){if(v.redirectTo||!ls(v,_,M,L))return null;let G,te=[],he=[];if("**"===v.path){const rn=M.length>0?oe(M).parameters:{};G=new fr(M,rn,Object.freeze(en({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(v),B(v),v.component,v,ss(_),ta(_)+M.length,Vo(v))}else{const rn=ft(_,v,M);if(!rn.matched)return null;te=rn.consumedSegments,he=M.slice(rn.lastChild),G=new fr(te,rn.parameters,Object.freeze(en({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(v),B(v),v.component,v,ss(_),ta(_)+te.length,Vo(v))}const Ue=(b=v).children?b.children:b.loadChildren?b._loadedConfig.routes:[],{segmentGroup:vt,slicedSegments:Tn}=on(_,te,he,Ue.filter(rn=>void 0===rn.redirectTo),this.relativeLinkResolution);var b;if(0===Tn.length&&vt.hasChildren()){const rn=this.processChildren(Ue,vt);return null===rn?null:[new bn(G,rn)]}if(0===Ue.length&&0===Tn.length)return[new bn(G,[])];const Vt=B(v)===L,Ln=this.processSegment(Ue,vt,Tn,Vt?Ct:L);return null===Ln?null:[new bn(G,Ln)]}}function Cu(b){const v=b.value.routeConfig;return v&&""===v.path&&void 0===v.redirectTo}function Ls(b){const v=[],_=new Set;for(const M of b){if(!Cu(M)){v.push(M);continue}const L=v.find(G=>M.value.routeConfig===G.value.routeConfig);void 0!==L?(L.children.push(...M.children),_.add(L)):v.push(M)}for(const M of _){const L=Ls(M.children);v.push(new bn(M.value,L))}return v.filter(M=>!_.has(M))}function ss(b){let v=b;for(;v._sourceSegment;)v=v._sourceSegment;return v}function ta(b){let v=b,_=v._segmentIndexShift?v._segmentIndexShift:0;for(;v._sourceSegment;)v=v._sourceSegment,_+=v._segmentIndexShift?v._segmentIndexShift:0;return _-1}function Aa(b){return b.data||{}}function Vo(b){return b.resolve||{}}function yo(b){return(0,$n.w)(v=>{const _=b(v);return _?(0,Re.D)(_).pipe((0,ln.U)(()=>v)):(0,Pe.of)(v)})}class Ja extends class{shouldDetach(v){return!1}store(v,_){}shouldAttach(v){return!1}retrieve(v){return null}shouldReuseRoute(v,_){return v.routeConfig===_.routeConfig}}{}const Uo=new O.OlP("ROUTES");class ia{constructor(v,_,M,L){this.injector=v,this.compiler=_,this.onLoadStartListener=M,this.onLoadEndListener=L}load(v,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const L=this.loadModuleFactory(_.loadChildren).pipe((0,ln.U)(G=>{this.onLoadEndListener&&this.onLoadEndListener(_);const te=G.create(v);return new po(_n(te.injector.get(Uo,void 0,O.XFs.Self|O.XFs.Optional)).map(C),te)}),gt(G=>{throw _._loader$=void 0,G}));return _._loader$=new ot.c(L,()=>new Kt.xQ).pipe((0,ze.x)()),_._loader$}loadModuleFactory(v){return Ae(v()).pipe((0,Ve.zg)(_=>_ instanceof O.YKP?(0,Pe.of)(_):(0,Re.D)(this.compiler.compileModuleAsync(_))))}}class Ys{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,_){return v}}function sa(b){throw b}function Xa(b,v,_){return v.parse("/")}function Bo(b,v){return(0,Pe.of)(null)}const oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jn=(()=>{class b{constructor(_,M,L,G,te,he,Ue){this.rootComponentType=_,this.urlSerializer=M,this.rootContexts=L,this.location=G,this.config=Ue,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt.xQ,this.errorHandler=sa,this.malformedUriErrorHandler=Xa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bo,afterPreactivation:Bo},this.urlHandlingStrategy=new Ys,this.routeReuseStrategy=new Ja,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=te.get(O.h0i),this.console=te.get(O.c2e);const Vt=te.get(O.R0b);this.isNgZoneEnabled=Vt instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(Ue),this.currentUrlTree=new Cr(new Tt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ia(te,he,Ln=>this.triggerEvent(new Sn(Ln)),Ln=>this.triggerEvent(new bt(Ln))),this.routerState=or(this.currentUrlTree,this.rootComponentType),this.transitions=new $e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null==(_=this.location.getState())?void 0:_.\u0275routerPageId}setupNavigations(_){const M=this.events;return _.pipe((0,tt.h)(L=>0!==L.id),(0,ln.U)(L=>zs(en({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,$n.w)(L=>{let G=!1,te=!1;return(0,Pe.of)(L).pipe((0,fn.b)(he=>{this.currentNavigation={id:he.id,initialUrl:he.currentRawUrl,extractedUrl:he.extractedUrl,trigger:he.source,extras:he.extras,previousNavigation:this.lastSuccessfulNavigation?zs(en({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,$n.w)(he=>{const Ue=this.browserUrlTree.toString(),vt=!this.navigated||he.extractedUrl.toString()!==Ue||Ue!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||vt)&&this.urlHandlingStrategy.shouldProcessUrl(he.rawUrl))return Sa(he.source)&&(this.browserUrlTree=he.extractedUrl),(0,Pe.of)(he).pipe((0,$n.w)(Vt=>{const Ln=this.transitions.getValue();return M.next(new _r(Vt.id,this.serializeUrl(Vt.extractedUrl),Vt.source,Vt.restoredState)),Ln!==this.transitions.getValue()?Oe.E:Promise.resolve(Vt)}),function(b,v,_,M){return(0,$n.w)(L=>function(b,v,_,M,L){return new Za(b,v,_,M,L).apply()}(b,v,_,L.extractedUrl,M).pipe((0,ln.U)(G=>zs(en({},L),{urlAfterRedirects:G}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fn.b)(Vt=>{this.currentNavigation=zs(en({},this.currentNavigation),{finalUrl:Vt.urlAfterRedirects})}),function(b,v,_,M,L){return(0,Ve.zg)(G=>function(b,v,_,M,L="emptyOnly",G="legacy"){try{const te=new Da(b,v,_,M,L,G).recognize();return null===te?Xo(new $l):(0,Pe.of)(te)}catch(te){return Xo(te)}}(b,v,G.urlAfterRedirects,_(G.urlAfterRedirects),M,L).pipe((0,ln.U)(te=>zs(en({},G),{targetSnapshot:te}))))}(this.rootComponentType,this.config,Vt=>this.serializeUrl(Vt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fn.b)(Vt=>{if("eager"===this.urlUpdateStrategy){if(!Vt.extras.skipLocationChange){const rn=this.urlHandlingStrategy.merge(Vt.urlAfterRedirects,Vt.rawUrl);this.setBrowserUrl(rn,Vt)}this.browserUrlTree=Vt.urlAfterRedirects}const Ln=new Xr(Vt.id,this.serializeUrl(Vt.extractedUrl),this.serializeUrl(Vt.urlAfterRedirects),Vt.targetSnapshot);M.next(Ln)}));if(vt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ln,extractedUrl:rn,source:pi,restoredState:zi,extras:At}=he,qr=new _r(Ln,this.serializeUrl(rn),pi,zi);M.next(qr);const jo=or(rn,this.rootComponentType).snapshot;return(0,Pe.of)(zs(en({},he),{targetSnapshot:jo,urlAfterRedirects:rn,extras:zs(en({},At),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=he.rawUrl,he.resolve(null),Oe.E}),yo(he=>{const{targetSnapshot:Ue,id:vt,extractedUrl:Tn,rawUrl:Vt,extras:{skipLocationChange:Ln,replaceUrl:rn}}=he;return this.hooks.beforePreactivation(Ue,{navigationId:vt,appliedUrlTree:Tn,rawUrlTree:Vt,skipLocationChange:!!Ln,replaceUrl:!!rn})}),(0,fn.b)(he=>{const Ue=new ht(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot);this.triggerEvent(Ue)}),(0,ln.U)(he=>zs(en({},he),{guards:go(he.targetSnapshot,he.currentSnapshot,this.rootContexts)})),function(b,v){return(0,Ve.zg)(_=>{const{targetSnapshot:M,currentSnapshot:L,guards:{canActivateChecks:G,canDeactivateChecks:te}}=_;return 0===te.length&&0===G.length?(0,Pe.of)(zs(en({},_),{guardsResult:!0})):function(b,v,_,M){return(0,Re.D)(b).pipe((0,Ve.zg)(L=>function(b,v,_,M,L){const G=v&&v.routeConfig?v.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,Pe.of)(!0);const te=G.map(he=>{const Ue=Es(he,v,L);let vt;if(function(b){return b&&Zr(b.canDeactivate)}(Ue))vt=Ae(Ue.canDeactivate(b,v,_,M));else{if(!Zr(Ue))throw new Error("Invalid CanDeactivate guard");vt=Ae(Ue(b,v,_,M))}return vt.pipe((0,Xn.P)())});return(0,Pe.of)(te).pipe(si())}(L.component,L.route,_,v,M)),(0,Xn.P)(L=>!0!==L,!0))}(te,M,L,b).pipe((0,Ve.zg)(he=>he&&function(b){return"boolean"==typeof b}(he)?function(b,v,_,M){return(0,Re.D)(v).pipe(Ot(L=>(0,Ee.z)(function(b,v){return null!==b&&v&&v(new Et(b)),(0,Pe.of)(!0)}(L.route.parent,M),function(b,v){return null!==b&&v&&v(new wi(b)),(0,Pe.of)(!0)}(L.route,M),function(b,v,_){const M=v[v.length-1],G=v.slice(0,v.length-1).reverse().map(te=>function(b){const v=b.routeConfig?b.routeConfig.canActivateChild:null;return v&&0!==v.length?{node:b,guards:v}:null}(te)).filter(te=>null!==te).map(te=>je(()=>{const he=te.guards.map(Ue=>{const vt=Es(Ue,te.node,_);let Tn;if(function(b){return b&&Zr(b.canActivateChild)}(vt))Tn=Ae(vt.canActivateChild(M,b));else{if(!Zr(vt))throw new Error("Invalid CanActivateChild guard");Tn=Ae(vt(M,b))}return Tn.pipe((0,Xn.P)())});return(0,Pe.of)(he).pipe(si())}));return(0,Pe.of)(G).pipe(si())}(b,L.path,_),function(b,v,_){const M=v.routeConfig?v.routeConfig.canActivate:null;if(!M||0===M.length)return(0,Pe.of)(!0);const L=M.map(G=>je(()=>{const te=Es(G,v,_);let he;if(function(b){return b&&Zr(b.canActivate)}(te))he=Ae(te.canActivate(v,b));else{if(!Zr(te))throw new Error("Invalid CanActivate guard");he=Ae(te(v,b))}return he.pipe((0,Xn.P)())}));return(0,Pe.of)(L).pipe(si())}(b,L.route,_))),(0,Xn.P)(L=>!0!==L,!0))}(M,G,b,v):(0,Pe.of)(he)),(0,ln.U)(he=>zs(en({},_),{guardsResult:he})))})}(this.ngModule.injector,he=>this.triggerEvent(he)),(0,fn.b)(he=>{if(Wr(he.guardsResult)){const vt=yt(`Redirecting to "${this.serializeUrl(he.guardsResult)}"`);throw vt.url=he.guardsResult,vt}const Ue=new jr(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot,!!he.guardsResult);this.triggerEvent(Ue)}),(0,tt.h)(he=>!!he.guardsResult||(this.restoreHistory(he),this.cancelNavigationTransition(he,""),!1)),yo(he=>{if(he.guards.canActivateChecks.length)return(0,Pe.of)(he).pipe((0,fn.b)(Ue=>{const vt=new ii(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(vt)}),(0,$n.w)(Ue=>{let vt=!1;return(0,Pe.of)(Ue).pipe(function(b,v){return(0,Ve.zg)(_=>{const{targetSnapshot:M,guards:{canActivateChecks:L}}=_;if(!L.length)return(0,Pe.of)(_);let G=0;return(0,Re.D)(L).pipe(Ot(te=>function(b,v,_,M){return function(b,v,_,M){const L=Object.keys(b);if(0===L.length)return(0,Pe.of)({});const G={};return(0,Re.D)(L).pipe((0,Ve.zg)(te=>function(b,v,_,M){const L=Es(b,v,M);return Ae(L.resolve?L.resolve(v,_):L(v,_))}(b[te],v,_,M).pipe((0,fn.b)(he=>{G[te]=he}))),Qn(1),(0,Ve.zg)(()=>Object.keys(G).length===L.length?(0,Pe.of)(G):Oe.E))}(b._resolve,b,v,M).pipe((0,ln.U)(G=>(b._resolvedData=G,b.data=en(en({},b.data),Tr(b,_).resolve),null)))}(te.route,M,b,v)),(0,fn.b)(()=>G++),Qn(1),(0,Ve.zg)(te=>G===L.length?(0,Pe.of)(_):Oe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fn.b)({next:()=>vt=!0,complete:()=>{vt||(this.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"At least one route resolver didn't emit any value."))}}))}),(0,fn.b)(Ue=>{const vt=new Nr(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(vt)}))}),yo(he=>{const{targetSnapshot:Ue,id:vt,extractedUrl:Tn,rawUrl:Vt,extras:{skipLocationChange:Ln,replaceUrl:rn}}=he;return this.hooks.afterPreactivation(Ue,{navigationId:vt,appliedUrlTree:Tn,rawUrlTree:Vt,skipLocationChange:!!Ln,replaceUrl:!!rn})}),(0,ln.U)(he=>{const Ue=function(b,v,_){const M=Fn(b,v._root,_?_._root:void 0);return new Nn(M,v)}(this.routeReuseStrategy,he.targetSnapshot,he.currentRouterState);return zs(en({},he),{targetRouterState:Ue})}),(0,fn.b)(he=>{this.currentUrlTree=he.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(he.urlAfterRedirects,he.rawUrl),this.routerState=he.targetRouterState,"deferred"===this.urlUpdateStrategy&&(he.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,he),this.browserUrlTree=he.urlAfterRedirects)}),((b,v,_)=>(0,ln.U)(M=>(new ko(v,M.targetRouterState,M.currentRouterState,_).activate(b),M)))(this.rootContexts,this.routeReuseStrategy,he=>this.triggerEvent(he)),(0,fn.b)({next(){G=!0},complete(){G=!0}}),function(b){return v=>v.lift(new Yt(b))}(()=>{var he;G||te||this.cancelNavigationTransition(L,`Navigation ID ${L.id} is not equal to the current navigation id ${this.navigationId}`),(null==(he=this.currentNavigation)?void 0:he.id)===L.id&&(this.currentNavigation=null)}),gt(he=>{if(te=!0,function(b){return b&&b[Un]}(he)){const Ue=Wr(he.url);Ue||(this.navigated=!0,this.restoreHistory(L,!0));const vt=new Jr(L.id,this.serializeUrl(L.extractedUrl),he.message);M.next(vt),Ue?setTimeout(()=>{const Tn=this.urlHandlingStrategy.merge(he.url,this.rawUrlTree),Vt={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Sa(L.source)};this.scheduleNavigation(Tn,"imperative",null,Vt,{resolve:L.resolve,reject:L.reject,promise:L.promise})},0):L.resolve(!1)}else{this.restoreHistory(L,!0);const Ue=new Br(L.id,this.serializeUrl(L.extractedUrl),he);M.next(Ue);try{L.resolve(this.errorHandler(he))}catch(vt){L.reject(vt)}}return Oe.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(en(en({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const M="popstate"===_.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var he;const L={replaceUrl:!0},G=(null==(he=_.state)?void 0:he.navigationId)?_.state:null;if(G){const Ue=en({},G);delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(L.state=Ue)}const te=this.parseUrl(_.url);this.scheduleNavigation(te,M,G,L)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){ue(_),this.config=_.map(C),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,M={}){const{relativeTo:L,queryParams:G,fragment:te,queryParamsHandling:he,preserveFragment:Ue}=M,vt=L||this.routerState.root,Tn=Ue?this.currentUrlTree.fragment:te;let Vt=null;switch(he){case"merge":Vt=en(en({},this.currentUrlTree.queryParams),G);break;case"preserve":Vt=this.currentUrlTree.queryParams;break;default:Vt=G||null}return null!==Vt&&(Vt=this.removeEmptyProps(Vt)),function(b,v,_,M,L){if(0===_.length)return Ks(v.root,v.root,v,M,L);const G=function(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Xi(!0,0,b);let v=0,_=!1;const M=b.reduce((L,G,te)=>{if("object"==typeof G&&null!=G){if(G.outlets){const he={};return de(G.outlets,(Ue,vt)=>{he[vt]="string"==typeof Ue?Ue.split("/"):Ue}),[...L,{outlets:he}]}if(G.segmentPath)return[...L,G.segmentPath]}return"string"!=typeof G?[...L,G]:0===te?(G.split("/").forEach((he,Ue)=>{0==Ue&&"."===he||(0==Ue&&""===he?_=!0:".."===he?v++:""!=he&&L.push(he))}),L):[...L,G]},[]);return new Xi(_,v,M)}(_);if(G.toRoot())return Ks(v.root,new Tt([],{}),v,M,L);const te=function(b,v,_){if(b.isAbsolute)return new Vi(v.root,!0,0);if(-1===_.snapshot._lastPathIndex){const G=_.snapshot._urlSegment;return new Vi(G,G===v.root,0)}const M=Li(b.commands[0])?0:1;return function(b,v,_){let M=b,L=v,G=_;for(;G>L;){if(G-=L,M=M.parent,!M)throw new Error("Invalid number of '../'");L=M.segments.length}return new Vi(M,!1,L-G)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+M,b.numberOfDoubleDots)}(G,v,b),he=te.processChildren?ts(te.segmentGroup,te.index,G.commands):es(te.segmentGroup,te.index,G.commands);return Ks(te.segmentGroup,he,v,M,L)}(vt,this.currentUrlTree,_,Vt,null!=Tn?Tn:null)}navigateByUrl(_,M={skipLocationChange:!1}){const L=Wr(_)?_:this.parseUrl(_),G=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(G,"imperative",null,M)}navigate(_,M={skipLocationChange:!1}){return function(b){for(let v=0;v<b.length;v++){const _=b[v];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${v}`)}}(_),this.navigateByUrl(this.createUrlTree(_,M),M)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let M;try{M=this.urlSerializer.parse(_)}catch(L){M=this.malformedUriErrorHandler(L,this.urlSerializer,_)}return M}isActive(_,M){let L;if(L=!0===M?en({},oa):!1===M?en({},Qs):M,Wr(_))return dn(this.currentUrlTree,_,L);const G=this.parseUrl(_);return dn(this.currentUrlTree,G,L)}removeEmptyProps(_){return Object.keys(_).reduce((M,L)=>{const G=_[L];return null!=G&&(M[L]=G),M},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new Lt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,M,L,G,te){var qr,jo,Pn;if(this.disposed)return Promise.resolve(!1);const he=this.transitions.value,Ue=Sa(M)&&he&&!Sa(he.source),vt=he.rawUrl.toString()===_.toString(),Tn=he.id===(null==(qr=this.currentNavigation)?void 0:qr.id);if(Ue&&vt&&Tn)return Promise.resolve(!0);let Ln,rn,pi;te?(Ln=te.resolve,rn=te.reject,pi=te.promise):pi=new Promise((Ut,ul)=>{Ln=Ut,rn=ul});const zi=++this.navigationId;let At;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),At=L&&L.\u0275routerPageId?L.\u0275routerPageId:G.replaceUrl||G.skipLocationChange?null!=(jo=this.browserPageId)?jo:0:(null!=(Pn=this.browserPageId)?Pn:0)+1):At=0,this.setTransition({id:zi,targetPageId:At,source:M,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:G,resolve:Ln,reject:rn,promise:pi,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pi.catch(Ut=>Promise.reject(Ut))}setBrowserUrl(_,M){const L=this.urlSerializer.serialize(_),G=en(en({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(L)||M.extras.replaceUrl?this.location.replaceState(L,"",G):this.location.go(L,"",G)}restoreHistory(_,M=!1){var L,G;if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(L=this.currentNavigation)?void 0:L.finalUrl)||0===te?this.currentUrlTree===(null==(G=this.currentNavigation)?void 0:G.finalUrl)&&0===te&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(te)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,M){const L=new Jr(_.id,this.serializeUrl(_.extractedUrl),M);this.triggerEvent(L),_.resolve(!1)}generateNgRouterState(_,M){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:M}:{navigationId:_}}}return b.\u0275fac=function(_){O.$Z()},b.\u0275prov=O.Yz7({token:b,factory:b.\u0275fac}),b})();function Sa(b){return"imperative"!==b}class Wl{}class al{preload(v,_){return(0,Pe.of)(null)}}let Au=(()=>{class b{constructor(_,M,L,G){this.router=_,this.injector=L,this.preloadingStrategy=G,this.loader=new ia(L,M,Ue=>_.triggerEvent(new Sn(Ue)),Ue=>_.triggerEvent(new bt(Ue)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,tt.h)(_=>_ instanceof Lt),Ot(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(O.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,M){const L=[];for(const G of M)if(G.loadChildren&&!G.canLoad&&G._loadedConfig){const te=G._loadedConfig;L.push(this.processRoutes(te.module,te.routes))}else G.loadChildren&&!G.canLoad?L.push(this.preloadConfig(_,G)):G.children&&L.push(this.processRoutes(_,G.children));return(0,Re.D)(L).pipe((0,In.J)(),(0,ln.U)(G=>{}))}preloadConfig(_,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,Pe.of)(M._loadedConfig):this.loader.load(_.injector,M)).pipe((0,Ve.zg)(G=>(M._loadedConfig=G,this.processRoutes(G.module,G.routes)))))}}return b.\u0275fac=function(_){return new(_||b)(O.LFG(jn),O.LFG(O.Sil),O.LFG(O.zs3),O.LFG(Wl))},b.\u0275prov=O.Yz7({token:b,factory:b.\u0275fac}),b})(),Xs=(()=>{class b{constructor(_,M,L={}){this.router=_,this.viewportScroller=M,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof _r?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof Lt&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof pn&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,M){this.router.triggerEvent(new pn(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(_){O.$Z()},b.\u0275prov=O.Yz7({token:b,factory:b.\u0275fac}),b})();const ds=new O.OlP("ROUTER_CONFIGURATION"),Di=new O.OlP("ROUTER_FORROOT_GUARD"),xa=[w.Ye,{provide:ut,useClass:Gt},{provide:jn,useFactory:function(b,v,_,M,L,G,te={},he,Ue){const vt=new jn(null,b,v,_,M,L,_n(G));return he&&(vt.urlHandlingStrategy=he),Ue&&(vt.routeReuseStrategy=Ue),function(b,v){b.errorHandler&&(v.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(v.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(v.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(v.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(v.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(v.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(v.canceledNavigationResolution=b.canceledNavigationResolution)}(te,vt),te.enableTracing&&vt.events.subscribe(Tn=>{var Vt,Ln;null==(Vt=console.group)||Vt.call(console,`Router Event: ${Tn.constructor.name}`),console.log(Tn.toString()),console.log(Tn),null==(Ln=console.groupEnd)||Ln.call(console)}),vt},deps:[ut,N,w.Ye,O.zs3,O.Sil,Uo,ds,[class{},new O.FiY],[class{},new O.FiY]]},N,{provide:Hr,useFactory:function(b){return b.routerState.root},deps:[jn]},Au,al,class{preload(v,_){return _().pipe(gt(()=>(0,Pe.of)(null)))}},{provide:ds,useValue:{enableTracing:!1}}];function eo(){return new O.PXZ("Router",jn)}let Su=(()=>{class b{constructor(_,M){}static forRoot(_,M){return{ngModule:b,providers:[xa,hs(_),{provide:Di,useFactory:ws,deps:[[jn,new O.FiY,new O.tp0]]},{provide:ds,useValue:M||{}},{provide:w.S$,useFactory:fi,deps:[w.lw,[new O.tBr(w.mr),new O.FiY],ds]},{provide:Xs,useFactory:Ma,deps:[jn,w.EM,ds]},{provide:Wl,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:al},{provide:O.PXZ,multi:!0,useFactory:eo},[cr,{provide:O.ip1,multi:!0,useFactory:vo,deps:[cr]},{provide:_t,useFactory:to,deps:[cr]},{provide:O.tb,multi:!0,useExisting:_t}]]}}static forChild(_){return{ngModule:b,providers:[hs(_)]}}}return b.\u0275fac=function(_){return new(_||b)(O.LFG(Di,8),O.LFG(jn,8))},b.\u0275mod=O.oAB({type:b}),b.\u0275inj=O.cJS({}),b})();function Ma(b,v,_){return _.scrollOffset&&v.setOffset(_.scrollOffset),new Xs(b,v,_)}function fi(b,v,_={}){return _.useHash?new w.Do(b,v):new w.b0(b,v)}function ws(b){return"guarded"}function hs(b){return[{provide:O.deG,multi:!0,useValue:b},{provide:Uo,multi:!0,useValue:b}]}let cr=(()=>{class b{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Kt.xQ}appInitializer(){return this.injector.get(w.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const L=new Promise(he=>M=he),G=this.injector.get(jn),te=this.injector.get(ds);return"disabled"===te.initialNavigation?(G.setUpLocationChangeListener(),M(!0)):"enabled"===te.initialNavigation||"enabledBlocking"===te.initialNavigation?(G.hooks.afterPreactivation=()=>this.initNavigation?(0,Pe.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),G.initialNavigation()):M(!0),L})}bootstrapListener(_){const M=this.injector.get(ds),L=this.injector.get(Au),G=this.injector.get(Xs),te=this.injector.get(jn),he=this.injector.get(O.z2F);_===he.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&te.initialNavigation(),L.setUpPreloading(),G.init(),te.resetRootComponentType(he.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return b.\u0275fac=function(_){return new(_||b)(O.LFG(O.zs3))},b.\u0275prov=O.Yz7({token:b,factory:b.\u0275fac}),b})();function vo(b){return b.appInitializer.bind(b)}function to(b){return b.bootstrapListener.bind(b)}const _t=new O.OlP("Router Initializer")}},lt=>{lt(lt.s=9850)}]);